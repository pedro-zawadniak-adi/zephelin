(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const o of a.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(i){if(i.ep)return;i.ep=!0;const a=n(i);fetch(i.href,a)}})();var io,Ve,qp,Kr,ag,jp,Jp,Zp,lf,gu,mu,Kp,Wa={},Qp=[],sx=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,ao=Array.isArray;function Qn(t,e){for(var n in e)t[n]=e[n];return t}function cf(t){t&&t.parentNode&&t.parentNode.removeChild(t)}function Di(t,e,n){var r,i,a,o={};for(a in e)a=="key"?r=e[a]:a=="ref"?i=e[a]:o[a]=e[a];if(arguments.length>2&&(o.children=arguments.length>3?io.call(arguments,2):n),typeof t=="function"&&t.defaultProps!=null)for(a in t.defaultProps)o[a]===void 0&&(o[a]=t.defaultProps[a]);return La(t,o,r,i,null)}function La(t,e,n,r,i){var a={type:t,props:e,key:n,ref:r,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:i??++qp,__i:-1,__u:0};return i==null&&Ve.vnode!=null&&Ve.vnode(a),a}function ei(){return{current:null}}function At(t){return t.children}function sn(t,e){this.props=t,this.context=e}function Li(t,e){if(e==null)return t.__?Li(t.__,t.__i+1):null;for(var n;e<t.__k.length;e++)if((n=t.__k[e])!=null&&n.__e!=null)return n.__e;return typeof t.type=="function"?Li(t):null}function e0(t){var e,n;if((t=t.__)!=null&&t.__c!=null){for(t.__e=t.__c.base=null,e=0;e<t.__k.length;e++)if((n=t.__k[e])!=null&&n.__e!=null){t.__e=t.__c.base=n.__e;break}return e0(t)}}function pu(t){(!t.__d&&(t.__d=!0)&&Kr.push(t)&&!Os.__r++||ag!=Ve.debounceRendering)&&((ag=Ve.debounceRendering)||jp)(Os)}function Os(){for(var t,e,n,r,i,a,o,s=1;Kr.length;)Kr.length>s&&Kr.sort(Jp),t=Kr.shift(),s=Kr.length,t.__d&&(n=void 0,i=(r=(e=t).__v).__e,a=[],o=[],e.__P&&((n=Qn({},r)).__v=r.__v+1,Ve.vnode&&Ve.vnode(n),uf(e.__P,n,r,e.__n,e.__P.namespaceURI,32&r.__u?[i]:null,a,i??Li(r),!!(32&r.__u),o),n.__v=r.__v,n.__.__k[n.__i]=n,r0(a,n,o),n.__e!=i&&e0(n)));Os.__r=0}function t0(t,e,n,r,i,a,o,s,l,c,f){var d,p,x,R,O,A,I=r&&r.__k||Qp,S=e.length;for(l=lx(n,e,I,l,S),d=0;d<S;d++)(x=n.__k[d])!=null&&(p=x.__i==-1?Wa:I[x.__i]||Wa,x.__i=d,A=uf(t,x,p,i,a,o,s,l,c,f),R=x.__e,x.ref&&p.ref!=x.ref&&(p.ref&&ff(p.ref,null,x),f.push(x.ref,x.__c||R,x)),O==null&&R!=null&&(O=R),4&x.__u||p.__k===x.__k?l=n0(x,l,t):typeof x.type=="function"&&A!==void 0?l=A:R&&(l=R.nextSibling),x.__u&=-7);return n.__e=O,l}function lx(t,e,n,r,i){var a,o,s,l,c,f=n.length,d=f,p=0;for(t.__k=new Array(i),a=0;a<i;a++)(o=e[a])!=null&&typeof o!="boolean"&&typeof o!="function"?(l=a+p,(o=t.__k[a]=typeof o=="string"||typeof o=="number"||typeof o=="bigint"||o.constructor==String?La(null,o,null,null,null):ao(o)?La(At,{children:o},null,null,null):o.constructor==null&&o.__b>0?La(o.type,o.props,o.key,o.ref?o.ref:null,o.__v):o).__=t,o.__b=t.__b+1,s=null,(c=o.__i=cx(o,n,l,d))!=-1&&(d--,(s=n[c])&&(s.__u|=2)),s==null||s.__v==null?(c==-1&&(i>f?p--:i<f&&p++),typeof o.type!="function"&&(o.__u|=4)):c!=l&&(c==l-1?p--:c==l+1?p++:(c>l?p--:p++,o.__u|=4))):t.__k[a]=null;if(d)for(a=0;a<f;a++)(s=n[a])!=null&&(2&s.__u)==0&&(s.__e==r&&(r=Li(s)),a0(s,s));return r}function n0(t,e,n){var r,i;if(typeof t.type=="function"){for(r=t.__k,i=0;r&&i<r.length;i++)r[i]&&(r[i].__=t,e=n0(r[i],e,n));return e}t.__e!=e&&(e&&t.type&&!n.contains(e)&&(e=Li(t)),n.insertBefore(t.__e,e||null),e=t.__e);do e=e&&e.nextSibling;while(e!=null&&e.nodeType==8);return e}function xr(t,e){return e=e||[],t==null||typeof t=="boolean"||(ao(t)?t.some(function(n){xr(n,e)}):e.push(t)),e}function cx(t,e,n,r){var i,a,o=t.key,s=t.type,l=e[n];if(l===null&&t.key==null||l&&o==l.key&&s==l.type&&(2&l.__u)==0)return n;if(r>(l!=null&&(2&l.__u)==0?1:0))for(i=n-1,a=n+1;i>=0||a<e.length;){if(i>=0){if((l=e[i])&&(2&l.__u)==0&&o==l.key&&s==l.type)return i;i--}if(a<e.length){if((l=e[a])&&(2&l.__u)==0&&o==l.key&&s==l.type)return a;a++}}return-1}function og(t,e,n){e[0]=="-"?t.setProperty(e,n??""):t[e]=n==null?"":typeof n!="number"||sx.test(e)?n:n+"px"}function Do(t,e,n,r,i){var a,o;e:if(e=="style")if(typeof n=="string")t.style.cssText=n;else{if(typeof r=="string"&&(t.style.cssText=r=""),r)for(e in r)n&&e in n||og(t.style,e,"");if(n)for(e in n)r&&n[e]==r[e]||og(t.style,e,n[e])}else if(e[0]=="o"&&e[1]=="n")a=e!=(e=e.replace(Zp,"$1")),o=e.toLowerCase(),e=o in t||e=="onFocusOut"||e=="onFocusIn"?o.slice(2):e.slice(2),t.l||(t.l={}),t.l[e+a]=n,n?r?n.u=r.u:(n.u=lf,t.addEventListener(e,a?mu:gu,a)):t.removeEventListener(e,a?mu:gu,a);else{if(i=="http://www.w3.org/2000/svg")e=e.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(e!="width"&&e!="height"&&e!="href"&&e!="list"&&e!="form"&&e!="tabIndex"&&e!="download"&&e!="rowSpan"&&e!="colSpan"&&e!="role"&&e!="popover"&&e in t)try{t[e]=n??"";break e}catch{}typeof n=="function"||(n==null||n===!1&&e[4]!="-"?t.removeAttribute(e):t.setAttribute(e,e=="popover"&&n==1?"":n))}}function sg(t){return function(e){if(this.l){var n=this.l[e.type+t];if(e.t==null)e.t=lf++;else if(e.t<n.u)return;return n(Ve.event?Ve.event(e):e)}}}function uf(t,e,n,r,i,a,o,s,l,c){var f,d,p,x,R,O,A,I,S,D,N,k,W,Y,X,Z,ie,ne=e.type;if(e.constructor!=null)return null;128&n.__u&&(l=!!(32&n.__u),a=[s=e.__e=n.__e]),(f=Ve.__b)&&f(e);e:if(typeof ne=="function")try{if(I=e.props,S="prototype"in ne&&ne.prototype.render,D=(f=ne.contextType)&&r[f.__c],N=f?D?D.props.value:f.__:r,n.__c?A=(d=e.__c=n.__c).__=d.__E:(S?e.__c=d=new ne(I,N):(e.__c=d=new sn(I,N),d.constructor=ne,d.render=fx),D&&D.sub(d),d.props=I,d.state||(d.state={}),d.context=N,d.__n=r,p=d.__d=!0,d.__h=[],d._sb=[]),S&&d.__s==null&&(d.__s=d.state),S&&ne.getDerivedStateFromProps!=null&&(d.__s==d.state&&(d.__s=Qn({},d.__s)),Qn(d.__s,ne.getDerivedStateFromProps(I,d.__s))),x=d.props,R=d.state,d.__v=e,p)S&&ne.getDerivedStateFromProps==null&&d.componentWillMount!=null&&d.componentWillMount(),S&&d.componentDidMount!=null&&d.__h.push(d.componentDidMount);else{if(S&&ne.getDerivedStateFromProps==null&&I!==x&&d.componentWillReceiveProps!=null&&d.componentWillReceiveProps(I,N),!d.__e&&d.shouldComponentUpdate!=null&&d.shouldComponentUpdate(I,d.__s,N)===!1||e.__v==n.__v){for(e.__v!=n.__v&&(d.props=I,d.state=d.__s,d.__d=!1),e.__e=n.__e,e.__k=n.__k,e.__k.some(function(J){J&&(J.__=e)}),k=0;k<d._sb.length;k++)d.__h.push(d._sb[k]);d._sb=[],d.__h.length&&o.push(d);break e}d.componentWillUpdate!=null&&d.componentWillUpdate(I,d.__s,N),S&&d.componentDidUpdate!=null&&d.__h.push(function(){d.componentDidUpdate(x,R,O)})}if(d.context=N,d.props=I,d.__P=t,d.__e=!1,W=Ve.__r,Y=0,S){for(d.state=d.__s,d.__d=!1,W&&W(e),f=d.render(d.props,d.state,d.context),X=0;X<d._sb.length;X++)d.__h.push(d._sb[X]);d._sb=[]}else do d.__d=!1,W&&W(e),f=d.render(d.props,d.state,d.context),d.state=d.__s;while(d.__d&&++Y<25);d.state=d.__s,d.getChildContext!=null&&(r=Qn(Qn({},r),d.getChildContext())),S&&!p&&d.getSnapshotBeforeUpdate!=null&&(O=d.getSnapshotBeforeUpdate(x,R)),Z=f,f!=null&&f.type===At&&f.key==null&&(Z=i0(f.props.children)),s=t0(t,ao(Z)?Z:[Z],e,n,r,i,a,o,s,l,c),d.base=e.__e,e.__u&=-161,d.__h.length&&o.push(d),A&&(d.__E=d.__=null)}catch(J){if(e.__v=null,l||a!=null)if(J.then){for(e.__u|=l?160:128;s&&s.nodeType==8&&s.nextSibling;)s=s.nextSibling;a[a.indexOf(s)]=null,e.__e=s}else for(ie=a.length;ie--;)cf(a[ie]);else e.__e=n.__e,e.__k=n.__k;Ve.__e(J,e,n)}else a==null&&e.__v==n.__v?(e.__k=n.__k,e.__e=n.__e):s=e.__e=ux(n.__e,e,n,r,i,a,o,l,c);return(f=Ve.diffed)&&f(e),128&e.__u?void 0:s}function r0(t,e,n){for(var r=0;r<n.length;r++)ff(n[r],n[++r],n[++r]);Ve.__c&&Ve.__c(e,t),t.some(function(i){try{t=i.__h,i.__h=[],t.some(function(a){a.call(i)})}catch(a){Ve.__e(a,i.__v)}})}function i0(t){return typeof t!="object"||t==null||t.__b&&t.__b>0?t:ao(t)?t.map(i0):Qn({},t)}function ux(t,e,n,r,i,a,o,s,l){var c,f,d,p,x,R,O,A=n.props,I=e.props,S=e.type;if(S=="svg"?i="http://www.w3.org/2000/svg":S=="math"?i="http://www.w3.org/1998/Math/MathML":i||(i="http://www.w3.org/1999/xhtml"),a!=null){for(c=0;c<a.length;c++)if((x=a[c])&&"setAttribute"in x==!!S&&(S?x.localName==S:x.nodeType==3)){t=x,a[c]=null;break}}if(t==null){if(S==null)return document.createTextNode(I);t=document.createElementNS(i,S,I.is&&I),s&&(Ve.__m&&Ve.__m(e,a),s=!1),a=null}if(S==null)A===I||s&&t.data==I||(t.data=I);else{if(a=a&&io.call(t.childNodes),A=n.props||Wa,!s&&a!=null)for(A={},c=0;c<t.attributes.length;c++)A[(x=t.attributes[c]).name]=x.value;for(c in A)if(x=A[c],c!="children"){if(c=="dangerouslySetInnerHTML")d=x;else if(!(c in I)){if(c=="value"&&"defaultValue"in I||c=="checked"&&"defaultChecked"in I)continue;Do(t,c,null,x,i)}}for(c in I)x=I[c],c=="children"?p=x:c=="dangerouslySetInnerHTML"?f=x:c=="value"?R=x:c=="checked"?O=x:s&&typeof x!="function"||A[c]===x||Do(t,c,x,A[c],i);if(f)s||d&&(f.__html==d.__html||f.__html==t.innerHTML)||(t.innerHTML=f.__html),e.__k=[];else if(d&&(t.innerHTML=""),t0(e.type=="template"?t.content:t,ao(p)?p:[p],e,n,r,S=="foreignObject"?"http://www.w3.org/1999/xhtml":i,a,o,a?a[0]:n.__k&&Li(n,0),s,l),a!=null)for(c=a.length;c--;)cf(a[c]);s||(c="value",S=="progress"&&R==null?t.removeAttribute("value"):R!=null&&(R!==t[c]||S=="progress"&&!R||S=="option"&&R!=A[c])&&Do(t,c,R,A[c],i),c="checked",O!=null&&O!=t[c]&&Do(t,c,O,A[c],i))}return t}function ff(t,e,n){try{if(typeof t=="function"){var r=typeof t.__u=="function";r&&t.__u(),r&&e==null||(t.__u=t(e))}else t.current=e}catch(i){Ve.__e(i,n)}}function a0(t,e,n){var r,i;if(Ve.unmount&&Ve.unmount(t),(r=t.ref)&&(r.current&&r.current!=t.__e||ff(r,null,e)),(r=t.__c)!=null){if(r.componentWillUnmount)try{r.componentWillUnmount()}catch(a){Ve.__e(a,e)}r.base=r.__P=null}if(r=t.__k)for(i=0;i<r.length;i++)r[i]&&a0(r[i],e,n||typeof t.type!="function");n||cf(t.__e),t.__c=t.__=t.__e=void 0}function fx(t,e,n){return this.constructor(t,n)}function $a(t,e,n){var r,i,a,o;e==document&&(e=document.documentElement),Ve.__&&Ve.__(t,e),i=(r=!1)?null:e.__k,a=[],o=[],uf(e,t=e.__k=Di(At,null,[t]),i||Wa,Wa,e.namespaceURI,i?null:e.firstChild?io.call(e.childNodes):null,a,i?i.__e:e.firstChild,r,o),r0(a,t,o)}function hx(t,e,n){var r,i,a,o,s=Qn({},t.props);for(a in t.type&&t.type.defaultProps&&(o=t.type.defaultProps),e)a=="key"?r=e[a]:a=="ref"?i=e[a]:s[a]=e[a]===void 0&&o!=null?o[a]:e[a];return arguments.length>2&&(s.children=arguments.length>3?io.call(arguments,2):n),La(t.type,s,r||t.key,i||t.ref,null)}function xl(t){function e(n){var r,i;return this.getChildContext||(r=new Set,(i={})[e.__c]=this,this.getChildContext=function(){return i},this.componentWillUnmount=function(){r=null},this.shouldComponentUpdate=function(a){this.props.value!=a.value&&r.forEach(function(o){o.__e=!0,pu(o)})},this.sub=function(a){r.add(a);var o=a.componentWillUnmount;a.componentWillUnmount=function(){r&&r.delete(a),o&&o.call(a)}}),n.children}return e.__c="__cC"+Kp++,e.__=t,e.Provider=e.__l=(e.Consumer=function(n,r){return n.children(r)}).contextType=e,e}io=Qp.slice,Ve={__e:function(t,e,n,r){for(var i,a,o;e=e.__;)if((i=e.__c)&&!i.__)try{if((a=i.constructor)&&a.getDerivedStateFromError!=null&&(i.setState(a.getDerivedStateFromError(t)),o=i.__d),i.componentDidCatch!=null&&(i.componentDidCatch(t,r||{}),o=i.__d),o)return i.__E=i}catch(s){t=s}throw t}},qp=0,sn.prototype.setState=function(t,e){var n;n=this.__s!=null&&this.__s!=this.state?this.__s:this.__s=Qn({},this.state),typeof t=="function"&&(t=t(Qn({},n),this.props)),t&&Qn(n,t),t!=null&&this.__v&&(e&&this._sb.push(e),pu(this))},sn.prototype.forceUpdate=function(t){this.__v&&(this.__e=!0,t&&this.__h.push(t),pu(this))},sn.prototype.render=At,Kr=[],jp=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,Jp=function(t,e){return t.__v.__b-e.__v.__b},Os.__r=0,Zp=/(PointerCapture)$|Capture$/i,lf=0,gu=sg(!1),mu=sg(!0),Kp=0;var dx=0;function C(t,e,n,r,i,a){e||(e={});var o,s,l=e;if("ref"in l)for(s in l={},e)s=="ref"?o=e[s]:l[s]=e[s];var c={type:t,props:l,key:n,ref:o,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:--dx,__i:-1,__u:0,__source:i,__self:a};if(typeof t=="function"&&(o=t.defaultProps))for(s in o)l[s]===void 0&&(l[s]=o[s]);return Ve.vnode&&Ve.vnode(c),c}const gx="_app_g8mbn_1",mx="_title_g8mbn_1",px="_panels_g8mbn_1",vx="_category_g8mbn_155",bx="_dropdown_g8mbn_172",_x="_left_g8mbn_183",yx="_right_g8mbn_187",wx="_clicked_g8mbn_208",_t={app:gx,"top-bar":"_top-bar_g8mbn_1","title-button":"_title-button_g8mbn_1",title:mx,panels:px,category:vx,dropdown:bx,left:_x,right:yx,clicked:wx,"panel-button":"_panel-button_g8mbn_212","layout-container":"_layout-container_g8mbn_1","tiling-layout":"_tiling-layout_g8mbn_1","on-drag":"_on-drag_g8mbn_225","block-pointer-events":"_block-pointer-events_g8mbn_238","speedscope-container":"_speedscope-container_g8mbn_1","welcome-message-code":"_welcome-message-code_g8mbn_246"};var ai,dt,Pc,lg,Ii=0,o0=[],St=Ve,cg=St.__b,ug=St.__r,fg=St.diffed,hg=St.__c,dg=St.unmount,gg=St.__;function oo(t,e){St.__h&&St.__h(dt,t,Ii||e),Ii=0;var n=dt.__H||(dt.__H={__:[],__h:[]});return t>=n.__.length&&n.__.push({}),n.__[t]}function Bt(t){return Ii=1,xx(s0,t)}function xx(t,e,n){var r=oo(ai++,2);if(r.t=t,!r.__c&&(r.__=[n?n(e):s0(void 0,e),function(s){var l=r.__N?r.__N[0]:r.__[0],c=r.t(l,s);l!==c&&(r.__N=[c,r.__[1]],r.__c.setState({}))}],r.__c=dt,!dt.__f)){var i=function(s,l,c){if(!r.__c.__H)return!0;var f=r.__c.__H.__.filter(function(p){return!!p.__c});if(f.every(function(p){return!p.__N}))return!a||a.call(this,s,l,c);var d=r.__c.props!==s;return f.forEach(function(p){if(p.__N){var x=p.__[0];p.__=p.__N,p.__N=void 0,x!==p.__[0]&&(d=!0)}}),a&&a.call(this,s,l,c)||d};dt.__f=!0;var a=dt.shouldComponentUpdate,o=dt.componentWillUpdate;dt.componentWillUpdate=function(s,l,c){if(this.__e){var f=a;a=void 0,i(s,l,c),a=f}o&&o.call(this,s,l,c)},dt.shouldComponentUpdate=i}return r.__N||r.__}function Dt(t,e){var n=oo(ai++,3);!St.__s&&hf(n.__H,e)&&(n.__=t,n.u=e,dt.__H.__h.push(n))}function Tn(t,e){var n=oo(ai++,4);!St.__s&&hf(n.__H,e)&&(n.__=t,n.u=e,dt.__h.push(n))}function Te(t){return Ii=5,kt(function(){return{current:t}},[])}function Tx(t,e,n){Ii=6,Tn(function(){if(typeof t=="function"){var r=t(e());return function(){t(null),r&&typeof r=="function"&&r()}}if(t)return t.current=e(),function(){return t.current=null}},n==null?n:n.concat(t))}function kt(t,e){var n=oo(ai++,7);return hf(n.__H,e)&&(n.__=t(),n.__H=e,n.__h=t),n.__}function Qe(t,e){return Ii=8,kt(function(){return t},e)}function Ji(t){var e=dt.context[t.__c],n=oo(ai++,9);return n.c=t,e?(n.__==null&&(n.__=!0,e.sub(dt)),e.props.value):t.__}function Sx(){for(var t;t=o0.shift();)if(t.__P&&t.__H)try{t.__H.__h.forEach(ps),t.__H.__h.forEach(vu),t.__H.__h=[]}catch(e){t.__H.__h=[],St.__e(e,t.__v)}}St.__b=function(t){dt=null,cg&&cg(t)},St.__=function(t,e){t&&e.__k&&e.__k.__m&&(t.__m=e.__k.__m),gg&&gg(t,e)},St.__r=function(t){ug&&ug(t),ai=0;var e=(dt=t.__c).__H;e&&(Pc===dt?(e.__h=[],dt.__h=[],e.__.forEach(function(n){n.__N&&(n.__=n.__N),n.u=n.__N=void 0})):(e.__h.forEach(ps),e.__h.forEach(vu),e.__h=[],ai=0)),Pc=dt},St.diffed=function(t){fg&&fg(t);var e=t.__c;e&&e.__H&&(e.__H.__h.length&&(o0.push(e)!==1&&lg===St.requestAnimationFrame||((lg=St.requestAnimationFrame)||Ex)(Sx)),e.__H.__.forEach(function(n){n.u&&(n.__H=n.u),n.u=void 0})),Pc=dt=null},St.__c=function(t,e){e.some(function(n){try{n.__h.forEach(ps),n.__h=n.__h.filter(function(r){return!r.__||vu(r)})}catch(r){e.some(function(i){i.__h&&(i.__h=[])}),e=[],St.__e(r,n.__v)}}),hg&&hg(t,e)},St.unmount=function(t){dg&&dg(t);var e,n=t.__c;n&&n.__H&&(n.__H.__.forEach(function(r){try{ps(r)}catch(i){e=i}}),n.__H=void 0,e&&St.__e(e,n.__v))};var mg=typeof requestAnimationFrame=="function";function Ex(t){var e,n=function(){clearTimeout(r),mg&&cancelAnimationFrame(e),setTimeout(t)},r=setTimeout(n,35);mg&&(e=requestAnimationFrame(n))}function ps(t){var e=dt,n=t.__c;typeof n=="function"&&(t.__c=void 0,n()),dt=e}function vu(t){var e=dt;t.__c=t.__(),dt=e}function hf(t,e){return!t||t.length!==e.length||e.some(function(n,r){return n!==t[r]})}function s0(t,e){return typeof e=="function"?e(t):e}class wt{constructor(e,n){this.state=e,this.observers=[],this.set=this.set.bind(this),this.get=this.get.bind(this)}set(e){this.state!==e&&(this.state=e,this.observers.forEach(n=>n()))}get(){return this.state}subscribe(e){this.observers.push(e)}unsubscribe(e){const n=this.observers.indexOf(e);n!==-1&&this.observers.splice(n,1)}}function Ze(t){const[e,n]=Bt(t.get());return Tn(()=>{n(t.get());function r(){n(t.get())}return t.subscribe(r),()=>{t.unsubscribe(r)}},[t]),e}var Ai=(t=>(t[t.SYSTEM=0]="SYSTEM",t[t.DARK=1]="DARK",t[t.LIGHT=2]="LIGHT",t))(Ai||{});const vs="speedscope-color-scheme";function Cx(){const t=window.localStorage&&window.localStorage[vs];return t==="DARK"?1:t==="LIGHT"?2:0}function Ax(){return matchMedia("(prefers-color-scheme: dark)")}function Rx(t){if(Ax().matches)switch(t){case 0:return 2;case 2:return 1;case 1:return 0}else switch(t){case 0:return 1;case 1:return 2;case 2:return 0}}class Mx extends wt{constructor(){super(...arguments),this.cycleToNextColorScheme=()=>{this.set(Rx(this.get()))}}}const za=new Mx(Cx(),"colorScheme");za.subscribe(()=>{const t=za.get();switch(t){case 1:{window.localStorage[vs]="DARK";break}case 2:{window.localStorage[vs]="LIGHT";break}case 0:{delete window.localStorage[vs];break}default:return t}return t});function Ln(t,e,n){return t<e?e:t>n?n:t}const Ht=class Ht{constructor(e,n){this.x=e,this.y=n}withX(e){return new Ht(e,this.y)}withY(e){return new Ht(this.x,e)}plus(e){return new Ht(this.x+e.x,this.y+e.y)}minus(e){return new Ht(this.x-e.x,this.y-e.y)}times(e){return new Ht(this.x*e,this.y*e)}timesPointwise(e){return new Ht(this.x*e.x,this.y*e.y)}dividedByPointwise(e){return new Ht(this.x/e.x,this.y/e.y)}dot(e){return this.x*e.x+this.y*e.y}equals(e){return this.x===e.x&&this.y===e.y}approxEquals(e,n=1e-9){return Math.abs(this.x-e.x)<n&&Math.abs(this.y-e.y)<n}length2(){return this.dot(this)}length(){return Math.sqrt(this.length2())}abs(){return new Ht(Math.abs(this.x),Math.abs(this.y))}static min(e,n){return new Ht(Math.min(e.x,n.x),Math.min(e.y,n.y))}static max(e,n){return new Ht(Math.max(e.x,n.x),Math.max(e.y,n.y))}static clamp(e,n,r){return new Ht(Ln(e.x,n.x,r.x),Ln(e.y,n.y,r.y))}flatten(){return[this.x,this.y]}};Ht.zero=new Ht(0,0),Ht.unit=new Ht(1,1);let Q=Ht;class ke{constructor(e=1,n=0,r=0,i=0,a=1,o=0){this.m00=e,this.m01=n,this.m02=r,this.m10=i,this.m11=a,this.m12=o}withScale(e){let{m00:n,m01:r,m02:i,m10:a,m11:o,m12:s}=this;return n=e.x,o=e.y,new ke(n,r,i,a,o,s)}static withScale(e){return new ke().withScale(e)}scaledBy(e){return ke.withScale(e).times(this)}getScale(){return new Q(this.m00,this.m11)}withTranslation(e){let{m00:n,m01:r,m02:i,m10:a,m11:o,m12:s}=this;return i=e.x,s=e.y,new ke(n,r,i,a,o,s)}static withTranslation(e){return new ke().withTranslation(e)}getTranslation(){return new Q(this.m02,this.m12)}translatedBy(e){return ke.withTranslation(e).times(this)}static betweenRects(e,n){return ke.withTranslation(e.origin.times(-1)).scaledBy(new Q(n.size.x/e.size.x,n.size.y/e.size.y)).translatedBy(n.origin)}times(e){const n=this.m00*e.m00+this.m01*e.m10,r=this.m00*e.m01+this.m01*e.m11,i=this.m00*e.m02+this.m01*e.m12+this.m02,a=this.m10*e.m00+this.m11*e.m10,o=this.m10*e.m01+this.m11*e.m11,s=this.m10*e.m02+this.m11*e.m12+this.m12;return new ke(n,r,i,a,o,s)}equals(e){return this.m00==e.m00&&this.m01==e.m01&&this.m02==e.m02&&this.m10==e.m10&&this.m11==e.m11&&this.m12==e.m12}approxEquals(e,n=1e-9){return Math.abs(this.m00-e.m00)<n&&Math.abs(this.m01-e.m01)<n&&Math.abs(this.m02-e.m02)<n&&Math.abs(this.m10-e.m10)<n&&Math.abs(this.m11-e.m11)<n&&Math.abs(this.m12-e.m12)<n}timesScalar(e){const{m00:n,m01:r,m02:i,m10:a,m11:o,m12:s}=this;return new ke(e*n,e*r,e*i,e*a,e*o,e*s)}det(){const{m00:e,m01:n,m02:r,m10:i,m11:a,m12:o}=this,s=0,l=0,c=1;return e*(a*c-o*l)-n*(i*c-o*s)+r*(i*l-a*s)}adj(){const{m00:e,m01:n,m02:r,m10:i,m11:a,m12:o}=this,s=0,l=0,c=1,f=+(a*c-o*l),d=-(n*c-r*l),p=+(n*o-r*a),x=-(i*c-o*s),R=+(e*c-r*s),O=-(e*o-r*i);return new ke(f,d,p,x,R,O)}inverted(){const e=this.det();return e===0?null:this.adj().timesScalar(1/e)}transformVector(e){return new Q(e.x*this.m00+e.y*this.m01,e.x*this.m10+e.y*this.m11)}inverseTransformVector(e){const n=this.inverted();return n?n.transformVector(e):null}transformPosition(e){return new Q(e.x*this.m00+e.y*this.m01+this.m02,e.x*this.m10+e.y*this.m11+this.m12)}inverseTransformPosition(e){const n=this.inverted();return n?n.transformPosition(e):null}transformRect(e){const n=this.transformVector(e.size),r=this.transformPosition(e.origin);return n.x<0&&n.y<0?new Ne(r.plus(n),n.abs()):n.x<0?new Ne(r.withX(r.x+n.x),n.abs()):n.y<0?new Ne(r.withY(r.y+n.y),n.abs()):new Ne(r,n)}inverseTransformRect(e){const n=this.inverted();return n?n.transformRect(e):null}flatten(){return[this.m00,this.m10,0,this.m01,this.m11,0,this.m02,this.m12,1]}}var pn;let Ne=(pn=class{constructor(e,n){this.origin=e,this.size=n}isEmpty(){return this.width()==0||this.height()==0}width(){return this.size.x}height(){return this.size.y}left(){return this.origin.x}right(){return this.left()+this.width()}top(){return this.origin.y}bottom(){return this.top()+this.height()}topLeft(){return this.origin}topRight(){return this.origin.plus(new Q(this.width(),0))}bottomRight(){return this.origin.plus(this.size)}bottomLeft(){return this.origin.plus(new Q(0,this.height()))}withOrigin(e){return new pn(e,this.size)}withSize(e){return new pn(this.origin,e)}closestPointTo(e){return new Q(Ln(e.x,this.left(),this.right()),Ln(e.y,this.top(),this.bottom()))}distanceFrom(e){return e.minus(this.closestPointTo(e)).length()}contains(e){return this.distanceFrom(e)===0}hasIntersectionWith(e){const n=Math.max(this.top(),e.top());if(Math.max(n,Math.min(this.bottom(),e.bottom()))-n===0)return!1;const i=Math.max(this.left(),e.left());return Math.max(i,Math.min(this.right(),e.right()))-i!==0}intersectWith(e){const n=Q.max(this.topLeft(),e.topLeft()),r=Q.max(n,Q.min(this.bottomRight(),e.bottomRight()));return new pn(n,r.minus(n))}equals(e){return this.origin.equals(e.origin)&&this.size.equals(e.size)}approxEquals(e){return this.origin.approxEquals(e.origin)&&this.size.approxEquals(e.size)}area(){return this.size.x*this.size.y}},pn.empty=new pn(Q.zero,Q.zero),pn.unit=new pn(Q.zero,Q.unit),pn.NDC=new pn(new Q(-1,-1),new Q(2,2)),pn),ar=class bs{constructor(e=0,n=0,r=0,i=1){this.r=e,this.g=n,this.b=r,this.a=i}static fromLumaChromaHue(e,n,r){const i=r/60,a=n*(1-Math.abs(i%2-1)),[o,s,l]=i<1?[n,a,0]:i<2?[a,n,0]:i<3?[0,n,a]:i<4?[0,a,n]:i<5?[a,0,n]:[n,0,a],c=e-(.3*o+.59*s+.11*l);return new bs(Ln(o+c,0,1),Ln(s+c,0,1),Ln(l+c,0,1),1)}static fromCSSHex(e){if(e.length!==7||e[0]!=="#")throw new Error(`Invalid color input ${e}`);const n=parseInt(e.substr(1,2),16)/255,r=parseInt(e.substr(3,2),16)/255,i=parseInt(e.substr(5,2),16)/255;if(n<0||n>1||r<0||r>1||i<0||i>1)throw new Error(`Invalid color input ${e}`);return new bs(n,r,i)}withAlpha(e){return new bs(this.r,this.g,this.b,e)}toCSS(){return`rgba(${(255*this.r).toFixed()}, ${(255*this.g).toFixed()}, ${(255*this.b).toFixed()}, ${this.a.toFixed(2)})`}};function Ir(t){return t[t.length-1]||null}function _s(t,e){function n(r,i){const a=e(r),o=e(i);return a<o?-1:a>o?1:0}t.sort(n)}function lk(t,e,n){return t.has(e)||t.set(e,n(e)),t.get(e)}function ck(t,e,n){return t.has(e)?t.get(e):n(e)}function uk(t,e){if(!t.has(e))throw new Error(`Expected key ${e}`);return t.get(e)}class l0{constructor(){this.map=new Map}getOrInsert(e){const n=e.key,r=this.map.get(n);return r||(this.map.set(n,e),e)}forEach(e){this.map.forEach(e)}[Symbol.iterator](){return this.map.values()}}function*fk(t,e){for(let n of t)yield e(n)}function hk(t,e){for(let n of t)e(n)}function Nx(t,e){return new Array(Math.max(e-t.length,0)+1).join("0")+t}function Pi(t){let e=`${t.toFixed(0)}%`;return t===100?e="100%":t>99?e=">99%":t<.01?e="<0.01%":t<1?e=`${t.toFixed(2)}%`:t<10&&(e=`${t.toFixed(1)}%`),e}function Ox(t){return t-Math.floor(t)}function c0(t){return 2*Math.abs(Ox(t)-.5)-1}function Dx(t,e,n,r,i=1){for(;;){if(e-t<=i)return[t,e];const a=(e+t)/2;n(a)<r?t=a:e=a}}function Lx(t,e){if(t.length===0)return-1;let n=0,r=t.length-1;for(;r!==n;){const i=Math.floor((n+r)/2);e(t[i])?r=i:n=i+1}return e(t[r])?r:-1}function Tl(...t){}function df(t,e){for(let n in t)if(t[n]!==e[n])return!1;for(let n in e)if(t[n]!==e[n])return!1;return!0}function or(t){let e=null;return n=>{let r;return e==null?(r=t(n),e={args:n,result:r},r):(df(e.args,n)||(e.args=n,e.result=t(n)),e.result)}}function Sl(t){let e=null;return n=>{let r;return e==null?(r=t(n),e={args:n,result:r},r):(e.args===n||(e.args=n,e.result=t(n)),e.result)}}function Ix(t){let e=null;return()=>(e==null&&(e={result:t()}),e.result)}const Px=Ix(()=>{const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",e=new Map;for(let n=0;n<t.length;n++)e.set(t.charAt(n),n);return e.set("=",-1),e});function dk(t){const e=Px();if(t.length%4!==0)throw new Error(`Invalid length for base64 encoded string. Expected length % 4 = 0, got length = ${t.length}`);const n=t.length/4;let r;t.length>=4&&t.charAt(t.length-1)==="="?t.charAt(t.length-2)==="="?r=n*3-2:r=n*3-1:r=n*3;const i=new Uint8Array(r);let a=0;for(let o=0;o<n;o++){const s=t.charAt(o*4+0),l=t.charAt(o*4+1),c=t.charAt(o*4+2),f=t.charAt(o*4+3),d=e.get(s),p=e.get(l),x=e.get(c),R=e.get(f);if(d==null||p==null||x==null||R==null)throw new Error(`Invalid quartet at indices ${o*4} .. ${o*4+3}: ${t.substring(o*4,o*4+3)}`);i[a++]=d<<2|p>>4,c!=="="&&(i[a++]=(p&15)<<4|x>>2),f!=="="&&(i[a++]=(x&7)<<6|R)}if(a!==r)throw new Error(`Expected to decode ${r} bytes, but only decoded ${a})`);return i}const u0=(t,e)=>{const n=t.x*1e3,r=Math.round(e.transformPosition(new Q(n,0)).x);return{configSpacePos:n,physicalSpacePos:r}},f0=.2,h0=.1,d0=.2,g0=.1,kx=t=>{const e=c0(30*t),n=360*(.9*t),r=f0+h0*e,i=d0-g0*e;return ar.fromLumaChromaHue(i,r,n)},Bx=`
  vec3 colorForBucket(float t) {
    float x = triangle(30.0 * t);
    float H = 360.0 * (0.9 * t);
    float C = ${f0.toFixed(1)} + ${h0.toFixed(1)} * x;
    float L = ${d0.toFixed(1)} - ${g0.toFixed(1)} * x;
    return hcl2rgb(H, C, L);
  }
`,Ds={fgPrimaryColor:"#D0D0D0",fgSecondaryColor:"#666666",bgPrimaryColor:"#060606",bgSecondaryColor:"#0C0C0C",altFgPrimaryColor:"#D0D0D0",altFgSecondaryColor:"#666666",altBgPrimaryColor:"#000000",altBgSecondaryColor:"#0C0C0C",selectionPrimaryColor:"#00769B",selectionSecondaryColor:"#004E75",weightColor:"#0F8A42",searchMatchTextColor:"#0C0C0C",searchMatchPrimaryColor:"#A66F1C",searchMatchSecondaryColor:"#D6AE24",colorForBucket:kx,colorForBucketGLSL:Bx},m0=.25,p0=.2,v0=.8,b0=.15,Fx=t=>{const e=c0(30*t),n=360*(.9*t),r=m0+p0*e,i=v0-b0*e;return ar.fromLumaChromaHue(i,r,n)},Vx=`
  vec3 colorForBucket(float t) {
    float x = triangle(30.0 * t);
    float H = 360.0 * (0.9 * t);
    float C = ${m0.toFixed(1)} + ${p0.toFixed(1)} * x;
    float L = ${v0.toFixed(1)} - ${b0.toFixed(1)} * x;
    return hcl2rgb(H, C, L);
  }
`,Ha={fgPrimaryColor:"#000000",fgSecondaryColor:"#BDBDBD",bgPrimaryColor:"#FFFFFF",bgSecondaryColor:"#F6F6F6",altFgPrimaryColor:"#FFFFFF",altFgSecondaryColor:"#BDBDBD",altBgPrimaryColor:"#000000",altBgSecondaryColor:"#222222",selectionPrimaryColor:"#2F80ED",selectionSecondaryColor:"#8EB7ED",weightColor:"#6FCF97",searchMatchTextColor:"#000000",searchMatchPrimaryColor:"#FFAC02",searchMatchSecondaryColor:"#FEDC62",colorForBucket:Fx,colorForBucketGLSL:Vx};var gt=(t=>(t[t.CHRONO_FLAME_CHART=0]="CHRONO_FLAME_CHART",t[t.LEFT_HEAVY_FLAME_GRAPH=1]="LEFT_HEAVY_FLAME_GRAPH",t[t.SANDWICH_VIEW=2]="SANDWICH_VIEW",t))(gt||{});function Wx(t){switch(t){case"time-ordered":return gt.CHRONO_FLAME_CHART;case"left-heavy":return gt.LEFT_HEAVY_FLAME_GRAPH;case"sandwich":return gt.SANDWICH_VIEW;default:return null}}function $x(t=window.location.hash){try{if(!t.startsWith("#"))return{};const e=t.substr(1).split("&"),n={};for(const r of e){let[i,a]=r.split("=");if(a=decodeURIComponent(a),i==="profileURL")n.profileURL=a;else if(i==="title")n.title=a;else if(i==="localProfilePath")n.localProfilePath=a;else if(i==="view"){const o=Wx(a);o!==null&&(n.viewMode=o)}}return n}catch{return{}}}var oi=(t=>(t.LEFT_HEAVY="LEFT_HEAVY",t.CHRONO="CHRONO",t.SANDWICH_INVERTED_CALLERS="SANDWICH_INVERTED_CALLERS",t.SANDWICH_CALLEES="SANDWICH_CALLEES",t))(oi||{});let Lo={hover:null,selectedNode:null,configSpaceViewportRect:Ne.empty,logicalSpaceViewportSize:Q.zero};class zx extends wt{constructor(){super(...arguments),this.setProfileGroup=e=>{this.set({name:e.name,indexToView:e.indexToView,profiles:e.profiles.map(n=>({profile:n,chronoViewState:Lo,leftHeavyViewState:Lo,sandwichViewState:{callerCallee:null}}))})},this.setProfileIndexToView=e=>{this.state!=null&&(e=Ln(e,0,this.state.profiles.length-1),this.set({...this.state,indexToView:e}))},this.setSelectedFrame=e=>{this.state==null||this.getActiveProfile()==null||(Bs.set(e),this.updateActiveSandwichViewState(r=>e==null?{callerCallee:null}:{callerCallee:{invertedCallerFlamegraph:Lo,calleeFlamegraph:Lo,selectedFrame:e}}))}}set(e){const n=this.state;n!=null&&e!=null&&df(n,e)||super.set(e)}getActiveProfile(){var e;return this.state==null?null:this.state.profiles[(e=this.state)==null?void 0:e.indexToView]||null}updateActiveProfileState(e){if(this.state==null)return;const{indexToView:n,profiles:r}=this.state;this.set({...this.state,profiles:r.map((i,a)=>a!=n?i:e(i))})}updateActiveSandwichViewState(e){this.updateActiveProfileState(n=>({...n,sandwichViewState:e(n.sandwichViewState)}))}updateFlamechartState(e,n){switch(e){case"CHRONO":{this.updateActiveProfileState(r=>({...r,chronoViewState:n(r.chronoViewState)}));break}case"LEFT_HEAVY":{this.updateActiveProfileState(r=>({...r,leftHeavyViewState:n(r.leftHeavyViewState)}));break}case"SANDWICH_CALLEES":{this.updateActiveSandwichViewState(r=>({...r,callerCallee:r.callerCallee==null?null:{...r.callerCallee,calleeFlamegraph:n(r.callerCallee.calleeFlamegraph)}}));break}case"SANDWICH_INVERTED_CALLERS":{this.updateActiveSandwichViewState(r=>({...r,callerCallee:r.callerCallee==null?null:{...r.callerCallee,invertedCallerFlamegraph:n(r.callerCallee.invertedCallerFlamegraph)}}));break}}}setFlamechartHoveredNode(e,n){ys.set((n==null?void 0:n.node)??null),this.updateFlamechartState(e,r=>({...r,hover:n}))}setSelectedNode(e,n){Bs.set(n),this.updateFlamechartState(e,r=>({...r,selectedNode:n}))}setConfigSpaceViewportRect(e,n){this.updateFlamechartState(e,r=>({...r,configSpaceViewportRect:n}))}setLogicalSpaceViewportSize(e,n){this.updateFlamechartState(e,r=>({...r,logicalSpaceViewportSize:n}))}clearHoverNode(){this.setFlamechartHoveredNode("CHRONO",null),this.setFlamechartHoveredNode("LEFT_HEAVY",null),this.setFlamechartHoveredNode("SANDWICH_CALLEES",null),this.setFlamechartHoveredNode("SANDWICH_INVERTED_CALLERS",null)}}const Ua=new wt(!1,"flattenRecursion"),Ls=new wt(!1,"searchIsActive"),Is=new wt("","searchQueryAtom"),Pr=new wt(gt.CHRONO_FLAME_CHART,"viewMode"),yt=new zx(null,"profileGroup");Pr.subscribe(()=>{yt.clearHoverNode()});const _0=$x(),Hx=new wt(_0,"hashParams"),Ps=new wt(null,"glCanvas"),pg=new wt(!1,"dragActive"),vg=window.location.protocol,bu=vg==="http:"||vg==="https:",Ux=bu&&_0.profileURL!=null,ki=new wt(Ux,"loading"),bg=new wt(!1,"error"),In=new wt(null,"metadata"),_u=new wt({},"welcomeMessage"),Ia=new wt(!1,"metadataOnlyProfile"),gf=new wt({},"toolbarConfig"),ks=new wt(null,"appRef"),Zn=new wt(null,"timestampHovered"),ys=new wt(null,"hovered"),Bs=new wt(null,"selected");var yn=(t=>(t[t.SYMBOL_NAME=0]="SYMBOL_NAME",t[t.SELF=1]="SELF",t[t.TOTAL=2]="TOTAL",t))(yn||{}),Jn=(t=>(t[t.ASCENDING=0]="ASCENDING",t[t.DESCENDING=1]="DESCENDING",t))(Jn||{});const yu=new wt({field:1,direction:1},"tableSortMethod"),y0=xl(Ha);function ut(){return Ji(y0)}function sr(t){return Sl(t)}function _g(){return matchMedia("(prefers-color-scheme: dark)")}function Yx(t,e){switch(t){case Ai.SYSTEM:return e?Ds:Ha;case Ai.DARK:return Ds;case Ai.LIGHT:return Ha}}function Xx(t){const[e,n]=Bt(()=>_g().matches),r=Qe(s=>{n(s.matches)},[n]);Dt(()=>{const s=_g();return s.addEventListener("change",r),()=>{s.removeEventListener("change",r)}},[r]);const i=Ze(za);let a=Yx(i,e);return Ze(Ia)&&(a=Object.assign({},a),a.colorForBucket=()=>new ar(0,0,0,0),a.colorForBucketGLSL="vec3 colorForBucket(float t) {return vec3(0, 0, 0);}"),C(y0.Provider,{value:a,children:t.children})}function Gx(t,e){for(var n in e)t[n]=e[n];return t}function wu(t,e){for(var n in t)if(n!=="__source"&&!(n in e))return!0;for(var r in e)if(r!=="__source"&&t[r]!==e[r])return!0;return!1}function yg(t,e){this.props=t,this.context=e}function xt(t,e){function n(i){var a=this.props.ref,o=a==i.ref;return!o&&a&&(a.call?a(null):a.current=null),e?!e(this.props,i)||!o:wu(this.props,i)}function r(i){return this.shouldComponentUpdate=n,Di(t,i)}return r.displayName="Memo("+(t.displayName||t.name)+")",r.prototype.isReactComponent=!0,r.__f=!0,r}(yg.prototype=new sn).isPureReactComponent=!0,yg.prototype.shouldComponentUpdate=function(t,e){return wu(this.props,t)||wu(this.state,e)};var wg=Ve.__b;Ve.__b=function(t){t.type&&t.type.__f&&t.ref&&(t.props.ref=t.ref,t.ref=null),wg&&wg(t)};var xg=function(t,e){return t==null?null:xr(xr(t).map(e))},qx={map:xg,forEach:xg,count:function(t){return t?xr(t).length:0},only:function(t){var e=xr(t);if(e.length!==1)throw"Children.only";return e[0]},toArray:xr},jx=Ve.__e;Ve.__e=function(t,e,n,r){if(t.then){for(var i,a=e;a=a.__;)if((i=a.__c)&&i.__c)return e.__e==null&&(e.__e=n.__e,e.__k=n.__k),i.__c(t,e)}jx(t,e,n,r)};var Tg=Ve.unmount;function w0(t,e,n){return t&&(t.__c&&t.__c.__H&&(t.__c.__H.__.forEach(function(r){typeof r.__c=="function"&&r.__c()}),t.__c.__H=null),(t=Gx({},t)).__c!=null&&(t.__c.__P===n&&(t.__c.__P=e),t.__c.__e=!0,t.__c=null),t.__k=t.__k&&t.__k.map(function(r){return w0(r,e,n)})),t}function x0(t,e,n){return t&&n&&(t.__v=null,t.__k=t.__k&&t.__k.map(function(r){return x0(r,e,n)}),t.__c&&t.__c.__P===e&&(t.__e&&n.appendChild(t.__e),t.__c.__e=!0,t.__c.__P=n)),t}function kc(){this.__u=0,this.o=null,this.__b=null}function T0(t){var e=t.__.__c;return e&&e.__a&&e.__a(t)}function Io(){this.i=null,this.l=null}Ve.unmount=function(t){var e=t.__c;e&&e.__R&&e.__R(),e&&32&t.__u&&(t.type=null),Tg&&Tg(t)},(kc.prototype=new sn).__c=function(t,e){var n=e.__c,r=this;r.o==null&&(r.o=[]),r.o.push(n);var i=T0(r.__v),a=!1,o=function(){a||(a=!0,n.__R=null,i?i(s):s())};n.__R=o;var s=function(){if(!--r.__u){if(r.state.__a){var l=r.state.__a;r.__v.__k[0]=x0(l,l.__c.__P,l.__c.__O)}var c;for(r.setState({__a:r.__b=null});c=r.o.pop();)c.forceUpdate()}};r.__u++||32&e.__u||r.setState({__a:r.__b=r.__v.__k[0]}),t.then(o,o)},kc.prototype.componentWillUnmount=function(){this.o=[]},kc.prototype.render=function(t,e){if(this.__b){if(this.__v.__k){var n=document.createElement("div"),r=this.__v.__k[0].__c;this.__v.__k[0]=w0(this.__b,n,r.__O=r.__P)}this.__b=null}var i=e.__a&&Di(At,null,t.fallback);return i&&(i.__u&=-33),[Di(At,null,e.__a?null:t.children),i]};var Sg=function(t,e,n){if(++n[1]===n[0]&&t.l.delete(e),t.props.revealOrder&&(t.props.revealOrder[0]!=="t"||!t.l.size))for(n=t.i;n;){for(;n.length>3;)n.pop()();if(n[1]<n[0])break;t.i=n=n[2]}};function Jx(t){return this.getChildContext=function(){return t.context},t.children}function Zx(t){var e=this,n=t.h;if(e.componentWillUnmount=function(){$a(null,e.v),e.v=null,e.h=null},e.h&&e.h!==n&&e.componentWillUnmount(),!e.v){for(var r=e.__v;r!==null&&!r.__m&&r.__!==null;)r=r.__;e.h=n,e.v={nodeType:1,parentNode:n,childNodes:[],__k:{__m:r.__m},contains:function(){return!0},insertBefore:function(i,a){this.childNodes.push(i),e.h.insertBefore(i,a)},removeChild:function(i){this.childNodes.splice(this.childNodes.indexOf(i)>>>1,1),e.h.removeChild(i)}}}$a(Di(Jx,{context:e.context},t.__v),e.v)}function Fs(t,e){var n=Di(Zx,{__v:t,h:e});return n.containerInfo=e,n}(Io.prototype=new sn).__a=function(t){var e=this,n=T0(e.__v),r=e.l.get(t);return r[0]++,function(i){var a=function(){e.props.revealOrder?(r.push(i),Sg(e,t,r)):i()};n?n(a):a()}},Io.prototype.render=function(t){this.i=null,this.l=new Map;var e=xr(t.children);t.revealOrder&&t.revealOrder[0]==="b"&&e.reverse();for(var n=e.length;n--;)this.l.set(e[n],this.i=[1,0,this.i]);return t.children},Io.prototype.componentDidUpdate=Io.prototype.componentDidMount=function(){var t=this;this.l.forEach(function(e,n){Sg(t,n,e)})};var S0=typeof Symbol<"u"&&Symbol.for&&Symbol.for("react.element")||60103,Kx=/^(?:accent|alignment|arabic|baseline|cap|clip(?!PathU)|color|dominant|fill|flood|font|glyph(?!R)|horiz|image(!S)|letter|lighting|marker(?!H|W|U)|overline|paint|pointer|shape|stop|strikethrough|stroke|text(?!L)|transform|underline|unicode|units|v|vector|vert|word|writing|x(?!C))[A-Z]/,Qx=/^on(Ani|Tra|Tou|BeforeInp|Compo)/,eT=/[A-Z0-9]/g,tT=typeof document<"u",nT=function(t){return(typeof Symbol<"u"&&typeof Symbol()=="symbol"?/fil|che|rad/:/fil|che|ra/).test(t)};function rT(t,e,n){return e.__k==null&&(e.textContent=""),$a(t,e),typeof n=="function"&&n(),t?t.__c:null}sn.prototype.isReactComponent={},["componentWillMount","componentWillReceiveProps","componentWillUpdate"].forEach(function(t){Object.defineProperty(sn.prototype,t,{configurable:!0,get:function(){return this["UNSAFE_"+t]},set:function(e){Object.defineProperty(this,t,{configurable:!0,writable:!0,value:e})}})});var Eg=Ve.event;function iT(){}function aT(){return this.cancelBubble}function oT(){return this.defaultPrevented}Ve.event=function(t){return Eg&&(t=Eg(t)),t.persist=iT,t.isPropagationStopped=aT,t.isDefaultPrevented=oT,t.nativeEvent=t};var sT={enumerable:!1,configurable:!0,get:function(){return this.class}},Cg=Ve.vnode;Ve.vnode=function(t){typeof t.type=="string"&&function(e){var n=e.props,r=e.type,i={},a=r.indexOf("-")===-1;for(var o in n){var s=n[o];if(!(o==="value"&&"defaultValue"in n&&s==null||tT&&o==="children"&&r==="noscript"||o==="class"||o==="className")){var l=o.toLowerCase();o==="defaultValue"&&"value"in n&&n.value==null?o="value":o==="download"&&s===!0?s="":l==="translate"&&s==="no"?s=!1:l[0]==="o"&&l[1]==="n"?l==="ondoubleclick"?o="ondblclick":l!=="onchange"||r!=="input"&&r!=="textarea"||nT(n.type)?l==="onfocus"?o="onfocusin":l==="onblur"?o="onfocusout":Qx.test(o)&&(o=l):l=o="oninput":a&&Kx.test(o)?o=o.replace(eT,"-$&").toLowerCase():s===null&&(s=void 0),l==="oninput"&&i[o=l]&&(o="oninputCapture"),i[o]=s}}r=="select"&&i.multiple&&Array.isArray(i.value)&&(i.value=xr(n.children).forEach(function(c){c.props.selected=i.value.indexOf(c.props.value)!=-1})),r=="select"&&i.defaultValue!=null&&(i.value=xr(n.children).forEach(function(c){c.props.selected=i.multiple?i.defaultValue.indexOf(c.props.value)!=-1:i.defaultValue==c.props.value})),n.class&&!n.className?(i.class=n.class,Object.defineProperty(i,"className",sT)):(n.className&&!n.class||n.class&&n.className)&&(i.class=i.className=n.className),e.props=i}(t),t.$$typeof=S0,Cg&&Cg(t)};var Ag=Ve.__r;Ve.__r=function(t){Ag&&Ag(t),t.__c};var Rg=Ve.diffed;Ve.diffed=function(t){Rg&&Rg(t);var e=t.props,n=t.__e;n!=null&&t.type==="textarea"&&"value"in e&&e.value!==n.value&&(n.value=e.value==null?"":e.value)};function lT(t){return!!t&&t.$$typeof===S0}function cT(t){return lT(t)?hx.apply(null,arguments):t}function uT(t){return!!t.__k&&($a(null,t),!0)}var E0={version:"18.3.1",Children:qx};function C0({color:t="#9E9EA4",up:e}){return C("svg",{style:e?{transformBox:"fill-box",transforOrigin:"center",transform:"rotate(180deg)"}:{},width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:C("path",{d:"M4.00006 6L8.00006 10L12.0001 6",stroke:t,"stroke-linecap":"round","stroke-linejoin":"round"})})}const fT="_icon_p6maq_7",A0={icon:fT};let xu;function hT(){return xu}const dT=xt(({component:t,tilingRef:e})=>{const n=Ze(t.available),r=Ze(t.instances),i=o=>{e!=null&&e.current&&e.current.addNode(t)},a=r>=t.maxInstances;return C("button",{className:_t["panel-button"],style:n?{}:{display:"none"},disabled:a,onClick:i,children:C("div",{onDragStart:()=>xu=t.title,onDragEnd:()=>xu=void 0,draggable:!a,children:t.title})})});function Po(t,e,n){return(e=function(r){var i=function(a,o){if(typeof a!="object"||!a)return a;var s=a[Symbol.toPrimitive];if(s!==void 0){var l=s.call(a,o);if(typeof l!="object")return l;throw new TypeError("@@toPrimitive must return a primitive value.")}return(o==="string"?String:Number)(a)}(r,"string");return typeof i=="symbol"?i:i+""}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Mg(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}var gT=["children","onClickAway","focusEvent","mouseEvent","touchEvent"],Bc={click:"onClick",focusin:"onFocus",focusout:"onBlur",mousedown:"onMouseDown",mouseup:"onMouseUp",touchstart:"onTouchStart",touchend:"onTouchEnd"},mT=parseInt(E0.version.split(".")[0],10),R0=function(t){var e=t.children,n=t.onClickAway,r=t.focusEvent,i=r===void 0?"focusin":r,a=t.mouseEvent,o=a===void 0?"click":a,s=t.touchEvent,l=s===void 0?"touchend":s,c=function(k,W){if(k==null)return{};var Y,X,Z=function(ne,J){if(ne==null)return{};var K={};for(var $ in ne)if({}.hasOwnProperty.call(ne,$)){if(J.includes($))continue;K[$]=ne[$]}return K}(k,W);if(Object.getOwnPropertySymbols){var ie=Object.getOwnPropertySymbols(k);for(X=0;X<ie.length;X++)Y=ie[X],W.includes(Y)||{}.propertyIsEnumerable.call(k,Y)&&(Z[Y]=k[Y])}return Z}(t,gT),f=Te(null),d=Te(null),p=Te(!1);Dt(function(){return setTimeout(function(){p.current=!0},0),function(){p.current=!1}},[]);var x,R=function(k){return function(W){d.current=W.target;var Y=e==null?void 0:e.props[k];Y&&Y(W)}},O=null;mT>=19?O=((x=e.props)===null||x===void 0?void 0:x.ref)||null:"ref"in e&&(O=e.ref);var A,I=(A=[f,O],function(k){A.forEach(function(W){typeof W=="function"?W(k):W!=null&&(W.current=k)})});Dt(function(){var k,W,Y=(k=(W=f.current)===null||W===void 0?void 0:W.ownerDocument)!==null&&k!==void 0?k:document,X=function(Z){p.current&&(f.current&&f.current.contains(Z.target)||d.current===Z.target||!Y.contains(Z.target)||n(Z))};return Y.addEventListener(o,X),Y.addEventListener(l,X),Y.addEventListener(i,X),function(){Y.removeEventListener(o,X),Y.removeEventListener(l,X),Y.removeEventListener(i,X)}},[i,o,n,l]);var S=Bc[o],D=Bc[l],N=Bc[i];return E0.Children.only(cT(e,function(k){for(var W=1;W<arguments.length;W++){var Y=arguments[W]!=null?arguments[W]:{};W%2?Mg(Object(Y),!0).forEach(function(X){Po(k,X,Y[X])}):Object.getOwnPropertyDescriptors?Object.defineProperties(k,Object.getOwnPropertyDescriptors(Y)):Mg(Object(Y)).forEach(function(X){Object.defineProperty(k,X,Object.getOwnPropertyDescriptor(Y,X))})}return k}(Po(Po(Po({ref:I},N,R(N)),S,R(S)),D,R(D)),c)))};R0.displayName="ClickAwayListener";const Ng=xt(({name:t,left:e,right:n,children:r,onClickAwayCallback:i})=>{const a=Te(null),o=Te(null),s=()=>{var c;(c=a.current)==null||c.classList.remove(_t.clicked),i&&i()};Dt(()=>{var c;for(const f of((c=o.current)==null?void 0:c.childNodes)??[])f instanceof HTMLButtonElement&&f.addEventListener("click",s)});const l=[_t.dropdown];return e&&l.push(_t.left),n&&l.push(_t.right),C(R0,{onClickAway:s,children:C("div",{ref:a,className:_t.category,children:[C("button",{onClick:()=>{var c;return(c=a.current)==null?void 0:c.classList.add(_t.clicked)},children:t}),C("div",{ref:o,className:l.join(" "),children:r})]})})});function El({children:t}){return C("div",{className:A0.icon,children:t})}function pT({size:t="14",color:e="#9F9FA3"}){return C(El,{children:C("svg",{width:t,height:t,viewBox:"0 0 14 14",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:C("path",{d:"M6.99999 1.75V8.75M6.99999 8.75L4.66666 6.41667M6.99999 8.75L9.33332 6.41667M4.66666 2.91667H2.33332C2.0239 2.91667 1.72716 3.03958 1.50837 3.25838C1.28957 3.47717 1.16666 3.77391 1.16666 4.08333V9.91667C1.16666 10.2261 1.28957 10.5228 1.50837 10.7416C1.72716 10.9604 2.0239 11.0833 2.33332 11.0833H11.6667C11.9761 11.0833 12.2728 10.9604 12.4916 10.7416C12.7104 10.5228 12.8333 10.2261 12.8333 9.91667V4.08333C12.8333 3.77391 12.7104 3.47717 12.4916 3.25838C12.2728 3.03958 11.9761 2.91667 11.6667 2.91667H9.33332",stroke:e,"stroke-width":"0.875","stroke-linecap":"round","stroke-linejoin":"round"})})})}function vT({size:t="14",color:e="#9F9FA3"}){return C(El,{children:C("svg",{width:t,height:t,viewBox:"0 0 14 14",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:C("path",{d:"M2.33333 6.99999L2.33333 11.6667C2.33333 11.9761 2.45624 12.2728 2.67504 12.4916C2.89383 12.7104 3.19058 12.8333 3.49999 12.8333L10.5 12.8333C10.8094 12.8333 11.1062 12.7104 11.325 12.4916C11.5437 12.2728 11.6667 11.9761 11.6667 11.6667V6.99999M9.33333 3.49999L6.99999 1.16666M6.99999 1.16666L4.66666 3.49999M6.99999 1.16666L6.99999 8.74999",stroke:e,"stroke-linecap":"round","stroke-linejoin":"round"})})})}class bT{constructor(e,n,r,i,a=1,o,s){this.title=e,this.component=n,this.available=r,this.instances=i,this.maxInstances=a,this.additionalProps=o,this.dataProvider=s,this.data=void 0}incrInstances(){this.instances.set(this.instances.get()+1)}decrInstances(){this.instances.set(this.instances.get()-1)}calculateData(){this.dataProvider&&(this.data=this.dataProvider()??void 0,this.available.set(!!this.data))}createJSONNode(){return{type:"tab",name:this.title,component:this.title,config:this.data,...this.additionalProps}}}const Vs={},Zi="enable-overflow",Wr=(t,e,n={})=>{var a,o,s,l;if(e in Vs)return;n.additionalProps??(n.additionalProps={}),(a=n.additionalProps).minWidth??(a.minWidth=100),(o=n.additionalProps).minHeight??(o.minHeight=100),(s=n.additionalProps).enableClose??(s.enableClose=!0),(l=n.additionalProps).enableRename??(l.enableRename=!1);const r=n.dataProvider===void 0,i=new bT(e,t,new wt(r,`${e}_available`),new wt(0,`${e}_instances`),n.maxInstances??1,n.additionalProps,n.dataProvider);return ki.subscribe(()=>{ki.get()||i.calculateData()}),Vs[e]=i,i};function ko(t){return Vs[t]}function Tu(){return Object.values(Vs)}function _T({color:t="#9E9EA4"}){return C(El,{children:C("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[C("g",{"clip-path":"url(#clip0_32_7)",children:C("path",{d:"M5.33337 8.00001L10.6667 8.00001M8.00004 5.33334L8.00004 10.6667M14.6667 8.00001C14.6667 11.6819 11.6819 14.6667 8.00004 14.6667C4.31814 14.6667 1.33337 11.6819 1.33337 8.00001C1.33337 4.31811 4.31814 1.33334 8.00004 1.33334C11.6819 1.33334 14.6667 4.31811 14.6667 8.00001Z",stroke:t,"stroke-linecap":"round","stroke-linejoin":"round"})}),C("defs",{children:C("clipPath",{id:"clip0_32_7",children:C("rect",{width:"16",height:"16",fill:"white"})})})]})})}function yT(){return C("svg",{width:"22",height:"22",viewBox:"0 0 22 22",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[C("g",{"clip-path":"url(#clip0_137_4210)",children:[C("path",{d:"M7.78693 17.103C8.89059 18.6608 9.50373 19.0923 9.50828 19.0969C9.50828 19.0969 10.9526 19.2513 12.1062 18.9424C13.0146 18.7017 13.5414 17.5345 13.7276 17.053C12.5831 17.212 11.375 17.2983 10.1441 17.3028C9.3266 17.3028 8.53633 17.2347 7.78693 17.103Z",fill:"url(#paint0_linear_137_4210)"}),C("path",{d:"M20.5263 9.92687L21.5482 7.9103C21.7526 7.50154 21.4437 7.02465 20.985 7.0519L18.9366 7.16544C18.6232 7.18361 18.328 7.30624 18.0918 7.51062L17.8738 7.70138C18.9412 8.42353 19.8404 9.18201 20.5263 9.92233V9.92687Z",fill:"url(#paint1_linear_137_4210)"}),C("path",{d:"M19.3362 15.4907C18.3779 15.9539 17.2016 16.3536 15.8845 16.6579L16.216 17.0985C16.4159 17.3619 16.6929 17.5526 17.0108 17.6344L19.0955 18.1976C19.5588 18.3202 19.9812 17.8978 19.8586 17.4346L19.3362 15.4907Z",fill:"url(#paint2_linear_137_4210)"}),C("path",{d:"M21.8698 12.5796C21.8562 12.5614 21.8426 12.5478 21.8244 12.5296C21.6927 12.3934 21.4929 12.2435 21.2385 12.0845C20.7253 11.7711 19.9713 11.4169 19.0357 11.0444C17.16 10.3041 14.5302 9.48659 11.6008 8.77806C8.66676 8.07408 5.93713 7.75615 3.90239 7.80611C2.88503 7.83336 2.04025 7.95145 1.4271 8.16038C1.08647 8.27846 0.809415 8.42834 0.618659 8.61002C1.1228 7.00221 2.50805 5.88492 4.40654 5.34899C6.5094 4.75401 9.22995 4.87664 12.0459 5.83951C14.8709 6.81146 17.4188 8.08771 19.2129 9.37304C20.1121 10.018 20.8161 10.6584 21.2748 11.267C21.6291 11.7348 21.8335 12.1753 21.8698 12.5705V12.5796ZM21.1613 12.2162C20.6617 11.9119 19.9168 11.5622 18.9812 11.1898C17.1145 10.4495 14.4939 9.63647 11.5644 8.92794L11.2919 8.86436C8.47146 8.20579 5.85992 7.91058 3.90693 7.96054C2.89865 7.98779 2.0675 8.10587 1.47706 8.31026C0.900251 8.5101 0.57324 8.7826 0.496029 9.10962V9.14141C0.427902 9.48205 0.641368 9.86356 1.13188 10.2632C1.61786 10.6584 2.35817 11.0535 3.29379 11.4214C5.11052 12.139 7.66756 12.7567 10.5425 13.1064L10.8196 13.1382C13.8126 13.4788 16.5514 13.6106 18.5588 13.5561C19.5626 13.5288 20.3847 13.4561 20.9569 13.338C21.2431 13.279 21.4656 13.2109 21.62 13.1337C21.7654 13.061 21.829 12.9929 21.8471 12.9293C21.8471 12.9247 21.8471 12.9202 21.8471 12.9157C21.8562 12.8521 21.8244 12.7567 21.7018 12.6295C21.5837 12.5069 21.3975 12.3661 21.1477 12.2117L21.1613 12.2162ZM4.36566 5.20819C6.50486 4.60413 9.2572 4.7313 12.0958 5.70325C14.9345 6.67974 17.4915 7.96508 19.3037 9.2595C20.2075 9.90898 20.9251 10.563 21.3975 11.1852C21.5246 11.3533 21.6337 11.5168 21.7245 11.6803C20.7798 9.44571 16.9874 6.61616 12.3366 4.89481C7.84469 3.24613 3.44821 4.18174 1.46798 6.87504C2.18559 6.10747 3.18024 5.54883 4.36566 5.21274V5.20819ZM2.94407 14.0557C4.75171 15.341 7.38597 16.1631 10.3609 16.2266C13.3494 16.2811 16.1426 15.9496 18.2318 15.3501C19.2764 15.0503 20.1439 14.687 20.7662 14.2691C21.2521 13.9467 21.5837 13.6015 21.7517 13.2427C21.7336 13.2518 21.7109 13.2654 21.6927 13.2745C21.5201 13.3608 21.2839 13.4289 20.9887 13.4925C20.4028 13.6106 19.5717 13.6832 18.5634 13.7105C16.5468 13.765 13.799 13.6333 10.8014 13.2926L10.5198 13.2608C7.63577 12.9111 5.06964 12.2889 3.23475 11.5667C2.29005 11.1943 1.53156 10.7901 1.03196 10.3813C0.754913 10.1542 0.545989 9.91806 0.427902 9.68188C0.355233 11.3624 1.30447 12.893 2.93953 14.0557H2.94407ZM20.8525 14.3963C20.2075 14.8232 19.3264 15.1911 18.2727 15.4954C16.1653 16.0995 13.3585 16.4356 10.3563 16.3765C7.35872 16.3129 4.69267 15.4818 2.85323 14.1783C1.6769 13.3426 0.836666 12.3071 0.47332 11.158C1.11372 14.6461 5.07872 17.3121 10.1383 17.3031C15.4432 17.2803 20.262 15.727 21.5882 13.765C21.3975 13.9875 21.1477 14.201 20.8479 14.3963H20.8525Z",fill:"url(#paint3_radial_137_4210)"})]}),C("defs",{children:[C("linearGradient",{id:"paint0_linear_137_4210",x1:"10.7573",y1:"15.3953",x2:"10.7573",y2:"17.9659",gradientUnits:"userSpaceOnUse",children:[C("stop",{"stop-color":"#3E156C"}),C("stop",{offset:"1","stop-color":"#4B63EE"})]}),C("linearGradient",{id:"paint1_linear_137_4210",x1:"17.8693",y1:"10.1812",x2:"19.9404",y2:"8.06018",gradientUnits:"userSpaceOnUse",children:[C("stop",{"stop-color":"#3E156C"}),C("stop",{offset:"1","stop-color":"#4B63EE"})]}),C("linearGradient",{id:"paint2_linear_137_4210",x1:"17.0108",y1:"14.4824",x2:"18.0418",y2:"17.2211",gradientUnits:"userSpaceOnUse",children:[C("stop",{"stop-color":"#3E156C"}),C("stop",{offset:"1","stop-color":"#4B63EE"})]}),C("radialGradient",{id:"paint3_radial_137_4210",cx:"0",cy:"0",r:"1",gradientUnits:"userSpaceOnUse",gradientTransform:"translate(6.31726 8.10266) rotate(17.3) scale(13.7481 9.62366)",children:[C("stop",{offset:"0.3","stop-color":"#C880F9"}),C("stop",{offset:"1","stop-color":"#3533C9"})]}),C("clipPath",{id:"clip0_137_4210",children:C("rect",{width:"22",height:"22",fill:"white"})})]})]})}const wT=xt(({tilingRef:t})=>{var l,c;const e=Ze(ks),[n,r]=Bt(!1);yt.subscribe(()=>{var f;r((((f=yt.get())==null?void 0:f.profiles.length)??0)>0)});const[i,a]=Bt(!1),o=C("div",{id:_t["title-button"],class:A0.icon,onClick:()=>a(!0),children:[C("div",{id:_t.title,children:C(yT,{})}),C("div",{children:C(C0,{up:i})})]}),s=C("div",{id:_t.panels,children:[C(_T,{})," ",C("h2",{children:"Panels"})]});return C("div",{id:_t["top-bar"],children:[C("div",{children:C(Ng,{name:o,left:!0,onClickAwayCallback:()=>a(!1),children:[C("button",{onClick:(l=e==null?void 0:e.current)==null?void 0:l.browseForFile,children:[C(pT,{}),C("p",{children:"Import trace"})]}),n?C("button",{onClick:(c=e==null?void 0:e.current)==null?void 0:c.saveFile,children:[C(vT,{}),C("p",{children:"Export trace"})]}):null]})}),C("div",{children:e!=null&&e.current&&n?C(Ng,{name:s,right:!0,children:Tu().map(f=>C(dT,{component:f,tilingRef:t}))}):null})]})});function xT(t){return{render:function(e){rT(e,t)},unmount:function(){uT(t)}}}var TT=Object.defineProperty,ST=(t,e,n)=>e in t?TT(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,q=(t,e,n)=>ST(t,typeof e!="symbol"?e+"":e,n);const Ya=class ws{constructor(e){q(this,"_name"),this._name=e}static flip(e){return e===ws.HORZ?ws.VERT:ws.HORZ}getName(){return this._name}toString(){return this._name}};q(Ya,"HORZ",new Ya("horz"));q(Ya,"VERT",new Ya("vert"));let Fe=Ya;class Re{constructor(e,n,r,i){q(this,"x"),q(this,"y"),q(this,"width"),q(this,"height"),this.x=e,this.y=n,this.width=r,this.height=i}static empty(){return new Re(0,0,0,0)}static fromJson(e){return new Re(e.x,e.y,e.width,e.height)}toJson(){return{x:this.x,y:this.y,width:this.width,height:this.height}}snap(e){this.x=Math.round(this.x/e)*e,this.y=Math.round(this.y/e)*e,this.width=Math.round(this.width/e)*e,this.height=Math.round(this.height/e)*e}static getBoundingClientRect(e){const{x:n,y:r,width:i,height:a}=e.getBoundingClientRect();return new Re(n,r,i,a)}static getContentRect(e){const n=e.getBoundingClientRect(),r=window.getComputedStyle(e),i=parseFloat(r.paddingLeft),a=parseFloat(r.paddingRight),o=parseFloat(r.paddingTop),s=parseFloat(r.paddingBottom),l=parseFloat(r.borderLeftWidth),c=parseFloat(r.borderRightWidth),f=parseFloat(r.borderTopWidth),d=parseFloat(r.borderBottomWidth),p=n.width-l-i-a-c,x=n.height-f-o-s-d;return new Re(n.left+l+i,n.top+f+o,p,x)}static fromDomRect(e){return new Re(e.x,e.y,e.width,e.height)}relativeTo(e){return new Re(this.x-e.x,this.y-e.y,this.width,this.height)}clone(){return new Re(this.x,this.y,this.width,this.height)}equals(e){return this.x===(e==null?void 0:e.x)&&this.y===(e==null?void 0:e.y)&&this.width===(e==null?void 0:e.width)&&this.height===(e==null?void 0:e.height)}equalSize(e){return this.width===(e==null?void 0:e.width)&&this.height===(e==null?void 0:e.height)}getBottom(){return this.y+this.height}getRight(){return this.x+this.width}get bottom(){return this.y+this.height}get right(){return this.x+this.width}getCenter(){return{x:this.x+this.width/2,y:this.y+this.height/2}}positionElement(e,n){this.styleWithPosition(e.style,n)}styleWithPosition(e,n="absolute"){return e.left=this.x+"px",e.top=this.y+"px",e.width=Math.max(0,this.width)+"px",e.height=Math.max(0,this.height)+"px",e.position=n,e}contains(e,n){return this.x<=e&&e<=this.getRight()&&this.y<=n&&n<=this.getBottom()}removeInsets(e){return new Re(this.x+e.left,this.y+e.top,Math.max(0,this.width-e.left-e.right),Math.max(0,this.height-e.top-e.bottom))}centerInRect(e){this.x=(e.width-this.width)/2,this.y=(e.height-this.height)/2}_getSize(e){let n=this.width;return e===Fe.VERT&&(n=this.height),n}toString(){return"(Rect: x="+this.x+", y="+this.y+", width="+this.width+", height="+this.height+")"}}const Pn=class bt{constructor(e,n,r){q(this,"name"),q(this,"orientation"),q(this,"indexPlus"),this.name=e,this.orientation=n,this.indexPlus=r,bt.values.set(this.name,this)}static getByName(e){return bt.values.get(e)}static getLocation(e,n,r){if(n=(n-e.x)/e.width,r=(r-e.y)/e.height,n>=.25&&n<.75&&r>=.25&&r<.75)return bt.CENTER;const i=r>=n,a=r>=1-n;return i?a?bt.BOTTOM:bt.LEFT:a?bt.RIGHT:bt.TOP}getName(){return this.name}getOrientation(){return this.orientation}getDockRect(e){return this===bt.TOP?new Re(e.x,e.y,e.width,e.height/2):this===bt.BOTTOM?new Re(e.x,e.getBottom()-e.height/2,e.width,e.height/2):this===bt.LEFT?new Re(e.x,e.y,e.width/2,e.height):this===bt.RIGHT?new Re(e.getRight()-e.width/2,e.y,e.width/2,e.height):e.clone()}split(e,n){if(this===bt.TOP){const r=new Re(e.x,e.y,e.width,n),i=new Re(e.x,e.y+n,e.width,e.height-n);return{start:r,end:i}}else if(this===bt.LEFT){const r=new Re(e.x,e.y,n,e.height),i=new Re(e.x+n,e.y,e.width-n,e.height);return{start:r,end:i}}if(this===bt.RIGHT){const r=new Re(e.getRight()-n,e.y,n,e.height),i=new Re(e.x,e.y,e.width-n,e.height);return{start:r,end:i}}else{const r=new Re(e.x,e.getBottom()-n,e.width,n),i=new Re(e.x,e.y,e.width,e.height-n);return{start:r,end:i}}}reflect(){return this===bt.TOP?bt.BOTTOM:this===bt.LEFT?bt.RIGHT:this===bt.RIGHT?bt.LEFT:bt.TOP}toString(){return"(DockLocation: name="+this.name+", orientation="+this.orientation+")"}};q(Pn,"values",new Map);q(Pn,"TOP",new Pn("top",Fe.VERT,0));q(Pn,"BOTTOM",new Pn("bottom",Fe.VERT,1));q(Pn,"LEFT",new Pn("left",Fe.HORZ,0));q(Pn,"RIGHT",new Pn("right",Fe.HORZ,1));q(Pn,"CENTER",new Pn("center",Fe.VERT,0));let be=Pn;var tn=(t=>(t.Close_Tab="Close",t.Close_Tabset="Close tab set",t.Active_Tabset="Active tab set",t.Move_Tabset="Move tab set",t.Move_Tabs="Move tabs(?)",t.Maximize="Maximize tab set",t.Restore="Restore tab set",t.Popout_Tab="Popout selected tab",t.Overflow_Menu_Tooltip="Hidden tabs",t.Error_rendering_component="Error rendering component",t.Error_rendering_component_retry="Retry",t))(tn||{}),ee=(t=>(t.FLEXLAYOUT__BORDER="flexlayout__border",t.FLEXLAYOUT__BORDER_="flexlayout__border_",t.FLEXLAYOUT__BORDER_TAB_CONTENTS="flexlayout__border_tab_contents",t.FLEXLAYOUT__BORDER_BUTTON="flexlayout__border_button",t.FLEXLAYOUT__BORDER_BUTTON_="flexlayout__border_button_",t.FLEXLAYOUT__BORDER_BUTTON_CONTENT="flexlayout__border_button_content",t.FLEXLAYOUT__BORDER_BUTTON_LEADING="flexlayout__border_button_leading",t.FLEXLAYOUT__BORDER_BUTTON_TRAILING="flexlayout__border_button_trailing",t.FLEXLAYOUT__BORDER_BUTTON__SELECTED="flexlayout__border_button--selected",t.FLEXLAYOUT__BORDER_BUTTON__UNSELECTED="flexlayout__border_button--unselected",t.FLEXLAYOUT__BORDER_TOOLBAR_BUTTON_OVERFLOW="flexlayout__border_toolbar_button_overflow",t.FLEXLAYOUT__BORDER_TOOLBAR_BUTTON_OVERFLOW_="flexlayout__border_toolbar_button_overflow_",t.FLEXLAYOUT__BORDER_INNER="flexlayout__border_inner",t.FLEXLAYOUT__BORDER_INNER_="flexlayout__border_inner_",t.FLEXLAYOUT__BORDER_INNER_TAB_CONTAINER="flexlayout__border_inner_tab_container",t.FLEXLAYOUT__BORDER_INNER_TAB_CONTAINER_="flexlayout__border_inner_tab_container_",t.FLEXLAYOUT__BORDER_TAB_DIVIDER="flexlayout__border_tab_divider",t.FLEXLAYOUT__BORDER_LEADING="flexlayout__border_leading",t.FLEXLAYOUT__BORDER_SIZER="flexlayout__border_sizer",t.FLEXLAYOUT__BORDER_TOOLBAR="flexlayout__border_toolbar",t.FLEXLAYOUT__BORDER_TOOLBAR_="flexlayout__border_toolbar_",t.FLEXLAYOUT__BORDER_TOOLBAR_BUTTON="flexlayout__border_toolbar_button",t.FLEXLAYOUT__BORDER_TOOLBAR_BUTTON_FLOAT="flexlayout__border_toolbar_button-float",t.FLEXLAYOUT__DRAG_RECT="flexlayout__drag_rect",t.FLEXLAYOUT__EDGE_RECT="flexlayout__edge_rect",t.FLEXLAYOUT__EDGE_RECT_TOP="flexlayout__edge_rect_top",t.FLEXLAYOUT__EDGE_RECT_LEFT="flexlayout__edge_rect_left",t.FLEXLAYOUT__EDGE_RECT_BOTTOM="flexlayout__edge_rect_bottom",t.FLEXLAYOUT__EDGE_RECT_RIGHT="flexlayout__edge_rect_right",t.FLEXLAYOUT__ERROR_BOUNDARY_CONTAINER="flexlayout__error_boundary_container",t.FLEXLAYOUT__ERROR_BOUNDARY_CONTENT="flexlayout__error_boundary_content",t.FLEXLAYOUT__FLOATING_WINDOW_CONTENT="flexlayout__floating_window_content",t.FLEXLAYOUT__LAYOUT="flexlayout__layout",t.FLEXLAYOUT__LAYOUT_MOVEABLES="flexlayout__layout_moveables",t.FLEXLAYOUT__LAYOUT_OVERLAY="flexlayout__layout_overlay",t.FLEXLAYOUT__LAYOUT_TAB_STAMPS="flexlayout__layout_tab_stamps",t.FLEXLAYOUT__LAYOUT_MAIN="flexlayout__layout_main",t.FLEXLAYOUT__LAYOUT_BORDER_CONTAINER="flexlayout__layout_border_container",t.FLEXLAYOUT__LAYOUT_BORDER_CONTAINER_INNER="flexlayout__layout_border_container_inner",t.FLEXLAYOUT__OUTLINE_RECT="flexlayout__outline_rect",t.FLEXLAYOUT__OUTLINE_RECT_EDGE="flexlayout__outline_rect_edge",t.FLEXLAYOUT__SPLITTER="flexlayout__splitter",t.FLEXLAYOUT__SPLITTER_EXTRA="flexlayout__splitter_extra",t.FLEXLAYOUT__SPLITTER_="flexlayout__splitter_",t.FLEXLAYOUT__SPLITTER_BORDER="flexlayout__splitter_border",t.FLEXLAYOUT__SPLITTER_DRAG="flexlayout__splitter_drag",t.FLEXLAYOUT__SPLITTER_HANDLE="flexlayout__splitter_handle",t.FLEXLAYOUT__SPLITTER_HANDLE_HORZ="flexlayout__splitter_handle_horz",t.FLEXLAYOUT__SPLITTER_HANDLE_VERT="flexlayout__splitter_handle_vert",t.FLEXLAYOUT__ROW="flexlayout__row",t.FLEXLAYOUT__TAB="flexlayout__tab",t.FLEXLAYOUT__TAB_POSITION="flexlayout__tab_position",t.FLEXLAYOUT__TAB_MOVEABLE="flexlayout__tab_moveable",t.FLEXLAYOUT__TAB_OVERLAY="flexlayout__tab_overlay",t.FLEXLAYOUT__TABSET="flexlayout__tabset",t.FLEXLAYOUT__TABSET_CONTAINER="flexlayout__tabset_container",t.FLEXLAYOUT__TABSET_HEADER="flexlayout__tabset_header",t.FLEXLAYOUT__TABSET_HEADER_CONTENT="flexlayout__tabset_header_content",t.FLEXLAYOUT__TABSET_MAXIMIZED="flexlayout__tabset-maximized",t.FLEXLAYOUT__TABSET_SELECTED="flexlayout__tabset-selected",t.FLEXLAYOUT__TABSET_TAB_DIVIDER="flexlayout__tabset_tab_divider",t.FLEXLAYOUT__TABSET_CONTENT="flexlayout__tabset_content",t.FLEXLAYOUT__TABSET_TABBAR_INNER="flexlayout__tabset_tabbar_inner",t.FLEXLAYOUT__TABSET_TABBAR_INNER_="flexlayout__tabset_tabbar_inner_",t.FLEXLAYOUT__TABSET_LEADING="flexlayout__tabset_leading",t.FLEXLAYOUT__TABSET_TABBAR_INNER_TAB_CONTAINER="flexlayout__tabset_tabbar_inner_tab_container",t.FLEXLAYOUT__TABSET_TABBAR_INNER_TAB_CONTAINER_="flexlayout__tabset_tabbar_inner_tab_container_",t.FLEXLAYOUT__TABSET_TABBAR_OUTER="flexlayout__tabset_tabbar_outer",t.FLEXLAYOUT__TABSET_TABBAR_OUTER_="flexlayout__tabset_tabbar_outer_",t.FLEXLAYOUT__TAB_BORDER="flexlayout__tab_border",t.FLEXLAYOUT__TAB_BORDER_="flexlayout__tab_border_",t.FLEXLAYOUT__TAB_BUTTON="flexlayout__tab_button",t.FLEXLAYOUT__TAB_BUTTON_STRETCH="flexlayout__tab_button_stretch",t.FLEXLAYOUT__TAB_BUTTON_CONTENT="flexlayout__tab_button_content",t.FLEXLAYOUT__TAB_BUTTON_LEADING="flexlayout__tab_button_leading",t.FLEXLAYOUT__TAB_BUTTON_OVERFLOW="flexlayout__tab_button_overflow",t.FLEXLAYOUT__TAB_BUTTON_OVERFLOW_COUNT="flexlayout__tab_button_overflow_count",t.FLEXLAYOUT__TAB_BUTTON_TEXTBOX="flexlayout__tab_button_textbox",t.FLEXLAYOUT__TAB_BUTTON_TRAILING="flexlayout__tab_button_trailing",t.FLEXLAYOUT__TAB_BUTTON_STAMP="flexlayout__tab_button_stamp",t.FLEXLAYOUT__TAB_TOOLBAR="flexlayout__tab_toolbar",t.FLEXLAYOUT__TAB_TOOLBAR_BUTTON="flexlayout__tab_toolbar_button",t.FLEXLAYOUT__TAB_TOOLBAR_ICON="flexlayout__tab_toolbar_icon",t.FLEXLAYOUT__TAB_TOOLBAR_BUTTON_="flexlayout__tab_toolbar_button-",t.FLEXLAYOUT__TAB_TOOLBAR_BUTTON_FLOAT="flexlayout__tab_toolbar_button-float",t.FLEXLAYOUT__TAB_TOOLBAR_STICKY_BUTTONS_CONTAINER="flexlayout__tab_toolbar_sticky_buttons_container",t.FLEXLAYOUT__TAB_TOOLBAR_BUTTON_CLOSE="flexlayout__tab_toolbar_button-close",t.FLEXLAYOUT__POPUP_MENU_CONTAINER="flexlayout__popup_menu_container",t.FLEXLAYOUT__POPUP_MENU_ITEM="flexlayout__popup_menu_item",t.FLEXLAYOUT__POPUP_MENU_ITEM__SELECTED="flexlayout__popup_menu_item--selected",t.FLEXLAYOUT__POPUP_MENU="flexlayout__popup_menu",t.FLEXLAYOUT__MINI_SCROLLBAR="flexlayout__mini_scrollbar",t.FLEXLAYOUT__MINI_SCROLLBAR_CONTAINER="flexlayout__mini_scrollbar_container",t))(ee||{});class jt{constructor(e,n){q(this,"type"),q(this,"data"),this.type=e,this.data=n}}const Xt=class zt{static addNode(e,n,r,i,a){return new jt(zt.ADD_NODE,{json:e,toNode:n,location:r.getName(),index:i,select:a})}static moveNode(e,n,r,i,a){return new jt(zt.MOVE_NODE,{fromNode:e,toNode:n,location:r.getName(),index:i,select:a})}static deleteTab(e){return new jt(zt.DELETE_TAB,{node:e})}static deleteTabset(e){return new jt(zt.DELETE_TABSET,{node:e})}static renameTab(e,n){return new jt(zt.RENAME_TAB,{node:e,text:n})}static selectTab(e){return new jt(zt.SELECT_TAB,{tabNode:e})}static setActiveTabset(e,n){return new jt(zt.SET_ACTIVE_TABSET,{tabsetNode:e,windowId:n})}static adjustWeights(e,n){return new jt(zt.ADJUST_WEIGHTS,{nodeId:e,weights:n})}static adjustBorderSplit(e,n){return new jt(zt.ADJUST_BORDER_SPLIT,{node:e,pos:n})}static maximizeToggle(e,n){return new jt(zt.MAXIMIZE_TOGGLE,{node:e,windowId:n})}static updateModelAttributes(e){return new jt(zt.UPDATE_MODEL_ATTRIBUTES,{json:e})}static updateNodeAttributes(e,n){return new jt(zt.UPDATE_NODE_ATTRIBUTES,{node:e,json:n})}static popoutTab(e){return new jt(zt.POPOUT_TAB,{node:e})}static popoutTabset(e){return new jt(zt.POPOUT_TABSET,{node:e})}static closeWindow(e){return new jt(zt.CLOSE_WINDOW,{windowId:e})}static createWindow(e,n){return new jt(zt.CREATE_WINDOW,{layout:e,rect:n})}};q(Xt,"ADD_NODE","FlexLayout_AddNode");q(Xt,"MOVE_NODE","FlexLayout_MoveNode");q(Xt,"DELETE_TAB","FlexLayout_DeleteTab");q(Xt,"DELETE_TABSET","FlexLayout_DeleteTabset");q(Xt,"RENAME_TAB","FlexLayout_RenameTab");q(Xt,"SELECT_TAB","FlexLayout_SelectTab");q(Xt,"SET_ACTIVE_TABSET","FlexLayout_SetActiveTabset");q(Xt,"ADJUST_WEIGHTS","FlexLayout_AdjustWeights");q(Xt,"ADJUST_BORDER_SPLIT","FlexLayout_AdjustBorderSplit");q(Xt,"MAXIMIZE_TOGGLE","FlexLayout_MaximizeToggle");q(Xt,"UPDATE_MODEL_ATTRIBUTES","FlexLayout_UpdateModelAttributes");q(Xt,"UPDATE_NODE_ATTRIBUTES","FlexLayout_UpdateNodeAttributes");q(Xt,"POPOUT_TAB","FlexLayout_PopoutTab");q(Xt,"POPOUT_TABSET","FlexLayout_PopoutTabset");q(Xt,"CLOSE_WINDOW","FlexLayout_CloseWindow");q(Xt,"CREATE_WINDOW","FlexLayout_CreateWindow");let Pe=Xt;class le{constructor(e,n,r,i){q(this,"name"),q(this,"alias"),q(this,"modelName"),q(this,"pairedAttr"),q(this,"pairedType"),q(this,"defaultValue"),q(this,"alwaysWriteJson"),q(this,"type"),q(this,"required"),q(this,"fixed"),q(this,"description"),this.name=e,this.alias=void 0,this.modelName=n,this.defaultValue=r,this.alwaysWriteJson=i,this.required=!1,this.fixed=!1,this.type="any"}setType(e){return this.type=e,this}setAlias(e){return this.alias=e,this}setDescription(e){this.description=e}setRequired(){return this.required=!0,this}setFixed(){return this.fixed=!0,this}setpairedAttr(e){this.pairedAttr=e}setPairedType(e){this.pairedType=e}}q(le,"NUMBER","number");q(le,"STRING","string");q(le,"BOOLEAN","boolean");class so{constructor(){q(this,"attributes"),q(this,"nameToAttribute"),this.attributes=[],this.nameToAttribute=new Map}addWithAll(e,n,r,i){const a=new le(e,n,r,i);return this.attributes.push(a),this.nameToAttribute.set(e,a),a}addInherited(e,n){return this.addWithAll(e,n,void 0,!1)}add(e,n,r){return this.addWithAll(e,void 0,n,r)}getAttributes(){return this.attributes}getModelName(e){const n=this.nameToAttribute.get(e);if(n!==void 0)return n.modelName}toJson(e,n){for(const r of this.attributes){const i=n[r.name];(r.alwaysWriteJson||i!==r.defaultValue)&&(e[r.name]=i)}}fromJson(e,n){for(const r of this.attributes){let i=e[r.name];i===void 0&&r.alias&&(i=e[r.alias]),i===void 0?n[r.name]=r.defaultValue:n[r.name]=i}}update(e,n){for(const r of this.attributes)if(Object.prototype.hasOwnProperty.call(e,r.name)){const i=e[r.name];i===void 0?delete n[r.name]:n[r.name]=i}}setDefaults(e){for(const n of this.attributes)e[n.name]=n.defaultValue}pairAttributes(e,n){for(const r of n.attributes)if(r.modelName&&this.nameToAttribute.has(r.modelName)){const i=this.nameToAttribute.get(r.modelName);i.setpairedAttr(r),r.setpairedAttr(i),i.setPairedType(e)}}toTypescriptInterface(e,n){var r,i;const a=[],o=this.attributes.sort((s,l)=>s.name.localeCompare(l.name));a.push("export interface I"+e+"Attributes {");for(let s=0;s<o.length;s++){const l=o[s];let c=l.type,f,d=l,p;d.defaultValue!==void 0?f=d.defaultValue:d.modelName!==void 0&&n!==void 0&&n.nameToAttribute.get(d.modelName)!==void 0&&(p=d.modelName,d=n.nameToAttribute.get(p),f=d.defaultValue,c=d.type);const x=JSON.stringify(f),R=d.required?"":"?";let O=`	/**
	  `;l.description?O+=l.description:l.pairedType&&((r=l.pairedAttr)!=null&&r.description)&&(O+=`Value for ${l.pairedType} attribute ${l.pairedAttr.name} if not overridden`,O+=`

	  `,O+=(i=l.pairedAttr)==null?void 0:i.description),O+=`

	  `,l.fixed?O+=`Fixed value: ${x}`:p?O+=`Default: inherited from Global attribute ${l.modelName} (default ${x})`:O+=`Default: ${x}`,O+=`
	 */`,a.push(O),a.push("	"+l.name+R+": "+c+`;
`)}return a.push("}"),a.join(`
`)}}class rn{constructor(e,n,r,i,a){q(this,"node"),q(this,"rect"),q(this,"location"),q(this,"index"),q(this,"className"),this.node=e,this.rect=n,this.location=r,this.index=i,this.className=a}}class Ws{constructor(e){q(this,"borders"),q(this,"borderMap"),q(this,"layoutHorizontal"),this.borders=[],this.borderMap=new Map,this.layoutHorizontal=!0}static fromJson(e,n){const r=new Ws(n);r.borders=e.map(i=>an.fromJson(i,n));for(const i of r.borders)r.borderMap.set(i.getLocation(),i);return r}toJson(){return this.borders.map(e=>e.toJson())}getLayoutHorizontal(){return this.layoutHorizontal}getBorders(){return this.borders}getBorderMap(){return this.borderMap}forEachNode(e){for(const n of this.borders){e(n,0);for(const r of n.getChildren())r.forEachNode(e,1)}}setPaths(){for(const e of this.borders){const n="/border/"+e.getLocation().getName();e.setPath(n);let r=0;for(const i of e.getChildren())i.setPath(n+"/t"+r),r++}}findDropTargetNode(e,n,r){for(const i of this.borders)if(i.isShowing()){const a=i.canDrop(e,n,r);if(a!==void 0)return a}}}class Cl{constructor(e){q(this,"model"),q(this,"attributes"),q(this,"parent"),q(this,"children"),q(this,"rect"),q(this,"path"),q(this,"listeners"),this.model=e,this.attributes={},this.children=[],this.rect=Re.empty(),this.listeners=new Map,this.path=""}getId(){let e=this.attributes.id;return e!==void 0||(e=this.model.nextUniqueId(),this.setId(e)),e}getModel(){return this.model}getType(){return this.attributes.type}getParent(){return this.parent}getChildren(){return this.children}getRect(){return this.rect}getPath(){return this.path}getOrientation(){return this.parent===void 0?this.model.isRootOrientationVertical()?Fe.VERT:Fe.HORZ:Fe.flip(this.parent.getOrientation())}setEventListener(e,n){this.listeners.set(e,n)}removeEventListener(e){this.listeners.delete(e)}setId(e){this.attributes.id=e}fireEvent(e,n){this.listeners.has(e)&&this.listeners.get(e)(n)}getAttr(e){let n=this.attributes[e];if(n===void 0){const r=this.getAttributeDefinitions().getModelName(e);r!==void 0&&(n=this.model.getAttribute(r))}return n}forEachNode(e,n){e(this,n),n++;for(const r of this.children)r.forEachNode(e,n)}setPaths(e){let n=0;for(const r of this.children){let i=e;r.getType()==="row"?i+="/r"+n:r.getType()==="tabset"?i+="/ts"+n:r.getType()==="tab"&&(i+="/t"+n),r.path=i,r.setPaths(i),n++}}setParent(e){this.parent=e}setRect(e){this.rect=e}setPath(e){this.path=e}setWeight(e){this.attributes.weight=e}setSelected(e){this.attributes.selected=e}findDropTargetNode(e,n,r,i){let a;if(this.rect.contains(r,i)){if(this.model.getMaximizedTabset(e)!==void 0)a=this.model.getMaximizedTabset(e).canDrop(n,r,i);else if(a=this.canDrop(n,r,i),a===void 0&&this.children.length!==0){for(const o of this.children)if(a=o.findDropTargetNode(e,n,r,i),a!==void 0)break}}return a}canDrop(e,n,r){}canDockInto(e,n){if(n!=null){if(n.location===be.CENTER&&n.node.isEnableDrop()===!1||n.location===be.CENTER&&e.getType()==="tabset"&&e.getName()!==void 0||n.location!==be.CENTER&&n.node.isEnableDivide()===!1)return!1;if(this.model.getOnAllowDrop())return this.model.getOnAllowDrop()(e,n)}return!0}removeChild(e){const n=this.children.indexOf(e);return n!==-1&&this.children.splice(n,1),n}addChild(e,n){return n!=null?this.children.splice(n,0,e):(this.children.push(e),n=this.children.length-1),e.parent=this,n}removeAll(){this.children=[]}styleWithPosition(e){return e==null&&(e={}),this.rect.styleWithPosition(e)}isEnableDivide(){return!0}toAttributeString(){return JSON.stringify(this.attributes,void 0,"	")}}const $s=class Dr extends Cl{constructor(e,n,r=!0){super(e),q(this,"tabRect",Re.empty()),q(this,"moveableElement"),q(this,"tabStamp"),q(this,"renderedName"),q(this,"extra"),q(this,"visible"),q(this,"rendered"),q(this,"scrollTop"),q(this,"scrollLeft"),this.extra={},this.moveableElement=null,this.tabStamp=null,this.rendered=!1,this.visible=!1,Dr.attributeDefinitions.fromJson(n,this.attributes),r===!0&&e.addNode(this)}static fromJson(e,n,r=!0){return new Dr(n,e,r)}getName(){return this.getAttr("name")}getHelpText(){return this.getAttr("helpText")}getComponent(){return this.getAttr("component")}getWindowId(){return this.parent instanceof at?this.parent.getWindowId():wn.MAIN_WINDOW_ID}getWindow(){const e=this.model.getwindowsMap().get(this.getWindowId());if(e)return e.window}getConfig(){return this.attributes.config}getExtraData(){return this.extra}isPoppedOut(){return this.getWindowId()!==wn.MAIN_WINDOW_ID}isSelected(){return this.getParent().getSelectedNode()===this}getIcon(){return this.getAttr("icon")}isEnableClose(){return this.getAttr("enableClose")}getCloseType(){return this.getAttr("closeType")}isEnablePopout(){return this.getAttr("enablePopout")}isEnablePopoutIcon(){return this.getAttr("enablePopoutIcon")}isEnablePopoutOverlay(){return this.getAttr("enablePopoutOverlay")}isEnableDrag(){return this.getAttr("enableDrag")}isEnableRename(){return this.getAttr("enableRename")}isEnableWindowReMount(){return this.getAttr("enableWindowReMount")}getClassName(){return this.getAttr("className")}getContentClassName(){return this.getAttr("contentClassName")}getTabSetClassName(){return this.getAttr("tabsetClassName")}isEnableRenderOnDemand(){return this.getAttr("enableRenderOnDemand")}getMinWidth(){return this.getAttr("minWidth")}getMinHeight(){return this.getAttr("minHeight")}getMaxWidth(){return this.getAttr("maxWidth")}getMaxHeight(){return this.getAttr("maxHeight")}isVisible(){return this.visible}toJson(){const e={};return Dr.attributeDefinitions.toJson(e,this.attributes),e}saveScrollPosition(){this.moveableElement&&(this.scrollLeft=this.moveableElement.scrollLeft,this.scrollTop=this.moveableElement.scrollTop)}restoreScrollPosition(){this.scrollTop&&requestAnimationFrame(()=>{this.moveableElement&&this.scrollTop&&(this.moveableElement.scrollTop=this.scrollTop,this.moveableElement.scrollLeft=this.scrollLeft)})}setRect(e){e.equals(this.rect)||(this.fireEvent("resize",{rect:e}),this.rect=e)}setVisible(e){e!==this.visible&&(this.visible=e,this.fireEvent("visibility",{visible:e}))}getScrollTop(){return this.scrollTop}setScrollTop(e){this.scrollTop=e}getScrollLeft(){return this.scrollLeft}setScrollLeft(e){this.scrollLeft=e}isRendered(){return this.rendered}setRendered(e){this.rendered=e}getTabRect(){return this.tabRect}setTabRect(e){this.tabRect=e}getTabStamp(){return this.tabStamp}setTabStamp(e){this.tabStamp=e}getMoveableElement(){return this.moveableElement}setMoveableElement(e){this.moveableElement=e}setRenderedName(e){this.renderedName=e}getNameForOverflowMenu(){const e=this.getAttr("altName");return e!==void 0?e:this.renderedName}setName(e){this.attributes.name=e}delete(){this.parent.remove(this),this.fireEvent("close",{})}updateAttrs(e){Dr.attributeDefinitions.update(e,this.attributes)}getAttributeDefinitions(){return Dr.attributeDefinitions}setBorderWidth(e){this.attributes.borderWidth=e}setBorderHeight(e){this.attributes.borderHeight=e}static getAttributeDefinitions(){return Dr.attributeDefinitions}static createAttributeDefinitions(){const e=new so;return e.add("type",Dr.TYPE,!0).setType(le.STRING).setFixed(),e.add("id",void 0).setType(le.STRING).setDescription("the unique id of the tab, if left undefined a uuid will be assigned"),e.add("name","[Unnamed Tab]").setType(le.STRING).setDescription("name of tab to be displayed in the tab button"),e.add("altName",void 0).setType(le.STRING).setDescription("if there is no name specifed then this value will be used in the overflow menu"),e.add("helpText",void 0).setType(le.STRING).setDescription("An optional help text for the tab to be displayed upon tab hover."),e.add("component",void 0).setType(le.STRING).setDescription("string identifying which component to run (for factory)"),e.add("config",void 0).setType("any").setDescription("a place to hold json config for the hosted component"),e.add("tabsetClassName",void 0).setType(le.STRING).setDescription("class applied to parent tabset when this is the only tab and it is stretched to fill the tabset"),e.add("enableWindowReMount",!1).setType(le.BOOLEAN).setDescription("if enabled the tab will re-mount when popped out/in"),e.addInherited("enableClose","tabEnableClose").setType(le.BOOLEAN).setDescription("allow user to close tab via close button"),e.addInherited("closeType","tabCloseType").setType("ICloseType").setDescription("see values in ICloseType"),e.addInherited("enableDrag","tabEnableDrag").setType(le.BOOLEAN).setDescription("allow user to drag tab to new location"),e.addInherited("enableRename","tabEnableRename").setType(le.BOOLEAN).setDescription("allow user to rename tabs by double clicking"),e.addInherited("className","tabClassName").setType(le.STRING).setDescription("class applied to tab button"),e.addInherited("contentClassName","tabContentClassName").setType(le.STRING).setDescription("class applied to tab content"),e.addInherited("icon","tabIcon").setType(le.STRING).setDescription("the tab icon"),e.addInherited("enableRenderOnDemand","tabEnableRenderOnDemand").setType(le.BOOLEAN).setDescription("whether to avoid rendering component until tab is visible"),e.addInherited("enablePopout","tabEnablePopout").setType(le.BOOLEAN).setAlias("enableFloat").setDescription("enable popout (in popout capable browser)"),e.addInherited("enablePopoutIcon","tabEnablePopoutIcon").setType(le.BOOLEAN).setDescription("whether to show the popout icon in the tabset header if this tab enables popouts"),e.addInherited("enablePopoutOverlay","tabEnablePopoutOverlay").setType(le.BOOLEAN).setDescription(`if this tab will not work correctly in a popout window when the main window is backgrounded (inactive)
            then enabling this option will gray out this tab`),e.addInherited("borderWidth","tabBorderWidth").setType(le.NUMBER).setDescription("width when added to border, -1 will use border size"),e.addInherited("borderHeight","tabBorderHeight").setType(le.NUMBER).setDescription("height when added to border, -1 will use border size"),e.addInherited("minWidth","tabMinWidth").setType(le.NUMBER).setDescription("the min width of this tab"),e.addInherited("minHeight","tabMinHeight").setType(le.NUMBER).setDescription("the min height of this tab"),e.addInherited("maxWidth","tabMaxWidth").setType(le.NUMBER).setDescription("the max width of this tab"),e.addInherited("maxHeight","tabMaxHeight").setType(le.NUMBER).setDescription("the max height of this tab"),e}};q($s,"TYPE","tab");q($s,"attributeDefinitions",$s.createAttributeDefinitions());let ct=$s;function M0(){return typeof window<"u"&&window.matchMedia&&window.matchMedia("(hover: hover) and (pointer: fine)").matches}function mf(t,e,n){let r;const i=e.getName(),a=e.getName();n===void 0&&(n=0),r===void 0&&e.getIcon()!==void 0&&(n!==0?r=C("img",{style:{width:"1em",height:"1em",transform:"rotate("+n+"deg)"},src:e.getIcon(),alt:"leadingContent"}):r=C("img",{style:{width:"1em",height:"1em"},src:e.getIcon(),alt:"leadingContent"}));const s={leading:r,content:i,name:a,buttons:[]};return t.customizeTab(e,s),e.setRenderedName(s.name),s}function Xa(t){let e=!1;return t.nativeEvent instanceof MouseEvent&&(t.nativeEvent.button!==0||t.ctrlKey||t.altKey||t.metaKey||t.shiftKey)&&(e=!0),e}function Su(t,e){const n=[...Og("iframe",e),...Og("webview",e)];for(const r of n)r.style.pointerEvents=t?"auto":"none"}function Og(t,e){return[...e.getElementsByTagName(t)]}function N0(t,e,n,r,i){e.preventDefault();const a=l=>{l.preventDefault(),n(l.clientX,l.clientY)},o=l=>{l.preventDefault(),i()},s=()=>{t.removeEventListener("pointermove",a),t.removeEventListener("pointerup",s),t.removeEventListener("pointercancel",o),r()};t.addEventListener("pointermove",a),t.addEventListener("pointerup",s),t.addEventListener("pointercancel",o)}function O0(t){if(t instanceof ct)return t.isEnablePopout();if(t instanceof at){for(const e of t.getChildren())if(e.isEnablePopout()===!1)return!1;return!0}return!1}function Dg(t,e){const n=t.getAttribute("style"),r=e.getAttribute("style");return n===r?!1:(n?e.setAttribute("style",n):e.removeAttribute("style"),!0)}function ET(){const t=navigator.userAgent;return t.includes("Safari")&&!t.includes("Chrome")&&!t.includes("Chromium")}function zs(t,e){if(t!==void 0&&(t instanceof at||t instanceof an)){const n=t.getSelected();n!==-1&&(e===n&&t.getChildren().length>0?e>=t.getChildren().length&&t.setSelected(t.getChildren().length-1):e<n?t.setSelected(n-1):e>n||t.setSelected(-1))}}function ya(){return("10000000-1000-4000-8000"+-1e11).replace(/[018]/g,t=>(t^crypto.getRandomValues(new Uint8Array(1))[0]&15>>t/4).toString(16))}const Hs=class jn extends Cl{constructor(e,n){super(e),q(this,"tabStripRect",Re.empty()),q(this,"contentRect",Re.empty()),q(this,"calculatedMinHeight"),q(this,"calculatedMinWidth"),q(this,"calculatedMaxHeight"),q(this,"calculatedMaxWidth"),this.calculatedMinHeight=0,this.calculatedMinWidth=0,this.calculatedMaxHeight=0,this.calculatedMaxWidth=0,jn.attributeDefinitions.fromJson(n,this.attributes),e.addNode(this)}static fromJson(e,n,r){const i=new jn(n,e);if(e.children!=null)for(const a of e.children){const o=ct.fromJson(a,n);i.addChild(o)}return i.children.length===0&&i.setSelected(-1),e.maximized&&e.maximized===!0&&(r.maximizedTabSet=i),e.active&&e.active===!0&&(r.activeTabSet=i),i}getName(){return this.getAttr("name")}isEnableActiveIcon(){return this.getAttr("enableActiveIcon")}getSelected(){const e=this.attributes.selected;return e!==void 0?e:-1}getSelectedNode(){const e=this.getSelected();if(e!==-1)return this.children[e]}getWeight(){return this.getAttr("weight")}getAttrMinWidth(){return this.getAttr("minWidth")}getAttrMinHeight(){return this.getAttr("minHeight")}getMinWidth(){return this.calculatedMinWidth}getMinHeight(){return this.calculatedMinHeight}getMinSize(e){return e===Fe.HORZ?this.getMinWidth():this.getMinHeight()}getAttrMaxWidth(){return this.getAttr("maxWidth")}getAttrMaxHeight(){return this.getAttr("maxHeight")}getMaxWidth(){return this.calculatedMaxWidth}getMaxHeight(){return this.calculatedMaxHeight}getMaxSize(e){return e===Fe.HORZ?this.getMaxWidth():this.getMaxHeight()}getConfig(){return this.attributes.config}isMaximized(){return this.model.getMaximizedTabset(this.getWindowId())===this}isActive(){return this.model.getActiveTabset(this.getWindowId())===this}isEnableDeleteWhenEmpty(){return this.getAttr("enableDeleteWhenEmpty")}isEnableDrop(){return this.getAttr("enableDrop")}isEnableTabWrap(){return this.getAttr("enableTabWrap")}isEnableDrag(){return this.getAttr("enableDrag")}isEnableDivide(){return this.getAttr("enableDivide")}isEnableMaximize(){return this.getAttr("enableMaximize")}isEnableClose(){return this.getAttr("enableClose")}isEnableSingleTabStretch(){return this.getAttr("enableSingleTabStretch")}isEnableTabStrip(){return this.getAttr("enableTabStrip")}isAutoSelectTab(){return this.getAttr("autoSelectTab")}isEnableTabScrollbar(){return this.getAttr("enableTabScrollbar")}getClassNameTabStrip(){return this.getAttr("classNameTabStrip")}getTabLocation(){return this.getAttr("tabLocation")}toJson(){const e={};return jn.attributeDefinitions.toJson(e,this.attributes),e.children=this.children.map(n=>n.toJson()),this.isActive()&&(e.active=!0),this.isMaximized()&&(e.maximized=!0),e}calcMinMaxSize(){this.calculatedMinHeight=this.getAttrMinHeight(),this.calculatedMinWidth=this.getAttrMinWidth(),this.calculatedMaxHeight=this.getAttrMaxHeight(),this.calculatedMaxWidth=this.getAttrMaxWidth();for(const e of this.children){const n=e;this.calculatedMinWidth=Math.max(this.calculatedMinWidth,n.getMinWidth()),this.calculatedMinHeight=Math.max(this.calculatedMinHeight,n.getMinHeight()),this.calculatedMaxWidth=Math.min(this.calculatedMaxWidth,n.getMaxWidth()),this.calculatedMaxHeight=Math.min(this.calculatedMaxHeight,n.getMaxHeight())}this.calculatedMinHeight+=this.tabStripRect.height,this.calculatedMaxHeight+=this.tabStripRect.height}canMaximize(){return this.isEnableMaximize()?this.getModel().getMaximizedTabset(this.getWindowId())===this?!0:!(this.getParent()===this.getModel().getRoot(this.getWindowId())&&this.getModel().getRoot(this.getWindowId()).getChildren().length===1):!1}setContentRect(e){this.contentRect=e}getContentRect(){return this.contentRect}setTabStripRect(e){this.tabStripRect=e}setWeight(e){this.attributes.weight=e}setSelected(e){this.attributes.selected=e}getWindowId(){return this.parent.getWindowId()}canDrop(e,n,r){let i;if(e===this){const a=be.CENTER,o=this.tabStripRect;i=new rn(this,o,a,-1,ee.FLEXLAYOUT__OUTLINE_RECT)}else{if(this.getWindowId()!==wn.MAIN_WINDOW_ID&&!O0(e))return;if(this.contentRect.contains(n,r)){let a=be.CENTER;this.model.getMaximizedTabset(this.parent.getWindowId())===void 0&&(a=be.getLocation(this.contentRect,n,r));const o=a.getDockRect(this.rect);i=new rn(this,o,a,-1,ee.FLEXLAYOUT__OUTLINE_RECT)}else if(this.tabStripRect!=null&&this.tabStripRect.contains(n,r)){let a,o,s;if(this.children.length===0)a=this.tabStripRect.clone(),o=a.y+3,s=a.height-4,a.width=2;else{let l=this.children[0];a=l.getTabRect(),o=a.y,s=a.height;let c=this.tabStripRect.x,f=0;for(let d=0;d<this.children.length;d++){if(l=this.children[d],a=l.getTabRect(),a.y!==o&&(o=a.y,c=this.tabStripRect.x),f=a.x+a.width/2,c<=n&&n<f&&a.y<r&&r<a.getBottom()){const p=be.CENTER,x=new Re(a.x-2,a.y,3,a.height);if(this.rect.x<a.x&&a.x<this.rect.getRight()){i=new rn(this,x,p,d,ee.FLEXLAYOUT__OUTLINE_RECT);break}else return}c=f}}if(i==null&&a.getRight()<this.rect.getRight()){const l=be.CENTER,c=new Re(a.getRight()-2,o,3,s);i=new rn(this,c,l,this.children.length,ee.FLEXLAYOUT__OUTLINE_RECT)}}}if(e.canDockInto(e,i))return i}delete(){this.parent.removeChild(this)}remove(e){const n=this.removeChild(e);this.model.tidy(),zs(this,n)}drop(e,n,r,i){const a=n;if(this===e)return;let o=e.getParent(),s=0;if(o!==void 0&&(s=o.removeChild(e),o instanceof an&&o.getSelected()===s?o.setSelected(-1):zs(o,s)),e instanceof ct&&o===this&&s<r&&r>0&&r--,a===be.CENTER){let l=r;if(l===-1&&(l=this.children.length),e instanceof ct)this.addChild(e,l),(i||i!==!1&&this.isAutoSelectTab())&&this.setSelected(l);else if(e instanceof Ut)e.forEachNode((c,f)=>{c instanceof ct&&(this.addChild(c,l),l++)},0);else{for(let c=0;c<e.getChildren().length;c++){const f=e.getChildren()[c];this.addChild(f,l),l++}this.getSelected()===-1&&this.children.length>0&&this.setSelected(0)}this.model.setActiveTabset(this,this.parent.getWindowId())}else{let l=e;if(e instanceof ct){const d=this.model.getOnCreateTabSet();l=new jn(this.model,d?d(e):{}),l.addChild(e),o=l}else if(e instanceof Ut){const d=this.getParent();if(e.getOrientation()===d.getOrientation()&&(n.getOrientation()===d.getOrientation()||n===be.CENTER)){const p=new Ut(this.model,this.getWindowId(),{});p.addChild(e),l=p}}else l=e;const c=this.parent,f=c.getChildren().indexOf(this);if(c.getOrientation()===a.orientation)l.setWeight(this.getWeight()/2),this.setWeight(this.getWeight()/2),c.addChild(l,f+a.indexPlus);else{const d=new Ut(this.model,this.getWindowId(),{});d.setWeight(this.getWeight()),d.addChild(this),this.setWeight(50),l.setWeight(50),d.addChild(l,a.indexPlus),c.removeChild(this),c.addChild(d,f)}l instanceof jn&&this.model.setActiveTabset(l,this.getWindowId())}this.model.tidy()}updateAttrs(e){jn.attributeDefinitions.update(e,this.attributes)}getAttributeDefinitions(){return jn.attributeDefinitions}static getAttributeDefinitions(){return jn.attributeDefinitions}static createAttributeDefinitions(){const e=new so;return e.add("type",jn.TYPE,!0).setType(le.STRING).setFixed(),e.add("id",void 0).setType(le.STRING).setDescription("the unique id of the tab set, if left undefined a uuid will be assigned"),e.add("weight",100).setType(le.NUMBER).setDescription("relative weight for sizing of this tabset in parent row"),e.add("selected",0).setType(le.NUMBER).setDescription("index of selected/visible tab in tabset"),e.add("name",void 0).setType(le.STRING),e.add("config",void 0).setType("any").setDescription("a place to hold json config used in your own code"),e.addInherited("enableDeleteWhenEmpty","tabSetEnableDeleteWhenEmpty").setDescription("whether to delete this tabset when is has no tabs"),e.addInherited("enableDrop","tabSetEnableDrop").setDescription("allow user to drag tabs into this tabset"),e.addInherited("enableDrag","tabSetEnableDrag").setDescription("allow user to drag tabs out this tabset"),e.addInherited("enableDivide","tabSetEnableDivide").setDescription("allow user to drag tabs to region of this tabset, splitting into new tabset"),e.addInherited("enableMaximize","tabSetEnableMaximize").setDescription("allow user to maximize tabset to fill view via maximize button"),e.addInherited("enableClose","tabSetEnableClose").setDescription("allow user to close tabset via a close button"),e.addInherited("enableSingleTabStretch","tabSetEnableSingleTabStretch").setDescription("if the tabset has only a single tab then stretch the single tab to fill area and display in a header style"),e.addInherited("classNameTabStrip","tabSetClassNameTabStrip").setDescription("a class name to apply to the tab strip"),e.addInherited("enableTabStrip","tabSetEnableTabStrip").setDescription("enable tab strip and allow multiple tabs in this tabset"),e.addInherited("minWidth","tabSetMinWidth").setDescription("minimum width (in px) for this tabset"),e.addInherited("minHeight","tabSetMinHeight").setDescription("minimum height (in px) for this tabset"),e.addInherited("maxWidth","tabSetMaxWidth").setDescription("maximum width (in px) for this tabset"),e.addInherited("maxHeight","tabSetMaxHeight").setDescription("maximum height (in px) for this tabset"),e.addInherited("enableTabWrap","tabSetEnableTabWrap").setDescription("wrap tabs onto multiple lines"),e.addInherited("tabLocation","tabSetTabLocation").setDescription("the location of the tabs either top or bottom"),e.addInherited("autoSelectTab","tabSetAutoSelectTab").setType(le.BOOLEAN).setDescription("whether to select new/moved tabs in tabset"),e.addInherited("enableActiveIcon","tabSetEnableActiveIcon").setType(le.BOOLEAN).setDescription("whether the active icon (*) should be displayed when the tabset is active"),e.addInherited("enableTabScrollbar","tabSetEnableTabScrollbar").setType(le.BOOLEAN).setDescription("whether to show a mini scrollbar for the tabs"),e}};q(Hs,"TYPE","tabset");q(Hs,"attributeDefinitions",Hs.createAttributeDefinitions());let at=Hs;const Us=class Pt extends Cl{constructor(e,n,r){super(e),q(this,"windowId"),q(this,"minHeight"),q(this,"minWidth"),q(this,"maxHeight"),q(this,"maxWidth"),this.windowId=n,this.minHeight=pr,this.minWidth=pr,this.maxHeight=vr,this.maxWidth=vr,Pt.attributeDefinitions.fromJson(r,this.attributes),this.normalizeWeights(),e.addNode(this)}static fromJson(e,n,r){const i=new Pt(n,r.windowId,e);if(e.children!=null)for(const a of e.children)if(a.type===at.TYPE){const o=at.fromJson(a,n,r);i.addChild(o)}else{const o=Pt.fromJson(a,n,r);i.addChild(o)}return i}getWeight(){return this.attributes.weight}toJson(){const e={};Pt.attributeDefinitions.toJson(e,this.attributes),e.children=[];for(const n of this.children)e.children.push(n.toJson());return e}getWindowId(){return this.windowId}setWindowId(e){this.windowId=e}setWeight(e){this.attributes.weight=e}getSplitterBounds(e){const n=this.getOrientation()===Fe.HORZ,r=this.getChildren(),i=this.model.getSplitterSize(),a=r[0].getRect(),o=r[r.length-1].getRect();let s=n?[a.x,o.getRight()]:[a.y,o.getBottom()];const l=n?[a.x,o.getRight()]:[a.y,o.getBottom()];for(let c=0;c<e;c++){const f=r[c];s[0]+=n?f.getMinWidth():f.getMinHeight(),l[0]+=n?f.getMaxWidth():f.getMaxHeight(),c>0&&(s[0]+=i,l[0]+=i)}for(let c=r.length-1;c>=e;c--){const f=r[c];s[1]-=(n?f.getMinWidth():f.getMinHeight())+i,l[1]-=(n?f.getMaxWidth():f.getMaxHeight())+i}return s=[Math.max(l[1],s[0]),Math.min(l[0],s[1])],s}getSplitterInitials(e){const n=this.getOrientation()===Fe.HORZ,r=this.getChildren(),i=this.model.getSplitterSize(),a=[];let o=0;for(let c=0;c<r.length;c++){const d=r[c].getRect(),p=n?d.width:d.height;a.push(p),o+=p}const s=r[e].getRect(),l=(n?s.x:s.y)-i;return{initialSizes:a,sum:o,startPosition:l}}calculateSplit(e,n,r,i,a){const o=this.getOrientation()===Fe.HORZ,s=this.getChildren(),l=s[e],c=o?l.getMaxWidth():l.getMaxHeight(),f=[...r];if(n<a){let p=a-n,x=0;f[e]+p>c?(x=f[e]+p-c,f[e]=c):f[e]+=p;for(let R=e-1;R>=0;R--){const O=s[R],A=o?O.getMinWidth():O.getMinHeight();if(f[R]-p>A){f[R]-=p;break}else p-=f[R]-A,f[R]=A}for(let R=e+1;R<s.length;R++){const O=s[R],A=o?O.getMaxWidth():O.getMaxHeight();if(f[R]+x<A){f[R]+=x;break}else x-=A-f[R],f[R]=A}}else{let p=n-a,x=0;f[e-1]+p>c?(x=f[e-1]+p-c,f[e-1]=c):f[e-1]+=p;for(let R=e;R<s.length;R++){const O=s[R],A=o?O.getMinWidth():O.getMinHeight();if(f[R]-p>A){f[R]-=p;break}else p-=f[R]-A,f[R]=A}for(let R=e-1;R>=0;R--){const O=s[R],A=o?O.getMaxWidth():O.getMaxHeight();if(f[R]+x<A){f[R]+=x;break}else x-=A-f[R],f[R]=A}}return f.map(p=>Math.max(.1,p)*100/i)}getMinSize(e){return e===Fe.HORZ?this.getMinWidth():this.getMinHeight()}getMinWidth(){return this.minWidth}getMinHeight(){return this.minHeight}getMaxSize(e){return e===Fe.HORZ?this.getMaxWidth():this.getMaxHeight()}getMaxWidth(){return this.maxWidth}getMaxHeight(){return this.maxHeight}calcMinMaxSize(){this.minHeight=pr,this.minWidth=pr,this.maxHeight=vr,this.maxWidth=vr;let e=!0;for(const n of this.children){const r=n;r.calcMinMaxSize(),this.getOrientation()===Fe.VERT?(this.minHeight+=r.getMinHeight(),this.maxHeight+=r.getMaxHeight(),e||(this.minHeight+=this.model.getSplitterSize(),this.maxHeight+=this.model.getSplitterSize()),this.minWidth=Math.max(this.minWidth,r.getMinWidth()),this.maxWidth=Math.min(this.maxWidth,r.getMaxWidth())):(this.minWidth+=r.getMinWidth(),this.maxWidth+=r.getMaxWidth(),e||(this.minWidth+=this.model.getSplitterSize(),this.maxWidth+=this.model.getSplitterSize()),this.minHeight=Math.max(this.minHeight,r.getMinHeight()),this.maxHeight=Math.min(this.maxHeight,r.getMaxHeight())),e=!1}}tidy(){let e=0;for(;e<this.children.length;){const n=this.children[e];if(n instanceof Pt){n.tidy();const r=n.getChildren();if(r.length===0)this.removeChild(n);else if(r.length===1){const i=r[0];if(this.removeChild(n),i instanceof Pt){let a=0;const o=i.getChildren();for(const s of o)a+=s.getWeight();for(let s=0;s<o.length;s++){const l=o[s];l.setWeight(n.getWeight()*l.getWeight()/a),this.addChild(l,e+s)}}else i.setWeight(n.getWeight()),this.addChild(i,e)}else e++}else n instanceof at&&n.getChildren().length===0&&n.isEnableDeleteWhenEmpty()?(this.removeChild(n),n===this.model.getMaximizedTabset(this.windowId)&&this.model.setMaximizedTabset(void 0,this.windowId)):e++}if(this===this.model.getRoot(this.windowId)&&this.children.length===0){const n=this.model.getOnCreateTabSet();let r=n?n():{};r={...r,selected:-1};const i=new at(this.model,r);this.model.setActiveTabset(i,this.windowId),this.addChild(i)}}canDrop(e,n,r){const i=r-this.rect.y,a=n-this.rect.x,o=this.rect.width,s=this.rect.height,l=10,c=50;let f;if(!(this.getWindowId()!==wn.MAIN_WINDOW_ID&&!O0(e))){if(this.model.isEnableEdgeDock()&&this.parent===void 0){if(n<this.rect.x+l&&i>s/2-c&&i<s/2+c){const d=be.LEFT,p=d.getDockRect(this.rect);p.width=p.width/2,f=new rn(this,p,d,-1,ee.FLEXLAYOUT__OUTLINE_RECT_EDGE)}else if(n>this.rect.getRight()-l&&i>s/2-c&&i<s/2+c){const d=be.RIGHT,p=d.getDockRect(this.rect);p.width=p.width/2,p.x+=p.width,f=new rn(this,p,d,-1,ee.FLEXLAYOUT__OUTLINE_RECT_EDGE)}else if(r<this.rect.y+l&&a>o/2-c&&a<o/2+c){const d=be.TOP,p=d.getDockRect(this.rect);p.height=p.height/2,f=new rn(this,p,d,-1,ee.FLEXLAYOUT__OUTLINE_RECT_EDGE)}else if(r>this.rect.getBottom()-l&&a>o/2-c&&a<o/2+c){const d=be.BOTTOM,p=d.getDockRect(this.rect);p.height=p.height/2,p.y+=p.height,f=new rn(this,p,d,-1,ee.FLEXLAYOUT__OUTLINE_RECT_EDGE)}if(f!==void 0&&!e.canDockInto(e,f))return}return f}}drop(e,n,r){const i=n,a=e.getParent();a&&a.removeChild(e),a!==void 0&&a instanceof at&&a.setSelected(0),a!==void 0&&a instanceof an&&a.setSelected(-1);let o;if(e instanceof at||e instanceof Pt)o=e,o instanceof Pt&&o.getOrientation()===this.getOrientation()&&(n.getOrientation()===this.getOrientation()||n===be.CENTER)&&(o=new Pt(this.model,this.windowId,{}),o.addChild(e));else{const c=this.model.getOnCreateTabSet();o=new at(this.model,c?c(e):{}),o.addChild(e)}let s=this.children.reduce((c,f)=>c+f.getWeight(),0);s===0&&(s=100),o.setWeight(s/3);const l=!this.model.isRootOrientationVertical();if(i===be.CENTER)r===-1?this.addChild(o,this.children.length):this.addChild(o,r);else if(l&&i===be.LEFT||!l&&i===be.TOP)this.addChild(o,0);else if(l&&i===be.RIGHT||!l&&i===be.BOTTOM)this.addChild(o);else if(l&&i===be.TOP||!l&&i===be.LEFT){const c=new Pt(this.model,this.windowId,{}),f=new Pt(this.model,this.windowId,{});f.setWeight(75),o.setWeight(25);for(const d of this.children)f.addChild(d);this.removeAll(),c.addChild(o),c.addChild(f),this.addChild(c)}else if(l&&i===be.BOTTOM||!l&&i===be.RIGHT){const c=new Pt(this.model,this.windowId,{}),f=new Pt(this.model,this.windowId,{});f.setWeight(75),o.setWeight(25);for(const d of this.children)f.addChild(d);this.removeAll(),c.addChild(f),c.addChild(o),this.addChild(c)}o instanceof at&&this.model.setActiveTabset(o,this.windowId),this.model.tidy()}isEnableDrop(){return!0}getAttributeDefinitions(){return Pt.attributeDefinitions}updateAttrs(e){Pt.attributeDefinitions.update(e,this.attributes)}static getAttributeDefinitions(){return Pt.attributeDefinitions}normalizeWeights(){let e=0;for(const n of this.children)e+=n.getWeight();e===0&&(e=1);for(const n of this.children){const r=n;r.setWeight(Math.max(.001,100*r.getWeight()/e))}}static createAttributeDefinitions(){const e=new so;return e.add("type",Pt.TYPE,!0).setType(le.STRING).setFixed(),e.add("id",void 0).setType(le.STRING).setDescription("the unique id of the row, if left undefined a uuid will be assigned"),e.add("weight",100).setType(le.NUMBER).setDescription("relative weight for sizing of this row in parent row"),e}};q(Us,"TYPE","row");q(Us,"attributeDefinitions",Us.createAttributeDefinitions());let Ut=Us;class Qr{constructor(e,n){q(this,"_windowId"),q(this,"_layout"),q(this,"_rect"),q(this,"_window"),q(this,"_root"),q(this,"_maximizedTabSet"),q(this,"_activeTabSet"),q(this,"_toScreenRectFunction"),this._windowId=e,this._rect=n,this._toScreenRectFunction=r=>r}visitNodes(e){this.root.forEachNode(e,0)}get windowId(){return this._windowId}get rect(){return this._rect}get layout(){return this._layout}get window(){return this._window}get root(){return this._root}get maximizedTabSet(){return this._maximizedTabSet}get activeTabSet(){return this._activeTabSet}set rect(e){this._rect=e}set layout(e){this._layout=e}set window(e){this._window=e}set root(e){this._root=e}set maximizedTabSet(e){this._maximizedTabSet=e}set activeTabSet(e){this._activeTabSet=e}get toScreenRectFunction(){return this._toScreenRectFunction}set toScreenRectFunction(e){this._toScreenRectFunction=e}toJson(){return this._window&&this._window.screenTop>-1e4&&(this.rect=new Re(this._window.screenLeft,this._window.screenTop,this._window.outerWidth,this._window.outerHeight)),{layout:this.root.toJson(),rect:this.rect.toJson()}}static fromJson(e,n,r){const i=n.getwindowsMap().size,a=e.rect?Re.fromJson(e.rect):new Re(50+50*i,50+50*i,600,400);a.snap(10);const o=new Qr(r,a);return o.root=Ut.fromJson(e.layout,n,o),o}}const pr=0,vr=99999,Ys=class rt{constructor(){q(this,"attributes"),q(this,"idMap"),q(this,"changeListeners"),q(this,"borders"),q(this,"onAllowDrop"),q(this,"onCreateTabSet"),q(this,"windows"),q(this,"rootWindow"),this.attributes={},this.idMap=new Map,this.borders=new Ws(this),this.windows=new Map,this.rootWindow=new Qr(rt.MAIN_WINDOW_ID,Re.empty()),this.windows.set(rt.MAIN_WINDOW_ID,this.rootWindow),this.changeListeners=[]}doAction(e){var n;let r;switch(e.type){case Pe.ADD_NODE:{const i=new ct(this,e.data.json,!0),a=this.idMap.get(e.data.toNode);(a instanceof at||a instanceof an||a instanceof Ut)&&(a.drop(i,be.getByName(e.data.location),e.data.index,e.data.select),r=i);break}case Pe.MOVE_NODE:{const i=this.idMap.get(e.data.fromNode);if(i instanceof ct||i instanceof at||i instanceof Ut){if(i===this.getMaximizedTabset(i.getWindowId())){const o=this.windows.get(i.getWindowId());o.maximizedTabSet=void 0}const a=this.idMap.get(e.data.toNode);(a instanceof at||a instanceof an||a instanceof Ut)&&a.drop(i,be.getByName(e.data.location),e.data.index,e.data.select)}this.removeEmptyWindows();break}case Pe.DELETE_TAB:{const i=this.idMap.get(e.data.node);i instanceof ct&&i.delete(),this.removeEmptyWindows();break}case Pe.DELETE_TABSET:{const i=this.idMap.get(e.data.node);if(i instanceof at){const a=[...i.getChildren()];for(let o=0;o<a.length;o++){const s=a[o];s.isEnableClose()&&s.delete()}i.getChildren().length===0&&i.delete(),this.tidy()}this.removeEmptyWindows();break}case Pe.POPOUT_TABSET:{const i=this.idMap.get(e.data.node);if(i instanceof at){const a=i.isMaximized(),o=this.windows.get(i.getWindowId()),s=ya(),l=new Qr(s,o.toScreenRectFunction(i.getRect())),c={type:"row",children:[]},f=Ut.fromJson(c,this,l);l.root=f,this.windows.set(s,l),f.drop(i,be.CENTER,0),a&&(this.rootWindow.maximizedTabSet=void 0)}this.removeEmptyWindows();break}case Pe.POPOUT_TAB:{const i=this.idMap.get(e.data.node);if(i instanceof ct){const a=ya();let o=Re.empty();i.getParent()instanceof at?o=i.getParent().getRect():o=i.getParent().getContentRect();const s=this.windows.get(i.getWindowId()),l=new Qr(a,s.toScreenRectFunction(o)),c=ya(),f={type:"row",children:[{type:"tabset",id:c}]},d=Ut.fromJson(f,this,l);l.root=d,this.windows.set(a,l),this.idMap.get(c).drop(i,be.CENTER,0,!0)}this.removeEmptyWindows();break}case Pe.CLOSE_WINDOW:{const i=this.windows.get(e.data.windowId);i&&((n=this.rootWindow.root)==null||n.drop(i.root,be.CENTER,-1),this.rootWindow.visitNodes((a,o)=>{a instanceof Ut&&a.setWindowId(rt.MAIN_WINDOW_ID)}),this.windows.delete(e.data.windowId));break}case Pe.CREATE_WINDOW:{const i=ya(),a=new Qr(i,Re.fromJson(e.data.rect)),o=Ut.fromJson(e.data.layout,this,a);a.root=o,this.windows.set(i,a),r=i;break}case Pe.RENAME_TAB:{const i=this.idMap.get(e.data.node);i instanceof ct&&i.setName(e.data.text);break}case Pe.SELECT_TAB:{const i=this.idMap.get(e.data.tabNode),a=e.data.windowId?e.data.windowId:rt.MAIN_WINDOW_ID,o=this.windows.get(a);if(i instanceof ct){const s=i.getParent(),l=s.getChildren().indexOf(i);s instanceof an?s.getSelected()===l?s.setSelected(-1):s.setSelected(l):s instanceof at&&(s.getSelected()!==l&&s.setSelected(l),o.activeTabSet=s)}break}case Pe.SET_ACTIVE_TABSET:{const i=e.data.windowId?e.data.windowId:rt.MAIN_WINDOW_ID,a=this.windows.get(i);if(e.data.tabsetNode===void 0)a.activeTabSet=void 0;else{const o=this.idMap.get(e.data.tabsetNode);o instanceof at&&(a.activeTabSet=o)}break}case Pe.ADJUST_WEIGHTS:{const a=this.idMap.get(e.data.nodeId).getChildren();for(let o=0;o<a.length;o++)a[o].setWeight(e.data.weights[o]);break}case Pe.ADJUST_BORDER_SPLIT:{const i=this.idMap.get(e.data.node);i instanceof an&&i.setSize(e.data.pos);break}case Pe.MAXIMIZE_TOGGLE:{const i=e.data.windowId?e.data.windowId:rt.MAIN_WINDOW_ID,a=this.windows.get(i),o=this.idMap.get(e.data.node);o instanceof at&&(o===a.maximizedTabSet?a.maximizedTabSet=void 0:(a.maximizedTabSet=o,a.activeTabSet=o));break}case Pe.UPDATE_MODEL_ATTRIBUTES:{this.updateAttrs(e.data.json);break}case Pe.UPDATE_NODE_ATTRIBUTES:{this.idMap.get(e.data.node).updateAttrs(e.data.json);break}}this.updateIdMap();for(const i of this.changeListeners)i(e);return r}getActiveTabset(e=rt.MAIN_WINDOW_ID){const n=this.windows.get(e);if(n&&n.activeTabSet&&this.getNodeById(n.activeTabSet.getId()))return n.activeTabSet}getMaximizedTabset(e=rt.MAIN_WINDOW_ID){return this.windows.get(e).maximizedTabSet}getRoot(e=rt.MAIN_WINDOW_ID){return this.windows.get(e).root}isRootOrientationVertical(){return this.attributes.rootOrientationVertical}isEnableRotateBorderIcons(){return this.attributes.enableRotateBorderIcons}getBorderSet(){return this.borders}getwindowsMap(){return this.windows}visitNodes(e){this.borders.forEachNode(e);for(const[n,r]of this.windows)r.root.forEachNode(e,0)}visitWindowNodes(e,n){this.windows.has(e)&&(e===rt.MAIN_WINDOW_ID&&this.borders.forEachNode(n),this.windows.get(e).visitNodes(n))}getNodeById(e){return this.idMap.get(e)}getFirstTabSet(e=this.windows.get(rt.MAIN_WINDOW_ID).root){const n=e.getChildren()[0];return n instanceof at?n:this.getFirstTabSet(n)}static fromJson(e){const n=new rt;if(rt.attributeDefinitions.fromJson(e.global,n.attributes),e.borders&&(n.borders=Ws.fromJson(e.borders,n)),e.popouts)for(const r in e.popouts){const i=e.popouts[r],a=Qr.fromJson(i,n,r);n.windows.set(r,a)}return n.rootWindow.root=Ut.fromJson(e.layout,n,n.getwindowsMap().get(rt.MAIN_WINDOW_ID)),n.tidy(),n}toJson(){const e={};rt.attributeDefinitions.toJson(e,this.attributes),this.visitNodes(r=>{r.fireEvent("save",{})});const n={};for(const[r,i]of this.windows)r!==rt.MAIN_WINDOW_ID&&(n[r]=i.toJson());return{global:e,borders:this.borders.toJson(),layout:this.rootWindow.root.toJson(),popouts:n}}getSplitterSize(){return this.attributes.splitterSize}getSplitterExtra(){return this.attributes.splitterExtra}isEnableEdgeDock(){return this.attributes.enableEdgeDock}isSplitterEnableHandle(){return this.attributes.splitterEnableHandle}setOnAllowDrop(e){this.onAllowDrop=e}setOnCreateTabSet(e){this.onCreateTabSet=e}addChangeListener(e){this.changeListeners.push(e)}removeChangeListener(e){const n=this.changeListeners.findIndex(r=>r===e);n!==-1&&this.changeListeners.splice(n,1)}toString(){return JSON.stringify(this.toJson())}removeEmptyWindows(){const e=new Set;for(const[n]of this.windows)if(n!==rt.MAIN_WINDOW_ID){let r=0;this.visitWindowNodes(n,i=>{i instanceof ct&&r++}),r===0&&e.add(n)}for(const n of e)this.windows.delete(n)}setActiveTabset(e,n){const r=this.windows.get(n);r&&(e?r.activeTabSet=e:r.activeTabSet=void 0)}setMaximizedTabset(e,n){const r=this.windows.get(n);r&&(e?r.maximizedTabSet=e:r.maximizedTabSet=void 0)}updateIdMap(){this.idMap.clear(),this.visitNodes(e=>{this.idMap.set(e.getId(),e)})}addNode(e){const n=e.getId();if(this.idMap.has(n))throw new Error(`Error: each node must have a unique id, duplicate id:${e.getId()}`);this.idMap.set(n,e)}findDropTargetNode(e,n,r,i){let a=this.windows.get(e).root.findDropTargetNode(e,n,r,i);return a===void 0&&e===rt.MAIN_WINDOW_ID&&(a=this.borders.findDropTargetNode(n,r,i)),a}tidy(){for(const[e,n]of this.windows)n.root.tidy()}updateAttrs(e){rt.attributeDefinitions.update(e,this.attributes)}nextUniqueId(){return"#"+ya()}getAttribute(e){return this.attributes[e]}getOnAllowDrop(){return this.onAllowDrop}getOnCreateTabSet(){return this.onCreateTabSet}static toTypescriptInterfaces(){rt.attributeDefinitions.pairAttributes("RowNode",Ut.getAttributeDefinitions()),rt.attributeDefinitions.pairAttributes("TabSetNode",at.getAttributeDefinitions()),rt.attributeDefinitions.pairAttributes("TabNode",ct.getAttributeDefinitions()),rt.attributeDefinitions.pairAttributes("BorderNode",an.getAttributeDefinitions());const e=[];e.push(rt.attributeDefinitions.toTypescriptInterface("Global",void 0)),e.push(Ut.getAttributeDefinitions().toTypescriptInterface("Row",rt.attributeDefinitions)),e.push(at.getAttributeDefinitions().toTypescriptInterface("TabSet",rt.attributeDefinitions)),e.push(ct.getAttributeDefinitions().toTypescriptInterface("Tab",rt.attributeDefinitions)),e.push(an.getAttributeDefinitions().toTypescriptInterface("Border",rt.attributeDefinitions))}static createAttributeDefinitions(){const e=new so;return e.add("enableEdgeDock",!0).setType(le.BOOLEAN).setDescription("enable docking to the edges of the layout, this will show the edge indicators"),e.add("rootOrientationVertical",!1).setType(le.BOOLEAN).setDescription("the top level 'row' will layout horizontally by default, set this option true to make it layout vertically"),e.add("enableRotateBorderIcons",!0).setType(le.BOOLEAN).setDescription("boolean indicating if tab icons should rotate with the text in the left and right borders"),e.add("splitterSize",8).setType(le.NUMBER).setDescription("width in pixels of all splitters between tabsets/borders"),e.add("splitterExtra",0).setType(le.NUMBER).setDescription("additional width in pixels of the splitter hit test area"),e.add("splitterEnableHandle",!1).setType(le.BOOLEAN).setDescription("enable a small centralized handle on all splitters"),e.add("tabEnableClose",!0).setType(le.BOOLEAN),e.add("tabCloseType",1).setType("ICloseType"),e.add("tabEnablePopout",!1).setType(le.BOOLEAN).setAlias("tabEnableFloat"),e.add("tabEnablePopoutIcon",!0).setType(le.BOOLEAN),e.add("tabEnablePopoutOverlay",!1).setType(le.BOOLEAN),e.add("tabEnableDrag",!0).setType(le.BOOLEAN),e.add("tabEnableRename",!0).setType(le.BOOLEAN),e.add("tabContentClassName",void 0).setType(le.STRING),e.add("tabClassName",void 0).setType(le.STRING),e.add("tabIcon",void 0).setType(le.STRING),e.add("tabEnableRenderOnDemand",!0).setType(le.BOOLEAN),e.add("tabDragSpeed",.3).setType(le.NUMBER),e.add("tabBorderWidth",-1).setType(le.NUMBER),e.add("tabBorderHeight",-1).setType(le.NUMBER),e.add("tabSetEnableDeleteWhenEmpty",!0).setType(le.BOOLEAN),e.add("tabSetEnableDrop",!0).setType(le.BOOLEAN),e.add("tabSetEnableDrag",!0).setType(le.BOOLEAN),e.add("tabSetEnableDivide",!0).setType(le.BOOLEAN),e.add("tabSetEnableMaximize",!0).setType(le.BOOLEAN),e.add("tabSetEnableClose",!1).setType(le.BOOLEAN),e.add("tabSetEnableSingleTabStretch",!1).setType(le.BOOLEAN),e.add("tabSetAutoSelectTab",!0).setType(le.BOOLEAN),e.add("tabSetEnableActiveIcon",!1).setType(le.BOOLEAN),e.add("tabSetClassNameTabStrip",void 0).setType(le.STRING),e.add("tabSetEnableTabStrip",!0).setType(le.BOOLEAN),e.add("tabSetEnableTabWrap",!1).setType(le.BOOLEAN),e.add("tabSetTabLocation","top").setType("ITabLocation"),e.add("tabMinWidth",pr).setType(le.NUMBER),e.add("tabMinHeight",pr).setType(le.NUMBER),e.add("tabSetMinWidth",pr).setType(le.NUMBER),e.add("tabSetMinHeight",pr).setType(le.NUMBER),e.add("tabMaxWidth",vr).setType(le.NUMBER),e.add("tabMaxHeight",vr).setType(le.NUMBER),e.add("tabSetMaxWidth",vr).setType(le.NUMBER),e.add("tabSetMaxHeight",vr).setType(le.NUMBER),e.add("tabSetEnableTabScrollbar",!1).setType(le.BOOLEAN),e.add("borderSize",200).setType(le.NUMBER),e.add("borderMinSize",pr).setType(le.NUMBER),e.add("borderMaxSize",vr).setType(le.NUMBER),e.add("borderEnableDrop",!0).setType(le.BOOLEAN),e.add("borderAutoSelectTabWhenOpen",!0).setType(le.BOOLEAN),e.add("borderAutoSelectTabWhenClosed",!1).setType(le.BOOLEAN),e.add("borderClassName",void 0).setType(le.STRING),e.add("borderEnableAutoHide",!1).setType(le.BOOLEAN),e.add("borderEnableTabScrollbar",!1).setType(le.BOOLEAN),e}};q(Ys,"MAIN_WINDOW_ID","__main_window_id__");q(Ys,"attributeDefinitions",Ys.createAttributeDefinitions());let wn=Ys;const Xs=class dr extends Cl{constructor(e,n,r){super(r),q(this,"contentRect",Re.empty()),q(this,"tabHeaderRect",Re.empty()),q(this,"location"),this.location=e,this.attributes.id=`border_${e.getName()}`,dr.attributeDefinitions.fromJson(n,this.attributes),r.addNode(this)}static fromJson(e,n){const r=be.getByName(e.location),i=new dr(r,e,n);return e.children&&(i.children=e.children.map(a=>{const o=ct.fromJson(a,n);return o.setParent(i),o})),i}getLocation(){return this.location}getClassName(){return this.getAttr("className")}isHorizontal(){return this.location.orientation===Fe.HORZ}getSize(){const e=this.getAttr("size"),n=this.getSelected();if(n===-1)return e;{const r=this.children[n],i=this.isHorizontal()?r.getAttr("borderWidth"):r.getAttr("borderHeight");return i===-1?e:i}}getMinSize(){const e=this.getSelectedNode();let n=this.getAttr("minSize");if(e){const r=this.isHorizontal()?e.getMinWidth():e.getMinHeight();n=Math.max(n,r)}return n}getMaxSize(){const e=this.getSelectedNode();let n=this.getAttr("maxSize");if(e){const r=this.isHorizontal()?e.getMaxWidth():e.getMaxHeight();n=Math.min(n,r)}return n}getSelected(){return this.attributes.selected}isAutoHide(){return this.getAttr("enableAutoHide")}getSelectedNode(){if(this.getSelected()!==-1)return this.children[this.getSelected()]}getOrientation(){return this.location.getOrientation()}getConfig(){return this.attributes.config}isMaximized(){return!1}isShowing(){return this.attributes.show}toJson(){const e={};return dr.attributeDefinitions.toJson(e,this.attributes),e.location=this.location.getName(),e.children=this.children.map(n=>n.toJson()),e}isAutoSelectTab(e){return e==null&&(e=this.getSelected()!==-1),e?this.getAttr("autoSelectTabWhenOpen"):this.getAttr("autoSelectTabWhenClosed")}isEnableTabScrollbar(){return this.getAttr("enableTabScrollbar")}setSelected(e){this.attributes.selected=e}getTabHeaderRect(){return this.tabHeaderRect}setTabHeaderRect(e){this.tabHeaderRect=e}getRect(){return this.tabHeaderRect}getContentRect(){return this.contentRect}setContentRect(e){this.contentRect=e}isEnableDrop(){return this.getAttr("enableDrop")}setSize(e){const n=this.getSelected();if(n===-1)this.attributes.size=e;else{const r=this.children[n];(this.isHorizontal()?r.getAttr("borderWidth"):r.getAttr("borderHeight"))===-1?this.attributes.size=e:this.isHorizontal()?r.setBorderWidth(e):r.setBorderHeight(e)}}updateAttrs(e){dr.attributeDefinitions.update(e,this.attributes)}remove(e){const n=this.removeChild(e);this.getSelected()!==-1&&zs(this,n)}canDrop(e,n,r){if(!(e instanceof ct))return;let i;const a=be.CENTER;if(this.tabHeaderRect.contains(n,r)){if(this.location.orientation===Fe.VERT)if(this.children.length>0){let o=this.children[0],s=o.getTabRect();const l=s.y,c=s.height;let f=this.tabHeaderRect.x,d=0;for(let p=0;p<this.children.length;p++){if(o=this.children[p],s=o.getTabRect(),d=s.x+s.width/2,n>=f&&n<d){const x=new Re(s.x-2,l,3,c);i=new rn(this,x,a,p,ee.FLEXLAYOUT__OUTLINE_RECT);break}f=d}if(i==null){const p=new Re(s.getRight()-2,l,3,c);i=new rn(this,p,a,this.children.length,ee.FLEXLAYOUT__OUTLINE_RECT)}}else{const o=new Re(this.tabHeaderRect.x+1,this.tabHeaderRect.y+2,3,18);i=new rn(this,o,a,0,ee.FLEXLAYOUT__OUTLINE_RECT)}else if(this.children.length>0){let o=this.children[0],s=o.getTabRect();const l=s.x,c=s.width;let f=this.tabHeaderRect.y,d=0;for(let p=0;p<this.children.length;p++){if(o=this.children[p],s=o.getTabRect(),d=s.y+s.height/2,r>=f&&r<d){const x=new Re(l,s.y-2,c,3);i=new rn(this,x,a,p,ee.FLEXLAYOUT__OUTLINE_RECT);break}f=d}if(i==null){const p=new Re(l,s.getBottom()-2,c,3);i=new rn(this,p,a,this.children.length,ee.FLEXLAYOUT__OUTLINE_RECT)}}else{const o=new Re(this.tabHeaderRect.x+2,this.tabHeaderRect.y+1,18,3);i=new rn(this,o,a,0,ee.FLEXLAYOUT__OUTLINE_RECT)}if(!e.canDockInto(e,i))return}else if(this.getSelected()!==-1&&this.contentRect.contains(n,r)){const o=this.contentRect;if(i=new rn(this,o,a,-1,ee.FLEXLAYOUT__OUTLINE_RECT),!e.canDockInto(e,i))return}return i}drop(e,n,r,i){let a=0;const o=e.getParent();o!==void 0&&(a=o.removeChild(e),o!==this&&o instanceof dr&&o.getSelected()===a?o.setSelected(-1):zs(o,a)),e instanceof ct&&o===this&&a<r&&r>0&&r--;let s=r;s===-1&&(s=this.children.length),e instanceof ct&&this.addChild(e,s),(i||i!==!1&&this.isAutoSelectTab())&&this.setSelected(s),this.model.tidy()}getSplitterBounds(e,n=!1){const r=[0,0],i=n?this.getMinSize():0,a=n?this.getMaxSize():99999,o=this.model.getRoot(wn.MAIN_WINDOW_ID),s=o.getRect(),l=this.model.getSplitterSize();if(this.location===be.TOP){r[0]=this.tabHeaderRect.getBottom()+i;const c=this.tabHeaderRect.getBottom()+a;r[1]=Math.max(r[0],s.getBottom()-o.getMinHeight()-l),r[1]=Math.min(r[1],c)}else if(this.location===be.LEFT){r[0]=this.tabHeaderRect.getRight()+i;const c=this.tabHeaderRect.getRight()+a;r[1]=Math.max(r[0],s.getRight()-o.getMinWidth()-l),r[1]=Math.min(r[1],c)}else if(this.location===be.BOTTOM){r[1]=this.tabHeaderRect.y-i-l;const c=this.tabHeaderRect.y-a-l;r[0]=Math.min(r[1],s.y+o.getMinHeight()),r[0]=Math.max(r[0],c)}else if(this.location===be.RIGHT){r[1]=this.tabHeaderRect.x-i-l;const c=this.tabHeaderRect.x-a-l;r[0]=Math.min(r[1],s.x+o.getMinWidth()),r[0]=Math.max(r[0],c)}return r}calculateSplit(e,n){const r=this.getSplitterBounds(n);return this.location===be.BOTTOM||this.location===be.RIGHT?Math.max(0,r[1]-n):Math.max(0,n-r[0])}getAttributeDefinitions(){return dr.attributeDefinitions}static getAttributeDefinitions(){return dr.attributeDefinitions}static createAttributeDefinitions(){const e=new so;return e.add("type",dr.TYPE,!0).setType(le.STRING).setFixed(),e.add("selected",-1).setType(le.NUMBER).setDescription("index of selected/visible tab in border; -1 means no tab selected"),e.add("show",!0).setType(le.BOOLEAN).setDescription("show/hide this border"),e.add("config",void 0).setType("any").setDescription("a place to hold json config used in your own code"),e.addInherited("enableDrop","borderEnableDrop").setType(le.BOOLEAN).setDescription("whether tabs can be dropped into this border"),e.addInherited("className","borderClassName").setType(le.STRING).setDescription("class applied to tab button"),e.addInherited("autoSelectTabWhenOpen","borderAutoSelectTabWhenOpen").setType(le.BOOLEAN).setDescription("whether to select new/moved tabs in border when the border is already open"),e.addInherited("autoSelectTabWhenClosed","borderAutoSelectTabWhenClosed").setType(le.BOOLEAN).setDescription("whether to select new/moved tabs in border when the border is currently closed"),e.addInherited("size","borderSize").setType(le.NUMBER).setDescription("size of the tab area when selected"),e.addInherited("minSize","borderMinSize").setType(le.NUMBER).setDescription("the minimum size of the tab area"),e.addInherited("maxSize","borderMaxSize").setType(le.NUMBER).setDescription("the maximum size of the tab area"),e.addInherited("enableAutoHide","borderEnableAutoHide").setType(le.BOOLEAN).setDescription("hide border if it has zero tabs"),e.addInherited("enableTabScrollbar","borderEnableTabScrollbar").setType(le.BOOLEAN).setDescription("whether to show a mini scrollbar for the tabs"),e}};q(Xs,"TYPE","border");q(Xs,"attributeDefinitions",Xs.createAttributeDefinitions());let an=Xs,Pa=!1;const Eu=t=>{const{layout:e,node:n,index:r,horizontal:i}=t,[a,o]=Bt(!1),s=Te(null),l=Te(null),c=Te([]),f=Te(void 0),d=Te(void 0),p=Te(0),x=Te(0),R=Te({initialSizes:[],sum:0,startPosition:0}),O=n.getModel().getSplitterSize();let A=n.getModel().getSplitterExtra();M0()||(A=Math.max(20,A+O)-O),Dt(()=>{var J,K;return(J=s.current)==null||J.addEventListener("touchstart",I,{passive:!1}),(K=l.current)==null||K.addEventListener("touchstart",I,{passive:!1}),()=>{var $,te;($=s.current)==null||$.removeEventListener("touchstart",I),(te=l.current)==null||te.removeEventListener("touchstart",I)}},[]);const I=J=>{J.preventDefault(),J.stopImmediatePropagation()},S=J=>{var K;J.stopPropagation(),n instanceof Ut&&(R.current=n.getSplitterInitials(r)),Su(!1,e.getCurrentDocument()),N0(J.currentTarget.ownerDocument,J,N,k,D),c.current=n.getSplitterBounds(r,!0);const $=e.getRootDiv();f.current=e.getCurrentDocument().createElement("div"),f.current.style.flexDirection=i?"row":"column",f.current.className=e.getClassName(ee.FLEXLAYOUT__SPLITTER_DRAG),f.current.style.cursor=n.getOrientation()===Fe.VERT?"ns-resize":"ew-resize",n.getModel().isSplitterEnableHandle()&&(d.current=e.getCurrentDocument().createElement("div"),d.current.className=X(ee.FLEXLAYOUT__SPLITTER_HANDLE)+" "+X(i?ee.FLEXLAYOUT__SPLITTER_HANDLE_HORZ:ee.FLEXLAYOUT__SPLITTER_HANDLE_VERT),f.current.appendChild(d.current));const te=(K=s.current)==null?void 0:K.getBoundingClientRect(),G=new Re(te.x-e.getDomRect().x,te.y-e.getDomRect().y,te.width,te.height);p.current=J.clientX-te.x,x.current=J.clientY-te.y,G.positionElement(f.current),$&&$.appendChild(f.current),o(!0),Pa=!0},D=()=>{const J=e.getRootDiv();J&&f.current&&J.removeChild(f.current),f.current=void 0,o(!1),Pa=!1},N=(J,K)=>{if(f.current){const $=e.getDomRect();if(!$)return;n.getOrientation()===Fe.VERT?f.current.style.top=Y(K-$.y-x.current)+"px":f.current.style.left=Y(J-$.x-p.current)+"px",e.isRealtimeResize()&&W()}},k=()=>{if(f.current){W();const J=e.getRootDiv();J&&f.current&&J.removeChild(f.current),f.current=void 0}Su(!0,e.getCurrentDocument()),o(!1),Pa=!1},W=J=>{(()=>{if(f.current){let $=0;if(n.getOrientation()===Fe.VERT?$=f.current.offsetTop:$=f.current.offsetLeft,n instanceof an){const te=n.calculateSplit(n,$);e.doAction(Pe.adjustBorderSplit(n.getId(),te))}else{const te=R.current,G=n.calculateSplit(r,$,te.initialSizes,te.sum,te.startPosition);e.doAction(Pe.adjustWeights(n.getId(),G))}}})()},Y=J=>{const K=c.current;let $=J;return J<K[0]&&($=K[0]),J>K[1]&&($=K[1]),$},X=e.getClassName,Z={cursor:i?"ew-resize":"ns-resize",flexDirection:i?"column":"row"};let ie=X(ee.FLEXLAYOUT__SPLITTER)+" "+X(ee.FLEXLAYOUT__SPLITTER_+n.getOrientation().getName());n instanceof an?ie+=" "+X(ee.FLEXLAYOUT__SPLITTER_BORDER):n.getModel().getMaximizedTabset(e.getWindowId())!==void 0&&(Z.display="none"),i?(Z.width=O+"px",Z.minWidth=O+"px"):(Z.height=O+"px",Z.minHeight=O+"px");let ne;if(!a&&n.getModel().isSplitterEnableHandle()&&(ne=C("div",{className:X(ee.FLEXLAYOUT__SPLITTER_HANDLE)+" "+X(i?ee.FLEXLAYOUT__SPLITTER_HANDLE_HORZ:ee.FLEXLAYOUT__SPLITTER_HANDLE_VERT)})),A===0)return C("div",{className:ie,style:Z,ref:s,"data-layout-path":n.getPath()+"/s"+(r-1),onPointerDown:S,children:ne});{const J={};n.getOrientation()===Fe.HORZ?(J.height="100%",J.width=O+A+"px",J.cursor="ew-resize"):(J.height=O+A+"px",J.width="100%",J.cursor="ns-resize");const K=X(ee.FLEXLAYOUT__SPLITTER_EXTRA);return C("div",{className:ie,style:Z,ref:s,"data-layout-path":n.getPath()+"/s"+(r-1),onPointerDown:S,children:C("div",{style:J,ref:l,className:K,onPointerDown:S})})}};function CT(t){const{layout:e,border:n,show:r}=t,i=Te(null),a=Te(void 0);Tn(()=>{const c=e.getBoundingClientRect(i.current);!isNaN(c.x)&&c.width>0&&(n.getContentRect().equals(c)||(n.setContentRect(c),Pa?(a.current&&clearTimeout(a.current),a.current=setTimeout(()=>{e.redrawInternal("border content rect "+c),a.current=void 0},50)):e.redrawInternal("border content rect "+c)))});let o=!0;const s={};n.getOrientation()===Fe.HORZ?(s.width=n.getSize(),s.minWidth=n.getMinSize(),s.maxWidth=n.getMaxSize()):(s.height=n.getSize(),s.minHeight=n.getMinSize(),s.maxHeight=n.getMaxSize(),o=!1),s.display=r?"flex":"none";const l=e.getClassName(ee.FLEXLAYOUT__BORDER_TAB_CONTENTS);return n.getLocation()===be.LEFT||n.getLocation()===be.TOP?C(At,{children:[C("div",{ref:i,style:s,className:l}),r&&C(Eu,{layout:e,node:n,index:0,horizontal:o})]}):C(At,{children:[r&&C(Eu,{layout:e,node:n,index:0,horizontal:o}),C("div",{ref:i,style:s,className:l})]})}var Ga=(t=>(t[t.Visible=1]="Visible",t[t.Always=2]="Always",t[t.Selected=3]="Selected",t))(Ga||{});const AT=t=>{const{layout:e,node:n,selected:r,border:i,icons:a,path:o}=t,s=Te(null),l=Te(null),c=Z=>{n.isEnableDrag()?(Z.stopPropagation(),e.setDragNode(Z.nativeEvent,n)):Z.preventDefault()},f=Z=>{Z.stopPropagation(),e.clearDragMain()},d=Z=>{Xa(Z)&&e.auxMouseClick(n,Z)},p=Z=>{e.showContextMenu(n,Z)},x=()=>{e.doAction(Pe.selectTab(n.getId()))},R=()=>{const Z=n.getCloseType();return!!(r||Z===Ga.Always||Z===Ga.Visible&&window.matchMedia&&window.matchMedia("(hover: hover) and (pointer: fine)").matches)},O=Z=>{R()&&(e.doAction(Pe.deleteTab(n.getId())),Z.stopPropagation())},A=Z=>{Z.stopPropagation()};Tn(()=>{n.setTabRect(e.getBoundingClientRect(s.current)),e.getEditingTab()===n&&l.current.select()});const I=Z=>{Z.stopPropagation()},S=Z=>{Z.code==="Escape"?e.setEditingTab(void 0):(Z.code==="Enter"||Z.code==="NumpadEnter")&&(e.setEditingTab(void 0),e.doAction(Pe.renameTab(n.getId(),Z.target.value)))},D=e.getClassName;let N=D(ee.FLEXLAYOUT__BORDER_BUTTON)+" "+D(ee.FLEXLAYOUT__BORDER_BUTTON_+i);r?N+=" "+D(ee.FLEXLAYOUT__BORDER_BUTTON__SELECTED):N+=" "+D(ee.FLEXLAYOUT__BORDER_BUTTON__UNSELECTED),n.getClassName()!==void 0&&(N+=" "+n.getClassName());let k=0;n.getModel().isEnableRotateBorderIcons()===!1&&(i==="left"?k=90:i==="right"&&(k=-90));const W=mf(e,n,k);let Y=W.content?C("div",{className:D(ee.FLEXLAYOUT__BORDER_BUTTON_CONTENT),children:W.content}):null;const X=W.leading?C("div",{className:D(ee.FLEXLAYOUT__BORDER_BUTTON_LEADING),children:W.leading}):null;if(e.getEditingTab()===n&&(Y=C("input",{ref:l,className:D(ee.FLEXLAYOUT__TAB_BUTTON_TEXTBOX),"data-layout-path":o+"/textbox",type:"text",autoFocus:!0,defaultValue:n.getName(),onKeyDown:S,onPointerDown:I})),n.isEnableClose()){const Z=e.i18nName(tn.Close_Tab);W.buttons.push(C("div",{"data-layout-path":o+"/button/close",title:Z,className:D(ee.FLEXLAYOUT__BORDER_BUTTON_TRAILING),onPointerDown:A,onClick:O,children:typeof a.close=="function"?a.close(n):a.close},"close"))}return C("div",{ref:s,"data-layout-path":o,className:N,onClick:x,onAuxClick:d,onContextMenu:p,title:n.getHelpText(),draggable:!0,onDragStart:c,onDragEnd:f,children:[X,Y,W.buttons]})},Gs=t=>{const{layout:e,node:n}=t,r=e.getClassName,i=r(ee.FLEXLAYOUT__TAB_BUTTON_STAMP),a=mf(e,n),o=a.content?C("div",{className:r(ee.FLEXLAYOUT__TAB_BUTTON_CONTENT),children:a.content}):n.getNameForOverflowMenu(),s=a.leading?C("div",{className:r(ee.FLEXLAYOUT__TAB_BUTTON_LEADING),children:a.leading}):null;return C("div",{className:i,title:n.getHelpText(),children:[s,o]})};function D0(t,e,n,r,i){const a=i.getRootDiv(),o=i.getClassName,s=t.ownerDocument,l=t.getBoundingClientRect(),c=(a==null?void 0:a.getBoundingClientRect())??new DOMRect(0,0,100,100),f=s.createElement("div");f.className=o(ee.FLEXLAYOUT__POPUP_MENU_CONTAINER),l.left<c.left+c.width/2?f.style.left=l.left-c.left+"px":f.style.right=c.right-l.right+"px",l.top<c.top+c.height/2?f.style.top=l.top-c.top+"px":f.style.bottom=c.bottom-l.bottom+"px",i.showOverlay(!0),a&&a.appendChild(f);const d=()=>{i.hideControlInPortal(),i.showOverlay(!1),a&&a.removeChild(f),f.removeEventListener("pointerdown",p),s.removeEventListener("pointerdown",x)},p=R=>{R.stopPropagation()},x=R=>{d()};f.addEventListener("pointerdown",p),s.addEventListener("pointerdown",x),i.showControlInPortal(C(RT,{currentDocument:s,parentNode:e,onSelect:r,onHide:d,items:n,classNameMapper:o,layout:i}),f)}const RT=t=>{const{parentNode:e,items:n,onHide:r,onSelect:i,classNameMapper:a,layout:o}=t,s=Te(null);Dt(()=>{s.current&&s.current.focus()},[]);const l=(x,R)=>{i(x),r(),R.stopPropagation()},c=(x,R)=>{x.stopPropagation(),o.setDragNode(x.nativeEvent,R),setTimeout(()=>{r()},0)},f=x=>{o.clearDragMain()},d=x=>{x.key==="Escape"&&r()},p=n.map((x,R)=>{let O=a(ee.FLEXLAYOUT__POPUP_MENU_ITEM);return e.getSelected()===x.index&&(O+=" "+a(ee.FLEXLAYOUT__POPUP_MENU_ITEM__SELECTED)),C("div",{className:O,"data-layout-path":"/popup-menu/tb"+R,onClick:A=>l(x,A),draggable:!0,onDragStart:A=>c(A,x.node),onDragEnd:f,title:x.node.getHelpText(),children:C(Gs,{node:x.node,layout:o})},x.index)});return C("div",{className:a(ee.FLEXLAYOUT__POPUP_MENU),ref:s,tabIndex:0,onKeyDown:d,"data-layout-path":"/popup-menu",children:p})},L0=(t,e,n,r,i,a)=>{const[o,s]=Bt([]),[l,c]=Bt(!1),[f,d]=Bt(!1),p=Te(null),x=Te(!1),R=Te(void 0),O=Te([]),A=Te(0),I=Te(!1);O.current=o,Tn(()=>{r.current&&he(0)},[e.getId()]),Tn(()=>{x.current=!1},[e.getSelectedNode(),e.getRect().width,e.getRect().height]),Tn(()=>{ne(),x.current===!1&&D(),N(),k()}),Dt(()=>{var re;return(re=p.current)==null||re.addEventListener("wheel",S,{passive:!1}),()=>{var ue;(ue=p.current)==null||ue.removeEventListener("wheel",S)}},[p.current]);const S=re=>{re.preventDefault()};function D(){const re=e.getSelectedNode();if(re&&r.current){const ue=t.getBoundingClientRect(r.current),de=re.getTabRect();let ve=$(ue)-$(de);ve>0||oe(de)>oe(ue)?(he(pe(r.current)-ve),I.current=!0):(ve=te(de)-te(ue),ve>0&&(he(pe(r.current)+ve),I.current=!0))}}const N=()=>{if(r.current&&i.current){const re=r.current,ue=i.current,de=G(re),ve=ge(re),Me=pe(re);if(ve>de&&ve>0){let Oe=de*de/ve,Ce=0;Oe<20&&(Ce=20-Oe,Oe=20);const Ie=Me*(de-Ce)/ve;n===Fe.HORZ?(ue.style.width=Oe+"px",ue.style.left=Ie+"px"):(ue.style.height=Oe+"px",ue.style.top=Ie+"px"),ue.style.display="block"}else ue.style.display="none";n===Fe.HORZ?ue.style.bottom="0px":ue.style.right="0px"}},k=()=>{const ue=J().length>0;ue!==l&&c(ue),R.current===void 0&&(R.current=setTimeout(()=>{const de=J();MT(de,O.current)||s(de),R.current=void 0},100))},W=()=>{I.current||(x.current=!0),I.current=!1,N(),k()},Y=re=>{var ue;re.stopPropagation(),i.current.setPointerCapture(re.pointerId);const de=(ue=i.current)==null?void 0:ue.getBoundingClientRect();n===Fe.HORZ?A.current=re.clientX-de.x:A.current=re.clientY-de.y,N0(re.currentTarget.ownerDocument,re,X,Z,ie)},X=(re,ue)=>{if(r.current&&i.current){const de=r.current,ve=i.current,Me=G(de),Oe=ge(de),Ce=G(ve),Ie=de.getBoundingClientRect();let me=0;if(n===Fe.HORZ?me=re-Ie.x-A.current:me=ue-Ie.y-A.current,me=Math.max(0,Math.min(Oe-Ce,me)),Me>0){const Ee=me*Oe/Me;he(Ee)}}},Z=()=>{},ie=()=>{},ne=()=>{if(r.current){const ue=r.current.firstElementChild,de=f?10:0,ve=G(ue)+de>G(r.current);ve!==f&&d(ve)}},J=()=>{const re=[];if(r.current){const ue=r.current,de=ue.getBoundingClientRect(),ve=$(de)-1,Me=te(de)+1,Oe=ue.firstElementChild;let Ce=0;Array.from(Oe.children).forEach(Ie=>{const me=Ie.getBoundingClientRect();Ie.classList.contains(a)&&(($(me)<ve||te(me)>Me)&&re.push(Ce),Ce++)})}return re},K=re=>{if(r.current){if(e.getChildren().length===0)return;let ue=0;if(Math.abs(re.deltaY)>0){ue=-re.deltaY,re.deltaMode===1&&(ue*=40);const de=pe(r.current)-ue,ve=ge(r.current)-G(r.current),Me=Math.max(0,Math.min(ve,de));he(Me),re.stopPropagation()}}},$=re=>n===Fe.HORZ?re.x:re.y,te=re=>n===Fe.HORZ?re.right:re.bottom,G=re=>n===Fe.HORZ?re.clientWidth:re.clientHeight,oe=re=>n===Fe.HORZ?re.width:re.height,ge=re=>n===Fe.HORZ?re.scrollWidth:re.scrollHeight,he=re=>{n===Fe.HORZ?r.current.scrollLeft=re:r.current.scrollTop=re},pe=re=>n===Fe.HORZ?re.scrollLeft:re.scrollTop;return{selfRef:p,userControlledPositionRef:x,onScroll:W,onScrollPointerDown:Y,hiddenTabs:o,onMouseWheel:K,isDockStickyButtons:f,isShowHiddenTabs:l}};function MT(t,e){return t.length===e.length&&t.every((n,r)=>n===e[r])}const NT=t=>{const{border:e,layout:n,size:r}=t,i=Te(null),a=Te(null),o=Te(null),s=Te(null),l=Te(null),c=n.getIcons();Tn(()=>{e.setTabHeaderRect(n.getBoundingClientRect(f.current))});const{selfRef:f,userControlledPositionRef:d,onScroll:p,onScrollPointerDown:x,hiddenTabs:R,onMouseWheel:O,isDockStickyButtons:A,isShowHiddenTabs:I}=L0(n,e,Fe.flip(e.getOrientation()),l,a,n.getClassName(ee.FLEXLAYOUT__BORDER_BUTTON)),S=de=>{Xa(de)&&n.auxMouseClick(e,de)},D=de=>{n.showContextMenu(e,de)},N=de=>{de.stopPropagation()},k=de=>{const ve=n.getShowOverflowMenu(),Me=R.map(Oe=>({index:Oe,node:e.getChildren()[Oe]}));if(ve!==void 0)ve(e,de,Me,W);else{const Oe=o.current;D0(Oe,e,Me,W,n)}de.stopPropagation()},W=de=>{n.doAction(Pe.selectTab(de.node.getId())),d.current=!1},Y=de=>{const ve=e.getChildren()[e.getSelected()];ve!==void 0&&n.doAction(Pe.popoutTab(ve.getId())),de.stopPropagation()},X=n.getClassName,Z=[],ie=de=>{const ve=e.getSelected()===de,Me=e.getChildren()[de];Z.push(C(AT,{layout:n,border:e.getLocation().getName(),node:Me,path:e.getPath()+"/tb"+de,selected:ve,icons:c},Me.getId())),de<e.getChildren().length-1&&Z.push(C("div",{className:X(ee.FLEXLAYOUT__BORDER_TAB_DIVIDER)},"divider"+de))};for(let de=0;de<e.getChildren().length;de++)ie(de);let ne=X(ee.FLEXLAYOUT__BORDER)+" "+X(ee.FLEXLAYOUT__BORDER_+e.getLocation().getName());e.getClassName()!==void 0&&(ne+=" "+e.getClassName());let J,K=[],$=[];const te={leading:J,buttons:K,stickyButtons:$,overflowPosition:void 0};if(n.customizeTabSet(e,te),J=te.leading,$=te.stickyButtons,K=te.buttons,te.overflowPosition===void 0&&(te.overflowPosition=$.length),$.length>0&&(A?K=[...$,...K]:Z.push(C("div",{ref:s,onPointerDown:N,onDragStart:de=>{de.preventDefault()},className:X(ee.FLEXLAYOUT__TAB_TOOLBAR_STICKY_BUTTONS_CONTAINER),children:$},"sticky_buttons_container"))),I){const de=n.i18nName(tn.Overflow_Menu_Tooltip);let ve;if(typeof c.more=="function"){const Me=R.map(Oe=>({index:Oe,node:e.getChildren()[Oe]}));ve=c.more(e,Me)}else ve=C(At,{children:[c.more,C("div",{className:X(ee.FLEXLAYOUT__TAB_BUTTON_OVERFLOW_COUNT),children:R.length>0?R.length:""})]});K.splice(Math.min(te.overflowPosition,K.length),0,C("button",{ref:o,className:X(ee.FLEXLAYOUT__BORDER_TOOLBAR_BUTTON)+" "+X(ee.FLEXLAYOUT__BORDER_TOOLBAR_BUTTON_OVERFLOW)+" "+X(ee.FLEXLAYOUT__BORDER_TOOLBAR_BUTTON_OVERFLOW_+e.getLocation().getName()),title:de,onClick:k,onPointerDown:N,children:ve},"overflowbutton"))}const G=e.getSelected();if(G!==-1){const de=e.getChildren()[G];if(de!==void 0&&n.isSupportsPopout()&&de.isEnablePopout()){const ve=n.i18nName(tn.Popout_Tab);K.push(C("button",{title:ve,className:X(ee.FLEXLAYOUT__BORDER_TOOLBAR_BUTTON)+" "+X(ee.FLEXLAYOUT__BORDER_TOOLBAR_BUTTON_FLOAT),onClick:Y,onPointerDown:N,children:typeof c.popout=="function"?c.popout(de):c.popout},"popout"))}}const oe=C("div",{ref:i,className:X(ee.FLEXLAYOUT__BORDER_TOOLBAR)+" "+X(ee.FLEXLAYOUT__BORDER_TOOLBAR_+e.getLocation().getName()),children:K},"toolbar");let ge={},he={};const pe=r-1;e.getLocation()===be.LEFT?(ge={right:"100%",top:0},he={width:pe,overflowY:"auto"}):e.getLocation()===be.RIGHT?(ge={left:"100%",top:0},he={width:pe,overflowY:"auto"}):(ge={left:0},he={height:pe,overflowX:"auto"});let re;e.isEnableTabScrollbar()&&(re=C("div",{ref:a,className:X(ee.FLEXLAYOUT__MINI_SCROLLBAR),onPointerDown:x}));let ue;return J&&(ue=C("div",{className:X(ee.FLEXLAYOUT__BORDER_LEADING),children:J})),C("div",{ref:f,style:{display:"flex",flexDirection:e.getOrientation()===Fe.VERT?"row":"column"},className:ne,"data-layout-path":e.getPath(),onClick:S,onAuxClick:S,onContextMenu:D,onWheel:O,children:[ue,C("div",{className:X(ee.FLEXLAYOUT__MINI_SCROLLBAR_CONTAINER),children:[C("div",{ref:l,className:X(ee.FLEXLAYOUT__BORDER_INNER)+" "+X(ee.FLEXLAYOUT__BORDER_INNER_+e.getLocation().getName()),style:he,onScroll:p,children:C("div",{style:ge,className:X(ee.FLEXLAYOUT__BORDER_INNER_TAB_CONTAINER)+" "+X(ee.FLEXLAYOUT__BORDER_INNER_TAB_CONTAINER_+e.getLocation().getName()),children:Z})}),re]}),oe]})},OT=t=>{const{layout:e,node:n}=t,r=Te(null);Dt(()=>{n.setTabStamp(r.current)},[n,r.current]);const i=e.getClassName,a=i(ee.FLEXLAYOUT__DRAG_RECT);return C("div",{ref:r,className:a,children:C(Gs,{layout:e,node:n},n.getId())})},DT=t=>{const{title:e,layout:n,layoutWindow:r,url:i,onCloseWindow:a,onSetWindow:o,children:s}=t,l=Te(null),[c,f]=Bt(void 0),d=new Map;return Tn(()=>{if(!l.current){const p=r.windowId,x=r.rect;l.current=window.open(i,p,`left=${x.x},top=${x.y},width=${x.width},height=${x.height}`),l.current?(r.window=l.current,o(r,l.current),window.addEventListener("beforeunload",()=>{if(l.current){const R=l.current;l.current=null,R.close()}}),l.current.addEventListener("load",()=>{if(l.current){l.current.focus(),l.current.resizeTo(x.width,x.height),l.current.moveTo(x.x,x.y);const R=l.current.document;R.title=e;const O=R.createElement("div");O.className=ee.FLEXLAYOUT__FLOATING_WINDOW_CONTENT,R.body.appendChild(O),IT(R,d).then(()=>{f(O)});const A=new MutationObserver(I=>LT(I,R,d));A.observe(document.head,{childList:!0}),l.current.addEventListener("beforeunload",()=>{l.current&&(a(r),l.current=null,A.disconnect())})}})):a(r)}return()=>{var p;n.getModel().getwindowsMap().has(r.windowId)||((p=l.current)==null||p.close(),l.current=null)}},[]),c!==void 0?Fs(s,c):null};function LT(t,e,n){for(const r of t)if(r.type==="childList"){for(const i of r.addedNodes)(i instanceof HTMLLinkElement||i instanceof HTMLStyleElement)&&I0(e,i,n);for(const i of r.removedNodes)if(i instanceof HTMLLinkElement||i instanceof HTMLStyleElement){const a=n.get(i);a&&e.head.removeChild(a)}}}function IT(t,e){const n=[],r=document.querySelectorAll('style, link[rel="stylesheet"]');for(const i of r)I0(t,i,e,n);return Promise.all(n)}function I0(t,e,n,r){if(e instanceof HTMLLinkElement){const i=e.cloneNode(!0);t.head.appendChild(i),n.set(e,i),r&&r.push(new Promise(a=>{i.onload=()=>a(!0)}))}else if(e instanceof HTMLStyleElement)try{const i=e.cloneNode(!0);t.head.appendChild(i),n.set(e,i)}catch{}}const Ki={width:"1em",height:"1em",display:"flex",alignItems:"center"},Lg=()=>C("svg",{xmlns:"http://www.w3.org/2000/svg",style:Ki,viewBox:"0 0 24 24",children:[C("path",{fill:"none",d:"M0 0h24v24H0z"}),C("path",{stroke:"var(--color-icon)",fill:"var(--color-icon)",d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"})]}),PT=()=>C("svg",{xmlns:"http://www.w3.org/2000/svg",style:Ki,viewBox:"0 0 24 24",fill:"var(--color-icon)",children:[C("path",{d:"M0 0h24v24H0z",fill:"none"}),C("path",{stroke:"var(--color-icon)",d:"M7 14H5v5h5v-2H7v-3zm-2-4h2V7h3V5H5v5zm12 7h-3v2h5v-5h-2v3zM14 5v2h3v3h2V5h-5z"})]}),kT=()=>C("svg",{xmlns:"http://www.w3.org/2000/svg",style:Ki,viewBox:"0 0 24 24",fill:"var(--color-icon)",children:[C("path",{d:"M0 0h24v24H0z",fill:"none"}),C("path",{stroke:"var(--color-icon)",d:"M7 10l5 5 5-5z"})]}),BT=()=>C("svg",{xmlns:"http://www.w3.org/2000/svg",style:{display:"block",width:10,height:10},preserveAspectRatio:"none",viewBox:"0 0 100 100",children:C("path",{fill:"var(--color-edge-icon)",stroke:"var(--color-edge-icon)",d:"M10 30 L90 30 l-40 40 Z"})}),FT=()=>C("svg",{xmlns:"http://www.w3.org/2000/svg",style:Ki,viewBox:"0 0 20 20",fill:"var(--color-icon)",children:[C("path",{d:"M11 3a1 1 0 100 2h2.586l-6.293 6.293a1 1 0 101.414 1.414L15 6.414V9a1 1 0 102 0V4a1 1 0 00-1-1h-5z"}),C("path",{d:"M5 5a2 2 0 00-2 2v8a2 2 0 002 2h8a2 2 0 002-2v-3a1 1 0 10-2 0v3H5V7h3a1 1 0 000-2H5z"})]}),VT=()=>C("svg",{xmlns:"http://www.w3.org/2000/svg",style:Ki,viewBox:"0 0 24 24",fill:"var(--color-icon)",children:[C("path",{d:"M0 0h24v24H0z",fill:"none"}),C("path",{stroke:"var(--color-icon)",d:"M5 16h3v3h2v-5H5v2zm3-8H5v2h5V5H8v3zm6 11h2v-3h3v-2h-5v5zm2-11V5h-2v5h5V8h-3z"})]}),WT=()=>C("svg",{xmlns:"http://www.w3.org/2000/svg",style:Ki,height:"24px",viewBox:"0 -960 960 960",width:"24px",children:C("path",{fill:"var(--color-icon)",stroke:"var(--color-icon)",d:"M440-120v-264L254-197l-57-57 187-186H120v-80h264L197-706l57-57 186 187v-264h80v264l186-187 57 57-187 186h264v80H576l187 186-57 57-186-187v264h-80Z"})}),$T=t=>{const{layout:e,show:n}=t;return C("div",{className:e.getClassName(ee.FLEXLAYOUT__LAYOUT_OVERLAY),style:{display:n?"flex":"none"}})},zT=t=>{const{layout:e,node:n,selected:r,path:i}=t,a=Te(null),o=Te(null),s=e.getIcons();Tn(()=>{n.setTabRect(e.getBoundingClientRect(a.current)),e.getEditingTab()===n&&o.current.select()});const l=K=>{n.isEnableDrag()?(K.stopPropagation(),e.setDragNode(K.nativeEvent,n)):K.preventDefault()},c=K=>{e.clearDragMain()},f=K=>{Xa(K)&&e.auxMouseClick(n,K)},d=K=>{e.showContextMenu(n,K)},p=()=>{e.doAction(Pe.selectTab(n.getId()))},x=K=>{n.isEnableRename()&&(R(),K.stopPropagation())},R=()=>{e.setEditingTab(n),e.getCurrentDocument().body.addEventListener("pointerdown",O)},O=K=>{K.target!==o.current&&(e.getCurrentDocument().body.removeEventListener("pointerdown",O),e.setEditingTab(void 0))},A=()=>{const K=n.getCloseType();return!!(r||K===Ga.Always||K===Ga.Visible&&window.matchMedia&&window.matchMedia("(hover: hover) and (pointer: fine)").matches)},I=K=>{A()&&(e.doAction(Pe.deleteTab(n.getId())),K.stopPropagation())},S=K=>{K.stopPropagation()},D=K=>{K.stopPropagation()},N=K=>{K.code==="Escape"?e.setEditingTab(void 0):(K.code==="Enter"||K.code==="NumpadEnter")&&(e.setEditingTab(void 0),e.doAction(Pe.renameTab(n.getId(),K.target.value)))},k=e.getClassName,W=n.getParent(),Y=W.isEnableSingleTabStretch()&&W.getChildren().length===1,X=Y?ee.FLEXLAYOUT__TAB_BUTTON_STRETCH:ee.FLEXLAYOUT__TAB_BUTTON;let Z=k(X);Z+=" "+k(X+"_"+W.getTabLocation()),Y||(r?Z+=" "+k(X+"--selected"):Z+=" "+k(X+"--unselected")),n.getClassName()!==void 0&&(Z+=" "+n.getClassName());const ie=mf(e,n);let ne=ie.content?C("div",{className:k(ee.FLEXLAYOUT__TAB_BUTTON_CONTENT),children:ie.content}):null;const J=ie.leading?C("div",{className:k(ee.FLEXLAYOUT__TAB_BUTTON_LEADING),children:ie.leading}):null;if(e.getEditingTab()===n&&(ne=C("input",{ref:o,className:k(ee.FLEXLAYOUT__TAB_BUTTON_TEXTBOX),"data-layout-path":i+"/textbox",type:"text",autoFocus:!0,defaultValue:n.getName(),onKeyDown:N,onPointerDown:D})),n.isEnableClose()&&!Y){const K=e.i18nName(tn.Close_Tab);ie.buttons.push(C("div",{"data-layout-path":i+"/button/close",title:K,className:k(ee.FLEXLAYOUT__TAB_BUTTON_TRAILING),onPointerDown:S,onClick:I,children:typeof s.close=="function"?s.close(n):s.close},"close"))}return C("div",{ref:a,"data-layout-path":i,className:Z,onClick:p,onAuxClick:f,onContextMenu:d,title:n.getHelpText(),draggable:!0,onDragStart:l,onDragEnd:c,onDoubleClick:x,children:[J,ne,ie.buttons]})},HT=t=>{const{node:e,layout:n}=t,r=Te(null),i=Te(null),a=Te(null),o=Te(null),s=Te(null),l=Te(null),c=Te(null),f=Te(void 0),d=n.getIcons();Tn(()=>{e.setRect(n.getBoundingClientRect(p.current)),r.current&&e.setTabStripRect(n.getBoundingClientRect(r.current));const fe=n.getBoundingClientRect(o.current);!e.getContentRect().equals(fe)&&!isNaN(fe.x)&&(e.setContentRect(fe),Pa?(f.current&&clearTimeout(f.current),f.current=setTimeout(()=>{n.redrawInternal("border content rect "+fe),f.current=void 0},50)):n.redrawInternal("border content rect "+fe))});const{selfRef:p,userControlledPositionRef:x,onScroll:R,onScrollPointerDown:O,hiddenTabs:A,onMouseWheel:I,isDockStickyButtons:S,isShowHiddenTabs:D}=L0(n,e,Fe.HORZ,a,i,n.getClassName(ee.FLEXLAYOUT__TAB_BUTTON)),N=fe=>{const tt=n.getShowOverflowMenu(),it=A.map(_e=>({index:_e,node:e.getChildren()[_e]}));if(tt!==void 0)tt(e,fe,it,k);else{const _e=l.current;D0(_e,e,it,k,n)}fe.stopPropagation()},k=fe=>{n.doAction(Pe.selectTab(fe.node.getId())),x.current=!1},W=fe=>{n.getEditingTab()?fe.preventDefault():e.isEnableDrag()?(fe.stopPropagation(),n.setDragNode(fe.nativeEvent,e)):fe.preventDefault()},Y=fe=>{Xa(fe)||n.doAction(Pe.setActiveTabset(e.getId(),n.getWindowId()))},X=fe=>{Xa(fe)&&n.auxMouseClick(e,fe)},Z=fe=>{n.showContextMenu(e,fe)},ie=fe=>{fe.stopPropagation()},ne=fe=>{e.canMaximize()&&n.maximize(e),fe.stopPropagation()},J=fe=>{n.doAction(Pe.deleteTabset(e.getId())),fe.stopPropagation()},K=fe=>{n.doAction(Pe.deleteTab(e.getChildren()[0].getId())),fe.stopPropagation()},$=fe=>{oe!==void 0&&n.doAction(Pe.popoutTab(oe.getId())),fe.stopPropagation()},te=fe=>{e.canMaximize()&&n.maximize(e)},G=n.getClassName,oe=e.getSelectedNode(),ge=e.getPath(),he=[];if(e.isEnableTabStrip())for(let fe=0;fe<e.getChildren().length;fe++){const tt=e.getChildren()[fe],it=e.getSelected()===fe;he.push(C(zT,{layout:n,node:tt,path:ge+"/tb"+fe,selected:it},tt.getId())),fe<e.getChildren().length-1&&he.push(C("div",{className:G(ee.FLEXLAYOUT__TABSET_TAB_DIVIDER)},"divider"+fe))}let pe,re=[],ue=[];const de={leading:pe,stickyButtons:re,buttons:ue,overflowPosition:void 0};n.customizeTabSet(e,de),pe=de.leading,re=de.stickyButtons,ue=de.buttons;const ve=e.isEnableSingleTabStretch()&&e.getChildren().length===1,Me=ve&&e.getChildren()[0].isEnableClose()||e.isEnableClose();if(de.overflowPosition===void 0&&(de.overflowPosition=re.length),re.length>0&&(!e.isEnableTabWrap()&&(S||ve)?ue=[...re,...ue]:he.push(C("div",{ref:c,onPointerDown:ie,onDragStart:fe=>{fe.preventDefault()},className:G(ee.FLEXLAYOUT__TAB_TOOLBAR_STICKY_BUTTONS_CONTAINER),children:re},"sticky_buttons_container"))),!e.isEnableTabWrap()&&D){const fe=n.i18nName(tn.Overflow_Menu_Tooltip);let tt;if(typeof d.more=="function"){const it=A.map(_e=>({index:_e,node:e.getChildren()[_e]}));tt=d.more(e,it)}else tt=C(At,{children:[d.more,C("div",{className:G(ee.FLEXLAYOUT__TAB_BUTTON_OVERFLOW_COUNT),children:A.length>0?A.length:""})]});ue.splice(Math.min(de.overflowPosition,ue.length),0,C("button",{"data-layout-path":ge+"/button/overflow",ref:l,className:G(ee.FLEXLAYOUT__TAB_TOOLBAR_BUTTON)+" "+G(ee.FLEXLAYOUT__TAB_BUTTON_OVERFLOW),title:fe,onClick:N,onPointerDown:ie,children:tt},"overflowbutton"))}if(oe!==void 0&&n.isSupportsPopout()&&oe.isEnablePopout()&&oe.isEnablePopoutIcon()){const fe=n.i18nName(tn.Popout_Tab);ue.push(C("button",{"data-layout-path":ge+"/button/popout",title:fe,className:G(ee.FLEXLAYOUT__TAB_TOOLBAR_BUTTON)+" "+G(ee.FLEXLAYOUT__TAB_TOOLBAR_BUTTON_FLOAT),onClick:$,onPointerDown:ie,children:typeof d.popout=="function"?d.popout(oe):d.popout},"popout"))}if(e.canMaximize()){const fe=n.i18nName(tn.Restore),tt=n.i18nName(tn.Maximize);ue.push(C("button",{"data-layout-path":ge+"/button/max",title:e.isMaximized()?fe:tt,className:G(ee.FLEXLAYOUT__TAB_TOOLBAR_BUTTON)+" "+G(ee.FLEXLAYOUT__TAB_TOOLBAR_BUTTON_+(e.isMaximized()?"max":"min")),onClick:ne,onPointerDown:ie,children:e.isMaximized()?typeof d.restore=="function"?d.restore(e):d.restore:typeof d.maximize=="function"?d.maximize(e):d.maximize},"max"))}if(!e.isMaximized()&&Me){const fe=ve?n.i18nName(tn.Close_Tab):n.i18nName(tn.Close_Tabset);ue.push(C("button",{"data-layout-path":ge+"/button/close",title:fe,className:G(ee.FLEXLAYOUT__TAB_TOOLBAR_BUTTON)+" "+G(ee.FLEXLAYOUT__TAB_TOOLBAR_BUTTON_CLOSE),onClick:ve?K:J,onPointerDown:ie,children:typeof d.closeTabset=="function"?d.closeTabset(e):d.closeTabset},"close"))}if(e.isActive()&&e.isEnableActiveIcon()){const fe=n.i18nName(tn.Active_Tabset);ue.push(C("div",{"data-layout-path":ge+"/button/active",title:fe,className:G(ee.FLEXLAYOUT__TAB_TOOLBAR_ICON),children:typeof d.activeTabset=="function"?d.activeTabset(e):d.activeTabset},"active"))}const Oe=C("div",{ref:s,className:G(ee.FLEXLAYOUT__TAB_TOOLBAR),onPointerDown:ie,onDragStart:fe=>{fe.preventDefault()},children:ue},"buttonbar");let Ce,Ie=G(ee.FLEXLAYOUT__TABSET_TABBAR_OUTER);if(e.getClassNameTabStrip()!==void 0&&(Ie+=" "+e.getClassNameTabStrip()),Ie+=" "+ee.FLEXLAYOUT__TABSET_TABBAR_OUTER_+e.getTabLocation(),e.isActive()&&(Ie+=" "+G(ee.FLEXLAYOUT__TABSET_SELECTED)),e.isMaximized()&&(Ie+=" "+G(ee.FLEXLAYOUT__TABSET_MAXIMIZED)),ve){const fe=e.getChildren()[0];fe.getTabSetClassName()!==void 0&&(Ie+=" "+fe.getTabSetClassName())}let me;if(pe&&(me=C("div",{className:G(ee.FLEXLAYOUT__TABSET_LEADING),children:pe})),e.isEnableTabWrap())e.isEnableTabStrip()&&(Ce=C("div",{className:Ie,style:{flexWrap:"wrap",gap:"1px",marginTop:"2px"},ref:r,"data-layout-path":ge+"/tabstrip",onPointerDown:Y,onDoubleClick:te,onContextMenu:Z,onClick:X,onAuxClick:X,draggable:!0,onDragStart:W,children:[me,he,C("div",{style:{flexGrow:1}}),Oe]}));else if(e.isEnableTabStrip()){let fe;e.isEnableTabScrollbar()&&(fe=C("div",{ref:i,className:G(ee.FLEXLAYOUT__MINI_SCROLLBAR),onPointerDown:O})),Ce=C("div",{className:Ie,ref:r,"data-layout-path":ge+"/tabstrip",onPointerDown:Y,onDoubleClick:te,onContextMenu:Z,onClick:X,onAuxClick:X,draggable:!0,onWheel:I,onDragStart:W,children:[me,C("div",{className:G(ee.FLEXLAYOUT__MINI_SCROLLBAR_CONTAINER),children:[C("div",{ref:a,className:G(ee.FLEXLAYOUT__TABSET_TABBAR_INNER)+" "+G(ee.FLEXLAYOUT__TABSET_TABBAR_INNER_+e.getTabLocation()),style:{overflowX:"auto",overflowY:"hidden"},onScroll:R,children:C("div",{style:{width:ve?"100%":"none"},className:G(ee.FLEXLAYOUT__TABSET_TABBAR_INNER_TAB_CONTAINER)+" "+G(ee.FLEXLAYOUT__TABSET_TABBAR_INNER_TAB_CONTAINER_+e.getTabLocation()),children:he})}),fe]}),Oe]})}let Ee;if(e.getChildren().length===0){const fe=n.getTabSetPlaceHolderCallback();fe&&(Ee=fe(e))}let De=C("div",{ref:o,className:G(ee.FLEXLAYOUT__TABSET_CONTENT),children:Ee});e.getTabLocation()==="top"?De=C(At,{children:[Ce,De]}):De=C(At,{children:[De,Ce]});const ce={flexGrow:Math.max(1,e.getWeight()*1e3),minWidth:e.getMinWidth(),minHeight:e.getMinHeight(),maxWidth:e.getMaxWidth(),maxHeight:e.getMaxHeight()};e.getModel().getMaximizedTabset(n.getWindowId())!==void 0&&!e.isMaximized()&&(ce.display="none");const et=C("div",{ref:p,className:G(ee.FLEXLAYOUT__TABSET_CONTAINER),style:ce,children:C("div",{className:G(ee.FLEXLAYOUT__TABSET),"data-layout-path":ge,children:De})});return e.isMaximized()&&n.getMainElement()?Fs(C("div",{style:{position:"absolute",display:"flex",top:0,left:0,bottom:0,right:0},children:et}),n.getMainElement()):et},P0=t=>{const{layout:e,node:n}=t,r=Te(null),i=n.getOrientation()===Fe.HORZ;Tn(()=>{n.setRect(e.getBoundingClientRect(r.current))});const a=[];let o=0;for(const l of n.getChildren())o>0&&a.push(C(Eu,{layout:e,node:n,index:o,horizontal:i},"splitter"+o)),l instanceof Ut?a.push(C(P0,{layout:e,node:l},l.getId())):l instanceof at&&a.push(C(HT,{layout:e,node:l},l.getId())),o++;const s={flexGrow:Math.max(1,n.getWeight()*1e3),minWidth:n.getMinWidth(),minHeight:n.getMinHeight(),maxWidth:n.getMaxWidth(),maxHeight:n.getMaxHeight()};return i?s.flexDirection="row":s.flexDirection="column",C("div",{ref:r,className:e.getClassName(ee.FLEXLAYOUT__ROW),style:s,children:a})},UT=t=>{const{layout:e,selected:n,node:r,path:i}=t,a=Te(null),o=Te(!0),s=r.getParent(),l=s.getContentRect();Tn(()=>{const R=r.getMoveableElement();a.current.appendChild(R),r.setMoveableElement(R);const O=()=>{r.saveScrollPosition()};return R.addEventListener("scroll",O),a.current.addEventListener("pointerdown",c),()=>{R.removeEventListener("scroll",O),a.current&&a.current.removeEventListener("pointerdown",c),r.setVisible(!1)}},[]),Dt(()=>{r.isSelected()&&o.current&&(r.restoreScrollPosition(),o.current=!1)});const c=()=>{const R=r.getParent();R instanceof at&&(R.isActive()||e.doAction(Pe.setActiveTabset(R.getId(),e.getWindowId())))};r.setRect(l);const f=e.getClassName,d={};l.styleWithPosition(d);let p=null;if(n){if(r.setVisible(!0),document.hidden&&r.isEnablePopoutOverlay()){const R={};l.styleWithPosition(R),p=C("div",{style:R,className:f(ee.FLEXLAYOUT__TAB_OVERLAY)})}}else d.display="none",r.setVisible(!1);s instanceof at&&r.getModel().getMaximizedTabset(e.getWindowId())!==void 0&&(s.isMaximized()?d.zIndex=10:d.display="none"),s instanceof an&&(s.isShowing()||(d.display="none"));let x=f(ee.FLEXLAYOUT__TAB);return s instanceof an&&(x+=" "+f(ee.FLEXLAYOUT__TAB_BORDER),x+=" "+f(ee.FLEXLAYOUT__TAB_BORDER_+s.getLocation().getName())),r.getContentClassName()!==void 0&&(x+=" "+r.getContentClassName()),C(At,{children:[p,C("div",{ref:a,style:d,className:x,"data-layout-path":i})]})};class YT extends sn{constructor(e){super(e),q(this,"retry",()=>{this.setState({hasError:!1})}),this.state={hasError:!1}}static getDerivedStateFromError(e){return{hasError:!0}}componentDidCatch(e,n){}render(){return this.state.hasError?C("div",{className:ee.FLEXLAYOUT__ERROR_BOUNDARY_CONTAINER,children:C("div",{className:ee.FLEXLAYOUT__ERROR_BOUNDARY_CONTENT,children:C("div",{style:{display:"flex",flexDirection:"column",alignItems:"center"},children:[this.props.message,C("p",{children:C("button",{onClick:this.retry,children:this.props.retryText})})]})})}):this.props.children}}const XT=xt(({layout:t,node:e})=>C(YT,{message:t.i18nName(tn.Error_rendering_component),retryText:t.i18nName(tn.Error_rendering_component_retry),children:t.props.factory(e)}),GT);function GT(t,e){return!(e.visible&&(!t.rect.equalSize(e.rect)||t.forceRevision!==e.forceRevision||t.tabsRevision!==e.tabsRevision))}class qT extends sn{constructor(e){super(e),q(this,"selfRef"),q(this,"revision"),this.selfRef=ei(),this.revision=0}redraw(){this.selfRef.current.redraw("parent "+this.revision)}addTabToTabSet(e,n){return this.selfRef.current.addTabToTabSet(e,n)}addTabWithDragAndDrop(e,n,r){this.selfRef.current.addTabWithDragAndDrop(e,n,r)}moveTabWithDragAndDrop(e,n){this.selfRef.current.moveTabWithDragAndDrop(e,n)}addTabToActiveTabSet(e){return this.selfRef.current.addTabToActiveTabSet(e)}setDragComponent(e,n,r,i){this.selfRef.current.setDragComponent(e,n,r,i)}getRootDiv(){return this.selfRef.current.getRootDiv()}render(){return C(jT,{ref:this.selfRef,...this.props,renderRevision:this.revision++})}}const k0=class dn extends sn{constructor(e){super(e),q(this,"selfRef"),q(this,"moveablesRef"),q(this,"findBorderBarSizeRef"),q(this,"mainRef"),q(this,"previousModel"),q(this,"orderedTabIds"),q(this,"orderedTabMoveableIds"),q(this,"moveableElementMap",new Map),q(this,"dropInfo"),q(this,"outlineDiv"),q(this,"currentDocument"),q(this,"currentWindow"),q(this,"supportsPopout"),q(this,"popoutURL"),q(this,"icons"),q(this,"resizeObserver"),q(this,"dragEnterCount",0),q(this,"dragging",!1),q(this,"windowId"),q(this,"layoutWindow"),q(this,"mainLayout"),q(this,"isMainWindow"),q(this,"isDraggingOverWindow"),q(this,"styleObserver"),q(this,"popoutWindowName"),q(this,"updateLayoutMetrics",()=>{if(this.findBorderBarSizeRef.current){const n=this.findBorderBarSizeRef.current.getBoundingClientRect().height;n!==this.state.calculatedBorderBarSize&&this.setState({calculatedBorderBarSize:n})}}),q(this,"onModelChange",n=>{this.redrawInternal("model change"),this.props.onModelChange&&this.props.onModelChange(this.props.model,n)}),q(this,"updateRect",()=>{if(this.selfRef.current){const n=Re.fromDomRect(this.selfRef.current.getBoundingClientRect());!n.equals(this.state.rect)&&n.width!==0&&n.height!==0&&(this.setState({rect:n}),this.windowId!==wn.MAIN_WINDOW_ID&&this.redrawInternal("rect updated"))}}),q(this,"getClassName",n=>this.props.classNameMapper===void 0?n:this.props.classNameMapper(n)),q(this,"onCloseWindow",n=>{this.doAction(Pe.closeWindow(n.windowId))}),q(this,"onSetWindow",(n,r)=>{}),q(this,"showControlInPortal",(n,r)=>{const i=Fs(n,r);this.setState({portal:i})}),q(this,"hideControlInPortal",()=>{this.setState({portal:void 0})}),q(this,"getIcons",()=>this.icons),q(this,"setDragNode",(n,r)=>{if(dn.dragState=new Vc(this.mainLayout,"internal",r,void 0,void 0),n.dataTransfer.setData("text/plain","--flexlayout--"),n.dataTransfer.effectAllowed="copyMove",n.dataTransfer.dropEffect="move",this.dragEnterCount=0,r instanceof at){let i=!1,a=this.i18nName(tn.Move_Tabset);if(r.getChildren().length>0&&(a=this.i18nName(tn.Move_Tabs).replace("?",String(r.getChildren().length))),this.props.onRenderDragRect){const o=this.props.onRenderDragRect(a,r,void 0);o&&(this.setDragComponent(n,o,10,10),i=!0)}i||this.setDragComponent(n,a,10,10)}else{const a=n.target.getBoundingClientRect(),o=n.clientX-a.left,s=n.clientY-a.top,l=r==null?void 0:r.getParent(),c=l instanceof an&&l.getOrientation()===Fe.HORZ,f=c?10:o,d=c?10:s;let p=!1;if(this.props.onRenderDragRect){const x=C(Gs,{layout:this,node:r},r.getId()),R=this.props.onRenderDragRect(x,r,void 0);R&&(this.setDragComponent(n,R,f,d),p=!0)}p||(ET()?this.setDragComponent(n,C(Gs,{node:r,layout:this}),f,d):n.dataTransfer.setDragImage(r.getTabStamp(),f,d))}}),q(this,"onDragEnterRaw",n=>{this.dragEnterCount++,this.dragEnterCount===1&&this.onDragEnter(n)}),q(this,"onDragLeaveRaw",n=>{this.dragEnterCount--,this.dragEnterCount===0&&this.onDragLeave(n)}),q(this,"onDragEnter",n=>{if(!dn.dragState&&this.props.onExternalDrag){const r=this.props.onExternalDrag(n);if(r){const i=ct.fromJson(r.json,this.props.model,!1);dn.dragState=new Vc(this.mainLayout,"external",i,r.json,r.onDrop)}}if(dn.dragState){if(this.windowId!==wn.MAIN_WINDOW_ID&&dn.dragState.mainLayout===this.mainLayout&&dn.dragState.mainLayout.setDraggingOverWindow(!0),dn.dragState.mainLayout!==this.mainLayout)return;n.preventDefault(),this.dropInfo=void 0;const r=this.selfRef.current;this.outlineDiv=this.currentDocument.createElement("div"),this.outlineDiv.className=this.getClassName(ee.FLEXLAYOUT__OUTLINE_RECT),this.outlineDiv.style.visibility="hidden";const i=this.props.model.getAttribute("tabDragSpeed");this.outlineDiv.style.transition=`top ${i}s, left ${i}s, width ${i}s, height ${i}s`,r.appendChild(this.outlineDiv),this.dragging=!0,this.showOverlay(!0),!this.isDraggingOverWindow&&this.props.model.getMaximizedTabset(this.windowId)===void 0&&this.setState({showEdges:this.props.model.isEnableEdgeDock()});const a=this.selfRef.current.getBoundingClientRect();new Re(n.clientX-a.left,n.clientY-a.top,1,1).positionElement(this.outlineDiv)}}),q(this,"onDragOver",n=>{var r;if(this.dragging&&!this.isDraggingOverWindow){n.preventDefault();const i=(r=this.selfRef.current)==null?void 0:r.getBoundingClientRect(),a={x:n.clientX-((i==null?void 0:i.left)??0),y:n.clientY-((i==null?void 0:i.top)??0)};this.checkForBorderToShow(a.x,a.y);const o=this.props.model.findDropTargetNode(this.windowId,dn.dragState.dragNode,a.x,a.y);o&&(this.dropInfo=o,this.outlineDiv&&(this.outlineDiv.className=this.getClassName(o.className),o.rect.positionElement(this.outlineDiv),this.outlineDiv.style.visibility="visible"))}}),q(this,"onDragLeave",n=>{this.dragging&&(this.windowId!==wn.MAIN_WINDOW_ID&&dn.dragState.mainLayout.setDraggingOverWindow(!1),this.clearDragLocal())}),q(this,"onDrop",n=>{if(this.dragging){n.preventDefault();const r=dn.dragState;if(this.dropInfo)if(r.dragJson!==void 0){const i=this.doAction(Pe.addNode(r.dragJson,this.dropInfo.node.getId(),this.dropInfo.location,this.dropInfo.index));r.fnNewNodeDropped!==void 0&&r.fnNewNodeDropped(i,n)}else r.dragNode!==void 0&&this.doAction(Pe.moveNode(r.dragNode.getId(),this.dropInfo.node.getId(),this.dropInfo.location,this.dropInfo.index));this.mainLayout.clearDragMain()}this.dragEnterCount=0}),this.orderedTabIds=[],this.orderedTabMoveableIds=[],this.selfRef=ei(),this.moveablesRef=ei(),this.mainRef=ei(),this.findBorderBarSizeRef=ei(),this.supportsPopout=e.supportsPopout!==void 0?e.supportsPopout:ZT,this.popoutURL=e.popoutURL?e.popoutURL:"popout.html",this.icons={...JT,...e.icons},this.windowId=e.windowId?e.windowId:wn.MAIN_WINDOW_ID,this.mainLayout=this.props.mainLayout?this.props.mainLayout:this,this.isDraggingOverWindow=!1,this.layoutWindow=this.props.model.getwindowsMap().get(this.windowId),this.layoutWindow.layout=this,this.popoutWindowName=this.props.popoutWindowName||"Popout Window",this.state={rect:Re.empty(),editingTab:void 0,showEdges:!1,showOverlay:!1,calculatedBorderBarSize:29,layoutRevision:0,forceRevision:0,showHiddenBorder:be.CENTER},this.isMainWindow=this.windowId===wn.MAIN_WINDOW_ID}componentDidMount(){if(this.updateRect(),this.currentDocument=this.selfRef.current.ownerDocument,this.currentWindow=this.currentDocument.defaultView,this.layoutWindow.window=this.currentWindow,this.layoutWindow.toScreenRectFunction=e=>this.getScreenRect(e),this.resizeObserver=new ResizeObserver(e=>{requestAnimationFrame(()=>{this.updateRect()})}),this.selfRef.current&&this.resizeObserver.observe(this.selfRef.current),this.isMainWindow)this.props.model.addChangeListener(this.onModelChange),this.updateLayoutMetrics();else{this.currentWindow.addEventListener("resize",()=>{this.updateRect()});const e=this.props.mainLayout.getRootDiv(),n=this.selfRef.current;Dg(e,n),this.styleObserver=new MutationObserver(()=>{Dg(e,n)&&this.redraw("mutation observer")}),this.styleObserver.observe(e,{attributeFilter:["style"]})}document.addEventListener("visibilitychange",()=>{for(const[e,n]of this.props.model.getwindowsMap())n.layout&&this.redraw("visibility change")})}componentDidUpdate(){this.currentDocument=this.selfRef.current.ownerDocument,this.currentWindow=this.currentDocument.defaultView,this.isMainWindow&&(this.props.model!==this.previousModel&&(this.previousModel!==void 0&&this.previousModel.removeChangeListener(this.onModelChange),this.props.model.getwindowsMap().get(this.windowId).layout=this,this.props.model.addChangeListener(this.onModelChange),this.layoutWindow=this.props.model.getwindowsMap().get(this.windowId),this.layoutWindow.layout=this,this.layoutWindow.toScreenRectFunction=e=>this.getScreenRect(e),this.previousModel=this.props.model,this.tidyMoveablesMap()),this.updateLayoutMetrics())}componentWillUnmount(){var e,n;this.selfRef.current&&((e=this.resizeObserver)==null||e.unobserve(this.selfRef.current)),this.isMainWindow&&this.props.model.removeChangeListener(this.onModelChange),(n=this.styleObserver)==null||n.disconnect()}render(){if(!this.selfRef.current)return C("div",{ref:this.selfRef,className:this.getClassName(ee.FLEXLAYOUT__LAYOUT),children:[C("div",{ref:this.moveablesRef,className:this.getClassName(ee.FLEXLAYOUT__LAYOUT_MOVEABLES)},"__moveables__"),this.renderMetricsElements()]});const e=this.props.model;e.getRoot(this.windowId).calcMinMaxSize(),e.getRoot(this.windowId).setPaths(""),e.getBorderSet().setPaths();const n=this.renderLayout(),r=this.renderBorders(n),i=this.renderTabs(),a=this.reorderComponents(i,this.orderedTabIds);let o=null,s=null,l=null,c=null;if(this.isMainWindow){o=this.renderWindows(),c=this.renderMetricsElements();const f=this.renderTabMoveables();s=this.reorderComponents(f,this.orderedTabMoveableIds),l=C("div",{className:this.getClassName(ee.FLEXLAYOUT__LAYOUT_TAB_STAMPS),children:this.renderTabStamps()},"__tabStamps__")}return C("div",{ref:this.selfRef,className:this.getClassName(ee.FLEXLAYOUT__LAYOUT),onDragEnter:this.onDragEnterRaw,onDragLeave:this.onDragLeaveRaw,onDragOver:this.onDragOver,onDrop:this.onDrop,children:[C("div",{ref:this.moveablesRef,className:this.getClassName(ee.FLEXLAYOUT__LAYOUT_MOVEABLES)},"__moveables__"),c,C($T,{layout:this,show:this.state.showOverlay},"__overlay__"),r,a,s,l,this.state.portal,o]})}renderBorders(e){const n=this.getClassName(ee.FLEXLAYOUT__LAYOUT_MAIN),r=this.props.model.getBorderSet().getBorderMap();if(this.isMainWindow&&r.size>0){e=C("div",{className:n,ref:this.mainRef,children:e});const i=new Map,a=new Map;for(const[l,c]of be.values){const f=r.get(c);f&&f.isShowing()&&(!f.isAutoHide()||f.isAutoHide()&&(f.getChildren().length>0||this.state.showHiddenBorder===c))&&(i.set(c,C(NT,{layout:this,border:f,size:this.state.calculatedBorderBarSize})),a.set(c,C(CT,{layout:this,border:f,show:f.getSelected()!==-1})))}const o=this.getClassName(ee.FLEXLAYOUT__LAYOUT_BORDER_CONTAINER),s=this.getClassName(ee.FLEXLAYOUT__LAYOUT_BORDER_CONTAINER_INNER);if(this.props.model.getBorderSet().getLayoutHorizontal()){const l=C("div",{className:s,style:{flexDirection:"column"},children:[a.get(be.TOP),C("div",{className:s,style:{flexDirection:"row"},children:[a.get(be.LEFT),e,a.get(be.RIGHT)]}),a.get(be.BOTTOM)]});return C("div",{className:o,style:{flexDirection:"column"},children:[i.get(be.TOP),C("div",{className:s,style:{flexDirection:"row"},children:[i.get(be.LEFT),l,i.get(be.RIGHT)]}),i.get(be.BOTTOM)]})}else{const l=C("div",{className:s,style:{flexDirection:"row"},children:[a.get(be.LEFT),C("div",{className:s,style:{flexDirection:"column"},children:[a.get(be.TOP),e,a.get(be.BOTTOM)]}),a.get(be.RIGHT)]});return C("div",{className:o,style:{flexDirection:"row"},children:[i.get(be.LEFT),C("div",{className:s,style:{flexDirection:"column"},children:[i.get(be.TOP),l,i.get(be.BOTTOM)]}),i.get(be.RIGHT)]})}}else return C("div",{className:n,ref:this.mainRef,style:{position:"absolute",top:0,left:0,bottom:0,right:0,display:"flex"},children:e})}renderLayout(){return C(At,{children:[C(P0,{layout:this,node:this.props.model.getRoot(this.windowId)},"__row__"),this.renderEdgeIndicators()]})}renderEdgeIndicators(){const e=[],n=this.icons.edgeArrow;if(this.state.showEdges){const r=this.props.model.getRoot(this.windowId).getRect(),i=Fc,a=Ig,o=Fc/2,s=this.getClassName(ee.FLEXLAYOUT__EDGE_RECT),l=50;e.push(C("div",{style:{top:0,left:r.width/2-o,width:i,height:a,borderBottomLeftRadius:l,borderBottomRightRadius:l},className:s+" "+this.getClassName(ee.FLEXLAYOUT__EDGE_RECT_TOP),children:C("div",{style:{transform:"rotate(180deg)"},children:n})},"North")),e.push(C("div",{style:{top:r.height/2-o,left:0,width:a,height:i,borderTopRightRadius:l,borderBottomRightRadius:l},className:s+" "+this.getClassName(ee.FLEXLAYOUT__EDGE_RECT_LEFT),children:C("div",{style:{transform:"rotate(90deg)"},children:n})},"West")),e.push(C("div",{style:{top:r.height-a,left:r.width/2-o,width:i,height:a,borderTopLeftRadius:l,borderTopRightRadius:l},className:s+" "+this.getClassName(ee.FLEXLAYOUT__EDGE_RECT_BOTTOM),children:C("div",{children:n})},"South")),e.push(C("div",{style:{top:r.height/2-o,left:r.width-a,width:a,height:i,borderTopLeftRadius:l,borderBottomLeftRadius:l},className:s+" "+this.getClassName(ee.FLEXLAYOUT__EDGE_RECT_RIGHT),children:C("div",{style:{transform:"rotate(-90deg)"},children:n})},"East"))}return e}renderWindows(){const e=[];if(this.supportsPopout){const n=this.props.model.getwindowsMap();let r=1;for(const[i,a]of n)i!==wn.MAIN_WINDOW_ID&&(e.push(C(DT,{layout:this,title:this.popoutWindowName+" "+r,layoutWindow:a,url:this.popoutURL+"?id="+i,onSetWindow:this.onSetWindow,onCloseWindow:this.onCloseWindow,children:C("div",{className:this.props.popoutClassName,children:C(dn,{...this.props,windowId:i,mainLayout:this})})},i)),r++)}return e}renderTabMoveables(){const e=new Map;return this.props.model.visitNodes(n=>{if(n instanceof ct){const r=n,i=this.getMoveableElement(r.getId());r.setMoveableElement(i);const a=r.isSelected(),o=r.getParent().getContentRect(),s=a||!r.isEnableRenderOnDemand(),l=r.isRendered()||s&&o.width>0&&o.height>0;if(l){const c=r.getId()+(r.isEnableWindowReMount()?r.getWindowId():"");e.set(n.getId(),Fs(C(XT,{layout:this,node:r,rect:o,visible:s,forceRevision:this.state.forceRevision,tabsRevision:this.props.renderRevision},c),i)),r.setRendered(l)}}}),e}renderTabStamps(){const e=[];return this.props.model.visitNodes(n=>{if(n instanceof ct){const r=n;e.push(C(OT,{layout:this,node:r},r.getId()))}}),e}renderTabs(){const e=new Map;return this.props.model.visitWindowNodes(this.windowId,n=>{if(n instanceof ct){const r=n,i=r.isSelected(),a=r.getPath();(r.isRendered()||i||!r.isEnableRenderOnDemand())&&e.set(r.getId(),C(UT,{layout:this,path:a,node:r,selected:i},r.getId()))}}),e}renderMetricsElements(){return C("div",{ref:this.findBorderBarSizeRef,className:this.getClassName(ee.FLEXLAYOUT__BORDER_SIZER),children:"FindBorderBarSize"},"findBorderBarSize")}checkForBorderToShow(e,n){const r=this.getBoundingClientRect(this.mainRef.current),i=r.getCenter(),a=Ig,o=Fc/2;let s=!1;this.props.model.isEnableEdgeDock()&&this.state.showHiddenBorder===be.CENTER&&(n>i.y-o&&n<i.y+o||e>i.x-o&&e<i.x+o)&&(s=!0);let l=be.CENTER;s||(e<=r.x+a?l=be.LEFT:e>=r.getRight()-a?l=be.RIGHT:n<=r.y+a?l=be.TOP:n>=r.getBottom()-a&&(l=be.BOTTOM)),l!==this.state.showHiddenBorder&&this.setState({showHiddenBorder:l})}tidyMoveablesMap(){const e=new Map;this.props.model.visitNodes((n,r)=>{n instanceof ct&&e.set(n.getId(),n)});for(const[n,r]of this.moveableElementMap)e.has(n)||(r.remove(),this.moveableElementMap.delete(n))}reorderComponents(e,n){const r=[],i=new Set;let a=[];for(const o of n)e.get(o)&&(r.push(o),i.add(o));n.splice(0,n.length,...r);for(const[o,s]of e)i.has(o)||n.push(o);return a=n.map(o=>e.get(o)),a}redraw(e){this.mainLayout.setState((n,r)=>({forceRevision:n.forceRevision+1}))}redrawInternal(e){this.mainLayout.setState((n,r)=>({layoutRevision:n.layoutRevision+1}))}doAction(e){if(this.props.onAction!==void 0){const n=this.props.onAction(e);return n!==void 0?this.props.model.doAction(n):void 0}else return this.props.model.doAction(e)}getBoundingClientRect(e){const n=this.getDomRect();return n?Re.getBoundingClientRect(e).relativeTo(n):Re.empty()}getMoveableContainer(){return this.moveablesRef.current}getMoveableElement(e){let n=this.moveableElementMap.get(e);return n===void 0&&(n=document.createElement("div"),this.moveablesRef.current.appendChild(n),n.className=ee.FLEXLAYOUT__TAB_MOVEABLE,this.moveableElementMap.set(e,n)),n}getMainLayout(){return this.mainLayout}getCurrentDocument(){return this.currentDocument}getDomRect(){return this.selfRef.current?Re.fromDomRect(this.selfRef.current.getBoundingClientRect()):Re.empty()}getWindowId(){return this.windowId}getRootDiv(){return this.selfRef.current}getMainElement(){return this.mainRef.current}getFactory(){return this.props.factory}isSupportsPopout(){return this.supportsPopout}isRealtimeResize(){return this.props.realtimeResize??!1}getPopoutURL(){return this.popoutURL}setEditingTab(e){this.setState({editingTab:e})}getEditingTab(){return this.state.editingTab}getModel(){return this.props.model}getScreenRect(e){const n=e.clone(),r=this.getDomRect(),i=60,a=2;return n.x=this.currentWindow.screenX+this.currentWindow.scrollX+a/2+r.x+n.x,n.y=this.currentWindow.screenY+this.currentWindow.scrollY+(i-a/2)+r.y+n.y,n.height+=i,n.width+=a,n}addTabToTabSet(e,n){if(this.props.model.getNodeById(e)!==void 0)return this.doAction(Pe.addNode(n,e,be.CENTER,-1))}addTabToActiveTabSet(e){const n=this.props.model.getActiveTabset(this.windowId);if(n!==void 0)return this.doAction(Pe.addNode(e,n.getId(),be.CENTER,-1))}maximize(e){this.doAction(Pe.maximizeToggle(e.getId(),this.getWindowId()))}customizeTab(e,n){this.props.onRenderTab&&this.props.onRenderTab(e,n)}customizeTabSet(e,n){this.props.onRenderTabSet&&this.props.onRenderTabSet(e,n)}i18nName(e,n){let r;return this.props.i18nMapper&&(r=this.props.i18nMapper(e,n)),r===void 0&&(r=e+(n===void 0?"":n)),r}getShowOverflowMenu(){return this.props.onShowOverflowMenu}getTabSetPlaceHolderCallback(){return this.props.onTabSetPlaceHolder}showContextMenu(e,n){this.props.onContextMenu&&this.props.onContextMenu(e,n)}auxMouseClick(e,n){this.props.onAuxMouseClick&&this.props.onAuxMouseClick(e,n)}showOverlay(e){this.setState({showOverlay:e}),Su(!e,this.currentDocument)}addTabWithDragAndDrop(e,n,r){const i=ct.fromJson(n,this.props.model,!1);dn.dragState=new Vc(this.mainLayout,"add",i,n,r)}moveTabWithDragAndDrop(e,n){this.setDragNode(e,n)}setDragComponent(e,n,r,i){const a=C("div",{style:{position:"unset"},className:this.getClassName(ee.FLEXLAYOUT__LAYOUT)+" "+this.getClassName(ee.FLEXLAYOUT__DRAG_RECT),children:n}),o=this.currentDocument.createElement("div");o.setAttribute("data-layout-path","/drag-rectangle"),o.style.position="absolute",o.style.left="-10000px",o.style.top="-10000px",this.currentDocument.body.appendChild(o),xT(o).render(a),e.dataTransfer.setDragImage(o,r,i),setTimeout(()=>{this.currentDocument.body.removeChild(o)},0)}setDraggingOverWindow(e){this.isDraggingOverWindow!==e&&(this.outlineDiv&&(this.outlineDiv.style.visibility=e?"hidden":"visible"),e?this.setState({showEdges:!1}):this.props.model.getMaximizedTabset(this.windowId)===void 0&&this.setState({showEdges:this.props.model.isEnableEdgeDock()}),this.isDraggingOverWindow=e)}clearDragMain(){dn.dragState=void 0,this.windowId===wn.MAIN_WINDOW_ID&&(this.isDraggingOverWindow=!1);for(const[,e]of this.props.model.getwindowsMap())e.layout.clearDragLocal()}clearDragLocal(){this.setState({showEdges:!1}),this.showOverlay(!1),this.dragEnterCount=0,this.dragging=!1,this.outlineDiv&&(this.selfRef.current.removeChild(this.outlineDiv),this.outlineDiv=void 0)}};q(k0,"dragState");let jT=k0;const JT={close:C(Lg,{}),closeTabset:C(Lg,{}),popout:C(FT,{}),maximize:C(PT,{}),restore:C(VT,{}),more:C(kT,{}),edgeArrow:C(BT,{}),activeTabset:C(WT,{})},ZT=M0(),Fc=100,Ig=10;class Vc{constructor(e,n,r,i,a){q(this,"mainLayout"),q(this,"dragSource"),q(this,"dragNode"),q(this,"dragJson"),q(this,"fnNewNodeDropped"),this.mainLayout=e,this.dragSource=n,this.dragNode=r,this.dragJson=i,this.fnNewNodeDropped=a}}class KT{constructor(e){this.data=e,this.prev=null,this.next=null}}class Pg{constructor(){this.head=null,this.tail=null,this.size=0}getHead(){return this.head}getTail(){return this.tail}getSize(){return this.size}append(e){this.tail?(this.tail.next=e,e.prev=this.tail,this.tail=e):this.head=this.tail=e,this.size++}prepend(e){return this.head?(this.head.prev=e,e.next=this.head,this.head=e):this.head=this.tail=e,this.size++,e}pop(){if(this.tail){const e=this.tail;return e.prev?(this.tail=e.prev,this.tail.next=null):this.head=this.tail=null,this.size--,e.prev=null,e}else return null}dequeue(){if(this.head){const e=this.head;return e.next?(this.head=e.next,this.head.prev=null):this.head=this.tail=null,this.size--,e.next=null,e}else return null}remove(e){e.prev==null?this.dequeue():e.next==null?this.pop():(e.next.prev=e.prev,e.prev.next=e.next,e.next=null,e.prev=null,this.size--)}}class QT{constructor(e){this.capacity=e,this.list=new Pg,this.map=new Map}has(e){return this.map.has(e)}get(e){const n=this.map.get(e);return n?(this.list.remove(n.listNode),this.list.prepend(n.listNode),n?n.value:null):null}getSize(){return this.list.getSize()}getCapacity(){return this.capacity}insert(e,n){const r=this.map.get(e);for(r&&this.list.remove(r.listNode);this.list.getSize()>=this.capacity;)this.map.delete(this.list.pop().data);const i=this.list.prepend(new KT(e));this.map.set(e,{value:n,listNode:i})}getOrInsert(e,n){let r=this.get(e);return r==null&&(r=n(e),this.insert(e,r)),r}removeLRU(){const e=this.list.pop();if(!e)return null;const n=e.data,r=this.map.get(n).value;return this.map.delete(n),[n,r]}clear(){this.list=new Pg,this.map=new Map}}var eS={};const Cu=typeof process<"u"&&eS&&!0;function $e(t){if(!Cu&&!t)throw new Error("Assertion failed.")}function tS(t,e){t.indexOf(e)===-1&&t.push(e)}function nS(t,e){const n=t.indexOf(e);n!==-1&&t.splice(n,1)}function rS(t,e){return $e(e>=0&&e<=31),t.TEXTURE0+e}var Ke;(t=>{class e{constructor(p=0,x=0,R=0,O=0){this.x=p,this.y=x,this.width=R,this.height=O}set(p,x,R,O){this.x=p,this.y=x,this.width=R,this.height=O}equals(p){return this.x===p.x&&this.y===p.y&&this.width===p.width&&this.height===p.height}}t.Rect=e;const c=class c{constructor(p,x,R,O){this.redF=p,this.greenF=x,this.blueF=R,this.alphaF=O}equals(p){return this.redF===p.redF&&this.greenF===p.greenF&&this.blueF===p.blueF&&this.alphaF===p.alphaF}};c.TRANSPARENT=new c(0,0,0,0);let n=c;t.Color=n,(d=>{d[d.ZERO=0]="ZERO",d[d.ONE=1]="ONE",d[d.SOURCE_COLOR=2]="SOURCE_COLOR",d[d.TARGET_COLOR=3]="TARGET_COLOR",d[d.INVERSE_SOURCE_COLOR=4]="INVERSE_SOURCE_COLOR",d[d.INVERSE_TARGET_COLOR=5]="INVERSE_TARGET_COLOR",d[d.SOURCE_ALPHA=6]="SOURCE_ALPHA",d[d.TARGET_ALPHA=7]="TARGET_ALPHA",d[d.INVERSE_SOURCE_ALPHA=8]="INVERSE_SOURCE_ALPHA",d[d.INVERSE_TARGET_ALPHA=9]="INVERSE_TARGET_ALPHA",d[d.CONSTANT=10]="CONSTANT",d[d.INVERSE_CONSTANT=11]="INVERSE_CONSTANT"})(t.BlendOperation||(t.BlendOperation={})),(d=>{d[d.TRIANGLES=0]="TRIANGLES",d[d.TRIANGLE_STRIP=1]="TRIANGLE_STRIP"})(t.Primitive||(t.Primitive={}));class r{constructor(){this.resizeEventHandlers=new Set}setCopyBlendState(){this.setBlendState(1,0)}setAddBlendState(){this.setBlendState(1,1)}setPremultipliedBlendState(){this.setBlendState(1,8)}setUnpremultipliedBlendState(){this.setBlendState(6,8)}addAfterResizeEventHandler(p){this.resizeEventHandlers.add(p)}removeAfterResizeEventHandler(p){this.resizeEventHandlers.delete(p)}}t.Context=r,(d=>{d[d.FLOAT=0]="FLOAT",d[d.BYTE=1]="BYTE"})(t.AttributeType||(t.AttributeType={}));function i(d){return d==0?4:1}t.attributeByteLength=i;class a{constructor(p,x,R,O){this.name=p,this.type=x,this.count=R,this.byteOffset=O}}t.Attribute=a;class o{constructor(){this._attributes=[],this._stride=0}get attributes(){return this._attributes}get stride(){return this._stride}add(p,x,R){return this.attributes.push(new a(p,x,R,this.stride)),this._stride+=R*i(x),this}}t.VertexFormat=o;class s{uploadFloat32Array(p){this.upload(new Uint8Array(p.buffer),0)}uploadFloats(p){this.uploadFloat32Array(new Float32Array(p))}}t.VertexBuffer=s,(d=>{d[d.NEAREST=0]="NEAREST",d[d.LINEAR=1]="LINEAR"})(t.PixelFilter||(t.PixelFilter={})),(d=>{d[d.REPEAT=0]="REPEAT",d[d.CLAMP=1]="CLAMP"})(t.PixelWrap||(t.PixelWrap={}));const f=class f{constructor(p,x,R){this.minFilter=p,this.magFilter=x,this.wrap=R}};f.LINEAR_CLAMP=new f(1,1,1),f.LINEAR_MIN_NEAREST_MAG_CLAMP=new f(1,0,1),f.NEAREST_CLAMP=new f(0,0,1);let l=f;t.TextureFormat=l})(Ke||(Ke={}));var Au;(t=>{const R=class R extends Ke.Context{constructor(S=document.createElement("canvas")){super(),this._attributeCount=0,this._blendOperations=0,this._contextResetHandlers=[],this._currentClearColor=Ke.Color.TRANSPARENT,this._currentRenderTarget=null,this._defaultViewport=new Ke.Rect,this._forceStateUpdate=!0,this._generation=1,this._height=0,this._oldBlendOperations=0,this._oldRenderTarget=null,this._oldViewport=new Ke.Rect,this._width=0,this.handleWebglContextRestored=()=>{this._attributeCount=0,this._currentClearColor=Ke.Color.TRANSPARENT,this._forceStateUpdate=!0,this._generation++;for(let k of this._contextResetHandlers)k()},this.ANGLE_instanced_arrays=null,this.ANGLE_instanced_arrays_generation=-1;let D=S.getContext("webgl",{alpha:!1,antialias:!1,depth:!1,preserveDrawingBuffer:!1,stencil:!1});if(D==null)throw new Error("Setup failure");this._gl=D;let N=S.style;S.width=0,S.height=0,N.width=N.height="0",S.addEventListener("webglcontextlost",k=>{k.preventDefault()}),S.addEventListener("webglcontextrestored",this.handleWebglContextRestored),this._blendOperationMap={0:this._gl.ZERO,1:this._gl.ONE,2:this._gl.SRC_COLOR,3:this._gl.DST_COLOR,4:this._gl.ONE_MINUS_SRC_COLOR,5:this._gl.ONE_MINUS_DST_COLOR,6:this._gl.SRC_ALPHA,7:this._gl.DST_ALPHA,8:this._gl.ONE_MINUS_SRC_ALPHA,9:this._gl.ONE_MINUS_DST_ALPHA,10:this._gl.CONSTANT_COLOR,11:this._gl.ONE_MINUS_CONSTANT_COLOR}}get widthInPixels(){return this._width}get heightInPixels(){return this._height}testContextLoss(){this.handleWebglContextRestored()}get gl(){return this._gl}get generation(){return this._generation}addContextResetHandler(S){tS(this._contextResetHandlers,S)}removeContextResetHandler(S){nS(this._contextResetHandlers,S)}get currentRenderTarget(){return this._currentRenderTarget}beginFrame(){this.setRenderTarget(null)}endFrame(){}setBlendState(S,D){this._blendOperations=R._packBlendModes(S,D)}setViewport(S,D,N,k){(this._currentRenderTarget!=null?this._currentRenderTarget.viewport:this._defaultViewport).set(S,D,N,k)}get viewport(){return this._currentRenderTarget!=null?this._currentRenderTarget.viewport:this._defaultViewport}get renderTargetWidthInPixels(){return this._currentRenderTarget!=null?this._currentRenderTarget.viewport.width:this._width}get renderTargetHeightInPixels(){return this._currentRenderTarget!=null?this._currentRenderTarget.viewport.height:this._height}draw(S,D,N){this._updateRenderTargetAndViewport(),f.from(D).prepare(),d.from(N).prepare(),this._updateFormat(D.format),this._updateBlendState(),this._gl.drawArrays(S==0?this._gl.TRIANGLES:this._gl.TRIANGLE_STRIP,0,Math.floor(N.byteCount/D.format.stride)),this._forceStateUpdate=!1}resize(S,D,N,k){let W=this._gl.canvas;const Y=W.getBoundingClientRect();if(this._width===S&&this._height===D&&Y.width===N&&Y.height===k)return;let X=W.style;W.width=S,W.height=D,X.width=`${N}px`,X.height=`${k}px`,this.setViewport(0,0,S,D),this._width=S,this._height=D,this.resizeEventHandlers.forEach(Z=>Z())}clear(S){this._updateRenderTargetAndViewport(),this._updateBlendState(),S.equals(this._currentClearColor)||(this._gl.clearColor(S.redF,S.greenF,S.blueF,S.alphaF),this._currentClearColor=S),this._gl.clear(this._gl.COLOR_BUFFER_BIT)}setRenderTarget(S){this._currentRenderTarget=x.from(S)}createMaterial(S,D,N){let k=new f(this,S,D,N);return k.program,k}createVertexBuffer(S){return $e(S>0&&S%4==0),new d(this,S)}createTexture(S,D,N,k){return new p(this,S,D,N,k)}createRenderTarget(S){return new x(this,p.from(S))}getANGLE_instanced_arrays(){if(this.ANGLE_instanced_arrays_generation!==this._generation&&(this.ANGLE_instanced_arrays=null),!this.ANGLE_instanced_arrays&&(this.ANGLE_instanced_arrays=this.gl.getExtension("ANGLE_instanced_arrays"),!this.ANGLE_instanced_arrays))throw new Error("Failed to get extension ANGLE_instanced_arrays");return this.ANGLE_instanced_arrays}_updateRenderTargetAndViewport(){let S=this._currentRenderTarget,D=S!=null?S.viewport:this._defaultViewport,N=this._gl;(this._forceStateUpdate||this._oldRenderTarget!=S)&&(N.bindFramebuffer(N.FRAMEBUFFER,S?S.framebuffer:null),this._oldRenderTarget=S),(this._forceStateUpdate||!this._oldViewport.equals(D))&&(N.viewport(D.x,this.renderTargetHeightInPixels-D.y-D.height,D.width,D.height),this._oldViewport.set(D.x,D.y,D.width,D.height))}_updateBlendState(){if(this._forceStateUpdate||this._oldBlendOperations!=this._blendOperations){let S=this._gl,D=this._blendOperations,N=this._oldBlendOperations,k=D&15,W=D>>4;$e(k in this._blendOperationMap),$e(W in this._blendOperationMap),D==R.COPY_BLEND_OPERATIONS?S.disable(S.BLEND):((this._forceStateUpdate||N==R.COPY_BLEND_OPERATIONS)&&S.enable(S.BLEND),S.blendFunc(this._blendOperationMap[k],this._blendOperationMap[W])),this._oldBlendOperations=D}}_updateFormat(S){let D=this._gl,N=S.attributes,k=N.length;for(let W=0;W<k;W++){let Y=N[W],X=Y.type==1;D.vertexAttribPointer(W,Y.count,X?D.UNSIGNED_BYTE:D.FLOAT,X,S.stride,Y.byteOffset)}for(;this._attributeCount<k;)D.enableVertexAttribArray(this._attributeCount),this._attributeCount++;for(;this._attributeCount>k;)this._attributeCount--,D.disableVertexAttribArray(this._attributeCount);this._attributeCount=k}getWebGLInfo(){const S=this.gl.getExtension("WEBGL_debug_renderer_info"),D=S?this.gl.getParameter(S.UNMASKED_RENDERER_WEBGL):null,N=S?this.gl.getParameter(S.UNMASKED_VENDOR_WEBGL):null,k=this.gl.getParameter(this.gl.VERSION);return{renderer:D,vendor:N,version:k}}static from(S){return $e(S==null||S instanceof R),S}static _packBlendModes(S,D){return S|D<<4}};R.COPY_BLEND_OPERATIONS=R._packBlendModes(1,0);let e=R;t.Context=e;class n{constructor(S,D,N=0,k=null,W=!0){this._material=S,this._name=D,this._generation=N,this._location=k,this._isDirty=W}get location(){let S=e.from(this._material.context);if(this._generation!=S.generation&&(this._location=S.gl.getUniformLocation(this._material.program,this._name),this._generation=S.generation,!Cu)){let D=this._material.program,N=S.gl;for(let k=0,W=N.getProgramParameter(D,N.ACTIVE_UNIFORMS);k<W;k++){let Y=N.getActiveUniform(D,k);if(Y&&Y.name==this._name)switch($e(Y.size==1),Y.type){case N.FLOAT:{$e(this instanceof r);break}case N.FLOAT_MAT3:{$e(this instanceof l);break}case N.FLOAT_VEC2:{$e(this instanceof a);break}case N.FLOAT_VEC3:{$e(this instanceof o);break}case N.FLOAT_VEC4:{$e(this instanceof s);break}case N.INT:{$e(this instanceof i);break}case N.SAMPLER_2D:{$e(this instanceof c);break}default:$e(!1)}}}if(!this._location)throw new Error("Failed to get uniform location");return this._location}}class r extends n{constructor(){super(...arguments),this._x=0}set(S){S!=this._x&&(this._x=S,this._isDirty=!0)}prepare(){let S=e.from(this._material.context);(this._generation!=S.generation||this._isDirty)&&(S.gl.uniform1f(this.location,this._x),this._isDirty=!1)}}class i extends n{constructor(){super(...arguments),this._x=0}set(S){S!=this._x&&(this._x=S,this._isDirty=!0)}prepare(){let S=e.from(this._material.context);(this._generation!=S.generation||this._isDirty)&&(S.gl.uniform1i(this.location,this._x),this._isDirty=!1)}}class a extends n{constructor(){super(...arguments),this._x=0,this._y=0}set(S,D){(S!=this._x||D!=this._y)&&(this._x=S,this._y=D,this._isDirty=!0)}prepare(){let S=e.from(this._material.context);(this._generation!=S.generation||this._isDirty)&&(S.gl.uniform2f(this.location,this._x,this._y),this._isDirty=!1)}}class o extends n{constructor(){super(...arguments),this._x=0,this._y=0,this._z=0}set(S,D,N){(S!=this._x||D!=this._y||N!=this._z)&&(this._x=S,this._y=D,this._z=N,this._isDirty=!0)}prepare(){let S=e.from(this._material.context);(this._generation!=S.generation||this._isDirty)&&(S.gl.uniform3f(this.location,this._x,this._y,this._z),this._isDirty=!1)}}class s extends n{constructor(){super(...arguments),this._x=0,this._y=0,this._z=0,this._w=0}set(S,D,N,k){(S!=this._x||D!=this._y||N!=this._z||k!=this._w)&&(this._x=S,this._y=D,this._z=N,this._w=k,this._isDirty=!0)}prepare(){let S=e.from(this._material.context);(this._generation!=S.generation||this._isDirty)&&(S.gl.uniform4f(this.location,this._x,this._y,this._z,this._w),this._isDirty=!1)}}const O=class O extends n{constructor(){super(...arguments),this._values=[1,0,0,0,1,0,0,0,1]}set(S,D,N,k,W,Y,X,Z,ie){O._cachedValues[0]=S,O._cachedValues[1]=k,O._cachedValues[2]=X,O._cachedValues[3]=D,O._cachedValues[4]=W,O._cachedValues[5]=Z,O._cachedValues[6]=N,O._cachedValues[7]=Y,O._cachedValues[8]=ie;for(let ne=0;ne<9;ne++)if(O._cachedValues[ne]!=this._values[ne]){let J=this._values;this._values=O._cachedValues,O._cachedValues=J,this._isDirty=!0;break}}prepare(){let S=e.from(this._material.context);(this._generation!=S.generation||this._isDirty)&&(S.gl.uniformMatrix3fv(this.location,!1,this._values),this._isDirty=!1)}};O._cachedValues=[1,0,0,0,1,0,0,0,1];let l=O;class c extends n{constructor(){super(...arguments),this._texture=null,this._index=-1}set(S,D){(this._texture!=S||this._index!=D)&&(this._texture=p.from(S),this._index=D,this._isDirty=!0)}prepare(){let S=e.from(this._material.context),D=S.gl;$e(this._texture==null||S.currentRenderTarget==null||this._texture!=S.currentRenderTarget.texture),(this._generation!=S.generation||this._isDirty)&&(D.uniform1i(this.location,this._index),this._isDirty=!1),D.activeTexture(rS(D,this._index)),D.bindTexture(D.TEXTURE_2D,this._texture!=null&&this._texture.width>0&&this._texture.height>0?this._texture.texture:null)}}class f{constructor(S,D,N,k,W={},Y=[],X=0,Z=null){this._context=S,this._format=D,this._vertexSource=N,this._fragmentSource=k,this._uniformsMap=W,this._uniformsList=Y,this._generation=X,this._program=Z}get context(){return this._context}get format(){return this._format}get vertexSource(){return this._vertexSource}get fragmentSource(){return this._fragmentSource}setUniformFloat(S,D){let N=this._uniformsMap[S]||null;N==null&&(N=new r(this,S),this._uniformsMap[S]=N,this._uniformsList.push(N)),$e(N instanceof r),N.set(D)}setUniformInt(S,D){let N=this._uniformsMap[S]||null;N==null&&(N=new i(this,S),this._uniformsMap[S]=N,this._uniformsList.push(N)),$e(N instanceof i),N.set(D)}setUniformVec2(S,D,N){let k=this._uniformsMap[S]||null;k==null&&(k=new a(this,S),this._uniformsMap[S]=k,this._uniformsList.push(k)),$e(k instanceof a),k.set(D,N)}setUniformVec3(S,D,N,k){let W=this._uniformsMap[S]||null;W==null&&(W=new o(this,S),this._uniformsMap[S]=W,this._uniformsList.push(W)),$e(W instanceof o),W.set(D,N,k)}setUniformVec4(S,D,N,k,W){let Y=this._uniformsMap[S]||null;Y==null&&(Y=new s(this,S),this._uniformsMap[S]=Y,this._uniformsList.push(Y)),$e(Y instanceof s),Y.set(D,N,k,W)}setUniformMat3(S,D,N,k,W,Y,X,Z,ie,ne){let J=this._uniformsMap[S]||null;J==null&&(J=new l(this,S),this._uniformsMap[S]=J,this._uniformsList.push(J)),$e(J instanceof l),J.set(D,N,k,W,Y,X,Z,ie,ne)}setUniformSampler(S,D,N){let k=this._uniformsMap[S]||null;k==null&&(k=new c(this,S),this._uniformsMap[S]=k,this._uniformsList.push(k)),$e(k instanceof c),k.set(D,N)}get program(){let S=this._context.gl;if(this._generation!=this._context.generation){this._program=S.createProgram(),this._compileShader(S,S.VERTEX_SHADER,this.vertexSource),this._compileShader(S,S.FRAGMENT_SHADER,this.fragmentSource);let D=this.format.attributes;for(let N=0;N<D.length;N++)S.bindAttribLocation(this._program,N,D[N].name);if(S.linkProgram(this._program),!S.getProgramParameter(this._program,S.LINK_STATUS))throw new Error(`${S.getProgramInfoLog(this._program)}`);if(this._generation=this._context.generation,!Cu)for(let N of D)for(let k=0,W=S.getProgramParameter(this.program,S.ACTIVE_ATTRIBUTES);k<W;k++){let Y=S.getActiveAttrib(this.program,k);if(Y&&Y.name==N.name)switch($e(Y.size==1),N.count){case 1:{$e(Y.type==S.FLOAT);break}case 2:{$e(Y.type==S.FLOAT_VEC2);break}case 3:{$e(Y.type==S.FLOAT_VEC3);break}case 4:{$e(Y.type==S.FLOAT_VEC4);break}default:$e(!1)}}}return this._program}prepare(){this._context.gl.useProgram(this.program);for(let S of this._uniformsList)S.prepare()}_compileShader(S,D,N){let k=S.createShader(D);if(!k)throw new Error("Failed to create shader");if(S.shaderSource(k,N),S.compileShader(k),!S.getShaderParameter(k,S.COMPILE_STATUS))throw new Error(`${S.getShaderInfoLog(k)}`);if(!this._program)throw new Error("Tried to attach shader before program was created");S.attachShader(this._program,k)}static from(S){return $e(S==null||S instanceof f),S}}const A=class A extends Ke.VertexBuffer{constructor(S,D){super(),this._generation=0,this._buffer=null,this._bytes=null,this._isDirty=!0,this._dirtyMin=A.INT_MAX,this._dirtyMax=0,this._totalMin=A.INT_MAX,this._totalMax=0,this._byteCount=0,this._context=S,this._byteCount=D,this._bytes=new Uint8Array(D)}get context(){return this._context}get byteCount(){return this._byteCount}move(S,D,N){$e(N>=0),$e(0<=S&&S+N<=this._byteCount),$e(0<=D&&D+N<=this._byteCount),this._bytes&&S!=D&&N!=0&&(this._bytes.set(this._bytes.subarray(S,this._byteCount),D),this._growDirtyRegion(Math.min(S,D),Math.max(S,D)+N))}upload(S,D=0){$e(0<=D&&D+S.length<=this._byteCount),$e(this._bytes!=null),this._bytes.set(S,D),this._growDirtyRegion(D,D+S.length)}free(){this._buffer&&this._context.gl.deleteBuffer(this._buffer),this._generation=0}prepare(){let S=this._context.gl;this._generation!==this._context.generation&&(this._buffer=S.createBuffer(),this._generation=this._context.generation,this._isDirty=!0),S.bindBuffer(S.ARRAY_BUFFER,this._buffer),this._isDirty&&(S.bufferData(S.ARRAY_BUFFER,this._byteCount,S.DYNAMIC_DRAW),this._dirtyMin=this._totalMin,this._dirtyMax=this._totalMax,this._isDirty=!1),this._dirtyMin<this._dirtyMax&&(S.bufferSubData(S.ARRAY_BUFFER,this._dirtyMin,this._bytes.subarray(this._dirtyMin,this._dirtyMax)),this._dirtyMin=A.INT_MAX,this._dirtyMax=0)}_growDirtyRegion(S,D){this._dirtyMin=Math.min(this._dirtyMin,S),this._dirtyMax=Math.max(this._dirtyMax,D),this._totalMin=Math.min(this._totalMin,S),this._totalMax=Math.max(this._totalMax,D)}static from(S){return $e(S==null||S instanceof A),S}};A.INT_MAX=2147483647;let d=A;class p{constructor(S,D,N,k,W=null,Y=null,X=0,Z=!0,ie=!0){this._context=S,this._format=D,this._width=N,this._height=k,this._pixels=W,this._texture=Y,this._generation=X,this._isFormatDirty=Z,this._isContentDirty=ie}get context(){return this._context}get format(){return this._format}get width(){return this._width}get height(){return this._height}resize(S,D,N=null){this._width=S,this._height=D,this._pixels=N,this._isContentDirty=!0}setFormat(S){this._format!=S&&(this._format=S,this._isFormatDirty=!0)}get texture(){let S=this._context.gl;return this._generation!=this._context.generation&&(this._texture=S.createTexture(),this._generation=this._context.generation,this._isFormatDirty=!0,this._isContentDirty=!0),this._isFormatDirty&&(S.bindTexture(S.TEXTURE_2D,this._texture),S.texParameteri(S.TEXTURE_2D,S.TEXTURE_MAG_FILTER,this.format.magFilter==0?S.NEAREST:S.LINEAR),S.texParameteri(S.TEXTURE_2D,S.TEXTURE_MIN_FILTER,this.format.minFilter==0?S.NEAREST:S.LINEAR),S.texParameteri(S.TEXTURE_2D,S.TEXTURE_WRAP_S,this.format.wrap==0?S.REPEAT:S.CLAMP_TO_EDGE),S.texParameteri(S.TEXTURE_2D,S.TEXTURE_WRAP_T,this.format.wrap==0?S.REPEAT:S.CLAMP_TO_EDGE),this._isFormatDirty=!1),this._isContentDirty&&(S.bindTexture(S.TEXTURE_2D,this._texture),S.texImage2D(S.TEXTURE_2D,0,S.RGBA,this._width,this._height,0,S.RGBA,S.UNSIGNED_BYTE,this._pixels),this._isContentDirty=!1),this._texture}free(){this.texture&&(this._context.gl.deleteTexture(this.texture),this._generation=0)}static from(S){return $e(S==null||S instanceof p),S}}class x{constructor(S,D,N=null,k=0,W=!0,Y=new Ke.Rect){this._context=S,this._texture=D,this._framebuffer=N,this._generation=k,this._isDirty=W,this._viewport=Y}get context(){return this._context}get texture(){return this._texture}get viewport(){return this._viewport}setColor(S){this._texture!=S&&(this._texture=p.from(S),this._isDirty=!0)}get framebuffer(){let S=this._context.gl,D=this._texture.texture;return this._generation!=this._context.generation&&(this._framebuffer=S.createFramebuffer(),this._generation=this._context.generation,this._isDirty=!0),this._isDirty&&(S.bindFramebuffer(S.FRAMEBUFFER,this._framebuffer),S.framebufferTexture2D(S.FRAMEBUFFER,S.COLOR_ATTACHMENT0,S.TEXTURE_2D,D,0),$e(S.checkFramebufferStatus(S.FRAMEBUFFER)==S.FRAMEBUFFER_COMPLETE),this._isDirty=!1),this._framebuffer}free(){this._framebuffer&&(this._context.gl.deleteFramebuffer(this._framebuffer),this._generation=0)}static from(S){return $e(S==null||S instanceof x),S}}})(Au||(Au={}));function Bi(t,e,n){let{m00:r,m01:i,m02:a,m10:o,m11:s,m12:l}=n;t.setUniformMat3(e,r,i,a,o,s,l,0,0,1)}function kg(t,e,n){t.setUniformVec2(e,n.x,n.y)}function B0(t,e,n){t.setRenderTarget(e),t.setViewport(0,0,e.texture.width,e.texture.height),n(),t.setRenderTarget(null)}const Al=new Ke.VertexFormat;Al.add("configSpacePos",Ke.AttributeType.FLOAT,2);Al.add("color",Ke.AttributeType.FLOAT,3);const iS=`
  uniform mat3 configSpaceToNDC;

  attribute vec2 configSpacePos;
  attribute vec3 color;
  varying vec3 vColor;

  void main() {
    vColor = color;
    vec2 position = (configSpaceToNDC * vec3(configSpacePos, 1)).xy;
    gl_Position = vec4(position, 1, 1);
  }
`,aS=`
  precision mediump float;
  varying vec3 vColor;

  void main() {
    gl_FragColor = vec4(vColor.rgb, 1);
  }
`;class Ru{constructor(e){this.gl=e,this.rects=[],this.colors=[],this.buffer=null}getRectCount(){return this.rects.length}getBuffer(){if(this.buffer)return this.buffer;const e=[[0,0],[1,0],[0,1],[1,0],[0,1],[1,1]],n=new Uint8Array(Al.stride*e.length*this.rects.length),r=new Float32Array(n.buffer);let i=0;for(let a=0;a<this.rects.length;a++){const o=this.rects[a],s=this.colors[a];for(let l of e)r[i++]=o.origin.x+l[0]*o.size.x,r[i++]=o.origin.y+l[1]*o.size.y,r[i++]=s.r,r[i++]=s.g,r[i++]=s.b}if(i!==r.length)throw new Error("Buffer expected to be full but wasn't");return this.buffer=this.gl.createVertexBuffer(n.length),this.buffer.upload(n),this.buffer}addRect(e,n){this.rects.push(e),this.colors.push(n),this.buffer&&(this.buffer.free(),this.buffer=null)}free(){this.buffer&&(this.buffer.free(),this.buffer=null)}}class oS{constructor(e){this.gl=e,this.material=e.createMaterial(Al,iS,aS)}render(e){Bi(this.material,"configSpaceToNDC",(()=>{const n=ke.betweenRects(e.configSpaceSrcRect,e.physicalSpaceDstRect),r=new Q(this.gl.viewport.width,this.gl.viewport.height);return ke.withTranslation(new Q(-1,1)).times(ke.withScale(new Q(2,-2).dividedByPointwise(r))).times(n)})()),this.gl.setUnpremultipliedBlendState(),this.gl.draw(Ke.Primitive.TRIANGLES,this.material,e.batch.getBuffer())}}class sS{constructor(e,n,r){this.gl=e,this.rectangleBatchRenderer=n,this.textureRenderer=r,this.texture=e.createTexture(Ke.TextureFormat.NEAREST_CLAMP,4096,4096),this.renderTarget=e.createRenderTarget(this.texture),this.rowCache=new QT(this.texture.height),this.clearLineBatch=new Ru(e),this.clearLineBatch.addRect(Ne.unit,new ar(0,0,0,0)),e.addContextResetHandler(()=>{this.rowCache.clear()})}has(e){return this.rowCache.has(e)}getResolution(){return this.texture.width}getCapacity(){return this.texture.height}allocateLine(e){if(this.rowCache.getSize()<this.rowCache.getCapacity()){const n=this.rowCache.getSize();return this.rowCache.insert(e,n),n}else{const[,n]=this.rowCache.removeLRU();return this.rowCache.insert(e,n),n}}writeToAtlasIfNeeded(e,n){B0(this.gl,this.renderTarget,()=>{for(let r of e){let i=this.rowCache.get(r);if(i!=null)continue;i=this.allocateLine(r);const a=new Ne(new Q(0,i),new Q(this.texture.width,1));this.rectangleBatchRenderer.render({batch:this.clearLineBatch,configSpaceSrcRect:Ne.unit,physicalSpaceDstRect:a}),n(a,r)}})}renderViaAtlas(e,n){let r=this.rowCache.get(e);if(r==null)return!1;const i=new Ne(new Q(0,r),new Q(this.texture.width,1));return this.textureRenderer.render({texture:this.texture,srcRect:i,dstRect:n}),!0}}const lS=`
  uniform mat3 uvTransform;
  uniform mat3 positionTransform;

  attribute vec2 position;
  attribute vec2 uv;
  varying vec2 vUv;

  void main() {
    vUv = (uvTransform * vec3(uv, 1)).xy;
    gl_Position = vec4((positionTransform * vec3(position, 1)).xy, 0, 1);
  }
`,cS=`
  precision mediump float;

  varying vec2 vUv;
  uniform sampler2D texture;

  void main() {
   gl_FragColor = texture2D(texture, vUv);
  }
`;class uS{constructor(e){this.gl=e;const n=new Ke.VertexFormat;n.add("position",Ke.AttributeType.FLOAT,2),n.add("uv",Ke.AttributeType.FLOAT,2);const r=[{pos:[-1,1],uv:[0,1]},{pos:[1,1],uv:[1,1]},{pos:[-1,-1],uv:[0,0]},{pos:[1,-1],uv:[1,0]}],i=[];for(let a of r)i.push(a.pos[0]),i.push(a.pos[1]),i.push(a.uv[0]),i.push(a.uv[1]);this.buffer=e.createVertexBuffer(n.stride*r.length),this.buffer.upload(new Uint8Array(new Float32Array(i).buffer)),this.material=e.createMaterial(n,lS,cS)}render(e){this.material.setUniformSampler("texture",e.texture,0),Bi(this.material,"uvTransform",(()=>{const{srcRect:n,texture:r}=e,a=ke.withTranslation(new Q(0,1)).times(ke.withScale(new Q(1,-1))).times(ke.betweenRects(new Ne(Q.zero,new Q(r.width,r.height)),Ne.unit)).transformRect(n);return ke.betweenRects(Ne.unit,a)})()),Bi(this.material,"positionTransform",(()=>{const{dstRect:n}=e,{viewport:r}=this.gl,i=new Q(r.width,r.height),o=ke.withScale(new Q(1,-1)).times(ke.betweenRects(new Ne(Q.zero,i),Ne.NDC)).transformRect(n);return ke.betweenRects(Ne.NDC,o)})()),this.gl.setUnpremultipliedBlendState(),this.gl.draw(Ke.Primitive.TRIANGLE_STRIP,this.material,this.buffer)}}const Mu=new Ke.VertexFormat;Mu.add("position",Ke.AttributeType.FLOAT,2);const fS=`
  attribute vec2 position;

  void main() {
    gl_Position = vec4(position, 0, 1);
  }
`,hS=t=>{const{r:e,g:n,b:r}=ar.fromCSSHex(t.fgSecondaryColor),i=`${e.toFixed(1)}, ${n.toFixed(1)}, ${r.toFixed(1)}`;return`
    precision mediump float;

    uniform mat3 configSpaceToPhysicalViewSpace;
    uniform vec2 physicalSize;
    uniform vec2 physicalOrigin;
    uniform vec2 configSpaceViewportOrigin;
    uniform vec2 configSpaceViewportSize;
    uniform float framebufferHeight;

    void main() {
      vec2 origin = (configSpaceToPhysicalViewSpace * vec3(configSpaceViewportOrigin, 1.0)).xy;
      vec2 size = (configSpaceToPhysicalViewSpace * vec3(configSpaceViewportSize, 0.0)).xy;

      vec2 halfSize = physicalSize / 2.0;

      float borderWidth = 2.0;

      origin = floor(origin * halfSize) / halfSize + borderWidth * vec2(1.0, 1.0);
      size = floor(size * halfSize) / halfSize - 2.0 * borderWidth * vec2(1.0, 1.0);

      vec2 coord = gl_FragCoord.xy;
      coord.x = coord.x - physicalOrigin.x;
      coord.y = framebufferHeight - coord.y - physicalOrigin.y;
      vec2 clamped = clamp(coord, origin, origin + size);
      vec2 gap = clamped - coord;
      float maxdist = max(abs(gap.x), abs(gap.y));

      // TOOD(jlfwong): Could probably optimize this to use mix somehow.
      if (maxdist == 0.0) {
        // Inside viewport rectangle
        gl_FragColor = vec4(0, 0, 0, 0);
      } else if (maxdist < borderWidth) {
        // Inside viewport rectangle at border
        gl_FragColor = vec4(${i}, 0.8);
      } else {
        // Outside viewport rectangle
        gl_FragColor = vec4(${i}, 0.5);
      }
    }
  `};class dS{constructor(e,n){this.gl=e;const r=[[-1,1],[1,1],[-1,-1],[1,-1]],i=[];for(let a of r)i.push(a[0]),i.push(a[1]);this.buffer=e.createVertexBuffer(Mu.stride*r.length),this.buffer.upload(new Uint8Array(new Float32Array(i).buffer)),this.material=e.createMaterial(Mu,fS,hS(n))}render(e){Bi(this.material,"configSpaceToPhysicalViewSpace",e.configSpaceToPhysicalViewSpace),kg(this.material,"configSpaceViewportOrigin",e.configSpaceViewportRect.origin),kg(this.material,"configSpaceViewportSize",e.configSpaceViewportRect.size);const n=this.gl.viewport;this.material.setUniformVec2("physicalOrigin",n.x,n.y),this.material.setUniformVec2("physicalSize",n.width,n.height),this.material.setUniformFloat("framebufferHeight",this.gl.renderTargetHeightInPixels),this.gl.setBlendState(Ke.BlendOperation.SOURCE_ALPHA,Ke.BlendOperation.INVERSE_SOURCE_ALPHA),this.gl.draw(Ke.Primitive.TRIANGLE_STRIP,this.material,this.buffer)}}const qs=new Ke.VertexFormat;qs.add("position",Ke.AttributeType.FLOAT,2);qs.add("uv",Ke.AttributeType.FLOAT,2);const gS=`
  uniform mat3 uvTransform;
  uniform mat3 positionTransform;

  attribute vec2 position;
  attribute vec2 uv;
  varying vec2 vUv;

  void main() {
    vUv = (uvTransform * vec3(uv, 1)).xy;
    gl_Position = vec4((positionTransform * vec3(position, 1)).xy, 0, 1);
  }
`,mS=t=>`
  precision mediump float;

  uniform vec2 uvSpacePixelSize;
  uniform float renderOutlines;

  varying vec2 vUv;
  uniform sampler2D colorTexture;

  // https://en.wikipedia.org/wiki/HSL_and_HSV#From_luma/chroma/hue
  vec3 hcl2rgb(float H, float C, float L) {
    float hPrime = H / 60.0;
    float X = C * (1.0 - abs(mod(hPrime, 2.0) - 1.0));
    vec3 RGB =
      hPrime < 1.0 ? vec3(C, X, 0) :
      hPrime < 2.0 ? vec3(X, C, 0) :
      hPrime < 3.0 ? vec3(0, C, X) :
      hPrime < 4.0 ? vec3(0, X, C) :
      hPrime < 5.0 ? vec3(X, 0, C) :
      vec3(C, 0, X);

    float m = L - dot(RGB, vec3(0.30, 0.59, 0.11));
    return RGB + vec3(m, m, m);
  }

  float triangle(float x) {
    return 2.0 * abs(fract(x) - 0.5) - 1.0;
  }

  ${t}

  void main() {
    vec4 here = texture2D(colorTexture, vUv);

    if (here.z == 0.0) {
      // Background color
      gl_FragColor = vec4(0, 0, 0, 0);
      return;
    }

    // Sample the 4 surrounding pixels in the depth texture to determine
    // if we should draw a boundary here or not.
    vec4 N = texture2D(colorTexture, vUv + vec2(0, uvSpacePixelSize.y));
    vec4 E = texture2D(colorTexture, vUv + vec2(uvSpacePixelSize.x, 0));
    vec4 S = texture2D(colorTexture, vUv + vec2(0, -uvSpacePixelSize.y));
    vec4 W = texture2D(colorTexture, vUv + vec2(-uvSpacePixelSize.x, 0));

    // NOTE: For outline checks, we intentionally check both the right
    // and the left to determine if we're an edge. If a rectangle is a single
    // pixel wide, we don't want to render it as an outline, so this method
    // of checking ensures that we don't outline single physical-space
    // pixel width rectangles.
    if (
      renderOutlines > 0.0 &&
      (
        here.y == N.y && here.y != S.y || // Top edge
        here.y == S.y && here.y != N.y || // Bottom edge
        here.x == E.x && here.x != W.x || // Left edge
        here.x == W.x && here.x != E.x
      )
    ) {
      // We're on an edge! Draw transparent.
      gl_FragColor = vec4(0, 0, 0, 0);
    } else {
      // Not on an edge. Draw the appropriate color.
      gl_FragColor = vec4(colorForBucket(here.z), here.a);
    }
  }
`;class pS{constructor(e,n){this.gl=e;const r=[{pos:[-1,1],uv:[0,1]},{pos:[1,1],uv:[1,1]},{pos:[-1,-1],uv:[0,0]},{pos:[1,-1],uv:[1,0]}],i=[];for(let a of r)i.push(a.pos[0]),i.push(a.pos[1]),i.push(a.uv[0]),i.push(a.uv[1]);this.buffer=e.createVertexBuffer(qs.stride*r.length),this.buffer.uploadFloats(i),this.updateMaterial(e,n)}updateMaterial(e,n){this.material=e.createMaterial(qs,gS,mS(n.colorForBucketGLSL))}render(e){const{srcRect:n,rectInfoTexture:r}=e,a=ke.withTranslation(new Q(0,1)).times(ke.withScale(new Q(1,-1))).times(ke.betweenRects(new Ne(Q.zero,new Q(r.width,r.height)),Ne.unit)).transformRect(n),o=ke.betweenRects(Ne.unit,a),{dstRect:s}=e,l=new Q(this.gl.viewport.width,this.gl.viewport.height),f=ke.withScale(new Q(1,-1)).times(ke.betweenRects(new Ne(Q.zero,l),Ne.NDC)).transformRect(s),d=ke.betweenRects(Ne.NDC,f),p=Q.unit.dividedByPointwise(new Q(e.rectInfoTexture.width,e.rectInfoTexture.height));this.material.setUniformSampler("colorTexture",e.rectInfoTexture,0),Bi(this.material,"uvTransform",o),this.material.setUniformFloat("renderOutlines",e.renderOutlines?1:0),this.material.setUniformVec2("uvSpacePixelSize",p.x,p.y),Bi(this.material,"positionTransform",d),this.gl.setUnpremultipliedBlendState(),this.gl.draw(Ke.Primitive.TRIANGLE_STRIP,this.material,this.buffer)}}class vS{constructor(e,n){this.animationFrameRequest=null,this.beforeFrameHandlers=new Set,this.onBeforeFrame=()=>{this.animationFrameRequest=null,this.gl.setViewport(0,0,this.gl.renderTargetWidthInPixels,this.gl.renderTargetHeightInPixels);const r=ar.fromCSSHex(this.theme.bgPrimaryColor);this.gl.clear(new Ke.Color(r.r,r.g,r.b,r.a));for(const i of this.beforeFrameHandlers)i()},this.gl=new Au.Context(e),this.rectangleBatchRenderer=new oS(this.gl),this.textureRenderer=new uS(this.gl),this.viewportRectangleRenderer=new dS(this.gl,n),this.flamechartColorPassRenderer=new pS(this.gl,n),this.theme=n,this.gl.addAfterResizeEventHandler(this.onBeforeFrame),this.gl.getWebGLInfo(),window.testContextLoss=()=>{this.gl.testContextLoss()}}addBeforeFrameHandler(e){this.beforeFrameHandlers.add(e)}removeBeforeFrameHandler(e){this.beforeFrameHandlers.delete(e)}requestFrame(){this.animationFrameRequest||(this.animationFrameRequest=requestAnimationFrame(this.onBeforeFrame))}setViewport(e,n){const{origin:r,size:i}=e;let a=this.gl.viewport;this.gl.setViewport(r.x,r.y,i.x,i.y),n();let{x:o,y:s,width:l,height:c}=a;this.gl.setViewport(o,s,l,c)}renderBehind(e,n){const r=e.getBoundingClientRect(),i=new Ne(new Q(r.left*window.devicePixelRatio,r.top*window.devicePixelRatio),new Q(r.width*window.devicePixelRatio,r.height*window.devicePixelRatio));this.setViewport(i,n)}}const lo=Sl(t=>e=>t.get(e.key)||0),Qi=or(({theme:t,frameToColorBucket:e})=>{const n=lo(e);return r=>{const i=n(r)/255;return t.colorForBucket(i).toCSS()}}),co=or(({theme:t,canvas:e})=>new vS(e,t)),bS=Sl(t=>new sS(t.gl,t.rectangleBatchRenderer,t.textureRenderer)),_S=or(({profile:t,flattenRecursion:e})=>e?t.getProfileWithRecursionFlattened():t),ea=Sl(t=>{const e=[];t.forEachFrame(a=>e.push(a));function n(a){return(a.file||"")+a.name}function r(a,o){return n(a)>n(o)?1:-1}e.sort(r);const i=new Map;for(let a=0;a<e.length;a++)i.set(e[a].key,Math.floor(255*a/e.length));return i});function F0(){const t=Ze(Ua),e=Ze(yt);if(!e||e.indexToView>=e.profiles.length)return null;const n=e.indexToView,r=e.profiles[n];return{...e.profiles[e.indexToView],profile:_S({profile:r.profile,flattenRecursion:t}),index:e.indexToView}}var Bg=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function cn(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function Sn(t){if(Object.prototype.hasOwnProperty.call(t,"__esModule"))return t;var e=t.default;if(typeof e=="function"){var n=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var i=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,i.get?i:{enumerable:!0,get:function(){return t[r]}})}),n}var Bo={exports:{}},Fo={exports:{}},Fg;function ta(){return Fg||(Fg=1,function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=r;var n=/-webkit-|-moz-|-ms-/;function r(i){return typeof i=="string"&&n.test(i)}t.exports=e.default}(Fo,Fo.exports)),Fo.exports}var Vg;function yS(){return Vg||(Vg=1,function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=o;var n=ta(),r=i(n);function i(s){return s&&s.__esModule?s:{default:s}}var a=["-webkit-","-moz-",""];function o(s,l){if(typeof l=="string"&&!(0,r.default)(l)&&l.indexOf("calc(")>-1)return a.map(function(c){return l.replace(/calc\(/g,c+"calc(")})}t.exports=e.default}(Bo,Bo.exports)),Bo.exports}var wS=yS();const xS=cn(wS);var Vo={exports:{}},Wg;function TS(){return Wg||(Wg=1,function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=o;var n=ta(),r=i(n);function i(s){return s&&s.__esModule?s:{default:s}}var a=["-webkit-",""];function o(s,l){if(typeof l=="string"&&!(0,r.default)(l)&&l.indexOf("cross-fade(")>-1)return a.map(function(c){return l.replace(/cross-fade\(/g,c+"cross-fade(")})}t.exports=e.default}(Vo,Vo.exports)),Vo.exports}var SS=TS();const ES=cn(SS);var Wo={exports:{}},$g;function CS(){return $g||($g=1,function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=i;var n=["-webkit-","-moz-",""],r={"zoom-in":!0,"zoom-out":!0,grab:!0,grabbing:!0};function i(a,o){if(a==="cursor"&&r.hasOwnProperty(o))return n.map(function(s){return s+o})}t.exports=e.default}(Wo,Wo.exports)),Wo.exports}var AS=CS();const RS=cn(AS);var $o={exports:{}},zg;function MS(){return zg||(zg=1,function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=o;var n=ta(),r=i(n);function i(s){return s&&s.__esModule?s:{default:s}}var a=["-webkit-",""];function o(s,l){if(typeof l=="string"&&!(0,r.default)(l)&&l.indexOf("filter(")>-1)return a.map(function(c){return l.replace(/filter\(/g,c+"filter(")})}t.exports=e.default}($o,$o.exports)),$o.exports}var NS=MS();const OS=cn(NS);var zo={exports:{}},Hg;function DS(){return Hg||(Hg=1,function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=r;var n={flex:["-webkit-box","-moz-box","-ms-flexbox","-webkit-flex","flex"],"inline-flex":["-webkit-inline-box","-moz-inline-box","-ms-inline-flexbox","-webkit-inline-flex","inline-flex"]};function r(i,a){if(i==="display"&&n.hasOwnProperty(a))return n[a]}t.exports=e.default}(zo,zo.exports)),zo.exports}var LS=DS();const IS=cn(LS);var Ho={exports:{}},Ug;function PS(){return Ug||(Ug=1,function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=i;var n={"space-around":"distribute","space-between":"justify","flex-start":"start","flex-end":"end"},r={alignContent:"msFlexLinePack",alignSelf:"msFlexItemAlign",alignItems:"msFlexAlign",justifyContent:"msFlexPack",order:"msFlexOrder",flexGrow:"msFlexPositive",flexShrink:"msFlexNegative",flexBasis:"msFlexPreferredSize"};function i(a,o,s){r.hasOwnProperty(a)&&(s[r[a]]=n[o]||o)}t.exports=e.default}(Ho,Ho.exports)),Ho.exports}var kS=PS();const BS=cn(kS);var Uo={exports:{}},Yg;function FS(){return Yg||(Yg=1,function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=i;var n={"space-around":"justify","space-between":"justify","flex-start":"start","flex-end":"end","wrap-reverse":"multiple",wrap:"multiple",flex:"box","inline-flex":"inline-box"},r={alignItems:"WebkitBoxAlign",justifyContent:"WebkitBoxPack",flexWrap:"WebkitBoxLines",flexGrow:"WebkitBoxFlex"};function i(a,o,s){a==="flexDirection"&&typeof o=="string"&&(o.indexOf("column")>-1?s.WebkitBoxOrient="vertical":s.WebkitBoxOrient="horizontal",o.indexOf("reverse")>-1?s.WebkitBoxDirection="reverse":s.WebkitBoxDirection="normal"),r.hasOwnProperty(a)&&(s[r[a]]=n[o]||o)}t.exports=e.default}(Uo,Uo.exports)),Uo.exports}var VS=FS();const WS=cn(VS);var Yo={exports:{}},Xg;function $S(){return Xg||(Xg=1,function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=s;var n=ta(),r=i(n);function i(l){return l&&l.__esModule?l:{default:l}}var a=["-webkit-","-moz-",""],o=/linear-gradient|radial-gradient|repeating-linear-gradient|repeating-radial-gradient/gi;function s(l,c){if(typeof c=="string"&&!(0,r.default)(c)&&o.test(c))return a.map(function(f){return c.replace(o,function(d){return f+d})})}t.exports=e.default}(Yo,Yo.exports)),Yo.exports}var zS=$S();const HS=cn(zS);var Xo={exports:{}},Gg;function US(){return Gg||(Gg=1,function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=o;var n=ta(),r=i(n);function i(s){return s&&s.__esModule?s:{default:s}}var a=["-webkit-",""];function o(s,l){if(typeof l=="string"&&!(0,r.default)(l)&&l.indexOf("image-set(")>-1)return a.map(function(c){return l.replace(/image-set\(/g,c+"image-set(")})}t.exports=e.default}(Xo,Xo.exports)),Xo.exports}var YS=US();const XS=cn(YS);var Go={exports:{}},qg;function GS(){return qg||(qg=1,function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=n;function n(r,i){if(r==="position"&&i==="sticky")return["-webkit-sticky","sticky"]}t.exports=e.default}(Go,Go.exports)),Go.exports}var qS=GS();const jS=cn(qS);var qo={exports:{}},jg;function JS(){return jg||(jg=1,function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=a;var n=["-webkit-","-moz-",""],r={maxHeight:!0,maxWidth:!0,width:!0,height:!0,columnWidth:!0,minWidth:!0,minHeight:!0},i={"min-content":!0,"max-content":!0,"fill-available":!0,"fit-content":!0,"contain-floats":!0};function a(o,s){if(r.hasOwnProperty(o)&&i.hasOwnProperty(s))return n.map(function(l){return l+s})}t.exports=e.default}(qo,qo.exports)),qo.exports}var ZS=JS();const KS=cn(ZS);var jo={exports:{}},Jo={exports:{}},QS=/[A-Z]/g,e2=/^ms-/,Wc={};function t2(t){return"-"+t.toLowerCase()}function n2(t){if(Wc.hasOwnProperty(t))return Wc[t];var e=t.replace(QS,t2);return Wc[t]=e2.test(e)?"-"+e:e}const r2=Object.freeze(Object.defineProperty({__proto__:null,default:n2},Symbol.toStringTag,{value:"Module"})),i2=Sn(r2);var Jg;function a2(){return Jg||(Jg=1,function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=a;var n=i2,r=i(n);function i(o){return o&&o.__esModule?o:{default:o}}function a(o){return(0,r.default)(o)}t.exports=e.default}(Jo,Jo.exports)),Jo.exports}var Zo={exports:{}},Zg;function V0(){return Zg||(Zg=1,function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=n;function n(r){return r.charAt(0).toUpperCase()+r.slice(1)}t.exports=e.default}(Zo,Zo.exports)),Zo.exports}var Kg;function o2(){return Kg||(Kg=1,function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=p;var n=a2(),r=l(n),i=ta(),a=l(i),o=V0(),s=l(o);function l(x){return x&&x.__esModule?x:{default:x}}var c={transition:!0,transitionProperty:!0,WebkitTransition:!0,WebkitTransitionProperty:!0,MozTransition:!0,MozTransitionProperty:!0},f={Webkit:"-webkit-",Moz:"-moz-",ms:"-ms-"};function d(x,R){if((0,a.default)(x))return x;for(var O=x.split(/,(?![^()]*(?:\([^()]*\))?\))/g),A=0,I=O.length;A<I;++A){var S=O[A],D=[S];for(var N in R){var k=(0,r.default)(N);if(S.indexOf(k)>-1&&k!=="order")for(var W=R[N],Y=0,X=W.length;Y<X;++Y)D.unshift(S.replace(k,f[W[Y]]+k))}O[A]=D.join(",")}return O.join(",")}function p(x,R,O,A){if(typeof R=="string"&&c.hasOwnProperty(x)){var I=d(R,A),S=I.split(/,(?![^()]*(?:\([^()]*\))?\))/g).filter(function(N){return!/-moz-|-ms-/.test(N)}).join(",");if(x.indexOf("Webkit")>-1)return S;var D=I.split(/,(?![^()]*(?:\([^()]*\))?\))/g).filter(function(N){return!/-webkit-|-ms-/.test(N)}).join(",");return x.indexOf("Moz")>-1?D:(O["Webkit"+(0,s.default)(x)]=S,O["Moz"+(0,s.default)(x)]=D,I)}}t.exports=e.default}(jo,jo.exports)),jo.exports}var s2=o2();const l2=cn(s2);var $c,Qg;function c2(){if(Qg)return $c;Qg=1;function t(e){for(var n=5381,r=e.length;r;)n=n*33^e.charCodeAt(--r);return n>>>0}return $c=t,$c}var u2=c2();const f2=cn(u2);var Ko={exports:{}},Qo={exports:{}},em;function h2(){return em||(em=1,function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=a;var n=V0(),r=i(n);function i(o){return o&&o.__esModule?o:{default:o}}function a(o,s,l){if(o.hasOwnProperty(s)){for(var c={},f=o[s],d=(0,r.default)(s),p=Object.keys(l),x=0;x<p.length;x++){var R=p[x];if(R===s)for(var O=0;O<f.length;O++)c[f[O]+d]=l[s];c[R]=l[R]}return c}return l}t.exports=e.default}(Qo,Qo.exports)),Qo.exports}var es={exports:{}},tm;function d2(){return tm||(tm=1,function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=n;function n(r,i,a,o,s){for(var l=0,c=r.length;l<c;++l){var f=r[l](i,a,o,s);if(f)return f}}t.exports=e.default}(es,es.exports)),es.exports}var ts={exports:{}},nm;function g2(){return nm||(nm=1,function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=r;function n(i,a){i.indexOf(a)===-1&&i.push(a)}function r(i,a){if(Array.isArray(a))for(var o=0,s=a.length;o<s;++o)n(i,a[o]);else n(i,a)}t.exports=e.default}(ts,ts.exports)),ts.exports}var ns={exports:{}},rm;function m2(){return rm||(rm=1,function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=n;function n(r){return r instanceof Object&&!Array.isArray(r)}t.exports=e.default}(ns,ns.exports)),ns.exports}var im;function p2(){return im||(im=1,function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=d;var n=h2(),r=f(n),i=d2(),a=f(i),o=g2(),s=f(o),l=m2(),c=f(l);function f(p){return p&&p.__esModule?p:{default:p}}function d(p){var x=p.prefixMap,R=p.plugins;function O(A){for(var I in A){var S=A[I];if((0,c.default)(S))A[I]=O(S);else if(Array.isArray(S)){for(var D=[],N=0,k=S.length;N<k;++N){var W=(0,a.default)(R,I,S[N],A,x);(0,s.default)(D,W||S[N])}D.length>0&&(A[I]=D)}else{var Y=(0,a.default)(R,I,S,A,x);Y&&(A[I]=Y),A=(0,r.default)(x,I,A)}}return A}return O}t.exports=e.default}(Ko,Ko.exports)),Ko.exports}var v2=p2();const b2=cn(v2);var zc,am;function _2(){if(am)return zc;am=1,zc=t;function t(f){e.length||n(),e[e.length]=f}var e=[],n,r=0,i=1024;function a(){for(;r<e.length;){var f=r;if(r=r+1,e[f].call(),r>i){for(var d=0,p=e.length-r;d<p;d++)e[d]=e[d+r];e.length-=r,r=0}}e.length=0,r=0}var o=typeof Bg<"u"?Bg:self,s=o.MutationObserver||o.WebKitMutationObserver;typeof s=="function"?n=l(a):n=c(a),t.requestFlush=n;function l(f){var d=1,p=new s(f),x=document.createTextNode("");return p.observe(x,{characterData:!0}),function(){d=-d,x.data=d}}function c(f){return function(){var p=setTimeout(R,0),x=setInterval(R,50);function R(){clearTimeout(p),clearInterval(x),f()}}}return t.makeRequestCallFromTimer=c,zc}var Hc,om;function y2(){if(om)return Hc;om=1;var t=_2(),e=[],n=[],r=t.makeRequestCallFromTimer(i);function i(){if(n.length)throw n.shift()}Hc=a;function a(s){var l;e.length?l=e.pop():l=new o,l.task=s,t(l)}function o(){this.task=null}return o.prototype.call=function(){try{this.task.call()}catch(s){a.onerror?a.onerror(s):(n.push(s),r())}finally{this.task=null,e[e.length]=this}},Hc}var w2=y2();const x2=cn(w2);var xe=["Webkit"],Uc=["Moz"],vt=["ms"],Jt=["Webkit","Moz"],It=["Webkit","ms"],wa=["Webkit","Moz","ms"],T2={plugins:[xS,ES,RS,OS,IS,BS,WS,HS,XS,jS,KS,l2],prefixMap:{transform:It,transformOrigin:It,transformOriginX:It,transformOriginY:It,backfaceVisibility:xe,perspective:xe,perspectiveOrigin:xe,transformStyle:xe,transformOriginZ:xe,animation:xe,animationDelay:xe,animationDirection:xe,animationFillMode:xe,animationDuration:xe,animationIterationCount:xe,animationName:xe,animationPlayState:xe,animationTimingFunction:xe,appearance:Jt,userSelect:wa,fontKerning:xe,textEmphasisPosition:xe,textEmphasis:xe,textEmphasisStyle:xe,textEmphasisColor:xe,boxDecorationBreak:xe,clipPath:xe,maskImage:xe,maskMode:xe,maskRepeat:xe,maskPosition:xe,maskClip:xe,maskOrigin:xe,maskSize:xe,maskComposite:xe,mask:xe,maskBorderSource:xe,maskBorderMode:xe,maskBorderSlice:xe,maskBorderWidth:xe,maskBorderOutset:xe,maskBorderRepeat:xe,maskBorder:xe,maskType:xe,textDecorationStyle:Jt,textDecorationSkip:Jt,textDecorationLine:Jt,textDecorationColor:Jt,filter:xe,fontFeatureSettings:Jt,breakAfter:wa,breakBefore:wa,breakInside:wa,columnCount:Jt,columnFill:Jt,columnGap:Jt,columnRule:Jt,columnRuleColor:Jt,columnRuleStyle:Jt,columnRuleWidth:Jt,columns:Jt,columnSpan:Jt,columnWidth:Jt,writingMode:It,flex:It,flexBasis:xe,flexDirection:It,flexGrow:xe,flexFlow:It,flexShrink:xe,flexWrap:It,alignContent:xe,alignItems:xe,alignSelf:xe,justifyContent:xe,order:xe,transitionDelay:xe,transitionDuration:xe,transitionProperty:xe,transitionTimingFunction:xe,backdropFilter:xe,scrollSnapType:It,scrollSnapPointsX:It,scrollSnapPointsY:It,scrollSnapDestination:It,scrollSnapCoordinate:It,shapeImageThreshold:xe,shapeImageMargin:xe,shapeImageOutside:xe,hyphens:wa,flowInto:It,flowFrom:It,regionFragment:It,boxSizing:Uc,textAlignLast:Uc,tabSize:Uc,wrapFlow:vt,wrapThrough:vt,wrapMargin:vt,touchAction:vt,gridTemplateColumns:vt,gridTemplateRows:vt,gridTemplateAreas:vt,gridTemplate:vt,gridAutoColumns:vt,gridAutoRows:vt,gridAutoFlow:vt,grid:vt,gridRowStart:vt,gridColumnStart:vt,gridRowEnd:vt,gridRow:vt,gridColumn:vt,gridColumnEnd:vt,gridColumnGap:vt,gridRowGap:vt,gridArea:vt,gridGap:vt,textSizeAdjust:It,borderImage:xe,borderImageOutset:xe,borderImageRepeat:xe,borderImageSlice:xe,borderImageSource:xe,borderImageWidth:xe}},S2=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},E2=function(){function t(e,n){for(var r=0;r<n.length;r++){var i=n[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();function C2(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var sm=typeof Map<"u",Nu=function(){function t(){C2(this,t),this.elements={},this.keyOrder=[]}return E2(t,[{key:"forEach",value:function(){function e(n){for(var r=0;r<this.keyOrder.length;r++)n(this.elements[this.keyOrder[r]],this.keyOrder[r])}return e}()},{key:"set",value:function(){function e(n,r,i){if(!this.elements.hasOwnProperty(n))this.keyOrder.push(n);else if(i){var a=this.keyOrder.indexOf(n);this.keyOrder.splice(a,1),this.keyOrder.push(n)}if(r==null){this.elements[n]=r;return}if(sm&&r instanceof Map||r instanceof t){var o=this.elements.hasOwnProperty(n)?this.elements[n]:new t;r.forEach(function(f,d){o.set(d,f,i)}),this.elements[n]=o;return}if(!Array.isArray(r)&&(typeof r>"u"?"undefined":S2(r))==="object"){for(var s=this.elements.hasOwnProperty(n)?this.elements[n]:new t,l=Object.keys(r),c=0;c<l.length;c+=1)s.set(l[c],r[l[c]],i);this.elements[n]=s;return}this.elements[n]=r}return e}()},{key:"get",value:function(){function e(n){return this.elements[n]}return e}()},{key:"has",value:function(){function e(n){return this.elements.hasOwnProperty(n)}return e}()},{key:"addStyleType",value:function(){function e(n){var r=this;if(sm&&n instanceof Map||n instanceof t)n.forEach(function(o,s){r.set(s,o,!0)});else for(var i=Object.keys(n),a=0;a<i.length;a++)this.set(i[a],n[i[a]],!0)}return e}()}]),t}(),A2=/([A-Z])/g,R2=function(e){return"-"+String(e.toLowerCase())},M2=function(e){var n=e.replace(A2,R2);return n[0]==="m"&&n[1]==="s"&&n[2]==="-"?"-"+String(n):n},xs={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridRow:!0,gridColumn:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0};function N2(t,e){return t+e.charAt(0).toUpperCase()+e.substring(1)}var O2=["Webkit","ms","Moz","O"];Object.keys(xs).forEach(function(t){O2.forEach(function(e){xs[N2(e,t)]=xs[t]})});var W0=function(e,n){return typeof n=="number"?xs[e]?""+n:n+"px":""+n},D2=function(e,n){return I2(W0(e,n))},uo=function(e,n){return f2(e).toString(36)},L2=function(e){return uo(JSON.stringify(e))},I2=function(e){return e[e.length-10]==="!"&&e.slice(-11)===" !important"?e:String(e)+" !important"};function P2(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}else return Array.from(t)}var k2=b2(T2),B2=[function(){function t(e,n,r){return e[0]!==":"?null:r(n+e)}return t}(),function(){function t(e,n,r){if(e[0]!=="@")return null;var i=r(n);return[String(e)+"{"+String(i.join(""))+"}"]}return t}()],Ou=function t(e,n,r,i,a){for(var o=new Nu,s=0;s<n.length;s++)o.addStyleType(n[s]);var l=new Nu,c=[];o.forEach(function(d,p){var x=r.some(function(R){var O=R(p,e,function(A){return t(A,[d],r,i,a)});if(O!=null)return Array.isArray(O)?c.push.apply(c,P2(O)):c.push("@media all {"+String(O)+"}"),!0});x||l.set(p,d,!0)});var f=W2(e,l,i,a,r);return f&&c.unshift(f),c},F2=function(e,n,r){if(n)for(var i=Object.keys(n),a=0;a<i.length;a++){var o=i[a];e.has(o)&&e.set(o,n[o](e.get(o),r),!1)}},lm=function(e,n,r){return String(M2(e))+":"+String(r(e,n))+";"},V2=function(e,n){return e[n]=!0,e},W2=function(e,n,r,i,a){F2(n,r,a);var o=Object.keys(n.elements).reduce(V2,Object.create(null)),s=k2(n.elements),l=Object.keys(s);if(l.length!==n.keyOrder.length){for(var c=0;c<l.length;c++)if(!o[l[c]]){var f=void 0;if(l[c][0]==="W"?f=l[c][6].toLowerCase()+l[c].slice(7):l[c][1]==="o"?f=l[c][3].toLowerCase()+l[c].slice(4):f=l[c][2].toLowerCase()+l[c].slice(3),f&&o[f]){var d=n.keyOrder.indexOf(f);n.keyOrder.splice(d,0,l[c])}else n.keyOrder.unshift(l[c])}}for(var p=i===!1?W0:D2,x=[],R=0;R<n.keyOrder.length;R++){var O=n.keyOrder[R],A=s[O];if(Array.isArray(A))for(var I=0;I<A.length;I++)x.push(lm(O,A[I],p));else x.push(lm(O,A,p))}return x.length?String(e)+"{"+String(x.join(""))+"}":""},cm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};function $2(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}else return Array.from(t)}var Nn=null,z2=function(e){if(Nn==null&&(Nn=document.querySelector("style[data-aphrodite]"),Nn==null)){var n=document.head||document.getElementsByTagName("head")[0];Nn=document.createElement("style"),Nn.type="text/css",Nn.setAttribute("data-aphrodite",""),n.appendChild(Nn)}var r=Nn.styleSheet||Nn.sheet;if(r.insertRule){var i=r.cssRules.length;e.forEach(function(a){try{r.insertRule(a,i),i+=1}catch{}})}else Nn.innerText=(Nn.innerText||"")+e.join("")},Du={fontFamily:function(){function t(e){return Array.isArray(e)?e.map(t).join(","):(typeof e>"u"?"undefined":cm(e))==="object"?(z0(e.src,"@font-face",[e],!1),'"'+String(e.fontFamily)+'"'):e}return t}(),animationName:function(){function t(e,n){if(Array.isArray(e))return e.map(function(a){return t(a,n)}).join(",");if((typeof e>"u"?"undefined":cm(e))==="object"){var r="keyframe_"+String(L2(e)),i="@keyframes "+r+"{";return e instanceof Nu?e.forEach(function(a,o){i+=Ou(o,[a],n,Du,!1).join("")}):Object.keys(e).forEach(function(a){i+=Ou(a,[e[a]],n,Du,!1).join("")}),i+="}",$0(r,[i]),r}else return e}return t}()},Fi={},js=[],Vi=!1,$0=function(e,n){var r;if(!Fi[e]){if(!Vi){if(typeof document>"u")throw new Error("Cannot automatically buffer without a document");Vi=!0,x2(X2)}(r=js).push.apply(r,$2(n)),Fi[e]=!0}},z0=function(e,n,r,i){var a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:[];if(!Fi[e]){var o=Ou(n,r,a,Du,i);$0(e,o)}},H2=function(){js=[],Fi={},Vi=!1,Nn=null},U2=function(){if(Vi)throw new Error("Cannot buffer while already buffering");Vi=!0},H0=function(){Vi=!1;var e=js;return js=[],e},Y2=function(){return H0().join("")},X2=function(){var e=H0();e.length>0&&z2(e)},G2=function(){return Object.keys(Fi)},q2=function(e){e.forEach(function(n){Fi[n]=!0})},j2=function t(e,n,r,i){for(var a=0;a<e.length;a+=1)e[a]&&(Array.isArray(e[a])?i+=t(e[a],n,r,i):(n.push(e[a]._name),r.push(e[a]._definition),i+=e[a]._len));return i},J2=function(e,n,r){var i=[],a=[],o=j2(n,i,a,0);if(i.length===0)return"";var s=void 0;return s=i.length===1?"_"+String(i[0]):"_"+String(uo(i.join()))+String((o%36).toString(36)),z0(s,"."+String(s),a,e,r),s},Z2=function(e,n){return String(n)+"_"+String(uo(e))},K2=function(){return uo},U0=K2(),Q2={create:function(){function t(e){for(var n={},r=Object.keys(e),i=0;i<r.length;i+=1){var a=r[i],o=e[a],s=JSON.stringify(o);n[a]={_len:s.length,_name:U0(s,a),_definition:o}}return n}return t}(),rehydrate:function(){function t(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];q2(e)}return t}()},eE=typeof window<"u"?null:{renderStatic:function(){function t(e){H2(),U2();var n=e(),r=Y2();return{html:n,css:{content:r,renderedClassNames:G2()}}}return t}()},tE=null;function Y0(t,e){return{StyleSheet:Object.assign({},Q2,{extend:function(){function n(r){var i=r.map(function(a){return a.selectorHandler}).filter(function(a){return a});return Y0(t,e.concat(i))}return n}()}),StyleSheetServer:eE,StyleSheetTestUtils:tE,minify:function(){function n(r){U0=r?uo:Z2}return n}(),css:function(){function n(){for(var r=arguments.length,i=Array(r),a=0;a<r;a++)i[a]=arguments[a];return J2(t,i,e)}return n}()}}var nE=!0,fo=Y0(nE,B2),Hn=fo.StyleSheet;fo.StyleSheetServer;fo.StyleSheetTestUtils;var se=fo.css;fo.minify;var na=(t=>(t.MONOSPACE='"Source Code Pro", Courier, monospace',t))(na||{}),Ot=(t=>(t[t.LABEL=10]="LABEL",t[t.TITLE=12]="TITLE",t[t.BIG_BUTTON=36]="BIG_BUTTON",t))(Ot||{}),ze=(t=>(t[t.MINIMAP_HEIGHT=100]="MINIMAP_HEIGHT",t[t.DETAIL_VIEW_HEIGHT=150]="DETAIL_VIEW_HEIGHT",t[t.TOOLTIP_WIDTH_MAX=900]="TOOLTIP_WIDTH_MAX",t[t.TOOLTIP_HEIGHT_MAX=80]="TOOLTIP_HEIGHT_MAX",t[t.SEPARATOR_HEIGHT=2]="SEPARATOR_HEIGHT",t[t.FRAME_HEIGHT=20]="FRAME_HEIGHT",t[t.TOOLBAR_HEIGHT=26]="TOOLBAR_HEIGHT",t[t.TOOLBAR_TAB_HEIGHT=18]="TOOLBAR_TAB_HEIGHT",t[t.TIMESTAMP_INDICATOR_WIDTH=3]="TIMESTAMP_INDICATOR_WIDTH",t))(ze||{}),Js=(t=>(t.HOVER_CHANGE="0.07s",t))(Js||{}),pf=(t=>(t[t.PROFILE_SELECT=1]="PROFILE_SELECT",t[t.HOVERTIP=2]="HOVERTIP",t))(pf||{});const xn=Hn.create({fillY:{height:"100%"},fillX:{width:"100%"},hbox:{display:"flex",flexDirection:"row",position:"relative",overflow:"hidden"},vbox:{display:"flex",flexDirection:"column",position:"relative",overflow:"hidden"}});function rE(t,e){const n=t.toLocaleLowerCase(),r=e.toLocaleLowerCase();let i=0;const a=[];for(;;){let o=n.indexOf(r,i);if(o===-1)return a;a.push([o,o+e.length]),i=o+e.length}}class iE{constructor(e,n){this.profile=e,this.searchQuery=n,this.matches=null}getMatchForFrame(e){return this.matches||(this.matches=new Map,this.profile.forEachFrame(n=>{const r=rE(n.name,this.searchQuery);this.matches.set(n,r.length===0?null:r)})),this.matches.get(e)||null}}class aE{constructor(e,n){this.flamechart=e,this.profileResults=n,this.matches=null}getResults(){if(this.matches==null){const e=[],n=new Map,r=(a,o)=>{const{node:s}=a;if(this.profileResults.getMatchForFrame(s.frame)){const l=new Ne(new Q(a.start,o),new Q(a.end-a.start,1));n.set(s,e.length),e.push({configSpaceBounds:l,node:s})}a.children.forEach(l=>{r(l,o+1)})},i=this.flamechart.getLayers();i.length>0&&i[0].forEach(a=>r(a,0)),this.matches={matches:e,indexForNode:n}}return this.matches}count(){return this.getResults().matches.length}indexOf(e){const n=this.getResults().indexForNode.get(e);return n===void 0?null:n}at(e){const n=this.getResults().matches;if(e<0||e>=n.length)throw new Error(`Index ${e} out of bounds in list of ${n.length} matches.`);return n[e]}}function um(t){t.stopPropagation()}const Rl=xl(null),oE=({children:t})=>{const e=F0(),n=e?e.profile:null,r=Ze(Ls),i=Ze(Is),a=kt(()=>!n||!r||i.length===0?null:new iE(n,i),[r,i,n]);return C(Rl.Provider,{value:a,children:t})},X0=xt(({numResults:t,resultIndex:e,selectNext:n,selectPrev:r})=>{const i=ut(),a=sE(i),o=Ze(Ls),s=Ze(Is),l=Is.set,c=Ls.set,f=Qe(O=>{const A=O.target.value;l(A)},[l]),d=Te(null),p=Qe(()=>c(!1),[c]),x=Qe(O=>{O.shiftKey?r():n()},[r,n]),R=Qe(O=>{O.stopPropagation(),O.key==="Escape"&&c(!1),O.key==="Enter"&&x(O),O.key=="f"&&(O.metaKey||O.ctrlKey)&&(d.current&&d.current.select(),O.preventDefault())},[c,x]);return Dt(()=>{const O=A=>{A.key=="f"&&(A.metaKey||A.ctrlKey)&&(A.preventDefault(),d.current?d.current.select():(c(!0),requestAnimationFrame(()=>{d.current&&d.current.select()})))};return window.addEventListener("keydown",O),()=>{window.removeEventListener("keydown",O)}},[c]),o?C("div",{className:se(a.searchView),children:[C("span",{className:se(a.icon),children:""}),C("span",{className:se(a.inputContainer),children:C("input",{className:se(a.input),value:s,onInput:f,onKeyDown:R,onKeyUp:um,onKeyPress:um,ref:d})}),t!=null&&C(At,{children:[C("span",{className:se(a.resultCount),children:[e==null?"?":e+1,"/",t]}),C("button",{className:se(a.icon,a.button),onClick:r,children:""}),C("button",{className:se(a.icon,a.button),onClick:n,children:""})]}),C("svg",{className:se(a.icon),onClick:p,width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:C("path",{d:"M4.99999 4.16217L11.6427 10.8048M11.6427 4.16217L4.99999 10.8048",stroke:i.altFgSecondaryColor})})]}):null}),sE=sr(t=>Hn.create({searchView:{position:"absolute",top:0,right:10,height:ze.TOOLBAR_HEIGHT,width:16*13,borderWidth:2,borderColor:t.altFgPrimaryColor,borderStyle:"solid",fontSize:Ot.LABEL,boxSizing:"border-box",background:t.altBgSecondaryColor,color:t.altFgPrimaryColor,display:"flex",alignItems:"center"},inputContainer:{flexShrink:1,flexGrow:1,display:"flex"},input:{width:"100%",border:"none",background:"none",fontSize:Ot.LABEL,lineHeight:`${ze.TOOLBAR_HEIGHT}px`,color:t.altFgPrimaryColor,":focus":{border:"none",outline:"none"},"::selection":{color:t.altFgPrimaryColor,background:t.selectionPrimaryColor}},resultCount:{verticalAlign:"middle"},icon:{flexShrink:0,verticalAlign:"middle",height:"100%",margin:"0px 2px 0px 2px",fontSize:Ot.LABEL},button:{display:"inline",background:"none",border:"none",padding:0,":focus":{outline:"none"}}})),lE="modulepreload",cE=function(t,e){return new URL(t,e).href},fm={},ho=function(e,n,r){let i=Promise.resolve();if(n&&n.length>0){let o=function(f){return Promise.all(f.map(d=>Promise.resolve(d).then(p=>({status:"fulfilled",value:p}),p=>({status:"rejected",reason:p}))))};const s=document.getElementsByTagName("link"),l=document.querySelector("meta[property=csp-nonce]"),c=(l==null?void 0:l.nonce)||(l==null?void 0:l.getAttribute("nonce"));i=o(n.map(f=>{if(f=cE(f,r),f in fm)return;fm[f]=!0;const d=f.endsWith(".css"),p=d?'[rel="stylesheet"]':"";if(!!r)for(let O=s.length-1;O>=0;O--){const A=s[O];if(A.href===f&&(!d||A.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${f}"]${p}`))return;const R=document.createElement("link");if(R.rel=d?"stylesheet":lE,d||(R.as="script"),R.crossOrigin="",R.href=f,c&&R.setAttribute("nonce",c),document.head.appendChild(R),d)return new Promise((O,A)=>{R.addEventListener("load",O),R.addEventListener("error",()=>A(new Error(`Unable to preload CSS for ${f}`)))})}))}function a(o){const s=new Event("vite:preloadError",{cancelable:!0});if(s.payload=o,window.dispatchEvent(s),!s.defaultPrevented)throw o}return i.then(o=>{for(const s of o||[])s.status==="rejected"&&a(s.reason);return e().catch(a)})};class vf{constructor(){this.unit="none"}format(e){return e.toLocaleString()}}class G0{constructor(e){this.unit=e,e==="nanoseconds"?this.multiplier=1e-9:e==="microseconds"?this.multiplier=1e-6:e==="milliseconds"?this.multiplier=.001:this.multiplier=1}formatUnsigned(e){const n=e*this.multiplier;if(n/60>=1){const r=Math.floor(n/60),i=Math.floor(n-r*60).toString();return`${r}:${Nx(i,2)}`}return n/1>=1?`${n.toFixed(2)}s`:n/.001>=1?`${(n/.001).toFixed(2)}ms`:n/1e-6>=1?`${(n/1e-6).toFixed(2)}s`:`${(n/1e-9).toFixed(2)}ns`}format(e){return`${e<0?"-":""}${this.formatUnsigned(Math.abs(e))}`}}class uE{constructor(){this.unit="bytes"}format(e){return e<1024?`${e.toFixed(0)} B`:(e/=1024,e<1024?`${e.toFixed(2)} KB`:(e/=1024,e<1024?`${e.toFixed(2)} MB`:(e/=1024,`${e.toFixed(2)} GB`)))}}class q0{constructor(){this.selfWeight=0,this.totalWeight=0}getSelfWeight(){return this.selfWeight}getTotalWeight(){return this.totalWeight}addToTotalWeight(e){this.totalWeight+=e}addToSelfWeight(e){this.selfWeight+=e}overwriteWeightWith(e){this.selfWeight=e.selfWeight,this.totalWeight=e.totalWeight}}const Va=class Va extends q0{constructor(e){super(),this.key=e.key,this.name=e.name,this.file=e.file,this.line=e.line,this.col=e.col,this.args=e.args}static getOrInsert(e,n){return e.getOrInsert(new Va(n))}};Va.root=new Va({key:"(speedscope root)",name:"(speedscope root)"});let en=Va;class Zs extends q0{constructor(e,n){super(),this.frame=e,this.parent=n,this.children=[],this.frozen=!1}isRoot(){return this.frame===en.root}isFrozen(){return this.frozen}freeze(){this.frozen=!0}}class Ml{constructor(e=0){this.name="",this.frames=new l0,this.appendOrderCalltreeRoot=new Zs(en.root,null),this.groupedCalltreeRoot=new Zs(en.root,null),this.samples=[],this.weights=[],this.valueFormatter=new vf,this.totalNonIdleWeight=null,this.totalWeight=e}getAppendOrderCalltreeRoot(){return this.appendOrderCalltreeRoot}getGroupedCalltreeRoot(){return this.groupedCalltreeRoot}shallowClone(){const e=new Ml(this.totalWeight);return Object.assign(e,this),e}formatValue(e){return this.valueFormatter.format(e)}setValueFormatter(e){this.valueFormatter=e}getWeightUnit(){return this.valueFormatter.unit}getName(){return this.name}setName(e){this.name=e}getTotalWeight(){return this.totalWeight}getTotalNonIdleWeight(){return this.totalNonIdleWeight===null&&(this.totalNonIdleWeight=this.groupedCalltreeRoot.children.reduce((e,n)=>e+n.getTotalWeight(),0)),this.totalNonIdleWeight}sortGroupedCallTree(){function e(n){n.children.sort((r,i)=>-(r.getTotalWeight()-i.getTotalWeight())),n.children.forEach(e)}e(this.groupedCalltreeRoot)}forEachCallGrouped(e,n){function r(i,a){i.frame!==en.root&&e(i,a);let o=0;i.children.forEach(function(s){r(s,a+o),o+=s.getTotalWeight()}),i.frame!==en.root&&n(i,a+i.getTotalWeight())}r(this.groupedCalltreeRoot,0)}forEachCall(e,n){let r=[],i=0,a=0;for(let o of this.samples){let s=null;for(s=o;s&&s.frame!=en.root&&r.indexOf(s)===-1;s=s.parent);for(;r.length>0&&Ir(r)!=s;){const c=r.pop();n(c,i)}const l=[];for(let c=o;c&&c.frame!=en.root&&c!=s;c=c.parent)l.push(c);l.reverse();for(let c of l)e(c,i);r=r.concat(l),i+=this.weights[a++]}for(let o=r.length-1;o>=0;o--)n(r[o],i)}forEachFrame(e){this.frames.forEach(e)}getProfileWithRecursionFlattened(){const e=new bf,n=[],r=new Set;function i(s,l){r.has(s.frame)?n.push(null):(r.add(s.frame),n.push(s),e.enterFrame(s.frame,l))}function a(s,l){const c=n.pop();c&&(r.delete(c.frame),e.leaveFrame(c.frame,l))}this.forEachCall(i,a);const o=e.build();return o.name=this.name,o.valueFormatter=this.valueFormatter,this.forEachFrame(s=>{o.frames.getOrInsert(s).overwriteWeightWith(s)}),o}getInvertedProfileForCallersOf(e){const n=en.getOrInsert(this.frames,e),r=new Lu,i=[];function a(s){if(s.frame===n)i.push(s);else for(let l of s.children)a(l)}a(this.appendOrderCalltreeRoot);for(let s of i){const l=[];for(let c=s;c!=null&&c.frame!==en.root;c=c.parent)l.push(c.frame);r.appendSampleWithWeight(l,s.getTotalWeight())}const o=r.build();return o.name=this.name,o.valueFormatter=this.valueFormatter,o}getProfileForCalleesOf(e){const n=en.getOrInsert(this.frames,e),r=new Lu;function i(s){const l=[];function c(f){l.push(f.frame),r.appendSampleWithWeight(l,f.getSelfWeight());for(let d of f.children)c(d);l.pop()}c(s)}function a(s){if(s.frame===n)i(s);else for(let l of s.children)a(l)}a(this.appendOrderCalltreeRoot);const o=r.build();return o.name=this.name,o.valueFormatter=this.valueFormatter,o}async demangle(){let e=null;for(let n of this.frames)(n.name.startsWith("__Z")||n.name.startsWith("_R")||n.name.startsWith("_Z"))&&(e||(e=await(await ho(()=>import("./index-DA4yW5Kz.js"),[],import.meta.url)).loadDemangling()),n.name=e(n.name))}remapSymbols(e){for(let n of this.frames){const r=e(n);if(r==null)continue;const{name:i,file:a,line:o,col:s}=r;i!=null&&(n.name=i),a!=null&&(n.file=a),o!=null&&(n.line=o),s!=null&&(n.col=s)}}}class Lu extends Ml{constructor(){super(...arguments),this.pendingSample=null}_appendSample(e,n,r){if(isNaN(n))throw new Error("invalid weight");let i=r?this.appendOrderCalltreeRoot:this.groupedCalltreeRoot,a=new Set;for(let o of e){const s=r?Ir(i.children):i.children.find(l=>l.frame===o);if(s&&!s.isFrozen()&&s.frame==o)i=s;else{const l=i;i=new Zs(o,i),l.children.push(i)}i.addToTotalWeight(n),a.add(i.frame)}if(i.addToSelfWeight(n),r)for(let o of i.children)o.freeze();if(r){i.frame.addToSelfWeight(n);for(let o of a)o.addToTotalWeight(n);i===Ir(this.samples)?this.weights[this.weights.length-1]+=n:(this.samples.push(i),this.weights.push(n))}}appendSampleWithWeight(e,n){if(n===0)return;if(n<0)throw new Error("Samples must have positive weights");const r=e.map(i=>en.getOrInsert(this.frames,i));this._appendSample(r,n,!0),this._appendSample(r,n,!1)}appendSampleWithTimestamp(e,n){if(this.pendingSample){if(n<this.pendingSample.centralTimestamp)throw new Error("Timestamps received out of order");const r=(n+this.pendingSample.centralTimestamp)/2;this.appendSampleWithWeight(this.pendingSample.stack,r-this.pendingSample.startTimestamp),this.pendingSample={stack:e,startTimestamp:r,centralTimestamp:n}}else this.pendingSample={stack:e,startTimestamp:n,centralTimestamp:n}}build(){return this.pendingSample&&(this.samples.length>0?this.appendSampleWithWeight(this.pendingSample.stack,this.pendingSample.centralTimestamp-this.pendingSample.startTimestamp):(this.appendSampleWithWeight(this.pendingSample.stack,1),this.setValueFormatter(new vf))),this.totalWeight=Math.max(this.totalWeight,this.weights.reduce((e,n)=>e+n,0)),this.sortGroupedCallTree(),this}}class bf extends Ml{constructor(){super(...arguments),this.appendOrderStack=[this.appendOrderCalltreeRoot],this.groupedOrderStack=[this.groupedCalltreeRoot],this.framesInStack=new Map,this.stack=[],this.lastValue=0}addWeightsToFrames(e){const n=e-this.lastValue;for(let i of this.framesInStack.keys())i.addToTotalWeight(n);const r=Ir(this.stack);r&&r.addToSelfWeight(n)}addWeightsToNodes(e,n){const r=e-this.lastValue;for(let a of n)a.addToTotalWeight(r);const i=Ir(n);i&&i.addToSelfWeight(r)}_enterFrame(e,n,r){let i=r?this.appendOrderStack:this.groupedOrderStack;this.addWeightsToNodes(n,i);let a=Ir(i);if(a){if(r){const l=n-this.lastValue;if(l>0)this.samples.push(a),this.weights.push(n-this.lastValue);else if(l<0)throw new Error(`Samples must be provided in increasing order of cumulative value. Last sample was ${this.lastValue}, this sample was ${n}`)}const o=r?Ir(a.children):a.children.find(l=>l.frame===e);let s;o&&!o.isFrozen()&&o.frame==e?s=o:(s=new Zs(e,a),a.children.push(s)),i.push(s)}}enterFrame(e,n){const r=en.getOrInsert(this.frames,e);this.addWeightsToFrames(n),this._enterFrame(r,n,!0),this._enterFrame(r,n,!1),this.stack.push(r);const i=this.framesInStack.get(r)||0;this.framesInStack.set(r,i+1),this.lastValue=n,this.totalWeight=Math.max(this.totalWeight,this.lastValue)}_leaveFrame(e,n,r){let i=r?this.appendOrderStack:this.groupedOrderStack;if(this.addWeightsToNodes(n,i),r){const a=this.appendOrderStack.pop();if(a==null)throw new Error(`Trying to leave ${e.key} when stack is empty`);if(this.lastValue==null)throw new Error(`Trying to leave a ${e.key} before any have been entered`);if(a.freeze(),a.frame.key!==e.key)throw new Error(`Tried to leave frame "${e.name}" while frame "${a.frame.name}" was at the top at ${n}`);const o=n-this.lastValue;if(o>0)this.samples.push(a),this.weights.push(n-this.lastValue);else if(o<0)throw new Error(`Samples must be provided in increasing order of cumulative value. Last sample was ${this.lastValue}, this sample was ${n}`)}else this.groupedOrderStack.pop()}leaveFrame(e,n){const r=en.getOrInsert(this.frames,e);this.addWeightsToFrames(n),this._leaveFrame(r,n,!0),this._leaveFrame(r,n,!1),this.stack.pop();const i=this.framesInStack.get(r);i!=null&&(i===1?this.framesInStack.delete(r):this.framesInStack.set(r,i-1),this.lastValue=n,this.totalWeight=Math.max(this.totalWeight,this.lastValue))}build(){if(this.appendOrderStack.length>1||this.groupedOrderStack.length>1)throw new Error("Tried to complete profile construction with a non-empty stack");return this.sortGroupedCallTree(),this}updateFrameArgs(e,n){const r=en.getOrInsert(this.frames,e);r.args={...r.args,...n}}}function hm(t){return t.replace(/\\([a-fA-F0-9]{2})/g,(e,n)=>{const r=parseInt(n,16);return String.fromCharCode(r)})}function fE(t){const e=t.split(`
`);if(!e.length||(e[e.length-1]===""&&e.pop(),!e.length))return null;const n=new Map,r=/^(\d+):(.+)$/,i=/^([\$\w]+):([\$\w-]+)$/;for(const a of e){const o=r.exec(a);if(o){n.set(`wasm-function[${o[1]}]`,hm(o[2]));continue}const s=i.exec(a);if(s){n.set(s[1],hm(s[2]));continue}return null}return a=>n.has(a.name)?{name:n.get(a.name)}:null}var br;(t=>{(e=>{e.EVENTED="evented",e.SAMPLED="sampled"})(t.ProfileType||(t.ProfileType={})),(e=>{e.OPEN_FRAME="O",e.CLOSE_FRAME="C"})(t.EventType||(t.EventType={}))})(br||(br={}));const hE="1.22.2";function dE(t){const e=[],n=new Map;function r(o){let s=n.get(o);if(s==null){const l={name:o.name};o.file!=null&&(l.file=o.file),o.line!=null&&(l.line=o.line),o.col!=null&&(l.col=o.col),s=e.length,n.set(o,s),e.push(l)}return s}const i={exporter:`speedscope@${hE}`,name:t.name,activeProfileIndex:t.indexToView,$schema:"https://www.speedscope.app/file-format-schema.json",shared:{frames:e},profiles:[]},a=In.get();a&&(i.metadata=a);for(let o of t.profiles)i.profiles.push(gE(o,r));return i}function gE(t,e){const n={type:br.ProfileType.EVENTED,name:t.getName(),unit:t.getWeightUnit(),startValue:0,endValue:t.getTotalWeight(),events:[]},r=(a,o)=>{n.events.push({type:br.EventType.OPEN_FRAME,frame:e(a.frame),at:o})},i=(a,o)=>{n.events.push({type:br.EventType.CLOSE_FRAME,frame:e(a.frame),at:o})};return t.forEachCall(r,i),n}function mE(t,e){function n(a){const{name:o,unit:s}=t;switch(s){case"nanoseconds":case"microseconds":case"milliseconds":case"seconds":a.setValueFormatter(new G0(s));break;case"bytes":a.setValueFormatter(new uE);break;case"none":a.setValueFormatter(new vf);break}a.setName(o)}function r(a){const{startValue:o,endValue:s,events:l}=a,c=new bf(s-o);n(c);const f=e.map((d,p)=>({key:p,...d}));for(let d of l)switch(d.type){case br.EventType.OPEN_FRAME:{c.enterFrame(f[d.frame],d.at-o);break}case br.EventType.CLOSE_FRAME:{c.leaveFrame(f[d.frame],d.at-o);break}}return c.build()}function i(a){const{startValue:o,endValue:s,samples:l,weights:c}=a,f=new Lu(s-o);n(f);const d=e.map((p,x)=>({key:x,...p}));if(l.length!==c.length)throw new Error(`Expected samples.length (${l.length}) to equal weights.length (${c.length})`);for(let p=0;p<l.length;p++){const x=l[p],R=c[p];f.appendSampleWithWeight(x.map(O=>d[O]),R)}return f.build()}switch(t.type){case br.ProfileType.EVENTED:return r(t);case br.ProfileType.SAMPLED:return i(t)}}function gk(t){return t.metadata&&In.set(t.metadata),{name:t.name||t.profiles[0].name||"profile",indexToView:t.activeProfileIndex||0,profiles:t.profiles.map(e=>mE(e,t.shared.frames))}}function pE(t){const e=dE(t),n=new Blob([JSON.stringify(e)],{type:"text/json"}),i=`${(e.name?e.name.split(".")[0]:"profile").replace(/\W+/g,"_")}.speedscope.json`,a=document.createElement("a");a.download=i,a.href=window.URL.createObjectURL(n),a.dataset.downloadurl=["text/json",a.download,a.href].join(":"),document.body.appendChild(a),a.click(),document.body.removeChild(a)}class Nl{constructor(e){this.source=e,this.layers=[],this.totalWeight=0,this.minFrameWidth=1;const n=[],r=(a,o)=>{const s=Ir(n),l={node:a,parent:s,children:[],start:o,end:o};s&&s.children.push(l),n.push(l)};this.minFrameWidth=1/0;const i=(a,o)=>{const s=n.pop();if(s.end=o,s.end-s.start===0)return;const l=n.length;for(;this.layers.length<=l;)this.layers.push([]);this.layers[l].push(s),this.minFrameWidth=Math.min(this.minFrameWidth,s.end-s.start)};this.totalWeight=e.getTotalWeight(),e.forEachCall(r,i),isFinite(this.minFrameWidth)||(this.minFrameWidth=1)}getTotalWeight(){return this.totalWeight}getLayers(){return this.layers}getColorBucketForFrame(e){return this.source.getColorBucketForFrame(e)}getMinFrameWidth(){return this.minFrameWidth}formatValue(e){return this.source.formatValue(e)}getClampedViewportWidth(e){const n=this.getTotalWeight(),r=Math.pow(2,40),i=Ln(3*this.getMinFrameWidth(),n/r,n);return Ln(e,i,n)}getClampedConfigSpaceViewportRect({configSpaceViewportRect:e,renderInverted:n}){const r=new Q(this.getTotalWeight(),this.getLayers().length),i=this.getClampedViewportWidth(e.size.x),a=e.size.withX(i),o=Q.clamp(e.origin,new Q(0,n?0:-1),Q.max(Q.zero,r.minus(a).plus(new Q(0,1))));return new Ne(o,e.size.withX(i))}}const vE=1e4;class dm{constructor(e,n,r){this.batch=e,this.bounds=n,this.numPrecedingRectanglesInRow=r,this.children=[]}getBatch(){return this.batch}getBounds(){return this.bounds}getRectCount(){return this.batch.getRectCount()}getChildren(){return this.children}getParity(){return this.numPrecedingRectanglesInRow%2}forEachLeafNodeWithinBounds(e,n){this.bounds.hasIntersectionWith(e)&&n(this)}}class bE{constructor(e){if(this.children=e,this.rectCount=0,e.length===0)throw new Error("Empty interior node");let n=1/0,r=-1/0,i=1/0,a=-1/0;for(let o of e){this.rectCount+=o.getRectCount();const s=o.getBounds();n=Math.min(n,s.left()),r=Math.max(r,s.right()),i=Math.min(i,s.top()),a=Math.max(a,s.bottom())}this.bounds=new Ne(new Q(n,i),new Q(r-n,a-i))}getBounds(){return this.bounds}getRectCount(){return this.rectCount}getChildren(){return this.children}forEachLeafNodeWithinBounds(e,n){if(this.bounds.hasIntersectionWith(e))for(let r of this.children)r.forEachLeafNodeWithinBounds(e,n)}}class Ks{get key(){return`${this.stackDepth}_${this.index}_${this.zoomLevel}`}constructor(e){this.stackDepth=e.stackDepth,this.zoomLevel=e.zoomLevel,this.index=e.index}static getOrInsert(e,n){return e.getOrInsert(new Ks(n))}}class _E{constructor(e,n,r,i,a,o={inverted:!1}){this.gl=e,this.rowAtlas=n,this.flamechart=r,this.rectangleBatchRenderer=i,this.colorPassRenderer=a,this.options=o,this.layers=[],this.rectInfoTexture=null,this.rectInfoRenderTarget=null,this.atlasKeys=new l0;const s=r.getLayers().length;for(let l=0;l<s;l++){const c=[],f=o.inverted?s-1-l:l;let d=1/0,p=-1/0,x=new Ru(this.gl),R=0;const O=r.getLayers()[l];for(let A=0;A<O.length;A++){const I=O[A];x.getRectCount()>=vE&&(c.push(new dm(x,new Ne(new Q(d,f),new Q(p-d,1)),R)),d=1/0,p=-1/0,x=new Ru(this.gl));const S=new Ne(new Q(I.start,f),new Q(I.end-I.start,1));d=Math.min(d,S.left()),p=Math.max(p,S.right());const D=new ar((1+A%255)/256,(1+l%255)/256,(1+this.flamechart.getColorBucketForFrame(I.node.frame))/256);x.addRect(S,D),R++}x.getRectCount()>0&&c.push(new dm(x,new Ne(new Q(d,f),new Q(p-d,1)),R)),this.layers.push(new bE(c))}}getRectInfoTexture(e,n){if(this.rectInfoTexture){const r=this.rectInfoTexture;(r.width!=e||r.height!=n)&&r.resize(e,n)}else this.rectInfoTexture=this.gl.createTexture(Ke.TextureFormat.NEAREST_CLAMP,e,n);return this.rectInfoTexture}getRectInfoRenderTarget(e,n){const r=this.getRectInfoTexture(e,n);return this.rectInfoRenderTarget&&this.rectInfoRenderTarget.texture!=r&&(this.rectInfoRenderTarget.texture.free(),this.rectInfoRenderTarget.setColor(r)),this.rectInfoRenderTarget||(this.rectInfoRenderTarget=this.gl.createRenderTarget(r)),this.rectInfoRenderTarget}free(){this.rectInfoRenderTarget&&this.rectInfoRenderTarget.free(),this.rectInfoTexture&&this.rectInfoTexture.free()}configSpaceBoundsForKey(e){const{stackDepth:n,zoomLevel:r,index:i}=e,o=this.flamechart.getTotalWeight()/Math.pow(2,r),s=this.flamechart.getLayers().length,l=this.options.inverted?s-1-n:n;return new Ne(new Q(o*i,l),new Q(o,1))}render(e){const{configSpaceSrcRect:n,physicalSpaceDstRect:r}=e,i=[],a=ke.betweenRects(n,r);if(n.isEmpty())return;let o=0;for(;;){const D=Ks.getOrInsert(this.atlasKeys,{stackDepth:0,zoomLevel:o,index:0}),N=this.configSpaceBoundsForKey(D);if(a.transformRect(N).width()<this.rowAtlas.getResolution())break;o++}const s=Math.max(0,Math.floor(n.top())),l=Math.min(this.layers.length,Math.ceil(n.bottom())),c=this.flamechart.getTotalWeight(),f=Math.pow(2,o),d=Math.floor(f*n.left()/c),p=Math.ceil(f*n.right()/c),x=this.flamechart.getLayers().length;for(let D=s;D<l;D++)for(let N=d;N<=p;N++){const k=this.options.inverted?x-1-D:D,W=Ks.getOrInsert(this.atlasKeys,{stackDepth:k,zoomLevel:o,index:N});this.configSpaceBoundsForKey(W).hasIntersectionWith(n)&&i.push(W)}const R=this.rowAtlas.getCapacity(),O=i.slice(0,R),A=i.slice(R);this.rowAtlas.writeToAtlasIfNeeded(O,(D,N)=>{const k=this.configSpaceBoundsForKey(N);this.layers[N.stackDepth].forEachLeafNodeWithinBounds(k,W=>{this.rectangleBatchRenderer.render({batch:W.getBatch(),configSpaceSrcRect:k,physicalSpaceDstRect:D})})});const I=this.getRectInfoRenderTarget(r.width(),r.height());B0(this.gl,I,()=>{this.gl.clear(new Ke.Color(0,0,0,0));const D=new Ne(Q.zero,new Q(this.gl.viewport.width,this.gl.viewport.height)),N=ke.betweenRects(n,D);for(let k of O){const W=this.configSpaceBoundsForKey(k);this.rowAtlas.renderViaAtlas(k,N.transformRect(W))}for(let k of A){const W=this.configSpaceBoundsForKey(k),Y=N.transformRect(W);this.layers[k.stackDepth].forEachLeafNodeWithinBounds(W,X=>{this.rectangleBatchRenderer.render({batch:X.getBatch(),configSpaceSrcRect:W,physicalSpaceDstRect:Y})})}});const S=this.getRectInfoTexture(r.width(),r.height());this.colorPassRenderer.render({rectInfoTexture:S,srcRect:new Ne(Q.zero,new Q(S.width,S.height)),dstRect:r,renderOutlines:e.renderOutlines})}}const ra=sr(t=>Hn.create({hoverCount:{color:t.weightColor},fill:{width:"100%",height:"100%",position:"absolute",left:0,top:0},minimap:{height:ze.MINIMAP_HEIGHT,borderBottom:`${ze.SEPARATOR_HEIGHT}px solid ${t.fgSecondaryColor}`},panZoomView:{flex:1},detailView:{display:"grid",height:ze.DETAIL_VIEW_HEIGHT,overflow:"hidden",gridTemplateColumns:"120px 120px 1fr",gridTemplateRows:"repeat(4, 1fr)",borderTop:`${ze.SEPARATOR_HEIGHT}px solid ${t.fgSecondaryColor}`,fontSize:Ot.LABEL,position:"absolute",background:t.bgPrimaryColor,width:"100vw",bottom:0},stackTraceViewPadding:{padding:5},stackTraceView:{height:ze.DETAIL_VIEW_HEIGHT,lineHeight:`${Ot.LABEL+2}px`,overflow:"auto","::-webkit-scrollbar":{background:t.bgPrimaryColor},"::-webkit-scrollbar-thumb":{background:t.fgSecondaryColor,borderRadius:20,border:`3px solid ${t.bgPrimaryColor}`,":hover":{background:t.fgPrimaryColor}}},stackLine:{whiteSpace:"nowrap"},stackFileLine:{color:t.fgSecondaryColor},statsTable:{display:"grid",gridTemplateColumns:"1fr 1fr",gridTemplateRows:`repeat(3, ${Ot.LABEL+10}px)`,gridGap:"1px 1px",textAlign:"center",paddingRight:1},statsTableHeader:{gridColumn:"1 / 3"},statsTableCell:{position:"relative",display:"flex",justifyContent:"center",alignItems:"center"},thisInstanceCell:{background:t.selectionPrimaryColor,color:t.altFgPrimaryColor},allInstancesCell:{background:t.selectionSecondaryColor,color:t.altFgPrimaryColor},barDisplay:{position:"absolute",top:0,left:0,background:"rgba(0, 0, 0, 0.2)",width:"100%"}})),j0="",rs=new Map;let gm=-1;function ti(t,e){return window.devicePixelRatio!==gm&&(rs.clear(),gm=window.devicePixelRatio),rs.has(e)||rs.set(e,t.measureText(e).width),rs.get(e)}let is=null,mm=-1;function yE(t,e){if(window.devicePixelRatio!==mm&&(is=null,mm=window.devicePixelRatio),!is){const n=t.measureText(e);is=n.actualBoundingBoxAscent+n.actualBoundingBoxDescent}return is}function Yc(t,e){if(t.length<=e)return{trimmedString:t,trimmedLength:t.length,prefixLength:t.length,suffixLength:0,originalString:t,originalLength:t.length};let n=Math.floor(e/2);const r=e-n-1,i=t.substring(0,n),a=t.substring(t.length-r,t.length),o=i+j0+a;return{trimmedString:o,trimmedLength:o.length,prefixLength:i.length,suffixLength:a.length,originalString:t,originalLength:t.length}}function wE(t,e,n){if(ti(t,e)<=n)return Yc(e,e.length);const[r]=Dx(0,e.length,i=>ti(t,Yc(e,Math.floor(i)).trimmedString),n);return Yc(e,Math.floor(r))}function pm(t,e){return e<t.prefixLength?0:e<t.originalLength-t.suffixLength?2:1}function xE(t,e){const n=[],r=t.originalLength-t.trimmedLength;let i=!1;for(let[a,o]of e){let s=pm(t,a),l=pm(t,o-1);switch(s){case 0:{switch(l){case 0:{n.push([a,o]);break}case 2:{n.push([a,t.prefixLength+1]),i=!0;break}case 1:{n.push([a,o-r]);break}}break}case 2:{switch(l){case 0:throw new Error("Unexpected highlight range starts in elided and ends in prefix");case 2:{i||(n.push([t.prefixLength,t.prefixLength+1]),i=!0);break}case 1:{i?n.push([t.trimmedLength-t.suffixLength,o-r]):(n.push([t.prefixLength,o-r]),i=!0);break}}break}case 1:{switch(l){case 0:throw new Error("Unexpected highlight range starts in suffix and ends in prefix");case 2:throw new Error("Unexpected highlight range starts in suffix and ends in elided");case 1:{n.push([a-r,o-r]);break}}break}}}return n}class TE extends sn{constructor(){super(...arguments),this.container=null,this.containerRef=e=>{this.container=e||null},this.overlayCanvas=null,this.overlayCtx=null,this.onWindowResize=()=>{this.onBeforeFrame()},this.onBeforeFrame=()=>{this.maybeClearInteractionLock(),this.resizeOverlayCanvasIfNeeded(),this.renderRects(),this.renderOverlays()},this.renderCanvas=()=>{this.props.canvasContext.requestFrame()},this.frameHadWheelEvent=!1,this.framesWithoutWheelEvents=0,this.interactionLock=null,this.maybeClearInteractionLock=()=>{this.interactionLock&&(this.frameHadWheelEvent||(this.framesWithoutWheelEvents++,this.framesWithoutWheelEvents>=2&&(this.interactionLock=null,this.framesWithoutWheelEvents=0)),this.props.canvasContext.requestFrame()),this.frameHadWheelEvent=!1},this.onWheel=e=>{if(e.preventDefault(),this.frameHadWheelEvent=!0,(e.metaKey||e.ctrlKey)&&this.interactionLock!=="pan"){let r=1+e.deltaY/100;e.ctrlKey&&(r=1+e.deltaY/40),r=Ln(r,.1,10),this.zoom(r)}else this.interactionLock!=="zoom"&&this.pan(new Q(e.deltaX,e.deltaY));this.renderCanvas()},this.dragStartConfigSpaceMouse=null,this.dragConfigSpaceViewportOffset=null,this.draggingMode=null,this.onMouseDown=e=>{const n=this.configSpaceMouse(e);n&&(this.props.configSpaceViewportRect.contains(n)?(this.draggingMode=1,this.dragConfigSpaceViewportOffset=n.minus(this.props.configSpaceViewportRect.origin)):this.draggingMode=0,this.dragStartConfigSpaceMouse=n,window.addEventListener("mousemove",this.onWindowMouseMove),window.addEventListener("mouseup",this.onWindowMouseUp),this.updateCursor(n))},this.onWindowMouseMove=e=>{if(!this.dragStartConfigSpaceMouse)return;let n=this.configSpaceMouse(e);if(n){if(this.updateCursor(n),n=new Ne(new Q(0,0),this.configSpaceSize()).closestPointTo(n),this.draggingMode===0){const r=this.dragStartConfigSpaceMouse;let i=n;if(!r||!i)return;const a=Math.min(r.x,i.x),s=Math.max(r.x,i.x)-a,l=this.props.configSpaceViewportRect.height();this.props.setConfigSpaceViewportRect(new Ne(new Q(a,i.y-l/2),new Q(s,l)))}else if(this.draggingMode===1){if(!this.dragConfigSpaceViewportOffset)return;const r=n.minus(this.dragConfigSpaceViewportOffset);this.props.setConfigSpaceViewportRect(this.props.configSpaceViewportRect.withOrigin(r))}}},this.updateCursor=e=>{this.draggingMode===1?(document.body.style.cursor="grabbing",document.body.style.cursor="-webkit-grabbing"):this.draggingMode===0?document.body.style.cursor="col-resize":this.props.configSpaceViewportRect.contains(e)?(document.body.style.cursor="grab",document.body.style.cursor="-webkit-grab"):document.body.style.cursor="col-resize"},this.onMouseLeave=()=>{this.draggingMode==null&&(document.body.style.cursor="default")},this.onMouseMove=e=>{const n=this.configSpaceMouse(e);n&&this.updateCursor(n)},this.onWindowMouseUp=e=>{this.draggingMode=null,window.removeEventListener("mousemove",this.onWindowMouseMove),window.removeEventListener("mouseup",this.onWindowMouseUp);const n=this.configSpaceMouse(e);n&&this.updateCursor(n)},this.overlayCanvasRef=e=>{e?(this.overlayCanvas=e,this.overlayCtx=this.overlayCanvas.getContext("2d"),this.renderCanvas()):(this.overlayCanvas=null,this.overlayCtx=null)}}physicalViewSize(){return new Q(this.overlayCanvas?this.overlayCanvas.width:0,this.overlayCanvas?this.overlayCanvas.height:0)}getStyle(){return ra(this.props.theme)}minimapOrigin(){return new Q(0,ze.FRAME_HEIGHT*window.devicePixelRatio)}configSpaceSize(){return new Q(this.props.flamechart.getTotalWeight(),this.props.flamechart.getLayers().length)}configSpaceToPhysicalViewSpace(){const e=this.minimapOrigin();return ke.betweenRects(new Ne(new Q(0,0),this.configSpaceSize()),new Ne(e,this.physicalViewSize().minus(e)))}logicalToPhysicalViewSpace(){return ke.withScale(new Q(window.devicePixelRatio,window.devicePixelRatio))}windowToLogicalViewSpace(){if(!this.container)return new ke;const e=this.container.getBoundingClientRect();return ke.withTranslation(new Q(-e.left,-e.top))}renderRects(){this.container&&(this.physicalViewSize().x<2||this.props.canvasContext.renderBehind(this.container,()=>{this.props.flamechartRenderer.render({configSpaceSrcRect:new Ne(new Q(0,0),this.configSpaceSize()),physicalSpaceDstRect:new Ne(this.minimapOrigin(),this.physicalViewSize().minus(this.minimapOrigin())),renderOutlines:!1}),this.props.canvasContext.viewportRectangleRenderer.render({configSpaceViewportRect:this.props.configSpaceViewportRect,configSpaceToPhysicalViewSpace:this.configSpaceToPhysicalViewSpace()})}))}renderOverlays(){const e=this.overlayCtx;if(!e)return;const n=this.physicalViewSize();e.clearRect(0,0,n.x,n.y);const r=this.configSpaceToPhysicalViewSpace(),i=0,a=this.configSpaceSize().x,s=(this.configSpaceToPhysicalViewSpace().inverted()||new ke).times(this.logicalToPhysicalViewSpace()).transformVector(new Q(200,1)).x,l=ze.FRAME_HEIGHT*window.devicePixelRatio,c=Ot.LABEL*window.devicePixelRatio,f=(l-c)/2;e.font=`${c}px/${l}px ${na.MONOSPACE}`,e.textBaseline="top";let p=Math.pow(10,Math.floor(Math.log10(s)));s/p>5?p*=5:s/p>2&&(p*=2);const x=this.props.theme;{e.fillStyle=ar.fromCSSHex(x.bgPrimaryColor).withAlpha(.8).toCSS(),e.fillRect(0,0,n.x,l),e.textBaseline="top";for(let A=Math.ceil(i/p)*p;A<a;A+=p){const I=Math.round(r.transformPosition(new Q(A,0)).x),S=this.props.flamechart.formatValue(A),D=Math.ceil(ti(e,S));e.fillStyle=x.fgPrimaryColor,e.fillText(S,I-D-f,f),e.fillStyle=x.fgSecondaryColor,e.fillRect(I,0,1,n.y)}}const R=Zn.get();if(!this.props.enableTimestampPointer||!R)return;const{physicalSpacePos:O}=u0(R,r);0>O||n.x<O||(e.fillStyle=x.fgSecondaryColor,e.fillRect(O,l,ze.TIMESTAMP_INDICATOR_WIDTH,n.y))}componentWillReceiveProps(e){this.props.flamechart!==e.flamechart?this.renderCanvas():this.props.configSpaceViewportRect!=e.configSpaceViewportRect?this.renderCanvas():this.props.canvasContext!==e.canvasContext&&(this.props.canvasContext&&this.props.canvasContext.removeBeforeFrameHandler(this.onBeforeFrame),e.canvasContext&&(e.canvasContext.addBeforeFrameHandler(this.onBeforeFrame),e.canvasContext.requestFrame()))}componentDidMount(){window.addEventListener("resize",this.onWindowResize),this.props.canvasContext.addBeforeFrameHandler(this.onBeforeFrame)}componentWillUnmount(){window.removeEventListener("resize",this.onWindowResize),this.props.canvasContext.removeBeforeFrameHandler(this.onBeforeFrame)}resizeOverlayCanvasIfNeeded(){if(!this.overlayCanvas)return;let{width:e,height:n}=this.overlayCanvas.getBoundingClientRect();if(e=Math.floor(e),n=Math.floor(n),e===0||n===0)return;const r=e*window.devicePixelRatio,i=n*window.devicePixelRatio;r===this.overlayCanvas.width&&i===this.overlayCanvas.height||(this.overlayCanvas.width=r,this.overlayCanvas.height=i)}pan(e){this.interactionLock="pan";const n=this.logicalToPhysicalViewSpace().transformVector(e),r=this.configSpaceToPhysicalViewSpace().inverseTransformVector(n);r&&this.props.transformViewport(ke.withTranslation(r))}zoom(e){this.interactionLock="zoom";const n=this.props.configSpaceViewportRect,r=n.origin.plus(n.size.times(1/2));if(!r)return;const i=ke.withTranslation(r.times(-1)).scaledBy(new Q(e,1)).translatedBy(r);this.props.transformViewport(i)}configSpaceMouse(e){const n=this.windowToLogicalViewSpace().transformPosition(new Q(e.clientX,e.clientY)),r=this.logicalToPhysicalViewSpace().transformPosition(n);return this.configSpaceToPhysicalViewSpace().inverseTransformPosition(r)}render(){const e=this.getStyle();return C("div",{ref:this.containerRef,onWheel:this.onWheel,onMouseDown:this.onMouseDown,onMouseMove:this.onMouseMove,onMouseLeave:this.onMouseLeave,className:se(e.minimap,xn.vbox),children:C("canvas",{width:1,height:1,ref:this.overlayCanvasRef,className:se(e.fill)})})}}function J0(t){const e=SE(ut());return C("span",{className:se(e.stackChit),style:{backgroundColor:t.color}})}const SE=sr(t=>Hn.create({stackChit:{position:"relative",top:-1,display:"inline-block",verticalAlign:"middle",marginRight:"0.5em",border:`1px solid ${t.fgSecondaryColor}`,width:Ot.LABEL-2,height:Ot.LABEL-2}}));function vm(t){const e=ra(ut()),n=t.formatter(t.selectedTotal),r=t.formatter(t.selectedSelf),i=100*t.selectedTotal/t.grandTotal,a=100*t.selectedSelf/t.grandTotal;return C("div",{className:se(e.statsTable),children:[C("div",{className:se(t.cellStyle,e.statsTableCell,e.statsTableHeader),children:t.title}),C("div",{className:se(t.cellStyle,e.statsTableCell),children:"Total"}),C("div",{className:se(t.cellStyle,e.statsTableCell),children:"Self"}),C("div",{className:se(t.cellStyle,e.statsTableCell),children:n}),C("div",{className:se(t.cellStyle,e.statsTableCell),children:r}),C("div",{className:se(t.cellStyle,e.statsTableCell),children:[Pi(i),C("div",{className:se(e.barDisplay),style:{height:`${i}%`}})]}),C("div",{className:se(t.cellStyle,e.statsTableCell),children:[Pi(a),C("div",{className:se(e.barDisplay),style:{height:`${a}%`}})]})]})}function EE(t){const e=ra(ut()),n=[];let r=t.node;for(;r&&!r.isRoot();r=r.parent){const i=[],{frame:a}=r;if(i.push(C(J0,{color:t.getFrameColor(a)})),n.length&&i.push(C("span",{className:se(e.stackFileLine),children:"> "})),i.push(a.name),a.file){let o=a.file;a.line!=null&&(o+=`:${a.line}`,a.col!=null&&(o+=`:${a.col}`)),i.push(C("span",{className:se(e.stackFileLine),children:[" (",o,")"]}))}n.push(C("div",{className:se(e.stackLine),children:i}))}return C("div",{className:se(e.stackTraceView),children:C("div",{className:se(e.stackTraceViewPadding),children:n})})}function CE(t){const e=ra(ut()),{flamechart:n,selectedNode:r}=t,{frame:i}=r;return C("div",{className:se(e.detailView),children:[C(vm,{title:"This Instance",cellStyle:e.thisInstanceCell,grandTotal:n.getTotalWeight(),selectedTotal:r.getTotalWeight(),selectedSelf:r.getSelfWeight(),formatter:n.formatValue.bind(n)}),C(vm,{title:"All Instances",cellStyle:e.allInstancesCell,grandTotal:n.getTotalWeight(),selectedTotal:i.getTotalWeight(),selectedSelf:i.getSelfWeight(),formatter:n.formatValue.bind(n)}),C(EE,{node:r,getFrameColor:t.getCSSColorForFrame})]})}class bm{constructor(){this.argsBatch=[]}text(e){this.argsBatch.push(e)}fill(e,n){if(this.argsBatch.length!==0){e.fillStyle=n;for(let r of this.argsBatch)e.fillText(r.text,r.x,r.y);this.argsBatch=[]}}}class as{constructor(){this.argsBatch=[]}rect(e){this.argsBatch.push(e)}drawPath(e){e.beginPath();for(let n of this.argsBatch)e.rect(n.x,n.y,n.w,n.h);e.closePath(),this.argsBatch=[]}fill(e,n){this.argsBatch.length!==0&&(e.fillStyle=n,this.drawPath(e),e.fill())}stroke(e,n,r){this.argsBatch.length!==0&&(e.strokeStyle=n,e.lineWidth=r,this.drawPath(e),e.stroke())}}class Z0 extends sn{constructor(){super(...arguments),this.container=null,this.containerRef=e=>{this.container=e||null},this.overlayCanvas=null,this.overlayCtx=null,this.hoveredLabel=null,this.overlayCanvasRef=e=>{e?(this.overlayCanvas=e,this.overlayCtx=this.overlayCanvas.getContext("2d"),this.renderCanvas()):(this.overlayCanvas=null,this.overlayCtx=null)},this.LOGICAL_VIEW_SPACE_FRAME_HEIGHT=ze.FRAME_HEIGHT,this.onWindowResize=()=>{this.updateConfigSpaceViewport(),this.onBeforeFrame()},this.frameHadWheelEvent=!1,this.framesWithoutWheelEvents=0,this.interactionLock=null,this.maybeClearInteractionLock=()=>{this.interactionLock&&(this.frameHadWheelEvent||(this.framesWithoutWheelEvents++,this.framesWithoutWheelEvents>=2&&(this.interactionLock=null,this.framesWithoutWheelEvents=0)),this.props.canvasContext.requestFrame()),this.frameHadWheelEvent=!1},this.onBeforeFrame=()=>{this.resizeOverlayCanvasIfNeeded(),this.renderRects(),this.renderOverlays(),this.maybeClearInteractionLock()},this.renderCanvas=()=>{this.props.canvasContext.requestFrame()},this.lastDragPos=null,this.mouseDownPos=null,this.onMouseDown=e=>{this.mouseDownPos=this.lastDragPos=new Q(e.offsetX,e.offsetY),this.updateCursor(),window.addEventListener("mouseup",this.onWindowMouseUp)},this.onMouseDrag=e=>{if(!this.lastDragPos)return;const n=new Q(e.offsetX,e.offsetY);this.pan(this.lastDragPos.minus(n)),this.lastDragPos=n,this.hoveredLabel&&this.props.onNodeHover(null)},this.onDblClick=e=>{if(this.hoveredLabel){const n=this.hoveredLabel.configSpaceBounds,r=new Ne(n.origin.minus(new Q(0,1)),n.size.withY(this.props.configSpaceViewportRect.height()));this.setConfigSpaceViewportRect(r)}},this.onClick=e=>{const n=new Q(e.offsetX,e.offsetY),r=this.mouseDownPos;this.mouseDownPos=null,!(r&&n.minus(r).length()>5)&&(this.hoveredLabel?(this.props.onNodeSelect(this.hoveredLabel.node),this.renderCanvas()):this.props.onNodeSelect(null))},this.onWindowMouseUp=e=>{this.lastDragPos=null,this.updateCursor(),window.removeEventListener("mouseup",this.onWindowMouseUp)},this.setTimestampHoveredAtom=e=>{this.props.enableTimestampPointer&&(Zn.unsubscribe(this.renderCanvas),Zn.set(e),Zn.subscribe(this.renderCanvas))},this.onMouseMove=e=>{this.updateCursor();const n=new Q(e.offsetX,e.offsetY),r=this.logicalToPhysicalViewSpace().transformPosition(n),i=this.configSpaceToPhysicalViewSpace().inverseTransformPosition(r);if(i&&this.setTimestampHoveredAtom({x:i.x/1e3,yProc:.5}),this.lastDragPos){e.preventDefault(),this.onMouseDrag(e);return}if(!i)return;const a=(s,l=0)=>{const c=s.end-s.start,f=this.props.renderInverted?this.configSpaceSize().y-1-l:l,d=new Ne(new Q(s.start,f),new Q(c,1));if(i.x<d.left()||i.x>d.right())return null;d.contains(i)&&(this.hoveredLabel={configSpaceBounds:d,node:s.node});for(let p of s.children)a(p,l+1)};(()=>{this.hoveredLabel=null})();for(let s of this.props.flamechart.getLayers()[0]||[])a(s);this.hoveredLabel?this.props.onNodeHover({node:this.hoveredLabel.node,event:e}):this.props.onNodeHover(null),this.renderCanvas()},this.onMouseLeave=e=>{this.hoveredLabel=null,this.setTimestampHoveredAtom(null),this.props.onNodeHover(null),this.renderCanvas()},this.onWheel=e=>{e.preventDefault(),this.frameHadWheelEvent=!0;const n=e.metaKey||e.ctrlKey;let r=e.deltaY,i=e.deltaX;if(e.deltaMode===e.DOM_DELTA_LINE&&(r*=this.LOGICAL_VIEW_SPACE_FRAME_HEIGHT,i*=this.LOGICAL_VIEW_SPACE_FRAME_HEIGHT),n&&this.interactionLock!=="pan"){let a=1+r/100;e.ctrlKey&&(a=1+r/40),a=Ln(a,.1,10),this.zoom(new Q(e.offsetX,e.offsetY),a)}else this.interactionLock!=="zoom"&&this.pan(new Q(i,r));this.renderCanvas()},this.onWindowKeyPress=e=>{if(!this.container)return;const{width:n,height:r}=this.container.getBoundingClientRect();e.key==="="||e.key==="+"?(this.zoom(new Q(n/2,r/2),.5),e.preventDefault()):(e.key==="-"||e.key==="_")&&(this.zoom(new Q(n/2,r/2),2),e.preventDefault()),!(e.ctrlKey||e.shiftKey||e.metaKey)&&(e.key==="0"?this.zoom(new Q(n/2,r/2),1e9):e.key==="ArrowRight"||e.code==="KeyD"?this.pan(new Q(100,0)):e.key==="ArrowLeft"||e.code==="KeyA"?this.pan(new Q(-100,0)):e.key==="ArrowUp"||e.code==="KeyW"?this.pan(new Q(0,-100)):e.key==="ArrowDown"||e.code==="KeyS"?this.pan(new Q(0,100)):e.key==="Escape"&&(this.props.onNodeSelect(null),this.renderCanvas()))}}getStyle(){return ra(this.props.theme)}setConfigSpaceViewportRect(e){this.props.setConfigSpaceViewportRect(e)}configSpaceSize(){return new Q(this.props.flamechart.getTotalWeight(),this.props.flamechart.getLayers().length)}physicalViewSize(){return new Q(this.overlayCanvas?this.overlayCanvas.width:0,this.overlayCanvas?this.overlayCanvas.height:0)}physicalBounds(){if(this.props.renderInverted){const e=this.physicalViewSize().y,n=(this.configSpaceSize().y+1)*this.LOGICAL_VIEW_SPACE_FRAME_HEIGHT*window.devicePixelRatio;if(n<e)return new Ne(new Q(0,e-n),this.physicalViewSize())}return new Ne(new Q(0,0),this.physicalViewSize())}configSpaceToPhysicalViewSpace(){return ke.betweenRects(this.props.configSpaceViewportRect,this.physicalBounds())}logicalToPhysicalViewSpace(){return ke.withScale(new Q(window.devicePixelRatio,window.devicePixelRatio))}resizeOverlayCanvasIfNeeded(){if(!this.overlayCanvas)return;let{width:e,height:n}=this.overlayCanvas.getBoundingClientRect();if(e=Math.floor(e),n=Math.floor(n),e===0||n===0)return;const r=e*window.devicePixelRatio,i=n*window.devicePixelRatio;r===this.overlayCanvas.width&&i===this.overlayCanvas.height||(this.overlayCanvas.width=r,this.overlayCanvas.height=i)}renderOverlays(){const e=this.overlayCtx;if(!e||this.props.configSpaceViewportRect.isEmpty())return;const n=this.configSpaceToPhysicalViewSpace(),r=Ot.LABEL*window.devicePixelRatio,i=this.LOGICAL_VIEW_SPACE_FRAME_HEIGHT*window.devicePixelRatio,a=this.physicalViewSize();e.clearRect(0,0,a.x,a.y),e.font=`${r}px/${i}px ${na.MONOSPACE}`,e.textBaseline="alphabetic";const o=ti(e,"M"+j0+"M"),s=(n.inverseTransformVector(new Q(o,0))||new Q(0,0)).x,l=5*window.devicePixelRatio,c=new bm,f=new bm,d=new as,p=new as,x=new as,R=new as,O=(N,k=0)=>{var Z;const W=N.end-N.start,Y=this.props.renderInverted?this.configSpaceSize().y-1-k:k,X=new Ne(new Q(N.start,Y),new Q(W,1));if(!(W<s)&&!(X.left()>this.props.configSpaceViewportRect.right())&&!(X.right()<this.props.configSpaceViewportRect.left())){if(this.props.renderInverted){if(X.bottom()<this.props.configSpaceViewportRect.top())return}else if(X.top()>this.props.configSpaceViewportRect.bottom())return;if(X.hasIntersectionWith(this.props.configSpaceViewportRect)){let ie=n.transformRect(X);if(ie.left()<0&&(ie=ie.withOrigin(ie.origin.withX(0)).withSize(ie.size.withX(ie.size.x+ie.left()))),ie.right()>a.x&&(ie=ie.withSize(ie.size.withX(a.x-ie.left()))),ie.width()>o){const ne=(Z=this.props.searchResults)==null?void 0:Z.getMatchForFrame(N.node.frame),J=wE(e,N.node.frame.name,ie.width()-2*l);if(ne){const $=xE(J,ne);let te=0,G=ie.left()+l;const oe=(i-r)/2-2;for(let[ge,he]of $){G+=ti(e,J.trimmedString.substring(te,ge));const pe=ti(e,J.trimmedString.substring(ge,he));d.rect({x:G,y:ie.top()+oe,w:pe,h:i-2*oe}),G+=pe,te=he}}(this.props.searchResults!=null&&!ne?f:c).text({text:J.trimmedString,x:ie.left()+l,y:Math.round(ie.bottom()-(i-r)/2)})}}for(let ie of N.children)O(ie,k+1)}},A=2*window.devicePixelRatio;e.strokeStyle=this.props.theme.selectionSecondaryColor;const I=(n.inverseTransformVector(new Q(1,0))||new Q(0,0)).x,S=(N,k=0)=>{var Z;if(!this.props.selectedNode&&this.props.searchResults==null)return;const W=N.end-N.start,Y=this.props.renderInverted?this.configSpaceSize().y-1-k:k,X=new Ne(new Q(N.start,Y),new Q(W,1));if(!(W<I)&&!(X.left()>this.props.configSpaceViewportRect.right())&&!(X.right()<this.props.configSpaceViewportRect.left())&&!(X.top()>this.props.configSpaceViewportRect.bottom())){if(X.hasIntersectionWith(this.props.configSpaceViewportRect)){if((Z=this.props.searchResults)!=null&&Z.getMatchForFrame(N.node.frame)){const ie=n.transformRect(X);R.rect({x:Math.round(ie.left()+A/2),y:Math.round(ie.top()+A/2),w:Math.round(Math.max(0,ie.width()-A)),h:Math.round(Math.max(0,ie.height()-A))})}if(this.props.selectedNode!=null&&N.node.frame===this.props.selectedNode.frame){let ie=N.node===this.props.selectedNode?p:x;const ne=n.transformRect(X);ie.rect({x:Math.round(ne.left()+1+A/2),y:Math.round(ne.top()+1+A/2),w:Math.round(Math.max(0,ne.width()-2-A)),h:Math.round(Math.max(0,ne.height()-2-A))})}}for(let ie of N.children)S(ie,k+1)}};for(let N of this.props.flamechart.getLayers()[0]||[])S(N);for(let N of this.props.flamechart.getLayers()[0]||[])O(N);const D=this.props.theme;if(R.fill(e,D.searchMatchPrimaryColor),d.fill(e,D.searchMatchSecondaryColor),f.fill(e,D.fgSecondaryColor),c.fill(e,this.props.searchResults!=null?D.searchMatchTextColor:D.fgPrimaryColor),x.stroke(e,D.selectionSecondaryColor,A),p.stroke(e,D.selectionPrimaryColor,A),this.hoveredLabel){let N=D.fgPrimaryColor;this.props.selectedNode===this.hoveredLabel.node&&(N=D.selectionPrimaryColor),e.lineWidth=2*devicePixelRatio,e.strokeStyle=N;const k=n.transformRect(this.hoveredLabel.configSpaceBounds);e.strokeRect(Math.round(k.left()),Math.round(k.top()),Math.round(Math.max(0,k.width())),Math.round(Math.max(0,k.height())))}this.renderTimeIndicators()}renderTimeIndicators(){const e=this.overlayCtx;if(!e)return;const n=this.LOGICAL_VIEW_SPACE_FRAME_HEIGHT*window.devicePixelRatio,r=this.physicalViewSize(),i=this.configSpaceToPhysicalViewSpace(),a=Ot.LABEL*window.devicePixelRatio,o=(n-a)/2,s=this.props.configSpaceViewportRect.left(),l=this.props.configSpaceViewportRect.right(),f=(this.configSpaceToPhysicalViewSpace().inverted()||new ke).times(this.logicalToPhysicalViewSpace()).transformVector(new Q(200,1)).x;let p=Math.pow(10,Math.floor(Math.log10(f)));f/p>5?p*=5:f/p>2&&(p*=2);const x=this.props.theme;{const D=this.props.renderInverted?r.y-n:0;e.fillStyle=ar.fromCSSHex(x.bgPrimaryColor).withAlpha(.8).toCSS(),e.fillRect(0,D,r.x,n),e.textBaseline="top";for(let N=Math.ceil(s/p)*p;N<l;N+=p){const k=Math.round(i.transformPosition(new Q(N,0)).x),W=this.props.flamechart.formatValue(N),Y=ti(e,W);e.fillStyle=x.fgPrimaryColor,e.fillText(W,k-Y-o,D+o),e.fillStyle=x.fgSecondaryColor,e.fillRect(k,0,1,r.y)}}const R=Zn.get();if(!this.props.enableTimestampPointer||!R)return;const{configSpacePos:O,physicalSpacePos:A}=u0(R,i);if(0>A||r.x<A)return;const I=this.props.flamechart.formatValue(O),S=e.measureText(I).width;e.fillStyle=x.fgPrimaryColor,e.fillText(I,A+2*o+S<r.x?A+o:A-S-o,r.y-o-yE(e,I)-(this.props.selectedNode?ze.DETAIL_VIEW_HEIGHT*window.devicePixelRatio:0)),e.fillStyle=x.fgSecondaryColor,e.fillRect(A,0,ze.TIMESTAMP_INDICATOR_WIDTH,r.y)}updateConfigSpaceViewport(){if(!this.container)return;const{logicalSpaceViewportSize:e}=this.props,n=this.container.getBoundingClientRect(),{width:r,height:i}=n;if(r<2||i<2)return;if(this.props.configSpaceViewportRect.isEmpty()){const o=i/this.LOGICAL_VIEW_SPACE_FRAME_HEIGHT;this.props.renderInverted?this.setConfigSpaceViewportRect(new Ne(new Q(0,this.configSpaceSize().y-o+1),new Q(this.configSpaceSize().x,o))):this.setConfigSpaceViewportRect(new Ne(new Q(0,-1),new Q(this.configSpaceSize().x,o)))}else!e.equals(Q.zero)&&(e.x!==r||e.y!==i)&&this.setConfigSpaceViewportRect(this.props.configSpaceViewportRect.withSize(this.props.configSpaceViewportRect.size.timesPointwise(new Q(r/e.x,i/e.y))));const a=new Q(r,i);a.equals(e)||this.props.setLogicalSpaceViewportSize(a)}renderRects(){this.container&&(this.updateConfigSpaceViewport(),!this.props.configSpaceViewportRect.isEmpty()&&this.props.canvasContext.renderBehind(this.container,()=>{this.props.flamechartRenderer.render({physicalSpaceDstRect:this.physicalBounds(),configSpaceSrcRect:this.props.configSpaceViewportRect,renderOutlines:!0})}))}pan(e){this.interactionLock="pan";const n=this.logicalToPhysicalViewSpace().transformVector(e),r=this.configSpaceToPhysicalViewSpace().inverseTransformVector(n);this.hoveredLabel&&this.props.onNodeHover(null),r&&this.props.transformViewport(ke.withTranslation(r))}zoom(e,n){this.interactionLock="zoom";const r=this.logicalToPhysicalViewSpace().transformPosition(e),i=this.configSpaceToPhysicalViewSpace().inverseTransformPosition(r);if(!i)return;const a=ke.withTranslation(i.times(-1)).scaledBy(new Q(n,1)).translatedBy(i);this.props.transformViewport(a)}updateCursor(){this.lastDragPos?(document.body.style.cursor="grabbing",document.body.style.cursor="-webkit-grabbing"):document.body.style.cursor="default"}shouldComponentUpdate(){return!1}componentWillReceiveProps(e){this.props.flamechart!==e.flamechart?(this.hoveredLabel=null,this.renderCanvas()):this.props.searchResults!==e.searchResults?this.renderCanvas():this.props.selectedNode!==e.selectedNode?this.renderCanvas():this.props.configSpaceViewportRect!==e.configSpaceViewportRect?this.renderCanvas():this.props.canvasContext!==e.canvasContext&&(this.props.canvasContext&&this.props.canvasContext.removeBeforeFrameHandler(this.onBeforeFrame),e.canvasContext&&(e.canvasContext.addBeforeFrameHandler(this.onBeforeFrame),e.canvasContext.requestFrame()))}componentDidMount(){this.props.canvasContext.addBeforeFrameHandler(this.onBeforeFrame),window.addEventListener("resize",this.onWindowResize),window.addEventListener("keydown",this.onWindowKeyPress)}componentWillUnmount(){this.props.canvasContext.removeBeforeFrameHandler(this.onBeforeFrame),window.removeEventListener("resize",this.onWindowResize),window.removeEventListener("keydown",this.onWindowKeyPress)}render(){const e=this.getStyle();return this.props.enableTimestampPointer&&Zn.subscribe(this.renderCanvas),C("div",{className:se(e.panZoomView,xn.vbox),onMouseDown:this.onMouseDown,onMouseMove:this.onMouseMove,onMouseLeave:this.onMouseLeave,onClick:this.onClick,onDblClick:this.onDblClick,onWheel:this.onWheel,ref:this.containerRef,children:C("canvas",{width:1,height:1,ref:this.overlayCanvasRef,className:se(e.fill)})})}}function K0(t){const e=AE(ut()),{containerSize:n,offset:r}=t,i=n.x,a=n.y,o=7,s=Qe(l=>{if(!l)return;const c=l.getBoundingClientRect();let f=r.x+o;f+c.width>i-1&&(f=i-c.width-1,f<1&&(f=1)),l.style.left=`${f}px`;let d=r.y+o;d+c.height>a-1&&(d=r.y-c.height-1,d<1&&(d=1)),l.style.top=`${d}px`},[i,a,r.x,r.y]);return C("div",{className:se(e.hoverTip),ref:s,children:C("div",{className:se(e.hoverTipRow),children:t.children})})}const os=2,AE=sr(t=>Hn.create({hoverTip:{position:"absolute",background:t.bgPrimaryColor,border:"1px solid black",maxWidth:ze.TOOLTIP_WIDTH_MAX,paddingTop:os,paddingBottom:os,pointerEvents:"none",userSelect:"none",fontSize:Ot.LABEL,fontFamily:na.MONOSPACE,zIndex:pf.HOVERTIP},hoverTipRow:{textOverflow:"ellipsis",whiteSpace:"nowrap",overflowX:"hidden",paddingLeft:os,paddingRight:os,maxWidth:ze.TOOLTIP_WIDTH_MAX}})),Q0=xl(null),ev=({flamechart:t,selectedNode:e,setSelectedNode:n,configSpaceViewportRect:r,setConfigSpaceViewportRect:i,children:a})=>{const o=Ji(Rl),s=kt(()=>o==null?null:new aE(t,o),[t,o]);return C(Q0.Provider,{value:{results:s,flamechart:t,selectedNode:e,setSelectedNode:n,configSpaceViewportRect:r,setConfigSpaceViewportRect:i},children:a})},RE=xt(()=>{const t=Ji(Q0),e=t==null?null:t.results,n=t==null?null:t.selectedNode,r=t==null?null:t.setSelectedNode,i=t==null?null:t.configSpaceViewportRect,a=t==null?null:t.setConfigSpaceViewportRect,o=t==null?null:t.flamechart,s=e==null?null:e.count(),l=kt(()=>e==null||n==null?null:e.indexOf(n),[e,n]),c=Qe(p=>{if(!r||!o||!i||!a)return;const x=p.configSpaceBounds,R=new Ne(x.origin.minus(new Q(0,1)),x.size.withY(i.height()));r(p.node),a(o.getClampedConfigSpaceViewportRect({configSpaceViewportRect:R}))},[i,a,r,o]),{selectPrev:f,selectNext:d}=kt(()=>s==null||s===0||e==null?{selectPrev:()=>{},selectNext:()=>{}}:{selectPrev:()=>{if(!(e!=null&&e.at)||s==null||s===0)return;let p=l==null?s-1:l-1;p<0&&(p=s-1);const x=e.at(p);c(x)},selectNext:()=>{if(!(e!=null&&e.at)||s==null||s===0)return;let p=l==null?0:l+1;p>=s&&(p=0);const x=e.at(p);c(x)}},[s,l,e,c]);return C(X0,{resultIndex:l,numResults:s,selectPrev:f,selectNext:d})});class ia extends sn{}class tv extends ia{constructor(){super(...arguments),this.setConfigSpaceViewportRect=e=>{if(this.props.configSpaceViewportRect.approxEquals(e))return;const n=ze.DETAIL_VIEW_HEIGHT/ze.FRAME_HEIGHT,r=this.configSpaceSize(),i=this.props.flamechart.getClampedViewportWidth(e.size.x),a=e.size.withX(i),o=Q.clamp(e.origin,new Q(0,-1),Q.max(Q.zero,r.minus(a).plus(new Q(0,n+1)))),s=new Ne(o,e.size.withX(i));this.props.configSpaceViewportRect.approxEquals(s)||this.props.setConfigSpaceViewportRect(s)},this.setLogicalSpaceViewportSize=e=>{this.props.setLogicalSpaceViewportSize(e)},this.transformViewport=e=>{const n=e.transformRect(this.props.configSpaceViewportRect);this.setConfigSpaceViewportRect(n)},this.onNodeHover=e=>{this.props.setNodeHover(e)},this.onNodeClick=e=>{this.props.setSelectedNode(e)},this.container=null,this.containerRef=e=>{this.container=e||null}}getStyle(){return ra(this.props.theme)}configSpaceSize(){return new Q(this.props.flamechart.getTotalWeight(),this.props.flamechart.getLayers().length)}formatValue(e){const n=this.props.flamechart.getTotalWeight(),r=100*e/n,i=Pi(r);return`${this.props.flamechart.formatValue(e)} (${i})`}renderTooltip(){if(!this.container)return null;const{hover:e}=this.props;if(!e)return null;const{width:n,height:r,left:i,top:a}=this.container.getBoundingClientRect(),o=new Q(e.event.clientX-i,e.event.clientY-a),s=e.node.frame,l=this.getStyle();return C(K0,{containerSize:new Q(n,r),offset:o,children:[C("span",{className:se(l.hoverCount),children:this.formatValue(e.node.getTotalWeight())})," ",s.name,s.file?C("div",{children:[s.file,":",s.line]}):void 0]})}render(){const e=this.getStyle();return C("div",{className:se(e.fill,xn.vbox),ref:this.containerRef,children:[C(TE,{theme:this.props.theme,configSpaceViewportRect:this.props.configSpaceViewportRect,transformViewport:this.transformViewport,flamechart:this.props.flamechart,flamechartRenderer:this.props.flamechartRenderer,canvasContext:this.props.canvasContext,setConfigSpaceViewportRect:this.setConfigSpaceViewportRect,enableTimestampPointer:this.props.enableTimestampPointer}),C(Rl.Consumer,{children:n=>C(At,{children:[C(Z0,{theme:this.props.theme,canvasContext:this.props.canvasContext,flamechart:this.props.flamechart,flamechartRenderer:this.props.flamechartRenderer,renderInverted:!1,onNodeHover:this.onNodeHover,onNodeSelect:this.onNodeClick,selectedNode:this.props.selectedNode,transformViewport:this.transformViewport,configSpaceViewportRect:this.props.configSpaceViewportRect,setConfigSpaceViewportRect:this.setConfigSpaceViewportRect,logicalSpaceViewportSize:this.props.logicalSpaceViewportSize,setLogicalSpaceViewportSize:this.setLogicalSpaceViewportSize,searchResults:n,enableTimestampPointer:this.props.enableTimestampPointer}),C(RE,{})]})}),this.renderTooltip(),this.props.selectedNode&&C(CE,{flamechart:this.props.flamechart,getCSSColorForFrame:this.props.getCSSColorForFrame,selectedNode:this.props.selectedNode})]})}}function Ol(t){return{setNodeHover:Qe(e=>{yt.setFlamechartHoveredNode(t,e)},[t]),setLogicalSpaceViewportSize:Qe(e=>{yt.setLogicalSpaceViewportSize(t,e)},[t]),setConfigSpaceViewportRect:Qe(e=>{yt.setConfigSpaceViewportRect(t,e)},[t]),setSelectedNode:Qe(e=>{yt.setSelectedNode(t,e)},[t])}}const ME=or(({profile:t,getColorBucketForFrame:e})=>new Nl({getTotalWeight:t.getTotalWeight.bind(t),forEachCall:t.forEachCall.bind(t),formatValue:t.formatValue.bind(t),getColorBucketForFrame:e})),Dl=t=>or(({canvasContext:e,flamechart:n})=>new _E(e.gl,bS(e),n,e.rectangleBatchRenderer,e.flamechartColorPassRenderer,t)),NE=Dl(),OE=xt(t=>{const{activeProfileState:e,glCanvas:n}=t,{profile:r,chronoViewState:i}=e,a=Ze(Ia),o=ut(),s=co({theme:o,canvas:n}),l=ea(r),c=lo(l),f=Qi({theme:o,frameToColorBucket:l}),d=ME({profile:r,getColorBucketForFrame:c}),p=NE({canvasContext:s,flamechart:d}),x=Ol(oi.CHRONO);return C(ev,{flamechart:d,selectedNode:i.selectedNode,setSelectedNode:x.setSelectedNode,configSpaceViewportRect:i.configSpaceViewportRect,setConfigSpaceViewportRect:x.setConfigSpaceViewportRect,children:C(tv,{theme:o,renderInverted:!1,flamechart:d,flamechartRenderer:p,canvasContext:s,getCSSColorForFrame:f,enableTimestampPointer:!a,...i,...x})})}),DE=or(({profile:t,getColorBucketForFrame:e})=>new Nl({getTotalWeight:t.getTotalNonIdleWeight.bind(t),forEachCall:t.forEachCallGrouped.bind(t),formatValue:t.formatValue.bind(t),getColorBucketForFrame:e})),LE=Dl(),IE=xt(t=>{const{activeProfileState:e,glCanvas:n}=t,{profile:r,leftHeavyViewState:i}=e,a=ut(),o=co({theme:a,canvas:n}),s=ea(r),l=lo(s),c=Qi({theme:a,frameToColorBucket:s}),f=DE({profile:r,getColorBucketForFrame:l}),d=LE({canvasContext:o,flamechart:f}),p=Ol(oi.LEFT_HEAVY);return C(ev,{flamechart:f,selectedNode:i.selectedNode,setSelectedNode:p.setSelectedNode,configSpaceViewportRect:i.configSpaceViewportRect,setConfigSpaceViewportRect:p.setConfigSpaceViewportRect,children:C(tv,{theme:a,renderInverted:!1,flamechart:f,flamechartRenderer:d,canvasContext:o,getCSSColorForFrame:c,enableTimestampPointer:!1,...i,...p})})});function PE(t,e){return VE(t,e)}const Iu=97,nv=122,rv=65,kE=90,BE=48,FE=57;function _m(t){const e=t.charCodeAt(0);return Iu<=e&&e<=nv?1:rv<=e&&e<=kE?2:BE<=e&&e<=FE?3:0}function Pu(t,e){if(t===e)return!0;const n=e.charCodeAt(0);return Iu<=n&&n<=nv?t.charCodeAt(0)===n-Iu+rv:!1}function VE(t,e){if(e.length==0)return{matchedRanges:[],score:0};let n=0,r=-1,i=-1,a=t.length,o=e.length;for(let s=0;s<a;s++){let l=t[s],c=e[n];if(Pu(l,c)&&(r<0&&(r=s),n++,n==o)){i=s+1;break}}if(i==-1)return null;n--;for(let s=i-1;s>=r;s--){const l=t[s],c=e[n];if(Pu(l,c)&&(n--,n<0))return r=s,XE(t,e,r,i)}throw new Error("Implementation error. This must be a bug in fzfFuzzyMatchV1")}const _f=16,WE=-3,iv=-1,yf=_f/2,$E=_f/2,zE=yf+iv,HE=4,UE=2;function YE(t,e){return t===0&&e!==0?yf:t===1&&e==2||t!==3&&e==3?zE:e===0?$E:0}function XE(t,e,n,r){let i=0,a=0,o=!1,s=0,l=0,c=new Array(e.length),f=0;n>0&&(f=_m(t[n-1]));for(let p=n;p<r;p++){let x=t[p],R=_m(x);if(Pu(x,e[i])){c[i]=p,a+=_f;let O=YE(f,R);s==0?l=O:(O===yf&&(l=O),O=Math.max(O,l,HE)),i===0?a+=O*UE:a+=O,o=!1,s++,i++}else o?a+=iv:a+=WE,o=!0,s=0,l=0;f=R}if(i!==e.length)throw new Error("fzfCalculateScore should only be called when pattern is found between sidx and eidx");let d=[[c[0],c[0]+1]];for(let p=1;p<c.length;p++){const x=c[p],R=d[d.length-1];R[1]===x?R[1]=x+1:d.push([x,x+1])}return{score:a,matchedRanges:d}}function GE({color:t="#9E9EA4"}){return C("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:C("path",{d:"M13.9999 14L11.1332 11.1333M12.6666 7.33333C12.6666 10.2789 10.2788 12.6667 7.33325 12.6667C4.38773 12.6667 1.99992 10.2789 1.99992 7.33333C1.99992 4.38781 4.38773 2 7.33325 2C10.2788 2 12.6666 4.38781 12.6666 7.33333Z",stroke:t,"stroke-linecap":"round","stroke-linejoin":"round"})})}function qE({color:t="#D5D5D5"}){return C("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:C("path",{d:"M13.3333 4L5.99996 11.3333L2.66663 8",stroke:t,"stroke-linecap":"round","stroke-linejoin":"round"})})}function jE(t,e,n){const r=[];let i=0;for(let a of e)r.push(t.slice(i,a[0])),r.push(C("span",{className:n,children:t.slice(a[0],a[1])})),i=a[1];return r.push(t.slice(i)),C("span",{children:r})}function JE({setProfileIndexToView:t,setHoveredProfileIndex:e,profile:n,selected:r,hovered:i,profileCount:a,nodeRef:o,closeProfileSelect:s,indexInProfileGroup:l,matchedRanges:c,indexInFilteredListView:f}){const d=av(ut()),p=Qe(()=>{s(),t(l)},[s,t,l]),x=Qe(S=>{e(l)},[e,l]),R=n.getName(),O=1+Math.floor(Math.log10(a)),A=se(d.highlighted),I=kt(()=>jE(R,c,A),[R,c,A]);return C("div",{ref:o,onMouseUp:p,onMouseEnter:x,title:R,className:se(d.profileRow,f%2===0&&d.profileRowEven,r&&d.profileRowSelected,i&&d.profileRowHovered),children:[r?C(qE,{}):C("div",{style:{width:"16px"}}),C("span",{className:se(d.profileIndex,r&&d.profileIndexSelected),style:{width:O+"em"},children:[l+1,":"]})," ",I]})}function ym(t){t.stopPropagation()}function ZE(t,e){const n=[];for(let r=0;r<t.length;r++){const i=t[r],a=PE(i.getName(),e);a&&n.push({indexInProfileGroup:r,profile:i,...a})}return _s(n,r=>-r.score),n}function KE({profiles:t,closeProfileSelect:e,indexToView:n,visible:r,setProfileIndexToView:i}){const a=av(ut()),[o,s]=Bt(""),l=Qe(D=>{const N=D.target.value;s(N)},[s]),c=Qe(D=>{D&&(r?D.select():D.blur())},[r]),f=kt(()=>ZE(t,o),[t,o]),[d,p]=Bt(0),x=Te(null);Dt(()=>{r&&(p(null),x.current!==null&&x.current.scrollIntoView({behavior:"auto",block:"nearest",inline:"nearest"}))},[r]);const R=Qe(D=>{D.stopPropagation();let N=null;switch(D.key){case"Enter":{d!=null&&(e(),i(d));break}case"Escape":{e();break}case"ArrowDown":{if(D.preventDefault(),N=0,d!=null){const k=f.findIndex(W=>W.indexInProfileGroup===d);k!==-1&&(N=k+1)}break}case"ArrowUp":{if(D.preventDefault(),N=f.length-1,d!=null){const k=f.findIndex(W=>W.indexInProfileGroup===d);k!==-1&&(N=k-1)}break}}if(N!=null&&N>=0&&N<f.length){const k=f[N].indexInProfileGroup;p(k),A(!0)}},[e,i,d,f]),[O,A]=Bt(!1);Dt(()=>{f.length>0&&(p(f[0].indexInProfileGroup),A(!0))},[p,f]);const I=Qe(D=>{O&&D&&(D.scrollIntoView({behavior:"auto",block:"nearest",inline:"nearest"}),A(!1))},[O,A]),S=Qe(D=>{x.current=D,I(D)},[x,I]);return C("div",{className:se(a.profileSelectOuter),children:[C("div",{className:se(a.caret)}),C("div",{className:se(a.profileSelectBox),children:[C("div",{className:se(a.filterInputContainer),children:[C(GE,{}),C("input",{type:"text",className:se(a.filterInput),ref:c,placeholder:"Filter...",value:o,onInput:l,onKeyDown:R,onKeyUp:ym,onKeyPress:ym})]}),C("div",{className:se(a.filterBorder)}),C("div",{className:se(a.profileSelectScrolling),children:[f.map(({profile:D,matchedRanges:N,indexInProfileGroup:k},W)=>{let Y;const X=k===n,Z=k===d;return X&&Z?Y=S:X?Y=x:Z&&(Y=I),C(JE,{setHoveredProfileIndex:p,indexInProfileGroup:k,indexInFilteredListView:W,hovered:k==d,selected:k===n,profile:D,profileCount:t.length,nodeRef:Y,matchedRanges:N,setProfileIndexToView:i,closeProfileSelect:e})}),f.length===0?C("div",{className:se(a.profileRow),children:['No results match filter "',o,'"']}):null]})]})]})}const wm=10,av=sr(t=>Hn.create({filterInputContainer:{display:"flex",flexDirection:"row",padding:"0px 8px",alignItems:"center",gap:"6px"},filterInput:{flexGrow:1,color:t.altFgPrimaryColor,background:t.altBgSecondaryColor,border:"none",borderRadius:5,padding:5,":focus":{border:"none",outline:"none"},"::selection":{color:t.altFgPrimaryColor,background:t.selectionPrimaryColor}},filterBorder:{margin:"4px 0",borderTop:"1px solid var(--colors-gray-1, #242424)"},caret:{width:0,height:0,borderLeft:"5px solid transparent",borderRight:"5px solid transparent",borderBottom:"5px solid black"},highlighted:{background:t.selectionSecondaryColor},padding:{height:wm,background:t.altBgPrimaryColor},profileRow:{height:ze.FRAME_HEIGHT-2,border:"1px solid transparent",textAlign:"left",padding:"0px 8px",background:t.altBgPrimaryColor,overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis",cursor:"pointer",display:"flex",flexDirection:"row",alignItems:"center",gap:10,color:"var(--colors-gray-6, #D5D5D5)"},profileRowHovered:{backgroundColor:"var(--colors-gray-1, #242424)"},profileRowSelected:{color:"var(--colors-white, #FFFFFF)"},profileRowEven:{background:t.altBgSecondaryColor},profileSelectScrolling:{maxHeight:`min(calc(100vh - ${ze.TOOLBAR_HEIGHT-2*wm}px), ${20*ze.FRAME_HEIGHT}px)`,overflow:"auto","::-webkit-scrollbar":{background:t.altBgPrimaryColor},"::-webkit-scrollbar-thumb":{background:t.altFgSecondaryColor,borderRadius:20,border:`3px solid ${t.altBgPrimaryColor}`,":hover":{background:t.altBgPrimaryColor}}},profileSelectBox:{width:"100%",paddingBottom:10,background:t.altBgPrimaryColor,color:t.altFgPrimaryColor},profileSelectOuter:{width:"100%",maxWidth:480,margin:"0 auto",position:"absolute",top:"calc(100% - 3px)",left:"-4px",zIndex:pf.PROFILE_SELECT,alignItems:"center",display:"flex",flexDirection:"column"},profileIndex:{textAlign:"right",display:"inline-block",color:t.altFgSecondaryColor},profileIndexSelected:{color:t.altFgPrimaryColor}}));function Xc(t,e){return Qe(()=>t(e),[t,e])}function QE(t){const e=wf(ut()),n=Xc(Pr.set,gt.CHRONO_FLAME_CHART),r=Xc(Pr.set,gt.LEFT_HEAVY_FLAME_GRAPH),i=Xc(Pr.set,gt.SANDWICH_VIEW);return t.activeProfileState?C("div",{className:se(e.toolbarLeft),children:[C("div",{className:se(e.toolbarTab,t.viewMode===gt.CHRONO_FLAME_CHART&&e.toolbarTabActive),onClick:n,children:"Time Order"}),C("div",{className:se(e.toolbarTab,t.viewMode===gt.LEFT_HEAVY_FLAME_GRAPH&&e.toolbarTabActive),onClick:r,children:"Left Heavy"}),C("div",{className:se(e.toolbarTab,t.viewMode===gt.SANDWICH_VIEW&&e.toolbarTabActive),onClick:i,children:"Sandwich"})]}):null}const eC=(()=>{let t=null;return e=>{let n=(e==null?void 0:e.profiles.map(r=>r.profile))||null;return(t===null||n!=null&&!df(t,n))&&(t=n),t}})();function tC(t){const e=wf(ut()),{activeProfileState:n,profileGroup:r}=t,i=eC(r),[a,o]=Bt(!1),s=Qe(()=>{o(!0)},[o]),l=Qe(()=>{o(!1)},[o]);return Dt(()=>{const c=f=>{f.key==="t"&&(f.preventDefault(),o(!0))};return window.addEventListener("keypress",c),()=>{window.removeEventListener("keypress",c)}},[o]),Dt(()=>{const c=f=>{f.key==="t"&&(f.preventDefault(),o(!0))};return window.addEventListener("keypress",c),()=>{window.removeEventListener("keypress",c)}},[o]),n&&r&&i?r.profiles.length===1?C(At,{children:n.profile.getName()}):C("div",{className:se(e.toolbarCenter),onMouseLeave:l,children:[C("span",{className:se(e.toolbarProfileName),onMouseOver:s,children:[n.profile.getName()," ",C("span",{className:se(e.toolbarProfileIndex),children:["(",n.index+1,"/",r.profiles.length,")"]}),C(C0,{up:a})]}),C("div",{style:{display:a?"block":"none"},children:C(KE,{setProfileIndexToView:t.setProfileIndexToView,indexToView:r.indexToView,profiles:i,closeProfileSelect:l,visible:a})})]}):C(At,{children:Ze(gf).title??"speedscope"})}function nC(t){const e=wf(ut());return C("div",{className:se(e.toolbar),children:[C(tC,{...t}),C(QE,{...t})]})}const wf=sr(t=>Hn.create({toolbar:{height:ze.TOOLBAR_HEIGHT-1,border:"1px solid var(--colors-gray-2, #2D2D2D)",flexShrink:0,background:t.altBgPrimaryColor,color:t.altFgPrimaryColor,textAlign:"center",fontFamily:na.MONOSPACE,fontSize:Ot.TITLE,lineHeight:`${ze.TOOLBAR_TAB_HEIGHT}px`,userSelect:"none",padding:"2px 4px"},toolbarLeft:{height:"fit-content",overflow:"hidden",margin:"auto 0",marginRight:2,textAlign:"center",border:"1px solid var(--colors-gray-1, #242424)",borderRadius:"4px",position:"absolute",right:0,top:(ze.TOOLBAR_HEIGHT-ze.TOOLBAR_TAB_HEIGHT)/2+1.5},toolbarCenter:{padding:"2px 4px",height:"22px",textAlign:"left",position:"relative",left:0},toolbarProfileName:{display:"flex",flexDirection:"row",alignItems:"center",gap:"7px",height:"100%",width:"fit-content",whiteSpace:"nowrap"},toolbarRight:{height:ze.TOOLBAR_HEIGHT,overflow:"hidden",position:"absolute",top:0,right:0,marginRight:2,textAlign:"right"},toolbarProfileIndex:{color:t.altFgSecondaryColor},toolbarTab:{background:t.altBgSecondaryColor,height:ze.TOOLBAR_TAB_HEIGHT,lineHeight:`${ze.TOOLBAR_TAB_HEIGHT}px`,display:"inline-block",padding:"0px 8px",transition:`all ${Js.HOVER_CHANGE} ease-in`,":hover":{background:t.selectionSecondaryColor},":not(:first-child)":{borderLeft:"1px solid var(--colors-gray-1, #242424)"}},toolbarTabActive:{background:t.selectionPrimaryColor,":hover":{background:t.selectionPrimaryColor}},toolbarTabColorSchemeToggle:{display:"inline-block",textAlign:"center",minWidth:"50px"},emoji:{display:"inline-block",verticalAlign:"middle",paddingTop:"0px",marginRight:"0.3em"},noLinkStyle:{textDecoration:"none",color:"inherit"}})),rC=ho(()=>import("./source-map-CuXacpSh.js").then(t=>t.s),[],import.meta.url);async function iC(t,e){const n=await rC;let r=null,i=null;try{i=JSON.parse(t),r=new n.SourceMapConsumer(i)}catch{return null}const a=[];r.eachMapping(function(s){a.push({...s,generatedColumn:s.generatedColumn+1,originalColumn:s.originalColumn+1})},{},n.SourceMapConsumer.GENERATED_ORDER);const o=e.replace(/\.[^/]*$/,"");return s=>{var p;let l=!1;if((i!=null&&i.file&&(i==null?void 0:i.file)===s.file||("/"+((p=s.file)==null?void 0:p.replace(/\.[^/]*$/,""))).endsWith("/"+o))&&(l=!0),!l||s.line==null||s.col==null)return null;let c=Lx(a,x=>x.generatedLine>s.line?!0:x.generatedLine<s.line?!1:x.generatedColumn>=s.col);if(c===-1)c=a.length-1;else{if(c===0)return null;c--}const f=a[c],d={};if(f.name!=null)d.name=f.name;else if(f.source!=null){const x=r==null?void 0:r.sourceContentFor(f.source,!0);if(x){const O=x.split(`
`)[f.originalLine-1];if(O){const A=/\w+/.exec(O.substr(f.originalColumn-1));A&&(d.name=A[0])}}}switch(d.name){case"constructor":{d.name=s.name+" constructor";break}case"function":{d.name=s.name;break}case"const":case"export":{d.name=s.name;break}}return d.name&&s.name.includes(d.name)&&(d.name=s.name),f.source!=null&&(d.file=f.source,d.line=f.originalLine,d.col=f.originalColumn),d}}const aC=({items:t,axis:e,renderItems:n,className:r,initialIndexInView:i})=>{const[a,o]=Bt(null),[s,l]=Bt(0),c=Te(null),f=e==="x"?"width":"height",d=e==="x"?"left":"top",p=e==="x"?"scrollLeft":"scrollTop",x=i?t.reduce((k,W,Y)=>Y<i?k+W.size:k,0):0,R=Te(x),O=Qe(k=>{k?requestAnimationFrame(()=>{o(k.getBoundingClientRect()[f]),R.current!=null&&(k.scrollTo({[d]:R.current}),R.current=null)}):o(null),c.current=k},[o,f,d]),A=kt(()=>{if(c.current==null||a==null||s==null)return null;const k=s-a/4,W=s+a+a/4;let Y=0,X=0,Z=0;for(;Z<t.length;Z++){const J=t[Z];if(X=Y,Y+=J.size,Y>=k)break}const ie=Z;for(;Z<t.length;Z++){const J=t[Z];if(Y+=J.size,Y>=W)break}const ne=Math.min(Z,t.length-1);return{firstVisibleIndex:ie,lastVisibleIndex:ne,invisiblePrefixSize:X}},[a,s,t]),I=kt(()=>t.reduce((k,W)=>k+W.size,0),[t]),S=Qe(()=>{c.current!=null&&l(c.current[p])},[p]);Dt(()=>{const k=()=>{c.current!=null&&o(c.current.getBoundingClientRect()[f])};return window.addEventListener("resize",k),()=>{window.removeEventListener("resize",k)}},[f]);const D=kt(()=>A?n(A.firstVisibleIndex,A.lastVisibleIndex):null,[n,A]),N=kt(()=>C("div",{style:{height:I},children:C("div",{style:{transform:`translateY(${(A==null?void 0:A.invisiblePrefixSize)||0}px)`},children:D})}),[A,D,I]);return C("div",{className:r,ref:O,onScroll:S,children:N})};function xm(t){const e=Ll(ut());return C("div",{className:se(e.hBarDisplay),children:C("div",{className:se(e.hBarDisplayFilled),style:{width:`${t.perc}%`}})})}function Gc(t){const e=ut(),n=Ll(e),{activeDirection:r}=t,i=r===Jn.ASCENDING?e.fgPrimaryColor:e.fgSecondaryColor,a=r===Jn.DESCENDING?e.fgPrimaryColor:e.fgSecondaryColor;return C("svg",{width:"8",height:"10",viewBox:"0 0 8 10",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:se(n.sortIcon),children:[C("path",{d:"M0 4L4 0L8 4H0Z",fill:i}),C("path",{d:"M0 4L4 0L8 4H0Z",transform:"translate(0 10) scale(1 -1)",fill:a})]})}function oC(t,e,n){const r=[];let i=0;for(let a of e)r.push(t.slice(i,a[0])),r.push(C("span",{className:n,children:t.slice(a[0],a[1])})),i=a[1];return r.push(t.slice(i)),C("span",{children:r})}const sC=({frame:t,matchedRanges:e,profile:n,index:r,selectedFrame:i,setSelectedFrame:a,getCSSColorForFrame:o})=>{const s=Ll(ut()),l=t.getTotalWeight(),c=t.getSelfWeight(),f=100*l/n.getTotalNonIdleWeight(),d=100*c/n.getTotalNonIdleWeight(),p=t===i;return C("tr",{onClick:a.bind(null,t),className:se(s.tableRow,r%2==0&&s.tableRowEven,p&&s.tableRowSelected),children:[C("td",{className:se(s.numericCell),children:[n.formatValue(l)," (",Pi(f),")",C(xm,{perc:f})]}),C("td",{className:se(s.numericCell),children:[n.formatValue(c)," (",Pi(d),")",C(xm,{perc:d})]}),C("td",{title:t.file,className:se(s.textCell),children:[C(J0,{color:o(t)}),e?oC(t.name,e,se(s.matched,p&&s.matchedSelected)):t.name]})]},`${r}`)},lC=xt(({profile:t,sortMethod:e,setSortMethod:n,selectedFrame:r,setSelectedFrame:i,getCSSColorForFrame:a,searchQuery:o,searchIsActive:s})=>{const l=Ll(ut()),c=Qe((A,I)=>{if(I.preventDefault(),e.field==A)n({field:A,direction:e.direction===Jn.ASCENDING?Jn.DESCENDING:Jn.ASCENDING});else switch(A){case yn.SYMBOL_NAME:{n({field:A,direction:Jn.ASCENDING});break}case yn.SELF:{n({field:A,direction:Jn.DESCENDING});break}case yn.TOTAL:{n({field:A,direction:Jn.DESCENDING});break}}},[e,n]),f=Ji(xf),d=Qe((A,I)=>{if(!f)return null;const S=[];for(let D=A;D<=I;D++){const N=f.rowList[D],k=f.getSearchMatchForFrame(N);S.push(sC({frame:N,matchedRanges:k??null,index:D,profile:t,selectedFrame:r,setSelectedFrame:i,getCSSColorForFrame:a}))}return S.length===0&&(s?S.push(C("tr",{children:C("td",{className:se(l.emptyState),children:['No symbol names match query "',o,'".']})})):S.push(C("tr",{children:C("td",{className:se(l.emptyState),children:"No symbols found."})}))),C("table",{className:se(l.tableView),children:S})},[f,t,r,i,a,s,o,l.emptyState,l.tableView]),p=kt(()=>f==null?[]:f.rowList.map(A=>({size:ze.FRAME_HEIGHT})),[f]),x=Qe(A=>c(yn.TOTAL,A),[c]),R=Qe(A=>c(yn.SELF,A),[c]),O=Qe(A=>c(yn.SYMBOL_NAME,A),[c]);return C("div",{className:se(xn.vbox,l.profileTableView),children:[C("table",{className:se(l.tableView),children:C("thead",{className:se(l.tableHeader),children:C("tr",{children:[C("th",{className:se(l.numericCell),onClick:x,children:[C(Gc,{activeDirection:e.field===yn.TOTAL?e.direction:null}),"Total"]}),C("th",{className:se(l.numericCell),onClick:R,children:[C(Gc,{activeDirection:e.field===yn.SELF?e.direction:null}),"Self"]}),C("th",{className:se(l.textCell),onClick:O,children:[C(Gc,{activeDirection:e.field===yn.SYMBOL_NAME?e.direction:null}),"Symbol Name"]})]})})}),C(aC,{axis:"y",items:p,className:se(l.scrollView),renderItems:d,initialIndexInView:r==null?null:f==null?void 0:f.getIndexForFrame(r)})]})}),Ll=sr(t=>Hn.create({profileTableView:{background:t.bgPrimaryColor,height:"100%"},scrollView:{overflowY:"auto",overflowX:"hidden",flexGrow:1,"::-webkit-scrollbar":{background:t.bgPrimaryColor},"::-webkit-scrollbar-thumb":{background:t.fgSecondaryColor,borderRadius:20,border:`3px solid ${t.bgPrimaryColor}`,":hover":{background:t.fgPrimaryColor}}},tableView:{width:"100%",fontSize:Ot.LABEL,background:t.bgPrimaryColor},tableHeader:{borderBottom:`2px solid ${t.bgSecondaryColor}`,textAlign:"left",color:t.fgPrimaryColor,userSelect:"none"},sortIcon:{position:"relative",top:1,marginRight:ze.FRAME_HEIGHT/4},tableRow:{background:t.bgPrimaryColor,height:ze.FRAME_HEIGHT},tableRowEven:{background:t.bgSecondaryColor},tableRowSelected:{background:t.selectionPrimaryColor,color:t.altFgPrimaryColor},numericCell:{textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap",position:"relative",textAlign:"right",paddingRight:ze.FRAME_HEIGHT,width:6*ze.FRAME_HEIGHT,minWidth:6*ze.FRAME_HEIGHT},textCell:{textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap",width:"100%",maxWidth:0,textAlign:"start"},hBarDisplay:{position:"absolute",background:ar.fromCSSHex(t.weightColor).withAlpha(.2).toCSS(),bottom:2,height:2,width:`calc(100% - ${2*ze.FRAME_HEIGHT}px)`,right:ze.FRAME_HEIGHT},hBarDisplayFilled:{height:"100%",position:"absolute",background:t.weightColor,right:0},matched:{borderBottom:`2px solid ${t.fgPrimaryColor}`},matchedSelected:{borderColor:t.altFgPrimaryColor},emptyState:{textAlign:"center",fontWeight:"bold"}})),cC=xt(t=>{const{activeProfileState:e}=t,{profile:n,sandwichViewState:r}=e;if(!n)throw new Error("profile missing");const i=Ze(yu),a=ut(),{callerCallee:o}=r,s=o?o.selectedFrame:null,l=ea(n),c=Qi({theme:a,frameToColorBucket:l}),f=Qe(x=>{yt.setSelectedFrame(x)},[]),d=Ze(Ls),p=Ze(Is);return C(lC,{profile:n,selectedFrame:s,getCSSColorForFrame:c,sortMethod:i,setSelectedFrame:f,setSortMethod:yu.set,searchIsActive:d,searchQuery:p})});class ov extends ia{constructor(){super(...arguments),this.setConfigSpaceViewportRect=e=>{this.props.setConfigSpaceViewportRect(this.clampViewportToFlamegraph(e))},this.setLogicalSpaceViewportSize=e=>{this.props.setLogicalSpaceViewportSize(e)},this.transformViewport=e=>{this.setConfigSpaceViewportRect(e.transformRect(this.props.configSpaceViewportRect))},this.container=null,this.containerRef=e=>{this.container=e||null},this.setNodeHover=e=>{this.props.setNodeHover(e)}}clampViewportToFlamegraph(e){const{flamechart:n,renderInverted:r}=this.props;return n.getClampedConfigSpaceViewportRect({configSpaceViewportRect:e,renderInverted:r})}formatValue(e){const n=this.props.flamechart.getTotalWeight(),r=100*e/n,i=Pi(r);return`${this.props.flamechart.formatValue(e)} (${i})`}renderTooltip(){if(!this.container)return null;const{hover:e}=this.props;if(!e)return null;const{width:n,height:r,left:i,top:a}=this.container.getBoundingClientRect(),o=new Q(e.event.clientX-i,e.event.clientY-a),s=uC(this.props.theme),l=e.node.frame;return C(K0,{containerSize:new Q(n,r),offset:o,children:[C("span",{className:se(s.hoverCount),children:this.formatValue(e.node.getTotalWeight())})," ",l.name,l.file?C("div",{children:[l.file,":",l.line]}):void 0]})}render(){return C("div",{className:se(xn.fillY,xn.fillX,xn.vbox),ref:this.containerRef,children:[C(Z0,{theme:this.props.theme,selectedNode:null,onNodeHover:this.setNodeHover,onNodeSelect:Tl,configSpaceViewportRect:this.props.configSpaceViewportRect,setConfigSpaceViewportRect:this.setConfigSpaceViewportRect,transformViewport:this.transformViewport,flamechart:this.props.flamechart,flamechartRenderer:this.props.flamechartRenderer,canvasContext:this.props.canvasContext,renderInverted:this.props.renderInverted,logicalSpaceViewportSize:this.props.logicalSpaceViewportSize,setLogicalSpaceViewportSize:this.setLogicalSpaceViewportSize,searchResults:null,enableTimestampPointer:!1}),this.renderTooltip()]})}}const uC=sr(t=>Hn.create({hoverCount:{color:t.weightColor}})),fC=or(({profile:t,frame:e,flattenRecursion:n})=>{let r=t.getInvertedProfileForCallersOf(e);return n?r.getProfileWithRecursionFlattened():r}),hC=or(({invertedCallerProfile:t,getColorBucketForFrame:e})=>new Nl({getTotalWeight:t.getTotalNonIdleWeight.bind(t),forEachCall:t.forEachCallGrouped.bind(t),formatValue:t.formatValue.bind(t),getColorBucketForFrame:e})),dC=Dl({inverted:!0}),gC=xt(t=>{const{activeProfileState:e}=t;let{profile:n,sandwichViewState:r}=e;const i=Ze(Ua),a=Ze(Ps),o=ut();if(!n)throw new Error("profile missing");if(!a)throw new Error("glCanvas missing");const{callerCallee:s}=r;if(!s)throw new Error("callerCallee missing");const{selectedFrame:l}=s,c=ea(n),f=lo(c),d=Qi({theme:o,frameToColorBucket:c}),p=co({theme:o,canvas:a}),x=hC({invertedCallerProfile:fC({profile:n,frame:l,flattenRecursion:i}),getColorBucketForFrame:f}),R=dC({canvasContext:p,flamechart:x});return C(ov,{theme:o,renderInverted:!0,flamechart:x,flamechartRenderer:R,canvasContext:p,getCSSColorForFrame:d,...Ol(oi.SANDWICH_INVERTED_CALLERS),...s.invertedCallerFlamegraph,setSelectedNode:Tl})}),mC=or(({profile:t,frame:e,flattenRecursion:n})=>{let r=t.getProfileForCalleesOf(e);return n?r.getProfileWithRecursionFlattened():r}),pC=or(({calleeProfile:t,getColorBucketForFrame:e})=>new Nl({getTotalWeight:t.getTotalNonIdleWeight.bind(t),forEachCall:t.forEachCallGrouped.bind(t),formatValue:t.formatValue.bind(t),getColorBucketForFrame:e})),vC=Dl(),bC=xt(t=>{const{activeProfileState:e}=t,{profile:n,sandwichViewState:r}=e,i=Ze(Ua),a=Ze(Ps),o=ut();if(!n)throw new Error("profile missing");if(!a)throw new Error("glCanvas missing");const{callerCallee:s}=r;if(!s)throw new Error("callerCallee missing");const{selectedFrame:l}=s,c=ea(n),f=lo(c),d=Qi({theme:o,frameToColorBucket:c}),p=co({theme:o,canvas:a}),x=pC({calleeProfile:mC({profile:n,frame:l,flattenRecursion:i}),getColorBucketForFrame:f}),R=vC({canvasContext:p,flamechart:x});return C(ov,{theme:o,renderInverted:!1,flamechart:x,flamechartRenderer:R,canvasContext:p,getCSSColorForFrame:d,...Ol(oi.SANDWICH_CALLEES),...s.calleeFlamegraph,setSelectedNode:Tl})}),_C=xt(()=>{const t=Ji(xf),e=t!=null?t.rowList:null,n=(t==null?void 0:t.selectedFrame)!=null?t.getIndexForFrame(t.selectedFrame):null,r=e!=null?e.length:null,{selectPrev:i,selectNext:a}=kt(()=>e==null||r==null||r===0||t==null?{selectPrev:()=>{},selectNext:()=>{}}:{selectPrev:()=>{let o=n==null?r-1:n-1;o<0&&(o=r-1),t.setSelectedFrame(e[o])},selectNext:()=>{let o=n==null?0:n+1;o>=r&&(o=0),t.setSelectedFrame(e[o])}},[n,e,r,t]);return C(X0,{resultIndex:n,numResults:r,selectPrev:i,selectNext:a})});class yC extends ia{constructor(){super(...arguments),this.setSelectedFrame=e=>{this.props.setSelectedFrame(e)},this.onWindowKeyPress=e=>{e.key==="Escape"&&this.setSelectedFrame(null)}}componentDidMount(){window.addEventListener("keydown",this.onWindowKeyPress)}componentWillUnmount(){window.removeEventListener("keydown",this.onWindowKeyPress)}render(){const e=wC(this.props.theme),{selectedFrame:n}=this.props;let r=null;return n&&(r=C("div",{className:se(xn.fillY,e.callersAndCallees,xn.vbox),children:[C("div",{className:se(xn.hbox,e.panZoomViewWraper),children:[C("div",{className:se(e.flamechartLabelParent),children:C("div",{className:se(e.flamechartLabel),children:"Callers"})}),C(gC,{glCanvas:this.props.glCanvas,activeProfileState:this.props.activeProfileState})]}),C("div",{className:se(e.divider)}),C("div",{className:se(xn.hbox,e.panZoomViewWraper),children:[C("div",{className:se(e.flamechartLabelParent,e.flamechartLabelParentBottom),children:C("div",{className:se(e.flamechartLabel,e.flamechartLabelBottom),children:"Callees"})}),C(bC,{glCanvas:this.props.glCanvas,activeProfileState:this.props.activeProfileState})]})]})),C("div",{className:se(xn.hbox,xn.fillY),children:[C("div",{className:se(e.tableView),children:[C(cC,{activeProfileState:this.props.activeProfileState}),C(_C,{})]}),r]})}}const wC=sr(t=>Hn.create({tableView:{position:"relative",flex:1},panZoomViewWraper:{flex:1},flamechartLabelParent:{display:"flex",flexDirection:"column",justifyContent:"flex-end",alignItems:"flex-start",fontSize:Ot.TITLE,width:Ot.TITLE*1.2,borderRight:`1px solid ${t.fgSecondaryColor}`},flamechartLabelParentBottom:{justifyContent:"flex-start"},flamechartLabel:{transform:"rotate(-90deg)",transformOrigin:"50% 50% 0",width:Ot.TITLE*1.2,flexShrink:1},flamechartLabelBottom:{transform:"rotate(-90deg)",display:"flex",justifyContent:"flex-end"},callersAndCallees:{flex:1,borderLeft:`${ze.SEPARATOR_HEIGHT}px solid ${t.fgSecondaryColor}`},divider:{height:2,background:t.fgSecondaryColor}})),xf=xl(null),xC=xt(t=>{const{activeProfileState:e,glCanvas:n}=t,{sandwichViewState:r,index:i}=e,{callerCallee:a}=r,o=ut(),s=Qe(A=>{yt.setSelectedFrame(A)},[]),l=e.profile,c=Ze(yu),f=Ji(Rl),d=a?a.selectedFrame:null,p=kt(()=>{const A=[];switch(l.forEachFrame(I=>{f&&!f.getMatchForFrame(I)||A.push(I)}),c.field){case yn.SYMBOL_NAME:{_s(A,I=>I.name.toLowerCase());break}case yn.SELF:{_s(A,I=>I.getSelfWeight());break}case yn.TOTAL:{_s(A,I=>I.getTotalWeight());break}}return c.direction===Jn.DESCENDING&&A.reverse(),A},[l,f,c]),x=kt(()=>{const A=new Map;for(let I=0;I<p.length;I++)A.set(p[I],I);return I=>{const S=A.get(I);return S??null}},[p]),R=kt(()=>A=>f==null?null:f.getMatchForFrame(A),[f]),O={rowList:p,selectedFrame:d,setSelectedFrame:s,getIndexForFrame:x,getSearchMatchForFrame:R};return C(xf.Provider,{value:O,children:C(yC,{theme:o,activeProfileState:e,glCanvas:n,setSelectedFrame:s,selectedFrame:d,profileIndex:i})})}),TC=""+new URL("perf-vertx-stacks-01-collapsed-all-1_MAgNGf.txt",import.meta.url).href,aa=ho(()=>import("./index-DHCRyHuH.js"),[],import.meta.url);aa.then(()=>{});ho(()=>import("./index-DA4yW5Kz.js"),[],import.meta.url).then(()=>{});ho(()=>import("./source-map-CuXacpSh.js").then(t=>t.s),[],import.meta.url).then(()=>{});async function Tm(t,e){return(await aa).importProfileGroupFromText(t,e)}async function SC(t,e){return(await aa).importProfileGroupFromBase64(t,e)}async function EC(t,e){return(await aa).importProfilesFromArrayBuffer(t,e)}async function CC(t){return(await aa).importProfilesFromFile(t)}async function AC(t){return(await aa).importFromFileSystemDirectoryEntry(t)}function RC(t){return t!=null&&t.isDirectory}class MC extends ia{constructor(){super(...arguments),this.canvas=null,this.ref=e=>{e instanceof HTMLCanvasElement?this.canvas=e:this.canvas=null,this.props.setGLCanvas(this.canvas)},this.container=null,this.containerRef=e=>{e instanceof HTMLElement?this.container=e:this.container=null},this.maybeResize=()=>{if(!this.container||!this.props.canvasContext)return;let{width:e,height:n}=this.container.getBoundingClientRect();const r=e,i=n,a=e*window.devicePixelRatio,o=n*window.devicePixelRatio;this.props.canvasContext.gl.resize(a,o,r,i)},this.onWindowResize=()=>{this.props.canvasContext&&this.props.canvasContext.requestFrame()}}componentWillReceiveProps(e){this.props.canvasContext!==e.canvasContext&&(this.props.canvasContext&&this.props.canvasContext.removeBeforeFrameHandler(this.maybeResize),e.canvasContext&&(e.canvasContext.addBeforeFrameHandler(this.maybeResize),e.canvasContext.requestFrame()))}componentDidMount(){window.addEventListener("resize",this.onWindowResize)}componentWillUnmount(){this.props.canvasContext&&this.props.canvasContext.removeBeforeFrameHandler(this.maybeResize),window.removeEventListener("resize",this.onWindowResize)}render(){const e=sv(this.props.theme);return C("div",{ref:this.containerRef,className:se(e.glCanvasView),children:C("canvas",{ref:this.ref,width:1,height:1})})}}class NC extends ia{constructor(){super(...arguments),this.glCanvasRef=ei(),this.loadExample=()=>{this.loadProfile(async()=>{const e="perf-vertx-stacks-01-collapsed-all.txt",n=await fetch(TC).then(r=>r.text());return await Tm(e,n)})},this.checkDragImportEnabled=()=>gf.get().dragImport??!0,this.onDrop=e=>{this.checkDragImportEnabled()&&(this.props.setDragActive(!1),e.preventDefault(),this.loadDropFile(e))},this.loadDropFile=e=>{if(!e.dataTransfer)return;const n=e.dataTransfer.items[0];if(n&&"webkitGetAsEntry"in n){const i=n.webkitGetAsEntry();if(i&&RC(i)&&i.name.endsWith(".trace")){const a=i;this.loadProfile(async()=>await AC(a));return}}let r=e.dataTransfer.files.item(0);r&&this.loadFromFile(r)},this.onDragOver=e=>{this.checkDragImportEnabled()&&(this.props.setDragActive(!0),e.preventDefault())},this.onDragLeave=e=>{this.checkDragImportEnabled()&&(this.props.setDragActive(!1),e.preventDefault())},this.onWindowKeyPress=async e=>{if(e.key==="1")this.props.setViewMode(gt.CHRONO_FLAME_CHART);else if(e.key==="2")this.props.setViewMode(gt.LEFT_HEAVY_FLAME_GRAPH);else if(e.key==="3")this.props.setViewMode(gt.SANDWICH_VIEW);else if(e.key==="r"){const{flattenRecursion:n}=this.props;this.props.setFlattenRecursion(!n)}else if(e.key==="n"){const{activeProfileState:n}=this.props;n&&this.props.setProfileIndexToView(n.index+1)}else if(e.key==="p"){const{activeProfileState:n}=this.props;n&&this.props.setProfileIndexToView(n.index-1)}},this.saveFile=()=>{if(this.props.profileGroup){const{name:e,indexToView:n,profiles:r}=this.props.profileGroup,i={name:e,indexToView:n,profiles:r.map(a=>a.profile)};pE(i)}},this.browseForFile=()=>{const e=document.createElement("input");e.type="file",e.addEventListener("change",this.onFileSelect),e.click()},this.onWindowKeyDown=async e=>{e.key==="s"&&(e.ctrlKey||e.metaKey)?(e.preventDefault(),this.saveFile()):e.key==="o"&&(e.ctrlKey||e.metaKey)&&(e.preventDefault(),this.browseForFile())},this.onDocumentPaste=e=>{if(document.activeElement!=null&&document.activeElement.nodeName==="INPUT")return;e.preventDefault(),e.stopPropagation();const n=e.clipboardData;if(!n)return;const r=n.getData("text");this.loadProfile(async()=>await Tm("From Clipboard",r))},this.onFileSelect=e=>{const n=e.target.files.item(0);n&&this.loadFromFile(n)}}async loadProfile(e){var r,i;if(this.props.setError(!1),this.props.setLoading(!0),await new Promise(a=>setTimeout(a,0)),!this.props.glCanvas)return;let n=null;try{n=await e()}catch{this.props.setError(!0);return}if(n==null){alert("Unrecognized format! See documentation about supported formats."),this.props.setLoading(!1);return}else if(n.profiles.length===0&&(((r=In.get())==null?void 0:r.length)??0)===0){alert("Successfully imported profile, but it's empty!"),this.props.setLoading(!1);return}else if(n.profiles.length===0){const a=((i=In.get())==null?void 0:i.map(c=>c.ts).filter(Boolean))??[],o=Math.max(...a.length?a:[1]);Ia.set(!0);const s=new bf(o),l={key:"no_trace",name:""};s.enterFrame(l,0),s.leaveFrame(l,o),n.profiles.push(s.build())}else Ia.set(!1);this.props.hashParams.title&&(n={...n,name:this.props.hashParams.title}),document.title=`${n.name} - speedscope`,this.props.hashParams.viewMode&&this.props.setViewMode(this.props.hashParams.viewMode);for(let a of n.profiles)await a.demangle();n.profiles.forEach((a,o)=>{const s=this.props.hashParams.title||a.getName();a.setName(s),s.startsWith("main (")&&(n.indexToView=o)}),setTimeout(()=>{var a;this.glCanvasRef.current&&((a=this.glCanvasRef.current.props.canvasContext)==null||a.flamechartColorPassRenderer.updateMaterial(this.glCanvasRef.current.props.canvasContext.gl,this.props.theme))}),this.props.setProfileGroup(n),this.props.setLoading(!1)}getStyle(){return sv(this.props.theme)}loadFromFile(e){this.loadProfile(async()=>{const n=await CC(e);if(n){for(let r of n.profiles)r.getName()||r.setName(e.name);return n}if(this.props.profileGroup&&this.props.activeProfileState){const r=new FileReader,i=new Promise(c=>{r.addEventListener("loadend",()=>{if(typeof r.result!="string")throw new Error("Expected reader.result to be a string");c(r.result)})});r.readAsText(e);const a=await i;let o=null;const s=fE(a);s&&(o=s);const l=await iC(a,e.name);if(!o&&l&&(o=l),o!=null)return{name:this.props.profileGroup.name||"profile",indexToView:this.props.profileGroup.indexToView,profiles:this.props.profileGroup.profiles.map(c=>{const f=c.profile.shallowClone();return f.remapSymbols(o),f})}}return null})}componentDidMount(){window.addEventListener("keydown",this.onWindowKeyDown),window.addEventListener("keypress",this.onWindowKeyPress),document.addEventListener("paste",this.onDocumentPaste),this.maybeLoadHashParamProfile()}componentWillUnmount(){window.removeEventListener("keydown",this.onWindowKeyDown),window.removeEventListener("keypress",this.onWindowKeyPress),document.removeEventListener("paste",this.onDocumentPaste)}async maybeLoadHashParamProfile(){const{profileURL:e}=this.props.hashParams;if(e){if(!bu){alert(`Cannot load a profile URL when loading from "${window.location.protocol}" URL protocol`);return}this.loadProfile(async()=>{const n=await fetch(e);let r=new URL(e,window.location.href).pathname;return r.includes("/")&&(r=r.slice(r.lastIndexOf("/")+1)),await EC(r,await n.arrayBuffer())})}else if(this.props.hashParams.localProfilePath){window.speedscope={loadFileFromBase64:(r,i)=>{this.loadProfile(()=>SC(r,i))}};const n=document.createElement("script");n.src=`file:///${this.props.hashParams.localProfilePath}`,document.head.appendChild(n)}}renderLanding(){const e=this.getStyle(),n=C("div",{className:se(e.browseButtonContainer),children:[C("input",{type:"file",name:"file",id:"file",onChange:this.onFileSelect,className:se(e.hide)}),C("label",{for:"file",className:se(e.browseButton),tabIndex:0,children:"Browse"})]});return C("div",{className:se(e.landingContainer),children:this.props.customWelcomeMessage.default?this.props.customWelcomeMessage.default(se(e.landingMessage),se(e.landingP),se(e.link),n):C("div",{className:se(e.landingMessage),children:[C("p",{className:se(e.landingP),children:[" Hi there! Welcome to speedscope, an interactive"," ",C("a",{className:se(e.link),href:"http://www.brendangregg.com/FlameGraphs/cpuflamegraphs.html",children:"flamegraph"})," ","visualizer. Use it to help you make your software faster."]}),bu?C("p",{className:se(e.landingP),children:["Drag and drop a profile file onto this window to get started, click the big blue button below to browse for a profile to explore, or"," ",C("a",{tabIndex:0,className:se(e.link),onClick:this.loadExample,children:"click here"})," ","to load an example profile."]}):C("p",{className:se(e.landingP),children:"Drag and drop a profile file onto this window to get started, or click the big blue button below to browse for a profile to explore."}),n,C("p",{className:se(e.landingP),children:["See the"," ",C("a",{className:se(e.link),href:"https://github.com/jlfwong/speedscope#usage",target:"_blank",children:"documentation"})," ","for information about supported file formats, keyboard shortcuts, and how to navigate around the profile."]}),C("p",{className:se(e.landingP),children:["speedscope is open source. Please"," ",C("a",{className:se(e.link),target:"_blank",href:"https://github.com/jlfwong/speedscope/issues",children:"report any issues on GitHub"}),"."]})]})})}renderError(){const e=this.getStyle();return C("div",{className:se(e.error),children:[C("div",{children:" Something went wrong."}),C("div",{children:"Check the JS console for more details."})]})}renderLoadingBar(){const e=this.getStyle();return C("div",{className:se(e.loading)})}renderContent(){const{viewMode:e,activeProfileState:n,error:r,loading:i,glCanvas:a}=this.props;if(r)return this.renderError();if(i)return this.renderLoadingBar();if(!n||!a)return this.renderLanding();switch(e){case gt.CHRONO_FLAME_CHART:return C(OE,{activeProfileState:n,glCanvas:a});case gt.LEFT_HEAVY_FLAME_GRAPH:return C(IE,{activeProfileState:n,glCanvas:a});case gt.SANDWICH_VIEW:return C(xC,{activeProfileState:n,glCanvas:a})}}render(){const e=this.getStyle(),n=Ze(Ia);return C("div",{onDrop:this.onDrop,onDragOver:this.onDragOver,onDragLeave:this.onDragLeave,className:se(e.root,this.props.dragActive&&e.dragTargetRoot),children:[C(MC,{ref:this.glCanvasRef,setGLCanvas:this.props.setGLCanvas,canvasContext:this.props.canvasContext,theme:this.props.theme}),C(nC,{saveFile:this.saveFile,browseForFile:this.browseForFile,...this.props}),C("div",{className:se(e.contentContainer),children:this.renderContent()}),this.props.dragActive&&C("div",{className:se(e.dragTarget)}),n&&C("div",{className:se(e.noTraceWatermark),children:[C("h1",{className:se(e.watermarkH1),children:"NO TRACE"}),C("p",{className:se(e.watermarkP),children:"This TEF does not come with any trace"})]})]})}}const sv=sr(t=>Hn.create({glCanvasView:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",zIndex:-1,pointerEvents:"none"},error:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",height:"100%"},loading:{height:3,marginBottom:-3,background:t.selectionPrimaryColor,transformOrigin:"0% 50%",animationName:[{from:{transform:"scaleX(0)"},to:{transform:"scaleX(1)"}}],animationTimingFunction:"cubic-bezier(0, 1, 0, 1)",animationDuration:"30s"},root:{width:"100%",height:"100%",overflow:"hidden",display:"flex",flexDirection:"column",position:"relative",fontFamily:na.MONOSPACE,lineHeight:"20px",color:t.fgPrimaryColor},dragTargetRoot:{cursor:"copy"},dragTarget:{boxSizing:"border-box",position:"absolute",top:0,left:0,width:"100%",height:"100%",border:`5px dashed ${t.selectionPrimaryColor}`,pointerEvents:"none"},contentContainer:{position:"relative",display:"flex",overflow:"hidden",flexDirection:"column",flex:1},landingContainer:{display:"flex",alignItems:"center",justifyContent:"center",flex:1},landingMessage:{maxWidth:600},landingP:{marginBottom:16},hide:{display:"none"},browseButtonContainer:{display:"flex",alignItems:"center",justifyContent:"center"},browseButton:{marginBottom:16,height:72,flex:1,maxWidth:256,textAlign:"center",fontSize:Ot.BIG_BUTTON,lineHeight:"72px",background:t.selectionPrimaryColor,color:t.altFgPrimaryColor,transition:`all ${Js.HOVER_CHANGE} ease-in`,":hover":{background:t.selectionSecondaryColor}},link:{color:t.selectionPrimaryColor,cursor:"pointer",textDecoration:"none",transition:`all ${Js.HOVER_CHANGE} ease-in`,":hover":{color:t.selectionSecondaryColor}},noTraceWatermark:{backgroundColor:"transparent",position:"absolute",top:0,left:0,right:0,bottom:0,opacity:.5,display:"flex",flexDirection:"column",gap:"1.1rem",justifyContent:"center",alignItems:"center",textAlign:"center","user-select":"none","-webki-user-select":"none","-ms-user-select":"none"},watermarkH1:{fontSize:"7.5em",lineHeight:"6rem"},watermarkP:{fontSize:"1.4em"}})),OC=xt(()=>{const t=Ze(Ps),e=ut(),n=kt(()=>t?co({theme:e,canvas:t}):null,[e,t]),r=Te();return Dt(()=>(r&&ks.set(r),()=>ks.set(null))),C(oE,{children:C(NC,{ref:r,activeProfileState:F0(),canvasContext:n,setGLCanvas:Ps.set,setLoading:ki.set,setError:bg.set,setProfileGroup:yt.setProfileGroup,setDragActive:pg.set,setViewMode:Pr.set,setFlattenRecursion:Ua.set,setProfileIndexToView:yt.setProfileIndexToView,profileGroup:Ze(yt),theme:e,flattenRecursion:Ze(Ua),viewMode:Ze(Pr),hashParams:Ze(Hx),glCanvas:t,dragActive:Ze(pg),loading:Ze(ki),error:Ze(bg),customWelcomeMessage:Ze(_u)})})});function DC({pClass:t,children:e}){const r={backgroundColor:ut().selectionSecondaryColor};return C(At,{children:[C("p",{className:t,children:"Drag and drop a trace in TEF (Trace Event Format) onto this window to get started, or click the big blue button below to browse for a file to explore."}),e,C("p",{className:t,children:["To convert CTF (Common Trace Format) trace received from Zephyr, use"," ",C("span",{style:r,className:_t["welcome-message-code"],children:"west zpl-prepare-trace"})," ","command from the Zephelin library."]})]})}function LC(t,e,n,r){return C("div",{className:t,children:[C("p",{className:e,children:["Hi there! Welcome to Zephelin Trace Viewer, an interactive visualizer for"," ",C("a",{className:n,href:"https://docs.zephyrproject.org/latest/services/tracing/index.html",target:"_blank",children:"Zephyr traces"}),"."]}),C(DC,{pClass:e,aClass:n,children:r})]})}const IC=xt(()=>{gf.set({title:"",dragImport:!1}),Ds.selectionPrimaryColor="#7929d2",Ds.selectionSecondaryColor="#9454db",Ha.selectionPrimaryColor="#9454db",Ha.selectionSecondaryColor="#af7fe4",_u.get().default===void 0&&_u.set({default:LC}),za.get()===Ai.SYSTEM&&za.set(Ai.DARK);const e=Te(null),n=new ResizeObserver(r=>{window.dispatchEvent(new Event("resize"))});return Dt(()=>(e.current!==null&&n.observe(e.current),()=>n.disconnect()),[]),C("div",{id:_t["speedscope-container"],ref:e,children:C(OC,{})})},(t,e)=>!0),ka=Wr(IC,"Flamegraph",{additionalProps:{minHeight:400,minWidth:540,enableClose:!1}}),Qs={"panel-element":"_panel-element_b00pc_82","section-content":"_section-content_b00pc_90","no-padding":"_no-padding_b00pc_100","generic-info":"_generic-info_b00pc_108"};function $r({children:t,additionalContentClass:e}){return C("div",{className:Qs["panel-element"],children:C("div",{className:Qs["section-content"]+` ${e??""}`,children:t})})}const PC="_key_nag5n_95",kC="_major_nag5n_125",mr={"model-event-section":"_model-event-section_nag5n_82",key:PC,"model-layer-section":"_model-layer-section_nag5n_111",major:kC,"item-name":"_item-name_nag5n_132"},Tf="MEMORY",BC=`${Tf}::SYMBOLS`,FC=`${Tf}::STATICALLY_ASSIGNED_MEM`,VC="thread_name",WC="CPU_LOAD",$C="DIE_TEMP",Sf="MODEL";function zC({frameArgs:t}){const e=["subgraph_idx","op_idx","tag","runtime","thread_id","tag_len"],n=Object.entries(t.begin).filter(([r,i])=>!e.includes(r));if(n.length!==0)return C("table",{children:[C("thead",{children:C("tr",{children:[C("th",{className:mr.key,children:"Param"}),C("th",{children:"Start"}),C("th",{children:"End"})]})}),C("tbody",{children:n.map(([r,i])=>C("tr",{children:[C("th",{className:mr.key,children:r}),C("th",{children:i}),C("th",{children:t.end[r]})]}))})]})}function HC({frameArgs:t}){var l;const[e,n]=Bt(In.get());In.subscribe(()=>{n(In.get())});const r=(l=(e??[]).find(c=>c.name===Sf))==null?void 0:l.args,i=c=>{const f=r==null?void 0:r.tensors.find(p=>p.index===c&&p.subgraph_idx===t.begin.subgraph_idx);if(f===void 0)return;const d=f.name.split("/").map((p,x,R)=>x===R.length-1?p:C(At,{children:[p,"/",C("wbr",{})]}));return C("li",{children:[" ",d,": [",f.shape.join(", "),"] of ",f.dtype," "]})};if(r===void 0)return;const a=r.ops.find(c=>c.index===t.begin.op_idx);if(!a)return;const o=c=>C("span",{className:mr["item-name"],children:c.children}),s=Object.entries(a.parameters??{}).map(([c,f])=>typeof f=="string"?[c,f]:[c,JSON.stringify(f)]).map(([c,f])=>C("li",{children:[c,": ",f]}));return C("div",{className:mr["model-layer-section"],children:[C("h3",{children:" Layer info "}),C("ul",{children:[C("li",{className:mr.major,children:[" Operation type: ",a.op_name," "]}),C("li",{className:mr.major,children:[C(o,{children:"Inputs"}),":",C("ol",{children:a.inputs.map(i)})]}),C("li",{className:mr.major,children:[C(o,{children:"Outputs"}),":",C("ol",{children:a.outputs.map(i)})]}),s.length>0&&C("li",{className:mr.major,children:[C(o,{children:"Parameters"}),":",C("ol",{children:s})]})]})]})}function UC({frameArgs:t}){const e=zC({frameArgs:t}),n=HC({frameArgs:t});return C($r,{additionalContentClass:Qs["no-padding"],children:C("div",{className:mr["model-event-section"],children:[e,n,!e&&!n?C("div",{children:C("p",{children:"The event does not contain information to display"})}):""]})})}function lv(){const t=yt.getActiveProfile();if(!t)return null;const e=Pr.get();let n;switch(e){case gt.CHRONO_FLAME_CHART:n=t.chronoViewState;break;case gt.LEFT_HEAVY_FLAME_GRAPH:n=t.leftHeavyViewState;break;case gt.SANDWICH_VIEW:n=t.sandwichViewState;break}return{viewMode:e,activeView:n}}function YC(){const[t,e]=Bt(void 0);return yt.subscribe(()=>{var a,o;const n=lv();if(n===null){e(void 0);return}const{viewMode:r,activeView:i}=n;r===gt.SANDWICH_VIEW?e((a=i==null?void 0:i.callerCallee)==null?void 0:a.selectedFrame):e((o=i==null?void 0:i.selectedNode)==null?void 0:o.frame)}),{frameSt:t}}function Ba(t){var e;return typeof(t==null?void 0:t.key)=="string"&&((e=t==null?void 0:t.key)==null?void 0:e.startsWith(`${Sf}::`))}function jr(t){return t.replace(new RegExp(`${Sf}::`),"")}function cv(){var n;const t=(n=yt.getActiveProfile())==null?void 0:n.profile;if(!t)return null;const e=new Map;return t.forEachCall(r=>{const{frame:i}=r;if(!Ba(i))return;const{name:a,args:{begin:{tag:o}}}=i,s=jr(a),l=r.getSelfWeight();e.has(o)||e.set(o,new Map);const c=e.get(o);c.has(s)||c.set(s,[]),c.get(s).push(l)},()=>{}),e}function XC(){const t=cv();if(!t)return null;const e=Array.from(t.values()).flatMap(n=>Array.from(n.entries())).map(([n,r])=>{const i=r.reduce((a,o)=>a+o,0);return{name:n,duration:{total:i,average:i/r.length}}});return e.length?{plotData:[e]}:null}function GC(){const t=cv();if(!t)return null;const e=Array.from(t.entries()).map(([n,r])=>{const{count:i,total:a}=Array.from(r.values()).reduce((o,s)=>(o.count+=s.length,o.total+=s.reduce((l,c)=>l+c,0),o),{count:0,total:0});return{name:n,duration:{total:a,average:a/i}}});return e.length?{plotData:[e]}:null}function Sm({info:t}){return C($r,{children:C("p",{className:Qs["generic-info"],children:t})})}function qC(){const{frameSt:t}=YC();return Ba(t)?C(UC,{frameArgs:t.args}):t?C(Sm,{info:"The chosen event does not contain additional information"}):C(Sm,{info:"For more info, choose an event"})}const jC=Wr(qC,"Additional Info");function JC(){const e=(In.get()??[]).filter(n=>n.name===WC).map(n=>({ts:+n.ts.toFixed(3),...n.args}));if(e.length!==0)return{fullData:e}}function mt(t,e){return t==null||e==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function uv(t,e){return t==null||e==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function go(t){let e,n,r;t.length!==2?(e=mt,n=(s,l)=>mt(t(s),l),r=(s,l)=>t(s)-l):(e=t===mt||t===uv?t:ZC,n=t,r=t);function i(s,l,c=0,f=s.length){if(c<f){if(e(l,l)!==0)return f;do{const d=c+f>>>1;n(s[d],l)<0?c=d+1:f=d}while(c<f)}return c}function a(s,l,c=0,f=s.length){if(c<f){if(e(l,l)!==0)return f;do{const d=c+f>>>1;n(s[d],l)<=0?c=d+1:f=d}while(c<f)}return c}function o(s,l,c=0,f=s.length){const d=i(s,l,c,f-1);return d>c&&r(s[d-1],l)>-r(s[d],l)?d-1:d}return{left:i,center:o,right:a}}function ZC(){return 0}function el(t){return t===null?NaN:+t}function*KC(t,e){if(e===void 0)for(let n of t)n!=null&&(n=+n)>=n&&(yield n);else{let n=-1;for(let r of t)(r=e(r,++n,t))!=null&&(r=+r)>=r&&(yield r)}}const fv=go(mt),Br=fv.right,QC=fv.left,eA=go(el).center;function tA(t,e){if(!((e=+e)>=0))throw new RangeError("invalid r");let n=t.length;if(!((n=Math.floor(n))>=0))throw new RangeError("invalid length");if(!n||!e)return t;const r=Ef(e),i=t.slice();return r(t,i,0,n,1),r(i,t,0,n,1),r(t,i,0,n,1),t}const nA=hv(Ef),rA=hv(iA);function hv(t){return function(e,n,r=n){if(!((n=+n)>=0))throw new RangeError("invalid rx");if(!((r=+r)>=0))throw new RangeError("invalid ry");let{data:i,width:a,height:o}=e;if(!((a=Math.floor(a))>=0))throw new RangeError("invalid width");if(!((o=Math.floor(o!==void 0?o:i.length/a))>=0))throw new RangeError("invalid height");if(!a||!o||!n&&!r)return e;const s=n&&t(n),l=r&&t(r),c=i.slice();return s&&l?(wi(s,c,i,a,o),wi(s,i,c,a,o),wi(s,c,i,a,o),xi(l,i,c,a,o),xi(l,c,i,a,o),xi(l,i,c,a,o)):s?(wi(s,i,c,a,o),wi(s,c,i,a,o),wi(s,i,c,a,o)):l&&(xi(l,i,c,a,o),xi(l,c,i,a,o),xi(l,i,c,a,o)),e}}function wi(t,e,n,r,i){for(let a=0,o=r*i;a<o;)t(e,n,a,a+=r,1)}function xi(t,e,n,r,i){for(let a=0,o=r*i;a<r;++a)t(e,n,a,a+o,r)}function iA(t){const e=Ef(t);return(n,r,i,a,o)=>{i<<=2,a<<=2,o<<=2,e(n,r,i+0,a+0,o),e(n,r,i+1,a+1,o),e(n,r,i+2,a+2,o),e(n,r,i+3,a+3,o)}}function Ef(t){const e=Math.floor(t);if(e===t)return aA(t);const n=t-e,r=2*t+1;return(i,a,o,s,l)=>{if(!((s-=l)>=o))return;let c=e*a[o];const f=l*e,d=f+l;for(let p=o,x=o+f;p<x;p+=l)c+=a[Math.min(s,p)];for(let p=o,x=s;p<=x;p+=l)c+=a[Math.min(s,p+f)],i[p]=(c+n*(a[Math.max(o,p-d)]+a[Math.min(s,p+d)]))/r,c-=a[Math.max(o,p-f)]}}function aA(t){const e=2*t+1;return(n,r,i,a,o)=>{if(!((a-=o)>=i))return;let s=t*r[i];const l=o*t;for(let c=i,f=i+l;c<f;c+=o)s+=r[Math.min(a,c)];for(let c=i,f=a;c<=f;c+=o)s+=r[Math.min(a,c+l)],n[c]=s/e,s-=r[Math.max(i,c-l)]}}function Il(t,e){let n=0;if(e===void 0)for(let r of t)r!=null&&(r=+r)>=r&&++n;else{let r=-1;for(let i of t)(i=e(i,++r,t))!=null&&(i=+i)>=i&&++n}return n}function oA(t){return t.length|0}function sA(t){return!(t>0)}function lA(t){return typeof t!="object"||"length"in t?t:Array.from(t)}function cA(t){return e=>t(...e)}function uA(...t){const e=typeof t[t.length-1]=="function"&&cA(t.pop());t=t.map(lA);const n=t.map(oA),r=t.length-1,i=new Array(r+1).fill(0),a=[];if(r<0||n.some(sA))return a;for(;;){a.push(i.map((s,l)=>t[l][s]));let o=r;for(;++i[o]===n[o];){if(o===0)return e?a.map(e):a;i[o--]=0}}}function fA(t,e){var n=0,r=0;return Float64Array.from(t,e===void 0?i=>n+=+i||0:i=>n+=+e(i,r++,t)||0)}function dv(t,e){let n=0,r,i=0,a=0;if(e===void 0)for(let o of t)o!=null&&(o=+o)>=o&&(r=o-i,i+=r/++n,a+=r*(o-i));else{let o=-1;for(let s of t)(s=e(s,++o,t))!=null&&(s=+s)>=s&&(r=s-i,i+=r/++n,a+=r*(s-i))}if(n>1)return a/(n-1)}function gv(t,e){const n=dv(t,e);return n&&Math.sqrt(n)}function Ts(t,e){let n,r;if(e===void 0)for(const i of t)i!=null&&(n===void 0?i>=i&&(n=r=i):(n>i&&(n=i),r<i&&(r=i)));else{let i=-1;for(let a of t)(a=e(a,++i,t))!=null&&(n===void 0?a>=a&&(n=r=a):(n>a&&(n=a),r<a&&(r=a)))}return[n,r]}class Cf{constructor(){this._partials=new Float64Array(32),this._n=0}add(e){const n=this._partials;let r=0;for(let i=0;i<this._n&&i<32;i++){const a=n[i],o=e+a,s=Math.abs(e)<Math.abs(a)?e-(o-a):a-(o-e);s&&(n[r++]=s),e=o}return n[r]=e,this._n=r+1,this}valueOf(){const e=this._partials;let n=this._n,r,i,a,o=0;if(n>0){for(o=e[--n];n>0&&(r=o,i=e[--n],o=r+i,a=i-(o-r),!a););n>0&&(a<0&&e[n-1]<0||a>0&&e[n-1]>0)&&(i=a*2,r=o+i,i==r-o&&(o=r))}return o}}function hA(t,e){const n=new Cf;if(e===void 0)for(let r of t)(r=+r)&&n.add(r);else{let r=-1;for(let i of t)(i=+e(i,++r,t))&&n.add(i)}return+n}function dA(t,e){const n=new Cf;let r=-1;return Float64Array.from(t,e===void 0?i=>n.add(+i||0):i=>n.add(+e(i,++r,t)||0))}class qa extends Map{constructor(e,n=vv){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),e!=null)for(const[r,i]of e)this.set(r,i)}get(e){return super.get(ku(this,e))}has(e){return super.has(ku(this,e))}set(e,n){return super.set(mv(this,e),n)}delete(e){return super.delete(pv(this,e))}}class si extends Set{constructor(e,n=vv){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),e!=null)for(const r of e)this.add(r)}has(e){return super.has(ku(this,e))}add(e){return super.add(mv(this,e))}delete(e){return super.delete(pv(this,e))}}function ku({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):n}function mv({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):(t.set(r,n),n)}function pv({_intern:t,_key:e},n){const r=e(n);return t.has(r)&&(n=t.get(r),t.delete(r)),n}function vv(t){return t!==null&&typeof t=="object"?t.valueOf():t}function Wi(t){return t}function bv(t,...e){return oa(t,Wi,Wi,e)}function _v(t,...e){return oa(t,Array.from,Wi,e)}function yv(t,e){for(let n=1,r=e.length;n<r;++n)t=t.flatMap(i=>i.pop().map(([a,o])=>[...i,a,o]));return t}function gA(t,...e){return yv(_v(t,...e),e)}function mA(t,e,...n){return yv(xv(t,e,...n),n)}function wv(t,e,...n){return oa(t,Wi,e,n)}function xv(t,e,...n){return oa(t,Array.from,e,n)}function pA(t,...e){return oa(t,Wi,Tv,e)}function vA(t,...e){return oa(t,Array.from,Tv,e)}function Tv(t){if(t.length!==1)throw new Error("duplicate key");return t[0]}function oa(t,e,n,r){return function i(a,o){if(o>=r.length)return n(a);const s=new qa,l=r[o++];let c=-1;for(const f of a){const d=l(f,++c,a),p=s.get(d);p?p.push(f):s.set(d,[f])}for(const[f,d]of s)s.set(f,i(d,o));return e(s)}(t,0)}function Sv(t,e){return Array.from(e,n=>t[n])}function Bu(t,...e){if(typeof t[Symbol.iterator]!="function")throw new TypeError("values is not iterable");t=Array.from(t);let[n]=e;if(n&&n.length!==2||e.length>1){const r=Uint32Array.from(t,(i,a)=>a);return e.length>1?(e=e.map(i=>t.map(i)),r.sort((i,a)=>{for(const o of e){const s=$i(o[i],o[a]);if(s)return s}})):(n=t.map(n),r.sort((i,a)=>$i(n[i],n[a]))),Sv(t,r)}return t.sort(Af(n))}function Af(t=mt){if(t===mt)return $i;if(typeof t!="function")throw new TypeError("compare is not a function");return(e,n)=>{const r=t(e,n);return r||r===0?r:(t(n,n)===0)-(t(e,e)===0)}}function $i(t,e){return(t==null||!(t>=t))-(e==null||!(e>=e))||(t<e?-1:t>e?1:0)}function bA(t,e,n){return(e.length!==2?Bu(wv(t,e,n),([r,i],[a,o])=>mt(i,o)||mt(r,a)):Bu(bv(t,n),([r,i],[a,o])=>e(i,o)||mt(r,a))).map(([r])=>r)}var _A=Array.prototype,yA=_A.slice;function qc(t){return()=>t}const wA=Math.sqrt(50),xA=Math.sqrt(10),TA=Math.sqrt(2);function tl(t,e,n){const r=(e-t)/Math.max(0,n),i=Math.floor(Math.log10(r)),a=r/Math.pow(10,i),o=a>=wA?10:a>=xA?5:a>=TA?2:1;let s,l,c;return i<0?(c=Math.pow(10,-i)/o,s=Math.round(t*c),l=Math.round(e*c),s/c<t&&++s,l/c>e&&--l,c=-c):(c=Math.pow(10,i)*o,s=Math.round(t/c),l=Math.round(e/c),s*c<t&&++s,l*c>e&&--l),l<s&&.5<=n&&n<2?tl(t,e,n*2):[s,l,c]}function ja(t,e,n){if(e=+e,t=+t,n=+n,!(n>0))return[];if(t===e)return[t];const r=e<t,[i,a,o]=r?tl(e,t,n):tl(t,e,n);if(!(a>=i))return[];const s=a-i+1,l=new Array(s);if(r)if(o<0)for(let c=0;c<s;++c)l[c]=(a-c)/-o;else for(let c=0;c<s;++c)l[c]=(a-c)*o;else if(o<0)for(let c=0;c<s;++c)l[c]=(i+c)/-o;else for(let c=0;c<s;++c)l[c]=(i+c)*o;return l}function li(t,e,n){return e=+e,t=+t,n=+n,tl(t,e,n)[2]}function nl(t,e,n){e=+e,t=+t,n=+n;const r=e<t,i=r?li(e,t,n):li(t,e,n);return(r?-1:1)*(i<0?1/-i:i)}function Ev(t,e,n){let r;for(;;){const i=li(t,e,n);if(i===r||i===0||!isFinite(i))return[t,e];i>0?(t=Math.floor(t/i)*i,e=Math.ceil(e/i)*i):i<0&&(t=Math.ceil(t*i)/i,e=Math.floor(e*i)/i),r=i}}function Cv(t){return Math.max(1,Math.ceil(Math.log(Il(t))/Math.LN2)+1)}function Em(){var t=Wi,e=Ts,n=Cv;function r(i){Array.isArray(i)||(i=Array.from(i));var a,o=i.length,s,l,c=new Array(o);for(a=0;a<o;++a)c[a]=t(i[a],a,i);var f=e(c),d=f[0],p=f[1],x=n(c,d,p);if(!Array.isArray(x)){const D=p,N=+x;if(e===Ts&&([d,p]=Ev(d,p,N)),x=ja(d,p,N),x[0]<=d&&(l=li(d,p,N)),x[x.length-1]>=p)if(D>=p&&e===Ts){const k=li(d,p,N);isFinite(k)&&(k>0?p=(Math.floor(p/k)+1)*k:k<0&&(p=(Math.ceil(p*-k)+1)/-k))}else x.pop()}for(var R=x.length,O=0,A=R;x[O]<=d;)++O;for(;x[A-1]>p;)--A;(O||A<R)&&(x=x.slice(O,A),R=A-O);var I=new Array(R+1),S;for(a=0;a<=R;++a)S=I[a]=[],S.x0=a>0?x[a-1]:d,S.x1=a<R?x[a]:p;if(isFinite(l)){if(l>0)for(a=0;a<o;++a)(s=c[a])!=null&&d<=s&&s<=p&&I[Math.min(R,Math.floor((s-d)/l))].push(i[a]);else if(l<0){for(a=0;a<o;++a)if((s=c[a])!=null&&d<=s&&s<=p){const D=Math.floor((d-s)*l);I[Math.min(R,D+(x[D]<=s))].push(i[a])}}}else for(a=0;a<o;++a)(s=c[a])!=null&&d<=s&&s<=p&&I[Br(x,s,0,R)].push(i[a]);return I}return r.value=function(i){return arguments.length?(t=typeof i=="function"?i:qc(i),r):t},r.domain=function(i){return arguments.length?(e=typeof i=="function"?i:qc([i[0],i[1]]),r):e},r.thresholds=function(i){return arguments.length?(n=typeof i=="function"?i:qc(Array.isArray(i)?yA.call(i):i),r):n},r}function Fu(t,e){let n;if(e===void 0)for(const r of t)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of t)(i=e(i,++r,t))!=null&&(n<i||n===void 0&&i>=i)&&(n=i)}return n}function Rf(t,e){let n,r=-1,i=-1;if(e===void 0)for(const a of t)++i,a!=null&&(n<a||n===void 0&&a>=a)&&(n=a,r=i);else for(let a of t)(a=e(a,++i,t))!=null&&(n<a||n===void 0&&a>=a)&&(n=a,r=i);return r}function rl(t,e){let n;if(e===void 0)for(const r of t)r!=null&&(n>r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of t)(i=e(i,++r,t))!=null&&(n>i||n===void 0&&i>=i)&&(n=i)}return n}function Mf(t,e){let n,r=-1,i=-1;if(e===void 0)for(const a of t)++i,a!=null&&(n>a||n===void 0&&a>=a)&&(n=a,r=i);else for(let a of t)(a=e(a,++i,t))!=null&&(n>a||n===void 0&&a>=a)&&(n=a,r=i);return r}function Pl(t,e,n=0,r=1/0,i){if(e=Math.floor(e),n=Math.floor(Math.max(0,n)),r=Math.floor(Math.min(t.length-1,r)),!(n<=e&&e<=r))return t;for(i=i===void 0?$i:Af(i);r>n;){if(r-n>600){const l=r-n+1,c=e-n+1,f=Math.log(l),d=.5*Math.exp(2*f/3),p=.5*Math.sqrt(f*d*(l-d)/l)*(c-l/2<0?-1:1),x=Math.max(n,Math.floor(e-c*d/l+p)),R=Math.min(r,Math.floor(e+(l-c)*d/l+p));Pl(t,e,x,R,i)}const a=t[e];let o=n,s=r;for(xa(t,n,e),i(t[r],a)>0&&xa(t,n,r);o<s;){for(xa(t,o,s),++o,--s;i(t[o],a)<0;)++o;for(;i(t[s],a)>0;)--s}i(t[n],a)===0?xa(t,n,s):(++s,xa(t,s,r)),s<=e&&(n=s+1),e<=s&&(r=s-1)}return t}function xa(t,e,n){const r=t[e];t[e]=t[n],t[n]=r}function Av(t,e=mt){let n,r=!1;if(e.length===1){let i;for(const a of t){const o=e(a);(r?mt(o,i)>0:mt(o,o)===0)&&(n=a,i=o,r=!0)}}else for(const i of t)(r?e(i,n)>0:e(i,i)===0)&&(n=i,r=!0);return n}function Ja(t,e,n){if(t=Float64Array.from(KC(t,n)),!(!(r=t.length)||isNaN(e=+e))){if(e<=0||r<2)return rl(t);if(e>=1)return Fu(t);var r,i=(r-1)*e,a=Math.floor(i),o=Fu(Pl(t,a).subarray(0,a+1)),s=rl(t.subarray(a+1));return o+(s-o)*(i-a)}}function Rv(t,e,n=el){if(!(!(r=t.length)||isNaN(e=+e))){if(e<=0||r<2)return+n(t[0],0,t);if(e>=1)return+n(t[r-1],r-1,t);var r,i=(r-1)*e,a=Math.floor(i),o=+n(t[a],a,t),s=+n(t[a+1],a+1,t);return o+(s-o)*(i-a)}}function Mv(t,e,n=el){if(!isNaN(e=+e)){if(r=Float64Array.from(t,(s,l)=>el(n(t[l],l,t))),e<=0)return Mf(r);if(e>=1)return Rf(r);var r,i=Uint32Array.from(t,(s,l)=>l),a=r.length-1,o=Math.floor(a*e);return Pl(i,o,0,a,(s,l)=>$i(r[s],r[l])),o=Av(i.subarray(0,o+1),s=>r[s]),o>=0?o:-1}}function SA(t,e,n){const r=Il(t),i=Ja(t,.75)-Ja(t,.25);return r&&i?Math.ceil((n-e)/(2*i*Math.pow(r,-1/3))):1}function EA(t,e,n){const r=Il(t),i=gv(t);return r&&i?Math.ceil((n-e)*Math.cbrt(r)/(3.49*i)):1}function CA(t,e){let n=0,r=0;if(e===void 0)for(let i of t)i!=null&&(i=+i)>=i&&(++n,r+=i);else{let i=-1;for(let a of t)(a=e(a,++i,t))!=null&&(a=+a)>=a&&(++n,r+=a)}if(n)return r/n}function AA(t,e){return Ja(t,.5,e)}function RA(t,e){return Mv(t,.5,e)}function*MA(t){for(const e of t)yield*e}function NA(t){return Array.from(MA(t))}function OA(t,e){const n=new qa;if(e===void 0)for(let a of t)a!=null&&a>=a&&n.set(a,(n.get(a)||0)+1);else{let a=-1;for(let o of t)(o=e(o,++a,t))!=null&&o>=o&&n.set(o,(n.get(o)||0)+1)}let r,i=0;for(const[a,o]of n)o>i&&(i=o,r=a);return r}function DA(t,e=LA){const n=[];let r,i=!1;for(const a of t)i&&n.push(e(r,a)),r=a,i=!0;return n}function LA(t,e){return[t,e]}function Nf(t,e,n){t=+t,e=+e,n=(i=arguments.length)<2?(e=t,t=0,1):i<3?1:+n;for(var r=-1,i=Math.max(0,Math.ceil((e-t)/n))|0,a=new Array(i);++r<i;)a[r]=t+r*n;return a}function IA(t,e=mt){if(typeof t[Symbol.iterator]!="function")throw new TypeError("values is not iterable");let n=Array.from(t);const r=new Float64Array(n.length);e.length!==2&&(n=n.map(e),e=mt);const i=(s,l)=>e(n[s],n[l]);let a,o;return t=Uint32Array.from(n,(s,l)=>l),t.sort(e===mt?(s,l)=>$i(n[s],n[l]):Af(i)),t.forEach((s,l)=>{const c=i(s,a===void 0?s:a);c>=0?((a===void 0||c>0)&&(a=s,o=l),r[s]=o):r[s]=NaN}),r}function il(t,e=mt){let n,r=!1;if(e.length===1){let i;for(const a of t){const o=e(a);(r?mt(o,i)<0:mt(o,o)===0)&&(n=a,i=o,r=!0)}}else for(const i of t)(r?e(i,n)<0:e(i,i)===0)&&(n=i,r=!0);return n}function Nv(t,e=mt){if(e.length===1)return Mf(t,e);let n,r=-1,i=-1;for(const a of t)++i,(r<0?e(a,a)===0:e(a,n)<0)&&(n=a,r=i);return r}function PA(t,e=mt){if(e.length===1)return Rf(t,e);let n,r=-1,i=-1;for(const a of t)++i,(r<0?e(a,a)===0:e(a,n)>0)&&(n=a,r=i);return r}function kA(t,e){const n=Nv(t,e);return n<0?void 0:n}const BA=Ov(Math.random);function Ov(t){return function(n,r=0,i=n.length){let a=i-(r=+r);for(;a;){const o=t()*a--|0,s=n[a+r];n[a+r]=n[o+r],n[o+r]=s}return n}}function FA(t,e){let n=0;if(e===void 0)for(let r of t)(r=+r)&&(n+=r);else{let r=-1;for(let i of t)(i=+e(i,++r,t))&&(n+=i)}return n}function Dv(t){if(!(a=t.length))return[];for(var e=-1,n=rl(t,VA),r=new Array(n);++e<n;)for(var i=-1,a,o=r[e]=new Array(a);++i<a;)o[i]=t[i][e];return r}function VA(t){return t.length}function WA(){return Dv(arguments)}function $A(t,e){if(typeof e!="function")throw new TypeError("test is not a function");let n=-1;for(const r of t)if(!e(r,++n,t))return!1;return!0}function zA(t,e){if(typeof e!="function")throw new TypeError("test is not a function");let n=-1;for(const r of t)if(e(r,++n,t))return!0;return!1}function HA(t,e){if(typeof e!="function")throw new TypeError("test is not a function");const n=[];let r=-1;for(const i of t)e(i,++r,t)&&n.push(i);return n}function UA(t,e){if(typeof t[Symbol.iterator]!="function")throw new TypeError("values is not iterable");if(typeof e!="function")throw new TypeError("mapper is not a function");return Array.from(t,(n,r)=>e(n,r,t))}function YA(t,e,n){if(typeof e!="function")throw new TypeError("reducer is not a function");const r=t[Symbol.iterator]();let i,a,o=-1;if(arguments.length<3){if({done:i,value:n}=r.next(),i)return;++o}for(;{done:i,value:a}=r.next(),!i;)n=e(n,a,++o,t);return n}function XA(t){if(typeof t[Symbol.iterator]!="function")throw new TypeError("values is not iterable");return Array.from(t).reverse()}function GA(t,...e){t=new si(t);for(const n of e)for(const r of n)t.delete(r);return t}function qA(t,e){const n=e[Symbol.iterator](),r=new si;for(const i of t){if(r.has(i))return!1;let a,o;for(;({value:a,done:o}=n.next())&&!o;){if(Object.is(i,a))return!1;r.add(a)}}return!0}function jA(t,...e){t=new si(t),e=e.map(JA);e:for(const n of t)for(const r of e)if(!r.has(n)){t.delete(n);continue e}return t}function JA(t){return t instanceof si?t:new si(t)}function Lv(t,e){const n=t[Symbol.iterator](),r=new Set;for(const i of e){const a=Cm(i);if(r.has(a))continue;let o,s;for(;{value:o,done:s}=n.next();){if(s)return!1;const l=Cm(o);if(r.add(l),Object.is(a,l))break}}return!0}function Cm(t){return t!==null&&typeof t=="object"?t.valueOf():t}function ZA(t,e){return Lv(e,t)}function KA(...t){const e=new si;for(const n of t)for(const r of n)e.add(r);return e}const QA=Object.freeze(Object.defineProperty({__proto__:null,Adder:Cf,InternMap:qa,InternSet:si,ascending:mt,bin:Em,bisect:Br,bisectCenter:eA,bisectLeft:QC,bisectRight:Br,bisector:go,blur:tA,blur2:nA,blurImage:rA,count:Il,cross:uA,cumsum:fA,descending:uv,deviation:gv,difference:GA,disjoint:qA,every:$A,extent:Ts,fcumsum:dA,filter:HA,flatGroup:gA,flatRollup:mA,fsum:hA,greatest:Av,greatestIndex:PA,group:bv,groupSort:bA,groups:_v,histogram:Em,index:pA,indexes:vA,intersection:jA,least:il,leastIndex:Nv,map:UA,max:Fu,maxIndex:Rf,mean:CA,median:AA,medianIndex:RA,merge:NA,min:rl,minIndex:Mf,mode:OA,nice:Ev,pairs:DA,permute:Sv,quantile:Ja,quantileIndex:Mv,quantileSorted:Rv,quickselect:Pl,range:Nf,rank:IA,reduce:YA,reverse:XA,rollup:wv,rollups:xv,scan:kA,shuffle:BA,shuffler:Ov,some:zA,sort:Bu,subset:ZA,sum:FA,superset:Lv,thresholdFreedmanDiaconis:SA,thresholdScott:EA,thresholdSturges:Cv,tickIncrement:li,tickStep:nl,ticks:ja,transpose:Dv,union:KA,variance:dv,zip:WA},Symbol.toStringTag,{value:"Module"}));var eR={value:()=>{}};function mo(){for(var t=0,e=arguments.length,n={},r;t<e;++t){if(!(r=arguments[t]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new Ss(n)}function Ss(t){this._=t}function tR(t,e){return t.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");if(i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),n&&!e.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}Ss.prototype=mo.prototype={constructor:Ss,on:function(t,e){var n=this._,r=tR(t+"",n),i,a=-1,o=r.length;if(arguments.length<2){for(;++a<o;)if((i=(t=r[a]).type)&&(i=nR(n[i],t.name)))return i;return}if(e!=null&&typeof e!="function")throw new Error("invalid callback: "+e);for(;++a<o;)if(i=(t=r[a]).type)n[i]=Am(n[i],t.name,e);else if(e==null)for(i in n)n[i]=Am(n[i],t.name,null);return this},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new Ss(t)},call:function(t,e){if((i=arguments.length-2)>0)for(var n=new Array(i),r=0,i,a;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(a=this._[t],r=0,i=a.length;r<i;++r)a[r].value.apply(e,n)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],i=0,a=r.length;i<a;++i)r[i].value.apply(e,n)}};function nR(t,e){for(var n=0,r=t.length,i;n<r;++n)if((i=t[n]).name===e)return i.value}function Am(t,e,n){for(var r=0,i=t.length;r<i;++r)if(t[r].name===e){t[r]=eR,t=t.slice(0,r).concat(t.slice(r+1));break}return n!=null&&t.push({name:e,value:n}),t}const rR=Object.freeze(Object.defineProperty({__proto__:null,dispatch:mo},Symbol.toStringTag,{value:"Module"}));var Vu="http://www.w3.org/1999/xhtml";const Wu={svg:"http://www.w3.org/2000/svg",xhtml:Vu,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function po(t){var e=t+="",n=e.indexOf(":");return n>=0&&(e=t.slice(0,n))!=="xmlns"&&(t=t.slice(n+1)),Wu.hasOwnProperty(e)?{space:Wu[e],local:t}:t}function iR(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===Vu&&e.documentElement.namespaceURI===Vu?e.createElement(t):e.createElementNS(n,t)}}function aR(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function kl(t){var e=po(t);return(e.local?aR:iR)(e)}function oR(){}function Bl(t){return t==null?oR:function(){return this.querySelector(t)}}function sR(t){typeof t!="function"&&(t=Bl(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var a=e[i],o=a.length,s=r[i]=new Array(o),l,c,f=0;f<o;++f)(l=a[f])&&(c=t.call(l,l.__data__,f,a))&&("__data__"in l&&(c.__data__=l.__data__),s[f]=c);return new ln(r,this._parents)}function Iv(t){return t==null?[]:Array.isArray(t)?t:Array.from(t)}function lR(){return[]}function Of(t){return t==null?lR:function(){return this.querySelectorAll(t)}}function cR(t){return function(){return Iv(t.apply(this,arguments))}}function uR(t){typeof t=="function"?t=cR(t):t=Of(t);for(var e=this._groups,n=e.length,r=[],i=[],a=0;a<n;++a)for(var o=e[a],s=o.length,l,c=0;c<s;++c)(l=o[c])&&(r.push(t.call(l,l.__data__,c,o)),i.push(l));return new ln(r,i)}function Df(t){return function(){return this.matches(t)}}function Pv(t){return function(e){return e.matches(t)}}var fR=Array.prototype.find;function hR(t){return function(){return fR.call(this.children,t)}}function dR(){return this.firstElementChild}function gR(t){return this.select(t==null?dR:hR(typeof t=="function"?t:Pv(t)))}var mR=Array.prototype.filter;function pR(){return Array.from(this.children)}function vR(t){return function(){return mR.call(this.children,t)}}function bR(t){return this.selectAll(t==null?pR:vR(typeof t=="function"?t:Pv(t)))}function _R(t){typeof t!="function"&&(t=Df(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var a=e[i],o=a.length,s=r[i]=[],l,c=0;c<o;++c)(l=a[c])&&t.call(l,l.__data__,c,a)&&s.push(l);return new ln(r,this._parents)}function kv(t){return new Array(t.length)}function yR(){return new ln(this._enter||this._groups.map(kv),this._parents)}function al(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}al.prototype={constructor:al,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function wR(t){return function(){return t}}function xR(t,e,n,r,i,a){for(var o=0,s,l=e.length,c=a.length;o<c;++o)(s=e[o])?(s.__data__=a[o],r[o]=s):n[o]=new al(t,a[o]);for(;o<l;++o)(s=e[o])&&(i[o]=s)}function TR(t,e,n,r,i,a,o){var s,l,c=new Map,f=e.length,d=a.length,p=new Array(f),x;for(s=0;s<f;++s)(l=e[s])&&(p[s]=x=o.call(l,l.__data__,s,e)+"",c.has(x)?i[s]=l:c.set(x,l));for(s=0;s<d;++s)x=o.call(t,a[s],s,a)+"",(l=c.get(x))?(r[s]=l,l.__data__=a[s],c.delete(x)):n[s]=new al(t,a[s]);for(s=0;s<f;++s)(l=e[s])&&c.get(p[s])===l&&(i[s]=l)}function SR(t){return t.__data__}function ER(t,e){if(!arguments.length)return Array.from(this,SR);var n=e?TR:xR,r=this._parents,i=this._groups;typeof t!="function"&&(t=wR(t));for(var a=i.length,o=new Array(a),s=new Array(a),l=new Array(a),c=0;c<a;++c){var f=r[c],d=i[c],p=d.length,x=CR(t.call(f,f&&f.__data__,c,r)),R=x.length,O=s[c]=new Array(R),A=o[c]=new Array(R),I=l[c]=new Array(p);n(f,d,O,A,I,x,e);for(var S=0,D=0,N,k;S<R;++S)if(N=O[S]){for(S>=D&&(D=S+1);!(k=A[D])&&++D<R;);N._next=k||null}}return o=new ln(o,r),o._enter=s,o._exit=l,o}function CR(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function AR(){return new ln(this._exit||this._groups.map(kv),this._parents)}function RR(t,e,n){var r=this.enter(),i=this,a=this.exit();return typeof t=="function"?(r=t(r),r&&(r=r.selection())):r=r.append(t+""),e!=null&&(i=e(i),i&&(i=i.selection())),n==null?a.remove():n(a),r&&i?r.merge(i).order():i}function MR(t){for(var e=t.selection?t.selection():t,n=this._groups,r=e._groups,i=n.length,a=r.length,o=Math.min(i,a),s=new Array(i),l=0;l<o;++l)for(var c=n[l],f=r[l],d=c.length,p=s[l]=new Array(d),x,R=0;R<d;++R)(x=c[R]||f[R])&&(p[R]=x);for(;l<i;++l)s[l]=n[l];return new ln(s,this._parents)}function NR(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var r=t[e],i=r.length-1,a=r[i],o;--i>=0;)(o=r[i])&&(a&&o.compareDocumentPosition(a)^4&&a.parentNode.insertBefore(o,a),a=o);return this}function OR(t){t||(t=DR);function e(d,p){return d&&p?t(d.__data__,p.__data__):!d-!p}for(var n=this._groups,r=n.length,i=new Array(r),a=0;a<r;++a){for(var o=n[a],s=o.length,l=i[a]=new Array(s),c,f=0;f<s;++f)(c=o[f])&&(l[f]=c);l.sort(e)}return new ln(i,this._parents).order()}function DR(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function LR(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this}function IR(){return Array.from(this)}function PR(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],i=0,a=r.length;i<a;++i){var o=r[i];if(o)return o}return null}function kR(){let t=0;for(const e of this)++t;return t}function BR(){return!this.node()}function FR(t){for(var e=this._groups,n=0,r=e.length;n<r;++n)for(var i=e[n],a=0,o=i.length,s;a<o;++a)(s=i[a])&&t.call(s,s.__data__,a,i);return this}function VR(t){return function(){this.removeAttribute(t)}}function WR(t){return function(){this.removeAttributeNS(t.space,t.local)}}function $R(t,e){return function(){this.setAttribute(t,e)}}function zR(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function HR(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttribute(t):this.setAttribute(t,n)}}function UR(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}function YR(t,e){var n=po(t);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((e==null?n.local?WR:VR:typeof e=="function"?n.local?UR:HR:n.local?zR:$R)(n,e))}function Lf(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function XR(t){return function(){this.style.removeProperty(t)}}function GR(t,e,n){return function(){this.style.setProperty(t,e,n)}}function qR(t,e,n){return function(){var r=e.apply(this,arguments);r==null?this.style.removeProperty(t):this.style.setProperty(t,r,n)}}function jR(t,e,n){return arguments.length>1?this.each((e==null?XR:typeof e=="function"?qR:GR)(t,e,n??"")):ci(this.node(),t)}function ci(t,e){return t.style.getPropertyValue(e)||Lf(t).getComputedStyle(t,null).getPropertyValue(e)}function JR(t){return function(){delete this[t]}}function ZR(t,e){return function(){this[t]=e}}function KR(t,e){return function(){var n=e.apply(this,arguments);n==null?delete this[t]:this[t]=n}}function QR(t,e){return arguments.length>1?this.each((e==null?JR:typeof e=="function"?KR:ZR)(t,e)):this.node()[t]}function Bv(t){return t.trim().split(/^|\s+/)}function If(t){return t.classList||new Fv(t)}function Fv(t){this._node=t,this._names=Bv(t.getAttribute("class")||"")}Fv.prototype={add:function(t){var e=this._names.indexOf(t);e<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};function Vv(t,e){for(var n=If(t),r=-1,i=e.length;++r<i;)n.add(e[r])}function Wv(t,e){for(var n=If(t),r=-1,i=e.length;++r<i;)n.remove(e[r])}function eM(t){return function(){Vv(this,t)}}function tM(t){return function(){Wv(this,t)}}function nM(t,e){return function(){(e.apply(this,arguments)?Vv:Wv)(this,t)}}function rM(t,e){var n=Bv(t+"");if(arguments.length<2){for(var r=If(this.node()),i=-1,a=n.length;++i<a;)if(!r.contains(n[i]))return!1;return!0}return this.each((typeof e=="function"?nM:e?eM:tM)(n,e))}function iM(){this.textContent=""}function aM(t){return function(){this.textContent=t}}function oM(t){return function(){var e=t.apply(this,arguments);this.textContent=e??""}}function sM(t){return arguments.length?this.each(t==null?iM:(typeof t=="function"?oM:aM)(t)):this.node().textContent}function lM(){this.innerHTML=""}function cM(t){return function(){this.innerHTML=t}}function uM(t){return function(){var e=t.apply(this,arguments);this.innerHTML=e??""}}function fM(t){return arguments.length?this.each(t==null?lM:(typeof t=="function"?uM:cM)(t)):this.node().innerHTML}function hM(){this.nextSibling&&this.parentNode.appendChild(this)}function dM(){return this.each(hM)}function gM(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function mM(){return this.each(gM)}function pM(t){var e=typeof t=="function"?t:kl(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})}function vM(){return null}function bM(t,e){var n=typeof t=="function"?t:kl(t),r=e==null?vM:typeof e=="function"?e:Bl(e);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function _M(){var t=this.parentNode;t&&t.removeChild(this)}function yM(){return this.each(_M)}function wM(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function xM(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function TM(t){return this.select(t?xM:wM)}function SM(t){return arguments.length?this.property("__data__",t):this.node().__data__}function EM(t){return function(e){t.call(this,e,this.__data__)}}function CM(t){return t.trim().split(/^|\s+/).map(function(e){var n="",r=e.indexOf(".");return r>=0&&(n=e.slice(r+1),e=e.slice(0,r)),{type:e,name:n}})}function AM(t){return function(){var e=this.__on;if(e){for(var n=0,r=-1,i=e.length,a;n<i;++n)a=e[n],(!t.type||a.type===t.type)&&a.name===t.name?this.removeEventListener(a.type,a.listener,a.options):e[++r]=a;++r?e.length=r:delete this.__on}}}function RM(t,e,n){return function(){var r=this.__on,i,a=EM(e);if(r){for(var o=0,s=r.length;o<s;++o)if((i=r[o]).type===t.type&&i.name===t.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=a,i.options=n),i.value=e;return}}this.addEventListener(t.type,a,n),i={type:t.type,name:t.name,value:e,listener:a,options:n},r?r.push(i):this.__on=[i]}}function MM(t,e,n){var r=CM(t+""),i,a=r.length,o;if(arguments.length<2){var s=this.node().__on;if(s){for(var l=0,c=s.length,f;l<c;++l)for(i=0,f=s[l];i<a;++i)if((o=r[i]).type===f.type&&o.name===f.name)return f.value}return}for(s=e?RM:AM,i=0;i<a;++i)this.each(s(r[i],e,n));return this}function $v(t,e,n){var r=Lf(t),i=r.CustomEvent;typeof i=="function"?i=new i(e,n):(i=r.document.createEvent("Event"),n?(i.initEvent(e,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(e,!1,!1)),t.dispatchEvent(i)}function NM(t,e){return function(){return $v(this,t,e)}}function OM(t,e){return function(){return $v(this,t,e.apply(this,arguments))}}function DM(t,e){return this.each((typeof e=="function"?OM:NM)(t,e))}function*LM(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],i=0,a=r.length,o;i<a;++i)(o=r[i])&&(yield o)}var Pf=[null];function ln(t,e){this._groups=t,this._parents=e}function sa(){return new ln([[document.documentElement]],Pf)}function IM(){return this}ln.prototype=sa.prototype={constructor:ln,select:sR,selectAll:uR,selectChild:gR,selectChildren:bR,filter:_R,data:ER,enter:yR,exit:AR,join:RR,merge:MR,selection:IM,order:NR,sort:OR,call:LR,nodes:IR,node:PR,size:kR,empty:BR,each:FR,attr:YR,style:jR,property:QR,classed:rM,text:sM,html:fM,raise:dM,lower:mM,append:pM,insert:bM,remove:yM,clone:TM,datum:SM,on:MM,dispatch:DM,[Symbol.iterator]:LM};function Nt(t){return typeof t=="string"?new ln([[document.querySelector(t)]],[document.documentElement]):new ln([[t]],Pf)}function PM(t){return Nt(kl(t).call(document.documentElement))}var kM=0;function zv(){return new $u}function $u(){this._="@"+(++kM).toString(36)}$u.prototype=zv.prototype={constructor:$u,get:function(t){for(var e=this._;!(e in t);)if(!(t=t.parentNode))return;return t[e]},set:function(t,e){return t[this._]=e},remove:function(t){return this._ in t&&delete t[this._]},toString:function(){return this._}};function Hv(t){let e;for(;e=t.sourceEvent;)t=e;return t}function Wn(t,e){if(t=Hv(t),e===void 0&&(e=t.currentTarget),e){var n=e.ownerSVGElement||e;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=t.clientX,r.y=t.clientY,r=r.matrixTransform(e.getScreenCTM().inverse()),[r.x,r.y]}if(e.getBoundingClientRect){var i=e.getBoundingClientRect();return[t.clientX-i.left-e.clientLeft,t.clientY-i.top-e.clientTop]}}return[t.pageX,t.pageY]}function BM(t,e){return t.target&&(t=Hv(t),e===void 0&&(e=t.currentTarget),t=t.touches||[t]),Array.from(t,n=>Wn(n,e))}function FM(t){return typeof t=="string"?new ln([document.querySelectorAll(t)],[document.documentElement]):new ln([Iv(t)],Pf)}const VM=Object.freeze(Object.defineProperty({__proto__:null,create:PM,creator:kl,local:zv,matcher:Df,namespace:po,namespaces:Wu,pointer:Wn,pointers:BM,select:Nt,selectAll:FM,selection:sa,selector:Bl,selectorAll:Of,style:ci,window:Lf},Symbol.toStringTag,{value:"Module"})),zu={capture:!0,passive:!1};function Hu(t){t.preventDefault(),t.stopImmediatePropagation()}function Uv(t){var e=t.document.documentElement,n=Nt(t).on("dragstart.drag",Hu,zu);"onselectstart"in e?n.on("selectstart.drag",Hu,zu):(e.__noselect=e.style.MozUserSelect,e.style.MozUserSelect="none")}function Yv(t,e){var n=t.document.documentElement,r=Nt(t).on("dragstart.drag",null);e&&(r.on("click.drag",Hu,zu),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}function Fl(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function kf(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function la(){}var ui=.7,zi=1/ui,Ri="\\s*([+-]?\\d+)\\s*",Za="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",er="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",WM=/^#([0-9a-f]{3,8})$/,$M=new RegExp(`^rgb\\(${Ri},${Ri},${Ri}\\)$`),zM=new RegExp(`^rgb\\(${er},${er},${er}\\)$`),HM=new RegExp(`^rgba\\(${Ri},${Ri},${Ri},${Za}\\)$`),UM=new RegExp(`^rgba\\(${er},${er},${er},${Za}\\)$`),YM=new RegExp(`^hsl\\(${Za},${er},${er}\\)$`),XM=new RegExp(`^hsla\\(${Za},${er},${er},${Za}\\)$`),Rm={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Fl(la,Fr,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:Mm,formatHex:Mm,formatHex8:GM,formatHsl:qM,formatRgb:Nm,toString:Nm});function Mm(){return this.rgb().formatHex()}function GM(){return this.rgb().formatHex8()}function qM(){return Gv(this).formatHsl()}function Nm(){return this.rgb().formatRgb()}function Fr(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=WM.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?Om(e):n===3?new nn(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?ss(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?ss(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=$M.exec(t))?new nn(e[1],e[2],e[3],1):(e=zM.exec(t))?new nn(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=HM.exec(t))?ss(e[1],e[2],e[3],e[4]):(e=UM.exec(t))?ss(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=YM.exec(t))?Im(e[1],e[2]/100,e[3]/100,1):(e=XM.exec(t))?Im(e[1],e[2]/100,e[3]/100,e[4]):Rm.hasOwnProperty(t)?Om(Rm[t]):t==="transparent"?new nn(NaN,NaN,NaN,0):null}function Om(t){return new nn(t>>16&255,t>>8&255,t&255,1)}function ss(t,e,n,r){return r<=0&&(t=e=n=NaN),new nn(t,e,n,r)}function Xv(t){return t instanceof la||(t=Fr(t)),t?(t=t.rgb(),new nn(t.r,t.g,t.b,t.opacity)):new nn}function fi(t,e,n,r){return arguments.length===1?Xv(t):new nn(t,e,n,r??1)}function nn(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}Fl(nn,fi,kf(la,{brighter(t){return t=t==null?zi:Math.pow(zi,t),new nn(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?ui:Math.pow(ui,t),new nn(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new nn(ri(this.r),ri(this.g),ri(this.b),ol(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Dm,formatHex:Dm,formatHex8:jM,formatRgb:Lm,toString:Lm}));function Dm(){return`#${ni(this.r)}${ni(this.g)}${ni(this.b)}`}function jM(){return`#${ni(this.r)}${ni(this.g)}${ni(this.b)}${ni((isNaN(this.opacity)?1:this.opacity)*255)}`}function Lm(){const t=ol(this.opacity);return`${t===1?"rgb(":"rgba("}${ri(this.r)}, ${ri(this.g)}, ${ri(this.b)}${t===1?")":`, ${t})`}`}function ol(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function ri(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function ni(t){return t=ri(t),(t<16?"0":"")+t.toString(16)}function Im(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new zn(t,e,n,r)}function Gv(t){if(t instanceof zn)return new zn(t.h,t.s,t.l,t.opacity);if(t instanceof la||(t=Fr(t)),!t)return new zn;if(t instanceof zn)return t;t=t.rgb();var e=t.r/255,n=t.g/255,r=t.b/255,i=Math.min(e,n,r),a=Math.max(e,n,r),o=NaN,s=a-i,l=(a+i)/2;return s?(e===a?o=(n-r)/s+(n<r)*6:n===a?o=(r-e)/s+2:o=(e-n)/s+4,s/=l<.5?a+i:2-a-i,o*=60):s=l>0&&l<1?0:o,new zn(o,s,l,t.opacity)}function JM(t,e,n,r){return arguments.length===1?Gv(t):new zn(t,e,n,r??1)}function zn(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}Fl(zn,JM,kf(la,{brighter(t){return t=t==null?zi:Math.pow(zi,t),new zn(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?ui:Math.pow(ui,t),new zn(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,i=2*n-r;return new nn(jc(t>=240?t-240:t+120,i,r),jc(t,i,r),jc(t<120?t+240:t-120,i,r),this.opacity)},clamp(){return new zn(Pm(this.h),ls(this.s),ls(this.l),ol(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=ol(this.opacity);return`${t===1?"hsl(":"hsla("}${Pm(this.h)}, ${ls(this.s)*100}%, ${ls(this.l)*100}%${t===1?")":`, ${t})`}`}}));function Pm(t){return t=(t||0)%360,t<0?t+360:t}function ls(t){return Math.max(0,Math.min(1,t||0))}function jc(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}const ZM=Math.PI/180,KM=180/Math.PI;var qv=-.14861,Bf=1.78277,Ff=-.29227,Vl=-.90649,Ka=1.97294,km=Ka*Vl,Bm=Ka*Bf,Fm=Bf*Ff-Vl*qv;function QM(t){if(t instanceof ii)return new ii(t.h,t.s,t.l,t.opacity);t instanceof nn||(t=Xv(t));var e=t.r/255,n=t.g/255,r=t.b/255,i=(Fm*r+km*e-Bm*n)/(Fm+km-Bm),a=r-i,o=(Ka*(n-i)-Ff*a)/Vl,s=Math.sqrt(o*o+a*a)/(Ka*i*(1-i)),l=s?Math.atan2(o,a)*KM-120:NaN;return new ii(l<0?l+360:l,s,i,t.opacity)}function tr(t,e,n,r){return arguments.length===1?QM(t):new ii(t,e,n,r??1)}function ii(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}Fl(ii,tr,kf(la,{brighter(t){return t=t==null?zi:Math.pow(zi,t),new ii(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?ui:Math.pow(ui,t),new ii(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=isNaN(this.h)?0:(this.h+120)*ZM,e=+this.l,n=isNaN(this.s)?0:this.s*e*(1-e),r=Math.cos(t),i=Math.sin(t);return new nn(255*(e+n*(qv*r+Bf*i)),255*(e+n*(Ff*r+Vl*i)),255*(e+n*(Ka*r)),this.opacity)}}));function eN(t,e,n,r,i){var a=t*t,o=a*t;return((1-3*t+3*a-o)*e+(4-6*a+3*o)*n+(1+3*t+3*a-3*o)*r+o*i)/6}function tN(t){var e=t.length-1;return function(n){var r=n<=0?n=0:n>=1?(n=1,e-1):Math.floor(n*e),i=t[r],a=t[r+1],o=r>0?t[r-1]:2*i-a,s=r<e-1?t[r+2]:2*a-i;return eN((n-r/e)*e,o,i,a,s)}}const Wl=t=>()=>t;function jv(t,e){return function(n){return t+n*e}}function nN(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}function rN(t,e){var n=e-t;return n?jv(t,n>180||n<-180?n-360*Math.round(n/360):n):Wl(isNaN(t)?e:t)}function iN(t){return(t=+t)==1?Mi:function(e,n){return n-e?nN(e,n,t):Wl(isNaN(e)?n:e)}}function Mi(t,e){var n=e-t;return n?jv(t,n):Wl(isNaN(t)?e:t)}const sl=function t(e){var n=iN(e);function r(i,a){var o=n((i=fi(i)).r,(a=fi(a)).r),s=n(i.g,a.g),l=n(i.b,a.b),c=Mi(i.opacity,a.opacity);return function(f){return i.r=o(f),i.g=s(f),i.b=l(f),i.opacity=c(f),i+""}}return r.gamma=t,r}(1);function aN(t){return function(e){var n=e.length,r=new Array(n),i=new Array(n),a=new Array(n),o,s;for(o=0;o<n;++o)s=fi(e[o]),r[o]=s.r||0,i[o]=s.g||0,a[o]=s.b||0;return r=t(r),i=t(i),a=t(a),s.opacity=1,function(l){return s.r=r(l),s.g=i(l),s.b=a(l),s+""}}}var oN=aN(tN);function sN(t,e){e||(e=[]);var n=t?Math.min(e.length,t.length):0,r=e.slice(),i;return function(a){for(i=0;i<n;++i)r[i]=t[i]*(1-a)+e[i]*a;return r}}function lN(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function cN(t,e){var n=e?e.length:0,r=t?Math.min(n,t.length):0,i=new Array(r),a=new Array(n),o;for(o=0;o<r;++o)i[o]=pi(t[o],e[o]);for(;o<n;++o)a[o]=e[o];return function(s){for(o=0;o<r;++o)a[o]=i[o](s);return a}}function uN(t,e){var n=new Date;return t=+t,e=+e,function(r){return n.setTime(t*(1-r)+e*r),n}}function $n(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function fN(t,e){var n={},r={},i;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(i in e)i in t?n[i]=pi(t[i],e[i]):r[i]=e[i];return function(a){for(i in n)r[i]=n[i](a);return r}}var Uu=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Jc=new RegExp(Uu.source,"g");function hN(t){return function(){return t}}function dN(t){return function(e){return t(e)+""}}function Jv(t,e){var n=Uu.lastIndex=Jc.lastIndex=0,r,i,a,o=-1,s=[],l=[];for(t=t+"",e=e+"";(r=Uu.exec(t))&&(i=Jc.exec(e));)(a=i.index)>n&&(a=e.slice(n,a),s[o]?s[o]+=a:s[++o]=a),(r=r[0])===(i=i[0])?s[o]?s[o]+=i:s[++o]=i:(s[++o]=null,l.push({i:o,x:$n(r,i)})),n=Jc.lastIndex;return n<e.length&&(a=e.slice(n),s[o]?s[o]+=a:s[++o]=a),s.length<2?l[0]?dN(l[0].x):hN(e):(e=l.length,function(c){for(var f=0,d;f<e;++f)s[(d=l[f]).i]=d.x(c);return s.join("")})}function pi(t,e){var n=typeof e,r;return e==null||n==="boolean"?Wl(e):(n==="number"?$n:n==="string"?(r=Fr(e))?(e=r,sl):Jv:e instanceof Fr?sl:e instanceof Date?uN:lN(e)?sN:Array.isArray(e)?cN:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?fN:$n)(t,e)}function Vf(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}}var Vm=180/Math.PI,Yu={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Zv(t,e,n,r,i,a){var o,s,l;return(o=Math.sqrt(t*t+e*e))&&(t/=o,e/=o),(l=t*n+e*r)&&(n-=t*l,r-=e*l),(s=Math.sqrt(n*n+r*r))&&(n/=s,r/=s,l/=s),t*r<e*n&&(t=-t,e=-e,l=-l,o=-o),{translateX:i,translateY:a,rotate:Math.atan2(e,t)*Vm,skewX:Math.atan(l)*Vm,scaleX:o,scaleY:s}}var cs;function gN(t){const e=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(t+"");return e.isIdentity?Yu:Zv(e.a,e.b,e.c,e.d,e.e,e.f)}function mN(t){return t==null||(cs||(cs=document.createElementNS("http://www.w3.org/2000/svg","g")),cs.setAttribute("transform",t),!(t=cs.transform.baseVal.consolidate()))?Yu:(t=t.matrix,Zv(t.a,t.b,t.c,t.d,t.e,t.f))}function Kv(t,e,n,r){function i(c){return c.length?c.pop()+" ":""}function a(c,f,d,p,x,R){if(c!==d||f!==p){var O=x.push("translate(",null,e,null,n);R.push({i:O-4,x:$n(c,d)},{i:O-2,x:$n(f,p)})}else(d||p)&&x.push("translate("+d+e+p+n)}function o(c,f,d,p){c!==f?(c-f>180?f+=360:f-c>180&&(c+=360),p.push({i:d.push(i(d)+"rotate(",null,r)-2,x:$n(c,f)})):f&&d.push(i(d)+"rotate("+f+r)}function s(c,f,d,p){c!==f?p.push({i:d.push(i(d)+"skewX(",null,r)-2,x:$n(c,f)}):f&&d.push(i(d)+"skewX("+f+r)}function l(c,f,d,p,x,R){if(c!==d||f!==p){var O=x.push(i(x)+"scale(",null,",",null,")");R.push({i:O-4,x:$n(c,d)},{i:O-2,x:$n(f,p)})}else(d!==1||p!==1)&&x.push(i(x)+"scale("+d+","+p+")")}return function(c,f){var d=[],p=[];return c=t(c),f=t(f),a(c.translateX,c.translateY,f.translateX,f.translateY,d,p),o(c.rotate,f.rotate,d,p),s(c.skewX,f.skewX,d,p),l(c.scaleX,c.scaleY,f.scaleX,f.scaleY,d,p),c=f=null,function(x){for(var R=-1,O=p.length,A;++R<O;)d[(A=p[R]).i]=A.x(x);return d.join("")}}}var pN=Kv(gN,"px, ","px)","deg)"),vN=Kv(mN,", ",")",")"),bN=1e-12;function Wm(t){return((t=Math.exp(t))+1/t)/2}function _N(t){return((t=Math.exp(t))-1/t)/2}function yN(t){return((t=Math.exp(2*t))-1)/(t+1)}const wN=function t(e,n,r){function i(a,o){var s=a[0],l=a[1],c=a[2],f=o[0],d=o[1],p=o[2],x=f-s,R=d-l,O=x*x+R*R,A,I;if(O<bN)I=Math.log(p/c)/e,A=function(Y){return[s+Y*x,l+Y*R,c*Math.exp(e*Y*I)]};else{var S=Math.sqrt(O),D=(p*p-c*c+r*O)/(2*c*n*S),N=(p*p-c*c-r*O)/(2*p*n*S),k=Math.log(Math.sqrt(D*D+1)-D),W=Math.log(Math.sqrt(N*N+1)-N);I=(W-k)/e,A=function(Y){var X=Y*I,Z=Wm(k),ie=c/(n*S)*(Z*yN(e*X+k)-_N(k));return[s+ie*x,l+ie*R,c*Z/Wm(e*X+k)]}}return A.duration=I*1e3*e/Math.SQRT2,A}return i.rho=function(a){var o=Math.max(.001,+a),s=o*o,l=s*s;return t(o,s,l)},i}(Math.SQRT2,2,4);function Qv(t){return function e(n){n=+n;function r(i,a){var o=t((i=tr(i)).h,(a=tr(a)).h),s=Mi(i.s,a.s),l=Mi(i.l,a.l),c=Mi(i.opacity,a.opacity);return function(f){return i.h=o(f),i.s=s(f),i.l=l(Math.pow(f,n)),i.opacity=c(f),i+""}}return r.gamma=e,r}(1)}Qv(rN);var Wf=Qv(Mi);function xN(t,e){e===void 0&&(e=t,t=pi);for(var n=0,r=e.length-1,i=e[0],a=new Array(r<0?0:r);n<r;)a[n]=t(i,i=e[++n]);return function(o){var s=Math.max(0,Math.min(r-1,Math.floor(o*=r)));return a[s](o-s)}}var Hi=0,Ma=0,Ta=0,eb=1e3,ll,Na,cl=0,hi=0,$l=0,Qa=typeof performance=="object"&&performance.now?performance:Date,tb=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function $f(){return hi||(tb(TN),hi=Qa.now()+$l)}function TN(){hi=0}function ul(){this._call=this._time=this._next=null}ul.prototype=nb.prototype={constructor:ul,restart:function(t,e,n){if(typeof t!="function")throw new TypeError("callback is not a function");n=(n==null?$f():+n)+(e==null?0:+e),!this._next&&Na!==this&&(Na?Na._next=this:ll=this,Na=this),this._call=t,this._time=n,Xu()},stop:function(){this._call&&(this._call=null,this._time=1/0,Xu())}};function nb(t,e,n){var r=new ul;return r.restart(t,e,n),r}function SN(){$f(),++Hi;for(var t=ll,e;t;)(e=hi-t._time)>=0&&t._call.call(void 0,e),t=t._next;--Hi}function $m(){hi=(cl=Qa.now())+$l,Hi=Ma=0;try{SN()}finally{Hi=0,CN(),hi=0}}function EN(){var t=Qa.now(),e=t-cl;e>eb&&($l-=e,cl=t)}function CN(){for(var t,e=ll,n,r=1/0;e;)e._call?(r>e._time&&(r=e._time),t=e,e=e._next):(n=e._next,e._next=null,e=t?t._next=n:ll=n);Na=t,Xu(r)}function Xu(t){if(!Hi){Ma&&(Ma=clearTimeout(Ma));var e=t-hi;e>24?(t<1/0&&(Ma=setTimeout($m,t-Qa.now()-$l)),Ta&&(Ta=clearInterval(Ta))):(Ta||(cl=Qa.now(),Ta=setInterval(EN,eb)),Hi=1,tb($m))}}function zm(t,e,n){var r=new ul;return e=e==null?0:+e,r.restart(i=>{r.stop(),t(i+e)},e,n),r}var AN=mo("start","end","cancel","interrupt"),RN=[],rb=0,Hm=1,Gu=2,Es=3,Um=4,qu=5,Cs=6;function zl(t,e,n,r,i,a){var o=t.__transition;if(!o)t.__transition={};else if(n in o)return;MN(t,n,{name:e,index:r,group:i,on:AN,tween:RN,time:a.time,delay:a.delay,duration:a.duration,ease:a.ease,timer:null,state:rb})}function zf(t,e){var n=Un(t,e);if(n.state>rb)throw new Error("too late; already scheduled");return n}function lr(t,e){var n=Un(t,e);if(n.state>Es)throw new Error("too late; already running");return n}function Un(t,e){var n=t.__transition;if(!n||!(n=n[e]))throw new Error("transition not found");return n}function MN(t,e,n){var r=t.__transition,i;r[e]=n,n.timer=nb(a,0,n.time);function a(c){n.state=Hm,n.timer.restart(o,n.delay,n.time),n.delay<=c&&o(c-n.delay)}function o(c){var f,d,p,x;if(n.state!==Hm)return l();for(f in r)if(x=r[f],x.name===n.name){if(x.state===Es)return zm(o);x.state===Um?(x.state=Cs,x.timer.stop(),x.on.call("interrupt",t,t.__data__,x.index,x.group),delete r[f]):+f<e&&(x.state=Cs,x.timer.stop(),x.on.call("cancel",t,t.__data__,x.index,x.group),delete r[f])}if(zm(function(){n.state===Es&&(n.state=Um,n.timer.restart(s,n.delay,n.time),s(c))}),n.state=Gu,n.on.call("start",t,t.__data__,n.index,n.group),n.state===Gu){for(n.state=Es,i=new Array(p=n.tween.length),f=0,d=-1;f<p;++f)(x=n.tween[f].value.call(t,t.__data__,n.index,n.group))&&(i[++d]=x);i.length=d+1}}function s(c){for(var f=c<n.duration?n.ease.call(null,c/n.duration):(n.timer.restart(l),n.state=qu,1),d=-1,p=i.length;++d<p;)i[d].call(t,f);n.state===qu&&(n.on.call("end",t,t.__data__,n.index,n.group),l())}function l(){n.state=Cs,n.timer.stop(),delete r[e];for(var c in r)return;delete t.__transition}}function Ni(t,e){var n=t.__transition,r,i,a=!0,o;if(n){e=e==null?null:e+"";for(o in n){if((r=n[o]).name!==e){a=!1;continue}i=r.state>Gu&&r.state<qu,r.state=Cs,r.timer.stop(),r.on.call(i?"interrupt":"cancel",t,t.__data__,r.index,r.group),delete n[o]}a&&delete t.__transition}}function NN(t){return this.each(function(){Ni(this,t)})}function ON(t,e){var n,r;return function(){var i=lr(this,t),a=i.tween;if(a!==n){r=n=a;for(var o=0,s=r.length;o<s;++o)if(r[o].name===e){r=r.slice(),r.splice(o,1);break}}i.tween=r}}function DN(t,e,n){var r,i;if(typeof n!="function")throw new Error;return function(){var a=lr(this,t),o=a.tween;if(o!==r){i=(r=o).slice();for(var s={name:e,value:n},l=0,c=i.length;l<c;++l)if(i[l].name===e){i[l]=s;break}l===c&&i.push(s)}a.tween=i}}function LN(t,e){var n=this._id;if(t+="",arguments.length<2){for(var r=Un(this.node(),n).tween,i=0,a=r.length,o;i<a;++i)if((o=r[i]).name===t)return o.value;return null}return this.each((e==null?ON:DN)(n,t,e))}function Hf(t,e,n){var r=t._id;return t.each(function(){var i=lr(this,r);(i.value||(i.value={}))[e]=n.apply(this,arguments)}),function(i){return Un(i,r).value[e]}}function ib(t,e){var n;return(typeof e=="number"?$n:e instanceof Fr?sl:(n=Fr(e))?(e=n,sl):Jv)(t,e)}function IN(t){return function(){this.removeAttribute(t)}}function PN(t){return function(){this.removeAttributeNS(t.space,t.local)}}function kN(t,e,n){var r,i=n+"",a;return function(){var o=this.getAttribute(t);return o===i?null:o===r?a:a=e(r=o,n)}}function BN(t,e,n){var r,i=n+"",a;return function(){var o=this.getAttributeNS(t.space,t.local);return o===i?null:o===r?a:a=e(r=o,n)}}function FN(t,e,n){var r,i,a;return function(){var o,s=n(this),l;return s==null?void this.removeAttribute(t):(o=this.getAttribute(t),l=s+"",o===l?null:o===r&&l===i?a:(i=l,a=e(r=o,s)))}}function VN(t,e,n){var r,i,a;return function(){var o,s=n(this),l;return s==null?void this.removeAttributeNS(t.space,t.local):(o=this.getAttributeNS(t.space,t.local),l=s+"",o===l?null:o===r&&l===i?a:(i=l,a=e(r=o,s)))}}function WN(t,e){var n=po(t),r=n==="transform"?vN:ib;return this.attrTween(t,typeof e=="function"?(n.local?VN:FN)(n,r,Hf(this,"attr."+t,e)):e==null?(n.local?PN:IN)(n):(n.local?BN:kN)(n,r,e))}function $N(t,e){return function(n){this.setAttribute(t,e.call(this,n))}}function zN(t,e){return function(n){this.setAttributeNS(t.space,t.local,e.call(this,n))}}function HN(t,e){var n,r;function i(){var a=e.apply(this,arguments);return a!==r&&(n=(r=a)&&zN(t,a)),n}return i._value=e,i}function UN(t,e){var n,r;function i(){var a=e.apply(this,arguments);return a!==r&&(n=(r=a)&&$N(t,a)),n}return i._value=e,i}function YN(t,e){var n="attr."+t;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(e==null)return this.tween(n,null);if(typeof e!="function")throw new Error;var r=po(t);return this.tween(n,(r.local?HN:UN)(r,e))}function XN(t,e){return function(){zf(this,t).delay=+e.apply(this,arguments)}}function GN(t,e){return e=+e,function(){zf(this,t).delay=e}}function qN(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?XN:GN)(e,t)):Un(this.node(),e).delay}function jN(t,e){return function(){lr(this,t).duration=+e.apply(this,arguments)}}function JN(t,e){return e=+e,function(){lr(this,t).duration=e}}function ZN(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?jN:JN)(e,t)):Un(this.node(),e).duration}function KN(t,e){if(typeof e!="function")throw new Error;return function(){lr(this,t).ease=e}}function QN(t){var e=this._id;return arguments.length?this.each(KN(e,t)):Un(this.node(),e).ease}function eO(t,e){return function(){var n=e.apply(this,arguments);if(typeof n!="function")throw new Error;lr(this,t).ease=n}}function tO(t){if(typeof t!="function")throw new Error;return this.each(eO(this._id,t))}function nO(t){typeof t!="function"&&(t=Df(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var a=e[i],o=a.length,s=r[i]=[],l,c=0;c<o;++c)(l=a[c])&&t.call(l,l.__data__,c,a)&&s.push(l);return new Tr(r,this._parents,this._name,this._id)}function rO(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,n=t._groups,r=e.length,i=n.length,a=Math.min(r,i),o=new Array(r),s=0;s<a;++s)for(var l=e[s],c=n[s],f=l.length,d=o[s]=new Array(f),p,x=0;x<f;++x)(p=l[x]||c[x])&&(d[x]=p);for(;s<r;++s)o[s]=e[s];return new Tr(o,this._parents,this._name,this._id)}function iO(t){return(t+"").trim().split(/^|\s+/).every(function(e){var n=e.indexOf(".");return n>=0&&(e=e.slice(0,n)),!e||e==="start"})}function aO(t,e,n){var r,i,a=iO(e)?zf:lr;return function(){var o=a(this,t),s=o.on;s!==r&&(i=(r=s).copy()).on(e,n),o.on=i}}function oO(t,e){var n=this._id;return arguments.length<2?Un(this.node(),n).on.on(t):this.each(aO(n,t,e))}function sO(t){return function(){var e=this.parentNode;for(var n in this.__transition)if(+n!==t)return;e&&e.removeChild(this)}}function lO(){return this.on("end.remove",sO(this._id))}function cO(t){var e=this._name,n=this._id;typeof t!="function"&&(t=Bl(t));for(var r=this._groups,i=r.length,a=new Array(i),o=0;o<i;++o)for(var s=r[o],l=s.length,c=a[o]=new Array(l),f,d,p=0;p<l;++p)(f=s[p])&&(d=t.call(f,f.__data__,p,s))&&("__data__"in f&&(d.__data__=f.__data__),c[p]=d,zl(c[p],e,n,p,c,Un(f,n)));return new Tr(a,this._parents,e,n)}function uO(t){var e=this._name,n=this._id;typeof t!="function"&&(t=Of(t));for(var r=this._groups,i=r.length,a=[],o=[],s=0;s<i;++s)for(var l=r[s],c=l.length,f,d=0;d<c;++d)if(f=l[d]){for(var p=t.call(f,f.__data__,d,l),x,R=Un(f,n),O=0,A=p.length;O<A;++O)(x=p[O])&&zl(x,e,n,O,p,R);a.push(p),o.push(f)}return new Tr(a,o,e,n)}var fO=sa.prototype.constructor;function hO(){return new fO(this._groups,this._parents)}function dO(t,e){var n,r,i;return function(){var a=ci(this,t),o=(this.style.removeProperty(t),ci(this,t));return a===o?null:a===n&&o===r?i:i=e(n=a,r=o)}}function ab(t){return function(){this.style.removeProperty(t)}}function gO(t,e,n){var r,i=n+"",a;return function(){var o=ci(this,t);return o===i?null:o===r?a:a=e(r=o,n)}}function mO(t,e,n){var r,i,a;return function(){var o=ci(this,t),s=n(this),l=s+"";return s==null&&(l=s=(this.style.removeProperty(t),ci(this,t))),o===l?null:o===r&&l===i?a:(i=l,a=e(r=o,s))}}function pO(t,e){var n,r,i,a="style."+e,o="end."+a,s;return function(){var l=lr(this,t),c=l.on,f=l.value[a]==null?s||(s=ab(e)):void 0;(c!==n||i!==f)&&(r=(n=c).copy()).on(o,i=f),l.on=r}}function vO(t,e,n){var r=(t+="")=="transform"?pN:ib;return e==null?this.styleTween(t,dO(t,r)).on("end.style."+t,ab(t)):typeof e=="function"?this.styleTween(t,mO(t,r,Hf(this,"style."+t,e))).each(pO(this._id,t)):this.styleTween(t,gO(t,r,e),n).on("end.style."+t,null)}function bO(t,e,n){return function(r){this.style.setProperty(t,e.call(this,r),n)}}function _O(t,e,n){var r,i;function a(){var o=e.apply(this,arguments);return o!==i&&(r=(i=o)&&bO(t,o,n)),r}return a._value=e,a}function yO(t,e,n){var r="style."+(t+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(e==null)return this.tween(r,null);if(typeof e!="function")throw new Error;return this.tween(r,_O(t,e,n??""))}function wO(t){return function(){this.textContent=t}}function xO(t){return function(){var e=t(this);this.textContent=e??""}}function TO(t){return this.tween("text",typeof t=="function"?xO(Hf(this,"text",t)):wO(t==null?"":t+""))}function SO(t){return function(e){this.textContent=t.call(this,e)}}function EO(t){var e,n;function r(){var i=t.apply(this,arguments);return i!==n&&(e=(n=i)&&SO(i)),e}return r._value=t,r}function CO(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(t==null)return this.tween(e,null);if(typeof t!="function")throw new Error;return this.tween(e,EO(t))}function AO(){for(var t=this._name,e=this._id,n=ob(),r=this._groups,i=r.length,a=0;a<i;++a)for(var o=r[a],s=o.length,l,c=0;c<s;++c)if(l=o[c]){var f=Un(l,e);zl(l,t,n,c,o,{time:f.time+f.delay+f.duration,delay:0,duration:f.duration,ease:f.ease})}return new Tr(r,this._parents,t,n)}function RO(){var t,e,n=this,r=n._id,i=n.size();return new Promise(function(a,o){var s={value:o},l={value:function(){--i===0&&a()}};n.each(function(){var c=lr(this,r),f=c.on;f!==t&&(e=(t=f).copy(),e._.cancel.push(s),e._.interrupt.push(s),e._.end.push(l)),c.on=e}),i===0&&a()})}var MO=0;function Tr(t,e,n,r){this._groups=t,this._parents=e,this._name=n,this._id=r}function ob(){return++MO}var fr=sa.prototype;Tr.prototype={constructor:Tr,select:cO,selectAll:uO,selectChild:fr.selectChild,selectChildren:fr.selectChildren,filter:nO,merge:rO,selection:hO,transition:AO,call:fr.call,nodes:fr.nodes,node:fr.node,size:fr.size,empty:fr.empty,each:fr.each,on:oO,attr:WN,attrTween:YN,style:vO,styleTween:yO,text:TO,textTween:CO,remove:lO,tween:LN,delay:qN,duration:ZN,ease:QN,easeVarying:tO,end:RO,[Symbol.iterator]:fr[Symbol.iterator]};function NO(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}var OO={time:null,delay:0,duration:250,ease:NO};function DO(t,e){for(var n;!(n=t.__transition)||!(n=n[e]);)if(!(t=t.parentNode))throw new Error(`transition ${e} not found`);return n}function LO(t){var e,n;t instanceof Tr?(e=t._id,t=t._name):(e=ob(),(n=OO).time=$f(),t=t==null?null:t+"");for(var r=this._groups,i=r.length,a=0;a<i;++a)for(var o=r[a],s=o.length,l,c=0;c<s;++c)(l=o[c])&&zl(l,t,e,c,o,n||DO(l,e));return new Tr(r,this._parents,t,e)}sa.prototype.interrupt=NN;sa.prototype.transition=LO;const Zc=t=>()=>t;function IO(t,{sourceEvent:e,target:n,selection:r,mode:i,dispatch:a}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},selection:{value:r,enumerable:!0,configurable:!0},mode:{value:i,enumerable:!0,configurable:!0},_:{value:a}})}function PO(t){t.stopImmediatePropagation()}function Kc(t){t.preventDefault(),t.stopImmediatePropagation()}var Ym={name:"drag"},Qc={name:"space"},Ti={name:"handle"},Si={name:"center"};const{abs:Xm,max:Zt,min:Kt}=Math;function Gm(t){return[+t[0],+t[1]]}function ju(t){return[Gm(t[0]),Gm(t[1])]}var As={name:"x",handles:["w","e"].map(eo),input:function(t,e){return t==null?null:[[+t[0],e[0][1]],[+t[1],e[1][1]]]},output:function(t){return t&&[t[0][0],t[1][0]]}},Rs={name:"y",handles:["n","s"].map(eo),input:function(t,e){return t==null?null:[[e[0][0],+t[0]],[e[1][0],+t[1]]]},output:function(t){return t&&[t[0][1],t[1][1]]}},kO={name:"xy",handles:["n","w","e","s","nw","ne","sw","se"].map(eo),input:function(t){return t==null?null:ju(t)},output:function(t){return t}},hr={overlay:"crosshair",selection:"move",n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},qm={e:"w",w:"e",nw:"ne",ne:"nw",se:"sw",sw:"se"},jm={n:"s",s:"n",nw:"sw",ne:"se",se:"ne",sw:"nw"},BO={overlay:1,selection:1,n:null,e:1,s:null,w:-1,nw:-1,ne:1,se:1,sw:-1},FO={overlay:1,selection:1,n:-1,e:null,s:1,w:null,nw:-1,ne:-1,se:1,sw:1};function eo(t){return{type:t}}function VO(t){return!t.ctrlKey&&!t.button}function WO(){var t=this.ownerSVGElement||this;return t.hasAttribute("viewBox")?(t=t.viewBox.baseVal,[[t.x,t.y],[t.x+t.width,t.y+t.height]]):[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]}function $O(){return navigator.maxTouchPoints||"ontouchstart"in this}function eu(t){for(;!t.__brush;)if(!(t=t.parentNode))return;return t.__brush}function zO(t){return t[0][0]===t[1][0]||t[0][1]===t[1][1]}function HO(t){var e=t.__brush;return e?e.dim.output(e.selection):null}function UO(){return Uf(As)}function YO(){return Uf(Rs)}function XO(){return Uf(kO)}function Uf(t){var e=WO,n=VO,r=$O,i=!0,a=mo("start","brush","end"),o=6,s;function l(A){var I=A.property("__brush",O).selectAll(".overlay").data([eo("overlay")]);I.enter().append("rect").attr("class","overlay").attr("pointer-events","all").attr("cursor",hr.overlay).merge(I).each(function(){var D=eu(this).extent;Nt(this).attr("x",D[0][0]).attr("y",D[0][1]).attr("width",D[1][0]-D[0][0]).attr("height",D[1][1]-D[0][1])}),A.selectAll(".selection").data([eo("selection")]).enter().append("rect").attr("class","selection").attr("cursor",hr.selection).attr("fill","#777").attr("fill-opacity",.3).attr("stroke","#fff").attr("shape-rendering","crispEdges");var S=A.selectAll(".handle").data(t.handles,function(D){return D.type});S.exit().remove(),S.enter().append("rect").attr("class",function(D){return"handle handle--"+D.type}).attr("cursor",function(D){return hr[D.type]}),A.each(c).attr("fill","none").attr("pointer-events","all").on("mousedown.brush",p).filter(r).on("touchstart.brush",p).on("touchmove.brush",x).on("touchend.brush touchcancel.brush",R).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}l.move=function(A,I,S){A.tween?A.on("start.brush",function(D){f(this,arguments).beforestart().start(D)}).on("interrupt.brush end.brush",function(D){f(this,arguments).end(D)}).tween("brush",function(){var D=this,N=D.__brush,k=f(D,arguments),W=N.selection,Y=t.input(typeof I=="function"?I.apply(this,arguments):I,N.extent),X=pi(W,Y);function Z(ie){N.selection=ie===1&&Y===null?null:X(ie),c.call(D),k.brush()}return W!==null&&Y!==null?Z:Z(1)}):A.each(function(){var D=this,N=arguments,k=D.__brush,W=t.input(typeof I=="function"?I.apply(D,N):I,k.extent),Y=f(D,N).beforestart();Ni(D),k.selection=W===null?null:W,c.call(D),Y.start(S).brush(S).end(S)})},l.clear=function(A,I){l.move(A,null,I)};function c(){var A=Nt(this),I=eu(this).selection;I?(A.selectAll(".selection").style("display",null).attr("x",I[0][0]).attr("y",I[0][1]).attr("width",I[1][0]-I[0][0]).attr("height",I[1][1]-I[0][1]),A.selectAll(".handle").style("display",null).attr("x",function(S){return S.type[S.type.length-1]==="e"?I[1][0]-o/2:I[0][0]-o/2}).attr("y",function(S){return S.type[0]==="s"?I[1][1]-o/2:I[0][1]-o/2}).attr("width",function(S){return S.type==="n"||S.type==="s"?I[1][0]-I[0][0]+o:o}).attr("height",function(S){return S.type==="e"||S.type==="w"?I[1][1]-I[0][1]+o:o})):A.selectAll(".selection,.handle").style("display","none").attr("x",null).attr("y",null).attr("width",null).attr("height",null)}function f(A,I,S){var D=A.__brush.emitter;return D&&(!S||!D.clean)?D:new d(A,I,S)}function d(A,I,S){this.that=A,this.args=I,this.state=A.__brush,this.active=0,this.clean=S}d.prototype={beforestart:function(){return++this.active===1&&(this.state.emitter=this,this.starting=!0),this},start:function(A,I){return this.starting?(this.starting=!1,this.emit("start",A,I)):this.emit("brush",A),this},brush:function(A,I){return this.emit("brush",A,I),this},end:function(A,I){return--this.active===0&&(delete this.state.emitter,this.emit("end",A,I)),this},emit:function(A,I,S){var D=Nt(this.that).datum();a.call(A,this.that,new IO(A,{sourceEvent:I,target:l,selection:t.output(this.state.selection),mode:S,dispatch:a}),D)}};function p(A){if(s&&!A.touches||!n.apply(this,arguments))return;var I=this,S=A.target.__data__.type,D=(i&&A.metaKey?S="overlay":S)==="selection"?Ym:i&&A.altKey?Si:Ti,N=t===Rs?null:BO[S],k=t===As?null:FO[S],W=eu(I),Y=W.extent,X=W.selection,Z=Y[0][0],ie,ne,J=Y[0][1],K,$,te=Y[1][0],G,oe,ge=Y[1][1],he,pe,re=0,ue=0,de,ve=N&&k&&i&&A.shiftKey,Me,Oe,Ce=Array.from(A.touches||[A],_e=>{const ft=_e.identifier;return _e=Wn(_e,I),_e.point0=_e.slice(),_e.identifier=ft,_e});Ni(I);var Ie=f(I,arguments,!0).beforestart();if(S==="overlay"){X&&(de=!0);const _e=[Ce[0],Ce[1]||Ce[0]];W.selection=X=[[ie=t===Rs?Z:Kt(_e[0][0],_e[1][0]),K=t===As?J:Kt(_e[0][1],_e[1][1])],[G=t===Rs?te:Zt(_e[0][0],_e[1][0]),he=t===As?ge:Zt(_e[0][1],_e[1][1])]],Ce.length>1&&et(A)}else ie=X[0][0],K=X[0][1],G=X[1][0],he=X[1][1];ne=ie,$=K,oe=G,pe=he;var me=Nt(I).attr("pointer-events","none"),Ee=me.selectAll(".overlay").attr("cursor",hr[S]);if(A.touches)Ie.moved=ce,Ie.ended=fe;else{var De=Nt(A.view).on("mousemove.brush",ce,!0).on("mouseup.brush",fe,!0);i&&De.on("keydown.brush",tt,!0).on("keyup.brush",it,!0),Uv(A.view)}c.call(I),Ie.start(A,D.name);function ce(_e){for(const ft of _e.changedTouches||[_e])for(const Tt of Ce)Tt.identifier===ft.identifier&&(Tt.cur=Wn(ft,I));if(ve&&!Me&&!Oe&&Ce.length===1){const ft=Ce[0];Xm(ft.cur[0]-ft[0])>Xm(ft.cur[1]-ft[1])?Oe=!0:Me=!0}for(const ft of Ce)ft.cur&&(ft[0]=ft.cur[0],ft[1]=ft.cur[1]);de=!0,Kc(_e),et(_e)}function et(_e){const ft=Ce[0],Tt=ft.point0;var Yn;switch(re=ft[0]-Tt[0],ue=ft[1]-Tt[1],D){case Qc:case Ym:{N&&(re=Zt(Z-ie,Kt(te-G,re)),ne=ie+re,oe=G+re),k&&(ue=Zt(J-K,Kt(ge-he,ue)),$=K+ue,pe=he+ue);break}case Ti:{Ce[1]?(N&&(ne=Zt(Z,Kt(te,Ce[0][0])),oe=Zt(Z,Kt(te,Ce[1][0])),N=1),k&&($=Zt(J,Kt(ge,Ce[0][1])),pe=Zt(J,Kt(ge,Ce[1][1])),k=1)):(N<0?(re=Zt(Z-ie,Kt(te-ie,re)),ne=ie+re,oe=G):N>0&&(re=Zt(Z-G,Kt(te-G,re)),ne=ie,oe=G+re),k<0?(ue=Zt(J-K,Kt(ge-K,ue)),$=K+ue,pe=he):k>0&&(ue=Zt(J-he,Kt(ge-he,ue)),$=K,pe=he+ue));break}case Si:{N&&(ne=Zt(Z,Kt(te,ie-re*N)),oe=Zt(Z,Kt(te,G+re*N))),k&&($=Zt(J,Kt(ge,K-ue*k)),pe=Zt(J,Kt(ge,he+ue*k)));break}}oe<ne&&(N*=-1,Yn=ie,ie=G,G=Yn,Yn=ne,ne=oe,oe=Yn,S in qm&&Ee.attr("cursor",hr[S=qm[S]])),pe<$&&(k*=-1,Yn=K,K=he,he=Yn,Yn=$,$=pe,pe=Yn,S in jm&&Ee.attr("cursor",hr[S=jm[S]])),W.selection&&(X=W.selection),Me&&(ne=X[0][0],oe=X[1][0]),Oe&&($=X[0][1],pe=X[1][1]),(X[0][0]!==ne||X[0][1]!==$||X[1][0]!==oe||X[1][1]!==pe)&&(W.selection=[[ne,$],[oe,pe]],c.call(I),Ie.brush(_e,D.name))}function fe(_e){if(PO(_e),_e.touches){if(_e.touches.length)return;s&&clearTimeout(s),s=setTimeout(function(){s=null},500)}else Yv(_e.view,de),De.on("keydown.brush keyup.brush mousemove.brush mouseup.brush",null);me.attr("pointer-events","all"),Ee.attr("cursor",hr.overlay),W.selection&&(X=W.selection),zO(X)&&(W.selection=null,c.call(I)),Ie.end(_e,D.name)}function tt(_e){switch(_e.keyCode){case 16:{ve=N&&k;break}case 18:{D===Ti&&(N&&(G=oe-re*N,ie=ne+re*N),k&&(he=pe-ue*k,K=$+ue*k),D=Si,et(_e));break}case 32:{(D===Ti||D===Si)&&(N<0?G=oe-re:N>0&&(ie=ne-re),k<0?he=pe-ue:k>0&&(K=$-ue),D=Qc,Ee.attr("cursor",hr.selection),et(_e));break}default:return}Kc(_e)}function it(_e){switch(_e.keyCode){case 16:{ve&&(Me=Oe=ve=!1,et(_e));break}case 18:{D===Si&&(N<0?G=oe:N>0&&(ie=ne),k<0?he=pe:k>0&&(K=$),D=Ti,et(_e));break}case 32:{D===Qc&&(_e.altKey?(N&&(G=oe-re*N,ie=ne+re*N),k&&(he=pe-ue*k,K=$+ue*k),D=Si):(N<0?G=oe:N>0&&(ie=ne),k<0?he=pe:k>0&&(K=$),D=Ti),Ee.attr("cursor",hr[S]),et(_e));break}default:return}Kc(_e)}}function x(A){f(this,arguments).moved(A)}function R(A){f(this,arguments).ended(A)}function O(){var A=this.__brush||{selection:null};return A.extent=ju(e.apply(this,arguments)),A.dim=t,A}return l.extent=function(A){return arguments.length?(e=typeof A=="function"?A:Zc(ju(A)),l):e},l.filter=function(A){return arguments.length?(n=typeof A=="function"?A:Zc(!!A),l):n},l.touchable=function(A){return arguments.length?(r=typeof A=="function"?A:Zc(!!A),l):r},l.handleSize=function(A){return arguments.length?(o=+A,l):o},l.keyModifiers=function(A){return arguments.length?(i=!!A,l):i},l.on=function(){var A=a.on.apply(a,arguments);return A===a?l:A},l}const GO=Object.freeze(Object.defineProperty({__proto__:null,brush:XO,brushSelection:HO,brushX:UO,brushY:YO},Symbol.toStringTag,{value:"Module"})),Ju=Math.PI,Zu=2*Ju,Jr=1e-6,qO=Zu-Jr;function sb(t){this._+=t[0];for(let e=1,n=t.length;e<n;++e)this._+=arguments[e]+t[e]}function jO(t){let e=Math.floor(t);if(!(e>=0))throw new Error(`invalid digits: ${t}`);if(e>15)return sb;const n=10**e;return function(r){this._+=r[0];for(let i=1,a=r.length;i<a;++i)this._+=Math.round(arguments[i]*n)/n+r[i]}}let Hl=class{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=e==null?sb:jO(e)}moveTo(e,n){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,n){this._append`L${this._x1=+e},${this._y1=+n}`}quadraticCurveTo(e,n,r,i){this._append`Q${+e},${+n},${this._x1=+r},${this._y1=+i}`}bezierCurveTo(e,n,r,i,a,o){this._append`C${+e},${+n},${+r},${+i},${this._x1=+a},${this._y1=+o}`}arcTo(e,n,r,i,a){if(e=+e,n=+n,r=+r,i=+i,a=+a,a<0)throw new Error(`negative radius: ${a}`);let o=this._x1,s=this._y1,l=r-e,c=i-n,f=o-e,d=s-n,p=f*f+d*d;if(this._x1===null)this._append`M${this._x1=e},${this._y1=n}`;else if(p>Jr)if(!(Math.abs(d*l-c*f)>Jr)||!a)this._append`L${this._x1=e},${this._y1=n}`;else{let x=r-o,R=i-s,O=l*l+c*c,A=x*x+R*R,I=Math.sqrt(O),S=Math.sqrt(p),D=a*Math.tan((Ju-Math.acos((O+p-A)/(2*I*S)))/2),N=D/S,k=D/I;Math.abs(N-1)>Jr&&this._append`L${e+N*f},${n+N*d}`,this._append`A${a},${a},0,0,${+(d*x>f*R)},${this._x1=e+k*l},${this._y1=n+k*c}`}}arc(e,n,r,i,a,o){if(e=+e,n=+n,r=+r,o=!!o,r<0)throw new Error(`negative radius: ${r}`);let s=r*Math.cos(i),l=r*Math.sin(i),c=e+s,f=n+l,d=1^o,p=o?i-a:a-i;this._x1===null?this._append`M${c},${f}`:(Math.abs(this._x1-c)>Jr||Math.abs(this._y1-f)>Jr)&&this._append`L${c},${f}`,r&&(p<0&&(p=p%Zu+Zu),p>qO?this._append`A${r},${r},0,1,${d},${e-s},${n-l}A${r},${r},0,1,${d},${this._x1=c},${this._y1=f}`:p>Jr&&this._append`A${r},${r},0,${+(p>=Ju)},${d},${this._x1=e+r*Math.cos(a)},${this._y1=n+r*Math.sin(a)}`)}rect(e,n,r,i){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}h${r=+r}v${+i}h${-r}Z`}toString(){return this._}};function lb(){return new Hl}lb.prototype=Hl.prototype;function JO(t=3){return new Hl(+t)}const ZO=Object.freeze(Object.defineProperty({__proto__:null,Path:Hl,path:lb,pathRound:JO},Symbol.toStringTag,{value:"Module"}));var Jm={},tu={},nu=34,Sa=10,ru=13;function cb(t){return new Function("d","return {"+t.map(function(e,n){return JSON.stringify(e)+": d["+n+'] || ""'}).join(",")+"}")}function KO(t,e){var n=cb(t);return function(r,i){return e(n(r),i,t)}}function Zm(t){var e=Object.create(null),n=[];return t.forEach(function(r){for(var i in r)i in e||n.push(e[i]=i)}),n}function gn(t,e){var n=t+"",r=n.length;return r<e?new Array(e-r+1).join(0)+n:n}function QO(t){return t<0?"-"+gn(-t,6):t>9999?"+"+gn(t,6):gn(t,4)}function eD(t){var e=t.getUTCHours(),n=t.getUTCMinutes(),r=t.getUTCSeconds(),i=t.getUTCMilliseconds();return isNaN(t)?"Invalid Date":QO(t.getUTCFullYear())+"-"+gn(t.getUTCMonth()+1,2)+"-"+gn(t.getUTCDate(),2)+(i?"T"+gn(e,2)+":"+gn(n,2)+":"+gn(r,2)+"."+gn(i,3)+"Z":r?"T"+gn(e,2)+":"+gn(n,2)+":"+gn(r,2)+"Z":n||e?"T"+gn(e,2)+":"+gn(n,2)+"Z":"")}function Yf(t){var e=new RegExp('["'+t+`
\r]`),n=t.charCodeAt(0);function r(d,p){var x,R,O=i(d,function(A,I){if(x)return x(A,I-1);R=A,x=p?KO(A,p):cb(A)});return O.columns=R||[],O}function i(d,p){var x=[],R=d.length,O=0,A=0,I,S=R<=0,D=!1;d.charCodeAt(R-1)===Sa&&--R,d.charCodeAt(R-1)===ru&&--R;function N(){if(S)return tu;if(D)return D=!1,Jm;var W,Y=O,X;if(d.charCodeAt(Y)===nu){for(;O++<R&&d.charCodeAt(O)!==nu||d.charCodeAt(++O)===nu;);return(W=O)>=R?S=!0:(X=d.charCodeAt(O++))===Sa?D=!0:X===ru&&(D=!0,d.charCodeAt(O)===Sa&&++O),d.slice(Y+1,W-1).replace(/""/g,'"')}for(;O<R;){if((X=d.charCodeAt(W=O++))===Sa)D=!0;else if(X===ru)D=!0,d.charCodeAt(O)===Sa&&++O;else if(X!==n)continue;return d.slice(Y,W)}return S=!0,d.slice(Y,R)}for(;(I=N())!==tu;){for(var k=[];I!==Jm&&I!==tu;)k.push(I),I=N();p&&(k=p(k,A++))==null||x.push(k)}return x}function a(d,p){return d.map(function(x){return p.map(function(R){return f(x[R])}).join(t)})}function o(d,p){return p==null&&(p=Zm(d)),[p.map(f).join(t)].concat(a(d,p)).join(`
`)}function s(d,p){return p==null&&(p=Zm(d)),a(d,p).join(`
`)}function l(d){return d.map(c).join(`
`)}function c(d){return d.map(f).join(t)}function f(d){return d==null?"":d instanceof Date?eD(d):e.test(d+="")?'"'+d.replace(/"/g,'""')+'"':d}return{parse:r,parseRows:i,format:o,formatBody:s,formatRows:l,formatRow:c,formatValue:f}}var tD=Yf(","),nD=tD.parse,rD=Yf("	"),iD=rD.parse;function aD(t){if(!t.ok)throw new Error(t.status+" "+t.statusText);return t.blob()}function oD(t,e){return fetch(t,e).then(aD)}function sD(t){if(!t.ok)throw new Error(t.status+" "+t.statusText);return t.arrayBuffer()}function lD(t,e){return fetch(t,e).then(sD)}function cD(t){if(!t.ok)throw new Error(t.status+" "+t.statusText);return t.text()}function Ul(t,e){return fetch(t,e).then(cD)}function ub(t){return function(e,n,r){return arguments.length===2&&typeof n=="function"&&(r=n,n=void 0),Ul(e,n).then(function(i){return t(i,r)})}}function uD(t,e,n,r){arguments.length===3&&typeof n=="function"&&(r=n,n=void 0);var i=Yf(t);return Ul(e,n).then(function(a){return i.parse(a,r)})}var fD=ub(nD),hD=ub(iD);function dD(t,e){return new Promise(function(n,r){var i=new Image;for(var a in e)i[a]=e[a];i.onerror=r,i.onload=function(){n(i)},i.src=t})}function gD(t){if(!t.ok)throw new Error(t.status+" "+t.statusText);if(!(t.status===204||t.status===205))return t.json()}function mD(t,e){return fetch(t,e).then(gD)}function Xf(t){return(e,n)=>Ul(e,n).then(r=>new DOMParser().parseFromString(r,t))}const pD=Xf("application/xml");var vD=Xf("text/html"),bD=Xf("image/svg+xml");const _D=Object.freeze(Object.defineProperty({__proto__:null,blob:oD,buffer:lD,csv:fD,dsv:uD,html:vD,image:dD,json:mD,svg:bD,text:Ul,tsv:hD,xml:pD},Symbol.toStringTag,{value:"Module"}));function yD(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function fl(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,r=t.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+t.slice(n+1)]}function Ui(t){return t=fl(Math.abs(t)),t?t[1]:NaN}function wD(t,e){return function(n,r){for(var i=n.length,a=[],o=0,s=t[0],l=0;i>0&&s>0&&(l+s+1>r&&(s=Math.max(1,r-l)),a.push(n.substring(i-=s,i+s)),!((l+=s+1)>r));)s=t[o=(o+1)%t.length];return a.reverse().join(e)}}function xD(t){return function(e){return e.replace(/[0-9]/g,function(n){return t[+n]})}}var TD=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function to(t){if(!(e=TD.exec(t)))throw new Error("invalid format: "+t);var e;return new Gf({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}to.prototype=Gf.prototype;function Gf(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}Gf.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function SD(t){e:for(var e=t.length,n=1,r=-1,i;n<e;++n)switch(t[n]){case".":r=i=n;break;case"0":r===0&&(r=n),i=n;break;default:if(!+t[n])break e;r>0&&(r=0);break}return r>0?t.slice(0,r)+t.slice(i+1):t}var fb;function ED(t,e){var n=fl(t,e);if(!n)return t+"";var r=n[0],i=n[1],a=i-(fb=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,o=r.length;return a===o?r:a>o?r+new Array(a-o+1).join("0"):a>0?r.slice(0,a)+"."+r.slice(a):"0."+new Array(1-a).join("0")+fl(t,Math.max(0,e+a-1))[0]}function Km(t,e){var n=fl(t,e);if(!n)return t+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const Qm={"%":(t,e)=>(t*100).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:yD,e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>Km(t*100,e),r:Km,s:ED,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function ep(t){return t}var tp=Array.prototype.map,np=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function CD(t){var e=t.grouping===void 0||t.thousands===void 0?ep:wD(tp.call(t.grouping,Number),t.thousands+""),n=t.currency===void 0?"":t.currency[0]+"",r=t.currency===void 0?"":t.currency[1]+"",i=t.decimal===void 0?".":t.decimal+"",a=t.numerals===void 0?ep:xD(tp.call(t.numerals,String)),o=t.percent===void 0?"%":t.percent+"",s=t.minus===void 0?"":t.minus+"",l=t.nan===void 0?"NaN":t.nan+"";function c(d){d=to(d);var p=d.fill,x=d.align,R=d.sign,O=d.symbol,A=d.zero,I=d.width,S=d.comma,D=d.precision,N=d.trim,k=d.type;k==="n"?(S=!0,k="g"):Qm[k]||(D===void 0&&(D=12),N=!0,k="g"),(A||p==="0"&&x==="=")&&(A=!0,p="0",x="=");var W=O==="$"?n:O==="#"&&/[boxX]/.test(k)?"0"+k.toLowerCase():"",Y=O==="$"?r:/[%p]/.test(k)?o:"",X=Qm[k],Z=/[defgprs%]/.test(k);D=D===void 0?6:/[gprs]/.test(k)?Math.max(1,Math.min(21,D)):Math.max(0,Math.min(20,D));function ie(ne){var J=W,K=Y,$,te,G;if(k==="c")K=X(ne)+K,ne="";else{ne=+ne;var oe=ne<0||1/ne<0;if(ne=isNaN(ne)?l:X(Math.abs(ne),D),N&&(ne=SD(ne)),oe&&+ne==0&&R!=="+"&&(oe=!1),J=(oe?R==="("?R:s:R==="-"||R==="("?"":R)+J,K=(k==="s"?np[8+fb/3]:"")+K+(oe&&R==="("?")":""),Z){for($=-1,te=ne.length;++$<te;)if(G=ne.charCodeAt($),48>G||G>57){K=(G===46?i+ne.slice($+1):ne.slice($))+K,ne=ne.slice(0,$);break}}}S&&!A&&(ne=e(ne,1/0));var ge=J.length+ne.length+K.length,he=ge<I?new Array(I-ge+1).join(p):"";switch(S&&A&&(ne=e(he+ne,he.length?I-K.length:1/0),he=""),x){case"<":ne=J+ne+K+he;break;case"=":ne=J+he+ne+K;break;case"^":ne=he.slice(0,ge=he.length>>1)+J+ne+K+he.slice(ge);break;default:ne=he+J+ne+K;break}return a(ne)}return ie.toString=function(){return d+""},ie}function f(d,p){var x=c((d=to(d),d.type="f",d)),R=Math.max(-8,Math.min(8,Math.floor(Ui(p)/3)))*3,O=Math.pow(10,-R),A=np[8+R/3];return function(I){return x(O*I)+A}}return{format:c,formatPrefix:f}}var us,qf,hb;AD({thousands:",",grouping:[3],currency:["$",""]});function AD(t){return us=CD(t),qf=us.format,hb=us.formatPrefix,us}function RD(t){return Math.max(0,-Ui(Math.abs(t)))}function MD(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Ui(e)/3)))*3-Ui(Math.abs(t)))}function ND(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,Ui(e)-Ui(t))+1}const Gt=Math.random,OD=function t(e){function n(r,i){return r=r==null?0:+r,i=i==null?1:+i,arguments.length===1?(i=r,r=0):i-=r,function(){return e()*i+r}}return n.source=t,n}(Gt),DD=function t(e){function n(r,i){return arguments.length<2&&(i=r,r=0),r=Math.floor(r),i=Math.floor(i)-r,function(){return Math.floor(e()*i+r)}}return n.source=t,n}(Gt),jf=function t(e){function n(r,i){var a,o;return r=r==null?0:+r,i=i==null?1:+i,function(){var s;if(a!=null)s=a,a=null;else do a=e()*2-1,s=e()*2-1,o=a*a+s*s;while(!o||o>1);return r+i*s*Math.sqrt(-2*Math.log(o)/o)}}return n.source=t,n}(Gt),LD=function t(e){var n=jf.source(e);function r(){var i=n.apply(this,arguments);return function(){return Math.exp(i())}}return r.source=t,r}(Gt),db=function t(e){function n(r){return(r=+r)<=0?()=>0:function(){for(var i=0,a=r;a>1;--a)i+=e();return i+a*e()}}return n.source=t,n}(Gt),ID=function t(e){var n=db.source(e);function r(i){if((i=+i)==0)return e;var a=n(i);return function(){return a()/i}}return r.source=t,r}(Gt),PD=function t(e){function n(r){return function(){return-Math.log1p(-e())/r}}return n.source=t,n}(Gt),kD=function t(e){function n(r){if((r=+r)<0)throw new RangeError("invalid alpha");return r=1/-r,function(){return Math.pow(1-e(),r)}}return n.source=t,n}(Gt),BD=function t(e){function n(r){if((r=+r)<0||r>1)throw new RangeError("invalid p");return function(){return Math.floor(e()+r)}}return n.source=t,n}(Gt),gb=function t(e){function n(r){if((r=+r)<0||r>1)throw new RangeError("invalid p");return r===0?()=>1/0:r===1?()=>1:(r=Math.log1p(-r),function(){return 1+Math.floor(Math.log1p(-e())/r)})}return n.source=t,n}(Gt),Jf=function t(e){var n=jf.source(e)();function r(i,a){if((i=+i)<0)throw new RangeError("invalid k");if(i===0)return()=>0;if(a=a==null?1:+a,i===1)return()=>-Math.log1p(-e())*a;var o=(i<1?i+1:i)-1/3,s=1/(3*Math.sqrt(o)),l=i<1?()=>Math.pow(e(),1/i):()=>1;return function(){do{do var c=n(),f=1+s*c;while(f<=0);f*=f*f;var d=1-e()}while(d>=1-.0331*c*c*c*c&&Math.log(d)>=.5*c*c+o*(1-f+Math.log(f)));return o*f*l()*a}}return r.source=t,r}(Gt),mb=function t(e){var n=Jf.source(e);function r(i,a){var o=n(i),s=n(a);return function(){var l=o();return l===0?0:l/(l+s())}}return r.source=t,r}(Gt),pb=function t(e){var n=gb.source(e),r=mb.source(e);function i(a,o){return a=+a,(o=+o)>=1?()=>a:o<=0?()=>0:function(){for(var s=0,l=a,c=o;l*c>16&&l*(1-c)>16;){var f=Math.floor((l+1)*c),d=r(f,l-f+1)();d<=c?(s+=f,l-=f,c=(c-d)/(1-d)):(l=f-1,c/=d)}for(var p=c<.5,x=p?c:1-c,R=n(x),O=R(),A=0;O<=l;++A)O+=R();return s+(p?A:l-A)}}return i.source=t,i}(Gt),FD=function t(e){function n(r,i,a){var o;return(r=+r)==0?o=s=>-Math.log(s):(r=1/r,o=s=>Math.pow(s,r)),i=i==null?0:+i,a=a==null?1:+a,function(){return i+a*o(-Math.log1p(-e()))}}return n.source=t,n}(Gt),VD=function t(e){function n(r,i){return r=r==null?0:+r,i=i==null?1:+i,function(){return r+i*Math.tan(Math.PI*e())}}return n.source=t,n}(Gt),WD=function t(e){function n(r,i){return r=r==null?0:+r,i=i==null?1:+i,function(){var a=e();return r+i*Math.log(a/(1-a))}}return n.source=t,n}(Gt),$D=function t(e){var n=Jf.source(e),r=pb.source(e);function i(a){return function(){for(var o=0,s=a;s>16;){var l=Math.floor(.875*s),c=n(l)();if(c>s)return o+r(l-1,s/c)();o+=l,s-=c}for(var f=-Math.log1p(-e()),d=0;f<=s;++d)f-=Math.log1p(-e());return o+d}}return i.source=t,i}(Gt),zD=1664525,HD=1013904223,rp=1/4294967296;function UD(t=Math.random()){let e=(0<=t&&t<1?t/rp:Math.abs(t))|0;return()=>(e=zD*e+HD|0,rp*(e>>>0))}const YD=Object.freeze(Object.defineProperty({__proto__:null,randomBates:ID,randomBernoulli:BD,randomBeta:mb,randomBinomial:pb,randomCauchy:VD,randomExponential:PD,randomGamma:Jf,randomGeometric:gb,randomInt:DD,randomIrwinHall:db,randomLcg:UD,randomLogNormal:LD,randomLogistic:WD,randomNormal:jf,randomPareto:kD,randomPoisson:$D,randomUniform:OD,randomWeibull:FD},Symbol.toStringTag,{value:"Module"}));function Vn(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}function Er(t,e){switch(arguments.length){case 0:break;case 1:{typeof t=="function"?this.interpolator(t):this.range(t);break}default:{this.domain(t),typeof e=="function"?this.interpolator(e):this.range(e);break}}return this}const Ku=Symbol("implicit");function Zf(){var t=new qa,e=[],n=[],r=Ku;function i(a){let o=t.get(a);if(o===void 0){if(r!==Ku)return r;t.set(a,o=e.push(a)-1)}return n[o%n.length]}return i.domain=function(a){if(!arguments.length)return e.slice();e=[],t=new qa;for(const o of a)t.has(o)||t.set(o,e.push(o)-1);return i},i.range=function(a){return arguments.length?(n=Array.from(a),i):n.slice()},i.unknown=function(a){return arguments.length?(r=a,i):r},i.copy=function(){return Zf(e,n).unknown(r)},Vn.apply(i,arguments),i}function Kf(){var t=Zf().unknown(void 0),e=t.domain,n=t.range,r=0,i=1,a,o,s=!1,l=0,c=0,f=.5;delete t.unknown;function d(){var p=e().length,x=i<r,R=x?i:r,O=x?r:i;a=(O-R)/Math.max(1,p-l+c*2),s&&(a=Math.floor(a)),R+=(O-R-a*(p-l))*f,o=a*(1-l),s&&(R=Math.round(R),o=Math.round(o));var A=Nf(p).map(function(I){return R+a*I});return n(x?A.reverse():A)}return t.domain=function(p){return arguments.length?(e(p),d()):e()},t.range=function(p){return arguments.length?([r,i]=p,r=+r,i=+i,d()):[r,i]},t.rangeRound=function(p){return[r,i]=p,r=+r,i=+i,s=!0,d()},t.bandwidth=function(){return o},t.step=function(){return a},t.round=function(p){return arguments.length?(s=!!p,d()):s},t.padding=function(p){return arguments.length?(l=Math.min(1,c=+p),d()):l},t.paddingInner=function(p){return arguments.length?(l=Math.min(1,p),d()):l},t.paddingOuter=function(p){return arguments.length?(c=+p,d()):c},t.align=function(p){return arguments.length?(f=Math.max(0,Math.min(1,p)),d()):f},t.copy=function(){return Kf(e(),[r,i]).round(s).paddingInner(l).paddingOuter(c).align(f)},Vn.apply(d(),arguments)}function vb(t){var e=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,delete t.paddingOuter,t.copy=function(){return vb(e())},t}function XD(){return vb(Kf.apply(null,arguments).paddingInner(1))}function GD(t){return function(){return t}}function hl(t){return+t}var ip=[0,1];function on(t){return t}function Qu(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:GD(isNaN(e)?NaN:.5)}function qD(t,e){var n;return t>e&&(n=t,t=e,e=n),function(r){return Math.max(t,Math.min(e,r))}}function jD(t,e,n){var r=t[0],i=t[1],a=e[0],o=e[1];return i<r?(r=Qu(i,r),a=n(o,a)):(r=Qu(r,i),a=n(a,o)),function(s){return a(r(s))}}function JD(t,e,n){var r=Math.min(t.length,e.length)-1,i=new Array(r),a=new Array(r),o=-1;for(t[r]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++o<r;)i[o]=Qu(t[o],t[o+1]),a[o]=n(e[o],e[o+1]);return function(s){var l=Br(t,s,1,r)-1;return a[l](i[l](s))}}function vo(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function Yl(){var t=ip,e=ip,n=pi,r,i,a,o=on,s,l,c;function f(){var p=Math.min(t.length,e.length);return o!==on&&(o=qD(t[0],t[p-1])),s=p>2?JD:jD,l=c=null,d}function d(p){return p==null||isNaN(p=+p)?a:(l||(l=s(t.map(r),e,n)))(r(o(p)))}return d.invert=function(p){return o(i((c||(c=s(e,t.map(r),$n)))(p)))},d.domain=function(p){return arguments.length?(t=Array.from(p,hl),f()):t.slice()},d.range=function(p){return arguments.length?(e=Array.from(p),f()):e.slice()},d.rangeRound=function(p){return e=Array.from(p),n=Vf,f()},d.clamp=function(p){return arguments.length?(o=p?!0:on,f()):o!==on},d.interpolate=function(p){return arguments.length?(n=p,f()):n},d.unknown=function(p){return arguments.length?(a=p,d):a},function(p,x){return r=p,i=x,f()}}function Qf(){return Yl()(on,on)}function bb(t,e,n,r){var i=nl(t,e,n),a;switch(r=to(r??",f"),r.type){case"s":{var o=Math.max(Math.abs(t),Math.abs(e));return r.precision==null&&!isNaN(a=MD(i,o))&&(r.precision=a),hb(r,o)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(a=ND(i,Math.max(Math.abs(t),Math.abs(e))))&&(r.precision=a-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(a=RD(i))&&(r.precision=a-(r.type==="%")*2);break}}return qf(r)}function zr(t){var e=t.domain;return t.ticks=function(n){var r=e();return ja(r[0],r[r.length-1],n??10)},t.tickFormat=function(n,r){var i=e();return bb(i[0],i[i.length-1],n??10,r)},t.nice=function(n){n==null&&(n=10);var r=e(),i=0,a=r.length-1,o=r[i],s=r[a],l,c,f=10;for(s<o&&(c=o,o=s,s=c,c=i,i=a,a=c);f-- >0;){if(c=li(o,s,n),c===l)return r[i]=o,r[a]=s,e(r);if(c>0)o=Math.floor(o/c)*c,s=Math.ceil(s/c)*c;else if(c<0)o=Math.ceil(o*c)/c,s=Math.floor(s*c)/c;else break;l=c}return t},t}function kn(){var t=Qf();return t.copy=function(){return vo(t,kn())},Vn.apply(t,arguments),zr(t)}function _b(t){var e;function n(r){return r==null||isNaN(r=+r)?e:r}return n.invert=n,n.domain=n.range=function(r){return arguments.length?(t=Array.from(r,hl),n):t.slice()},n.unknown=function(r){return arguments.length?(e=r,n):e},n.copy=function(){return _b(t).unknown(e)},t=arguments.length?Array.from(t,hl):[0,1],zr(n)}function yb(t,e){t=t.slice();var n=0,r=t.length-1,i=t[n],a=t[r],o;return a<i&&(o=n,n=r,r=o,o=i,i=a,a=o),t[n]=e.floor(i),t[r]=e.ceil(a),t}function ap(t){return Math.log(t)}function op(t){return Math.exp(t)}function ZD(t){return-Math.log(-t)}function KD(t){return-Math.exp(-t)}function QD(t){return isFinite(t)?+("1e"+t):t<0?0:t}function eL(t){return t===10?QD:t===Math.E?Math.exp:e=>Math.pow(t,e)}function tL(t){return t===Math.E?Math.log:t===10&&Math.log10||t===2&&Math.log2||(t=Math.log(t),e=>Math.log(e)/t)}function sp(t){return(e,n)=>-t(-e,n)}function eh(t){const e=t(ap,op),n=e.domain;let r=10,i,a;function o(){return i=tL(r),a=eL(r),n()[0]<0?(i=sp(i),a=sp(a),t(ZD,KD)):t(ap,op),e}return e.base=function(s){return arguments.length?(r=+s,o()):r},e.domain=function(s){return arguments.length?(n(s),o()):n()},e.ticks=s=>{const l=n();let c=l[0],f=l[l.length-1];const d=f<c;d&&([c,f]=[f,c]);let p=i(c),x=i(f),R,O;const A=s==null?10:+s;let I=[];if(!(r%1)&&x-p<A){if(p=Math.floor(p),x=Math.ceil(x),c>0){for(;p<=x;++p)for(R=1;R<r;++R)if(O=p<0?R/a(-p):R*a(p),!(O<c)){if(O>f)break;I.push(O)}}else for(;p<=x;++p)for(R=r-1;R>=1;--R)if(O=p>0?R/a(-p):R*a(p),!(O<c)){if(O>f)break;I.push(O)}I.length*2<A&&(I=ja(c,f,A))}else I=ja(p,x,Math.min(x-p,A)).map(a);return d?I.reverse():I},e.tickFormat=(s,l)=>{if(s==null&&(s=10),l==null&&(l=r===10?"s":","),typeof l!="function"&&(!(r%1)&&(l=to(l)).precision==null&&(l.trim=!0),l=qf(l)),s===1/0)return l;const c=Math.max(1,r*s/e.ticks().length);return f=>{let d=f/a(Math.round(i(f)));return d*r<r-.5&&(d*=r),d<=c?l(f):""}},e.nice=()=>n(yb(n(),{floor:s=>a(Math.floor(i(s))),ceil:s=>a(Math.ceil(i(s)))})),e}function wb(){const t=eh(Yl()).domain([1,10]);return t.copy=()=>vo(t,wb()).base(t.base()),Vn.apply(t,arguments),t}function lp(t){return function(e){return Math.sign(e)*Math.log1p(Math.abs(e/t))}}function cp(t){return function(e){return Math.sign(e)*Math.expm1(Math.abs(e))*t}}function th(t){var e=1,n=t(lp(e),cp(e));return n.constant=function(r){return arguments.length?t(lp(e=+r),cp(e)):e},zr(n)}function xb(){var t=th(Yl());return t.copy=function(){return vo(t,xb()).constant(t.constant())},Vn.apply(t,arguments)}function up(t){return function(e){return e<0?-Math.pow(-e,t):Math.pow(e,t)}}function nL(t){return t<0?-Math.sqrt(-t):Math.sqrt(t)}function rL(t){return t<0?-t*t:t*t}function nh(t){var e=t(on,on),n=1;function r(){return n===1?t(on,on):n===.5?t(nL,rL):t(up(n),up(1/n))}return e.exponent=function(i){return arguments.length?(n=+i,r()):n},zr(e)}function rh(){var t=nh(Yl());return t.copy=function(){return vo(t,rh()).exponent(t.exponent())},Vn.apply(t,arguments),t}function iL(){return rh.apply(null,arguments).exponent(.5)}function fp(t){return Math.sign(t)*t*t}function aL(t){return Math.sign(t)*Math.sqrt(Math.abs(t))}function Tb(){var t=Qf(),e=[0,1],n=!1,r;function i(a){var o=aL(t(a));return isNaN(o)?r:n?Math.round(o):o}return i.invert=function(a){return t.invert(fp(a))},i.domain=function(a){return arguments.length?(t.domain(a),i):t.domain()},i.range=function(a){return arguments.length?(t.range((e=Array.from(a,hl)).map(fp)),i):e.slice()},i.rangeRound=function(a){return i.range(a).round(!0)},i.round=function(a){return arguments.length?(n=!!a,i):n},i.clamp=function(a){return arguments.length?(t.clamp(a),i):t.clamp()},i.unknown=function(a){return arguments.length?(r=a,i):r},i.copy=function(){return Tb(t.domain(),e).round(n).clamp(t.clamp()).unknown(r)},Vn.apply(i,arguments),zr(i)}function Sb(){var t=[],e=[],n=[],r;function i(){var o=0,s=Math.max(1,e.length);for(n=new Array(s-1);++o<s;)n[o-1]=Rv(t,o/s);return a}function a(o){return o==null||isNaN(o=+o)?r:e[Br(n,o)]}return a.invertExtent=function(o){var s=e.indexOf(o);return s<0?[NaN,NaN]:[s>0?n[s-1]:t[0],s<n.length?n[s]:t[t.length-1]]},a.domain=function(o){if(!arguments.length)return t.slice();t=[];for(let s of o)s!=null&&!isNaN(s=+s)&&t.push(s);return t.sort(mt),i()},a.range=function(o){return arguments.length?(e=Array.from(o),i()):e.slice()},a.unknown=function(o){return arguments.length?(r=o,a):r},a.quantiles=function(){return n.slice()},a.copy=function(){return Sb().domain(t).range(e).unknown(r)},Vn.apply(a,arguments)}function Eb(){var t=0,e=1,n=1,r=[.5],i=[0,1],a;function o(l){return l!=null&&l<=l?i[Br(r,l,0,n)]:a}function s(){var l=-1;for(r=new Array(n);++l<n;)r[l]=((l+1)*e-(l-n)*t)/(n+1);return o}return o.domain=function(l){return arguments.length?([t,e]=l,t=+t,e=+e,s()):[t,e]},o.range=function(l){return arguments.length?(n=(i=Array.from(l)).length-1,s()):i.slice()},o.invertExtent=function(l){var c=i.indexOf(l);return c<0?[NaN,NaN]:c<1?[t,r[0]]:c>=n?[r[n-1],e]:[r[c-1],r[c]]},o.unknown=function(l){return arguments.length&&(a=l),o},o.thresholds=function(){return r.slice()},o.copy=function(){return Eb().domain([t,e]).range(i).unknown(a)},Vn.apply(zr(o),arguments)}function Cb(){var t=[.5],e=[0,1],n,r=1;function i(a){return a!=null&&a<=a?e[Br(t,a,0,r)]:n}return i.domain=function(a){return arguments.length?(t=Array.from(a),r=Math.min(t.length,e.length-1),i):t.slice()},i.range=function(a){return arguments.length?(e=Array.from(a),r=Math.min(t.length,e.length-1),i):e.slice()},i.invertExtent=function(a){var o=e.indexOf(a);return[t[o-1],t[o]]},i.unknown=function(a){return arguments.length?(n=a,i):n},i.copy=function(){return Cb().domain(t).range(e).unknown(n)},Vn.apply(i,arguments)}const iu=new Date,au=new Date;function Rt(t,e,n,r){function i(a){return t(a=arguments.length===0?new Date:new Date(+a)),a}return i.floor=a=>(t(a=new Date(+a)),a),i.ceil=a=>(t(a=new Date(a-1)),e(a,1),t(a),a),i.round=a=>{const o=i(a),s=i.ceil(a);return a-o<s-a?o:s},i.offset=(a,o)=>(e(a=new Date(+a),o==null?1:Math.floor(o)),a),i.range=(a,o,s)=>{const l=[];if(a=i.ceil(a),s=s==null?1:Math.floor(s),!(a<o)||!(s>0))return l;let c;do l.push(c=new Date(+a)),e(a,s),t(a);while(c<a&&a<o);return l},i.filter=a=>Rt(o=>{if(o>=o)for(;t(o),!a(o);)o.setTime(o-1)},(o,s)=>{if(o>=o)if(s<0)for(;++s<=0;)for(;e(o,-1),!a(o););else for(;--s>=0;)for(;e(o,1),!a(o););}),n&&(i.count=(a,o)=>(iu.setTime(+a),au.setTime(+o),t(iu),t(au),Math.floor(n(iu,au))),i.every=a=>(a=Math.floor(a),!isFinite(a)||!(a>0)?null:a>1?i.filter(r?o=>r(o)%a===0:o=>i.count(0,o)%a===0):i)),i}const Yi=Rt(()=>{},(t,e)=>{t.setTime(+t+e)},(t,e)=>e-t);Yi.every=t=>(t=Math.floor(t),!isFinite(t)||!(t>0)?null:t>1?Rt(e=>{e.setTime(Math.floor(e/t)*t)},(e,n)=>{e.setTime(+e+n*t)},(e,n)=>(n-e)/t):Yi);const hp=Yi.range,_r=1e3,On=_r*60,yr=On*60,Sr=yr*24,ih=Sr*7,dp=Sr*30,ou=Sr*365,wr=Rt(t=>{t.setTime(t-t.getMilliseconds())},(t,e)=>{t.setTime(+t+e*_r)},(t,e)=>(e-t)/_r,t=>t.getUTCSeconds()),gp=wr.range,Xl=Rt(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*_r)},(t,e)=>{t.setTime(+t+e*On)},(t,e)=>(e-t)/On,t=>t.getMinutes()),oL=Xl.range,Gl=Rt(t=>{t.setUTCSeconds(0,0)},(t,e)=>{t.setTime(+t+e*On)},(t,e)=>(e-t)/On,t=>t.getUTCMinutes()),sL=Gl.range,ql=Rt(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*_r-t.getMinutes()*On)},(t,e)=>{t.setTime(+t+e*yr)},(t,e)=>(e-t)/yr,t=>t.getHours()),lL=ql.range,jl=Rt(t=>{t.setUTCMinutes(0,0,0)},(t,e)=>{t.setTime(+t+e*yr)},(t,e)=>(e-t)/yr,t=>t.getUTCHours()),cL=jl.range,ca=Rt(t=>t.setHours(0,0,0,0),(t,e)=>t.setDate(t.getDate()+e),(t,e)=>(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*On)/Sr,t=>t.getDate()-1),uL=ca.range,bo=Rt(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/Sr,t=>t.getUTCDate()-1),fL=bo.range,ah=Rt(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/Sr,t=>Math.floor(t/Sr)),hL=ah.range;function vi(t){return Rt(e=>{e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)},(e,n)=>{e.setDate(e.getDate()+n*7)},(e,n)=>(n-e-(n.getTimezoneOffset()-e.getTimezoneOffset())*On)/ih)}const Xi=vi(0),no=vi(1),Ab=vi(2),Rb=vi(3),di=vi(4),Mb=vi(5),Nb=vi(6),mp=Xi.range,dL=no.range,gL=Ab.range,mL=Rb.range,pL=di.range,vL=Mb.range,bL=Nb.range;function bi(t){return Rt(e=>{e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCDate(e.getUTCDate()+n*7)},(e,n)=>(n-e)/ih)}const Gi=bi(0),ro=bi(1),Ob=bi(2),Db=bi(3),gi=bi(4),Lb=bi(5),Ib=bi(6),pp=Gi.range,_L=ro.range,yL=Ob.range,wL=Db.range,xL=gi.range,TL=Lb.range,SL=Ib.range,Jl=Rt(t=>{t.setDate(1),t.setHours(0,0,0,0)},(t,e)=>{t.setMonth(t.getMonth()+e)},(t,e)=>e.getMonth()-t.getMonth()+(e.getFullYear()-t.getFullYear())*12,t=>t.getMonth()),EL=Jl.range,Zl=Rt(t=>{t.setUTCDate(1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCMonth(t.getUTCMonth()+e)},(t,e)=>e.getUTCMonth()-t.getUTCMonth()+(e.getUTCFullYear()-t.getUTCFullYear())*12,t=>t.getUTCMonth()),CL=Zl.range,nr=Rt(t=>{t.setMonth(0,1),t.setHours(0,0,0,0)},(t,e)=>{t.setFullYear(t.getFullYear()+e)},(t,e)=>e.getFullYear()-t.getFullYear(),t=>t.getFullYear());nr.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:Rt(e=>{e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)},(e,n)=>{e.setFullYear(e.getFullYear()+n*t)});const AL=nr.range,rr=Rt(t=>{t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCFullYear(t.getUTCFullYear()+e)},(t,e)=>e.getUTCFullYear()-t.getUTCFullYear(),t=>t.getUTCFullYear());rr.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:Rt(e=>{e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCFullYear(e.getUTCFullYear()+n*t)});const RL=rr.range;function Pb(t,e,n,r,i,a){const o=[[wr,1,_r],[wr,5,5*_r],[wr,15,15*_r],[wr,30,30*_r],[a,1,On],[a,5,5*On],[a,15,15*On],[a,30,30*On],[i,1,yr],[i,3,3*yr],[i,6,6*yr],[i,12,12*yr],[r,1,Sr],[r,2,2*Sr],[n,1,ih],[e,1,dp],[e,3,3*dp],[t,1,ou]];function s(c,f,d){const p=f<c;p&&([c,f]=[f,c]);const x=d&&typeof d.range=="function"?d:l(c,f,d),R=x?x.range(c,+f+1):[];return p?R.reverse():R}function l(c,f,d){const p=Math.abs(f-c)/d,x=go(([,,A])=>A).right(o,p);if(x===o.length)return t.every(nl(c/ou,f/ou,d));if(x===0)return Yi.every(Math.max(nl(c,f,d),1));const[R,O]=o[p/o[x-1][2]<o[x][2]/p?x-1:x];return R.every(O)}return[s,l]}const[kb,Bb]=Pb(rr,Zl,Gi,ah,jl,Gl),[Fb,Vb]=Pb(nr,Jl,Xi,ca,ql,Xl),ML=Object.freeze(Object.defineProperty({__proto__:null,timeDay:ca,timeDays:uL,timeFriday:Mb,timeFridays:vL,timeHour:ql,timeHours:lL,timeInterval:Rt,timeMillisecond:Yi,timeMilliseconds:hp,timeMinute:Xl,timeMinutes:oL,timeMonday:no,timeMondays:dL,timeMonth:Jl,timeMonths:EL,timeSaturday:Nb,timeSaturdays:bL,timeSecond:wr,timeSeconds:gp,timeSunday:Xi,timeSundays:mp,timeThursday:di,timeThursdays:pL,timeTickInterval:Vb,timeTicks:Fb,timeTuesday:Ab,timeTuesdays:gL,timeWednesday:Rb,timeWednesdays:mL,timeWeek:Xi,timeWeeks:mp,timeYear:nr,timeYears:AL,unixDay:ah,unixDays:hL,utcDay:bo,utcDays:fL,utcFriday:Lb,utcFridays:TL,utcHour:jl,utcHours:cL,utcMillisecond:Yi,utcMilliseconds:hp,utcMinute:Gl,utcMinutes:sL,utcMonday:ro,utcMondays:_L,utcMonth:Zl,utcMonths:CL,utcSaturday:Ib,utcSaturdays:SL,utcSecond:wr,utcSeconds:gp,utcSunday:Gi,utcSundays:pp,utcThursday:gi,utcThursdays:xL,utcTickInterval:Bb,utcTicks:kb,utcTuesday:Ob,utcTuesdays:yL,utcWednesday:Db,utcWednesdays:wL,utcWeek:Gi,utcWeeks:pp,utcYear:rr,utcYears:RL},Symbol.toStringTag,{value:"Module"}));function su(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function lu(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function Ea(t,e,n){return{y:t,m:e,d:n,H:0,M:0,S:0,L:0}}function NL(t){var e=t.dateTime,n=t.date,r=t.time,i=t.periods,a=t.days,o=t.shortDays,s=t.months,l=t.shortMonths,c=Ca(i),f=Aa(i),d=Ca(a),p=Aa(a),x=Ca(o),R=Aa(o),O=Ca(s),A=Aa(s),I=Ca(l),S=Aa(l),D={a:oe,A:ge,b:he,B:pe,c:null,d:xp,e:xp,f:QL,g:c6,G:f6,H:JL,I:ZL,j:KL,L:Wb,m:e6,M:t6,p:re,q:ue,Q:Ep,s:Cp,S:n6,u:r6,U:i6,V:a6,w:o6,W:s6,x:null,X:null,y:l6,Y:u6,Z:h6,"%":Sp},N={a:de,A:ve,b:Me,B:Oe,c:null,d:Tp,e:Tp,f:p6,g:C6,G:R6,H:d6,I:g6,j:m6,L:zb,m:v6,M:b6,p:Ce,q:Ie,Q:Ep,s:Cp,S:_6,u:y6,U:w6,V:x6,w:T6,W:S6,x:null,X:null,y:E6,Y:A6,Z:M6,"%":Sp},k={a:ie,A:ne,b:J,B:K,c:$,d:yp,e:yp,f:XL,g:_p,G:bp,H:wp,I:wp,j:zL,L:YL,m:$L,M:HL,p:Z,q:WL,Q:qL,s:jL,S:UL,u:PL,U:kL,V:BL,w:IL,W:FL,x:te,X:G,y:_p,Y:bp,Z:VL,"%":GL};D.x=W(n,D),D.X=W(r,D),D.c=W(e,D),N.x=W(n,N),N.X=W(r,N),N.c=W(e,N);function W(me,Ee){return function(De){var ce=[],et=-1,fe=0,tt=me.length,it,_e,ft;for(De instanceof Date||(De=new Date(+De));++et<tt;)me.charCodeAt(et)===37&&(ce.push(me.slice(fe,et)),(_e=vp[it=me.charAt(++et)])!=null?it=me.charAt(++et):_e=it==="e"?" ":"0",(ft=Ee[it])&&(it=ft(De,_e)),ce.push(it),fe=et+1);return ce.push(me.slice(fe,et)),ce.join("")}}function Y(me,Ee){return function(De){var ce=Ea(1900,void 0,1),et=X(ce,me,De+="",0),fe,tt;if(et!=De.length)return null;if("Q"in ce)return new Date(ce.Q);if("s"in ce)return new Date(ce.s*1e3+("L"in ce?ce.L:0));if(Ee&&!("Z"in ce)&&(ce.Z=0),"p"in ce&&(ce.H=ce.H%12+ce.p*12),ce.m===void 0&&(ce.m="q"in ce?ce.q:0),"V"in ce){if(ce.V<1||ce.V>53)return null;"w"in ce||(ce.w=1),"Z"in ce?(fe=lu(Ea(ce.y,0,1)),tt=fe.getUTCDay(),fe=tt>4||tt===0?ro.ceil(fe):ro(fe),fe=bo.offset(fe,(ce.V-1)*7),ce.y=fe.getUTCFullYear(),ce.m=fe.getUTCMonth(),ce.d=fe.getUTCDate()+(ce.w+6)%7):(fe=su(Ea(ce.y,0,1)),tt=fe.getDay(),fe=tt>4||tt===0?no.ceil(fe):no(fe),fe=ca.offset(fe,(ce.V-1)*7),ce.y=fe.getFullYear(),ce.m=fe.getMonth(),ce.d=fe.getDate()+(ce.w+6)%7)}else("W"in ce||"U"in ce)&&("w"in ce||(ce.w="u"in ce?ce.u%7:"W"in ce?1:0),tt="Z"in ce?lu(Ea(ce.y,0,1)).getUTCDay():su(Ea(ce.y,0,1)).getDay(),ce.m=0,ce.d="W"in ce?(ce.w+6)%7+ce.W*7-(tt+5)%7:ce.w+ce.U*7-(tt+6)%7);return"Z"in ce?(ce.H+=ce.Z/100|0,ce.M+=ce.Z%100,lu(ce)):su(ce)}}function X(me,Ee,De,ce){for(var et=0,fe=Ee.length,tt=De.length,it,_e;et<fe;){if(ce>=tt)return-1;if(it=Ee.charCodeAt(et++),it===37){if(it=Ee.charAt(et++),_e=k[it in vp?Ee.charAt(et++):it],!_e||(ce=_e(me,De,ce))<0)return-1}else if(it!=De.charCodeAt(ce++))return-1}return ce}function Z(me,Ee,De){var ce=c.exec(Ee.slice(De));return ce?(me.p=f.get(ce[0].toLowerCase()),De+ce[0].length):-1}function ie(me,Ee,De){var ce=x.exec(Ee.slice(De));return ce?(me.w=R.get(ce[0].toLowerCase()),De+ce[0].length):-1}function ne(me,Ee,De){var ce=d.exec(Ee.slice(De));return ce?(me.w=p.get(ce[0].toLowerCase()),De+ce[0].length):-1}function J(me,Ee,De){var ce=I.exec(Ee.slice(De));return ce?(me.m=S.get(ce[0].toLowerCase()),De+ce[0].length):-1}function K(me,Ee,De){var ce=O.exec(Ee.slice(De));return ce?(me.m=A.get(ce[0].toLowerCase()),De+ce[0].length):-1}function $(me,Ee,De){return X(me,e,Ee,De)}function te(me,Ee,De){return X(me,n,Ee,De)}function G(me,Ee,De){return X(me,r,Ee,De)}function oe(me){return o[me.getDay()]}function ge(me){return a[me.getDay()]}function he(me){return l[me.getMonth()]}function pe(me){return s[me.getMonth()]}function re(me){return i[+(me.getHours()>=12)]}function ue(me){return 1+~~(me.getMonth()/3)}function de(me){return o[me.getUTCDay()]}function ve(me){return a[me.getUTCDay()]}function Me(me){return l[me.getUTCMonth()]}function Oe(me){return s[me.getUTCMonth()]}function Ce(me){return i[+(me.getUTCHours()>=12)]}function Ie(me){return 1+~~(me.getUTCMonth()/3)}return{format:function(me){var Ee=W(me+="",D);return Ee.toString=function(){return me},Ee},parse:function(me){var Ee=Y(me+="",!1);return Ee.toString=function(){return me},Ee},utcFormat:function(me){var Ee=W(me+="",N);return Ee.toString=function(){return me},Ee},utcParse:function(me){var Ee=Y(me+="",!0);return Ee.toString=function(){return me},Ee}}}var vp={"-":"",_:" ",0:"0"},Ft=/^\s*\d+/,OL=/^%/,DL=/[\\^$*+?|[\]().{}]/g;function Je(t,e,n){var r=t<0?"-":"",i=(r?-t:t)+"",a=i.length;return r+(a<n?new Array(n-a+1).join(e)+i:i)}function LL(t){return t.replace(DL,"\\$&")}function Ca(t){return new RegExp("^(?:"+t.map(LL).join("|")+")","i")}function Aa(t){return new Map(t.map((e,n)=>[e.toLowerCase(),n]))}function IL(t,e,n){var r=Ft.exec(e.slice(n,n+1));return r?(t.w=+r[0],n+r[0].length):-1}function PL(t,e,n){var r=Ft.exec(e.slice(n,n+1));return r?(t.u=+r[0],n+r[0].length):-1}function kL(t,e,n){var r=Ft.exec(e.slice(n,n+2));return r?(t.U=+r[0],n+r[0].length):-1}function BL(t,e,n){var r=Ft.exec(e.slice(n,n+2));return r?(t.V=+r[0],n+r[0].length):-1}function FL(t,e,n){var r=Ft.exec(e.slice(n,n+2));return r?(t.W=+r[0],n+r[0].length):-1}function bp(t,e,n){var r=Ft.exec(e.slice(n,n+4));return r?(t.y=+r[0],n+r[0].length):-1}function _p(t,e,n){var r=Ft.exec(e.slice(n,n+2));return r?(t.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function VL(t,e,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(n,n+6));return r?(t.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function WL(t,e,n){var r=Ft.exec(e.slice(n,n+1));return r?(t.q=r[0]*3-3,n+r[0].length):-1}function $L(t,e,n){var r=Ft.exec(e.slice(n,n+2));return r?(t.m=r[0]-1,n+r[0].length):-1}function yp(t,e,n){var r=Ft.exec(e.slice(n,n+2));return r?(t.d=+r[0],n+r[0].length):-1}function zL(t,e,n){var r=Ft.exec(e.slice(n,n+3));return r?(t.m=0,t.d=+r[0],n+r[0].length):-1}function wp(t,e,n){var r=Ft.exec(e.slice(n,n+2));return r?(t.H=+r[0],n+r[0].length):-1}function HL(t,e,n){var r=Ft.exec(e.slice(n,n+2));return r?(t.M=+r[0],n+r[0].length):-1}function UL(t,e,n){var r=Ft.exec(e.slice(n,n+2));return r?(t.S=+r[0],n+r[0].length):-1}function YL(t,e,n){var r=Ft.exec(e.slice(n,n+3));return r?(t.L=+r[0],n+r[0].length):-1}function XL(t,e,n){var r=Ft.exec(e.slice(n,n+6));return r?(t.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function GL(t,e,n){var r=OL.exec(e.slice(n,n+1));return r?n+r[0].length:-1}function qL(t,e,n){var r=Ft.exec(e.slice(n));return r?(t.Q=+r[0],n+r[0].length):-1}function jL(t,e,n){var r=Ft.exec(e.slice(n));return r?(t.s=+r[0],n+r[0].length):-1}function xp(t,e){return Je(t.getDate(),e,2)}function JL(t,e){return Je(t.getHours(),e,2)}function ZL(t,e){return Je(t.getHours()%12||12,e,2)}function KL(t,e){return Je(1+ca.count(nr(t),t),e,3)}function Wb(t,e){return Je(t.getMilliseconds(),e,3)}function QL(t,e){return Wb(t,e)+"000"}function e6(t,e){return Je(t.getMonth()+1,e,2)}function t6(t,e){return Je(t.getMinutes(),e,2)}function n6(t,e){return Je(t.getSeconds(),e,2)}function r6(t){var e=t.getDay();return e===0?7:e}function i6(t,e){return Je(Xi.count(nr(t)-1,t),e,2)}function $b(t){var e=t.getDay();return e>=4||e===0?di(t):di.ceil(t)}function a6(t,e){return t=$b(t),Je(di.count(nr(t),t)+(nr(t).getDay()===4),e,2)}function o6(t){return t.getDay()}function s6(t,e){return Je(no.count(nr(t)-1,t),e,2)}function l6(t,e){return Je(t.getFullYear()%100,e,2)}function c6(t,e){return t=$b(t),Je(t.getFullYear()%100,e,2)}function u6(t,e){return Je(t.getFullYear()%1e4,e,4)}function f6(t,e){var n=t.getDay();return t=n>=4||n===0?di(t):di.ceil(t),Je(t.getFullYear()%1e4,e,4)}function h6(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+Je(e/60|0,"0",2)+Je(e%60,"0",2)}function Tp(t,e){return Je(t.getUTCDate(),e,2)}function d6(t,e){return Je(t.getUTCHours(),e,2)}function g6(t,e){return Je(t.getUTCHours()%12||12,e,2)}function m6(t,e){return Je(1+bo.count(rr(t),t),e,3)}function zb(t,e){return Je(t.getUTCMilliseconds(),e,3)}function p6(t,e){return zb(t,e)+"000"}function v6(t,e){return Je(t.getUTCMonth()+1,e,2)}function b6(t,e){return Je(t.getUTCMinutes(),e,2)}function _6(t,e){return Je(t.getUTCSeconds(),e,2)}function y6(t){var e=t.getUTCDay();return e===0?7:e}function w6(t,e){return Je(Gi.count(rr(t)-1,t),e,2)}function Hb(t){var e=t.getUTCDay();return e>=4||e===0?gi(t):gi.ceil(t)}function x6(t,e){return t=Hb(t),Je(gi.count(rr(t),t)+(rr(t).getUTCDay()===4),e,2)}function T6(t){return t.getUTCDay()}function S6(t,e){return Je(ro.count(rr(t)-1,t),e,2)}function E6(t,e){return Je(t.getUTCFullYear()%100,e,2)}function C6(t,e){return t=Hb(t),Je(t.getUTCFullYear()%100,e,2)}function A6(t,e){return Je(t.getUTCFullYear()%1e4,e,4)}function R6(t,e){var n=t.getUTCDay();return t=n>=4||n===0?gi(t):gi.ceil(t),Je(t.getUTCFullYear()%1e4,e,4)}function M6(){return"+0000"}function Sp(){return"%"}function Ep(t){return+t}function Cp(t){return Math.floor(+t/1e3)}var Ei,Ub,Yb;N6({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function N6(t){return Ei=NL(t),Ub=Ei.format,Ei.parse,Yb=Ei.utcFormat,Ei.utcParse,Ei}function O6(t){return new Date(t)}function D6(t){return t instanceof Date?+t:+new Date(+t)}function oh(t,e,n,r,i,a,o,s,l,c){var f=Qf(),d=f.invert,p=f.domain,x=c(".%L"),R=c(":%S"),O=c("%I:%M"),A=c("%I %p"),I=c("%a %d"),S=c("%b %d"),D=c("%B"),N=c("%Y");function k(W){return(l(W)<W?x:s(W)<W?R:o(W)<W?O:a(W)<W?A:r(W)<W?i(W)<W?I:S:n(W)<W?D:N)(W)}return f.invert=function(W){return new Date(d(W))},f.domain=function(W){return arguments.length?p(Array.from(W,D6)):p().map(O6)},f.ticks=function(W){var Y=p();return t(Y[0],Y[Y.length-1],W??10)},f.tickFormat=function(W,Y){return Y==null?k:c(Y)},f.nice=function(W){var Y=p();return(!W||typeof W.range!="function")&&(W=e(Y[0],Y[Y.length-1],W??10)),W?p(yb(Y,W)):f},f.copy=function(){return vo(f,oh(t,e,n,r,i,a,o,s,l,c))},f}function L6(){return Vn.apply(oh(Fb,Vb,nr,Jl,Xi,ca,ql,Xl,wr,Ub).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function I6(){return Vn.apply(oh(kb,Bb,rr,Zl,Gi,bo,jl,Gl,wr,Yb).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function Kl(){var t=0,e=1,n,r,i,a,o=on,s=!1,l;function c(d){return d==null||isNaN(d=+d)?l:o(i===0?.5:(d=(a(d)-n)*i,s?Math.max(0,Math.min(1,d)):d))}c.domain=function(d){return arguments.length?([t,e]=d,n=a(t=+t),r=a(e=+e),i=n===r?0:1/(r-n),c):[t,e]},c.clamp=function(d){return arguments.length?(s=!!d,c):s},c.interpolator=function(d){return arguments.length?(o=d,c):o};function f(d){return function(p){var x,R;return arguments.length?([x,R]=p,o=d(x,R),c):[o(0),o(1)]}}return c.range=f(pi),c.rangeRound=f(Vf),c.unknown=function(d){return arguments.length?(l=d,c):l},function(d){return a=d,n=d(t),r=d(e),i=n===r?0:1/(r-n),c}}function Hr(t,e){return e.domain(t.domain()).interpolator(t.interpolator()).clamp(t.clamp()).unknown(t.unknown())}function Xb(){var t=zr(Kl()(on));return t.copy=function(){return Hr(t,Xb())},Er.apply(t,arguments)}function Gb(){var t=eh(Kl()).domain([1,10]);return t.copy=function(){return Hr(t,Gb()).base(t.base())},Er.apply(t,arguments)}function qb(){var t=th(Kl());return t.copy=function(){return Hr(t,qb()).constant(t.constant())},Er.apply(t,arguments)}function sh(){var t=nh(Kl());return t.copy=function(){return Hr(t,sh()).exponent(t.exponent())},Er.apply(t,arguments)}function P6(){return sh.apply(null,arguments).exponent(.5)}function jb(){var t=[],e=on;function n(r){if(r!=null&&!isNaN(r=+r))return e((Br(t,r,1)-1)/(t.length-1))}return n.domain=function(r){if(!arguments.length)return t.slice();t=[];for(let i of r)i!=null&&!isNaN(i=+i)&&t.push(i);return t.sort(mt),n},n.interpolator=function(r){return arguments.length?(e=r,n):e},n.range=function(){return t.map((r,i)=>e(i/(t.length-1)))},n.quantiles=function(r){return Array.from({length:r+1},(i,a)=>Ja(t,a/r))},n.copy=function(){return jb(e).domain(t)},Er.apply(n,arguments)}function Ql(){var t=0,e=.5,n=1,r=1,i,a,o,s,l,c=on,f,d=!1,p;function x(O){return isNaN(O=+O)?p:(O=.5+((O=+f(O))-a)*(r*O<r*a?s:l),c(d?Math.max(0,Math.min(1,O)):O))}x.domain=function(O){return arguments.length?([t,e,n]=O,i=f(t=+t),a=f(e=+e),o=f(n=+n),s=i===a?0:.5/(a-i),l=a===o?0:.5/(o-a),r=a<i?-1:1,x):[t,e,n]},x.clamp=function(O){return arguments.length?(d=!!O,x):d},x.interpolator=function(O){return arguments.length?(c=O,x):c};function R(O){return function(A){var I,S,D;return arguments.length?([I,S,D]=A,c=xN(O,[I,S,D]),x):[c(0),c(.5),c(1)]}}return x.range=R(pi),x.rangeRound=R(Vf),x.unknown=function(O){return arguments.length?(p=O,x):p},function(O){return f=O,i=O(t),a=O(e),o=O(n),s=i===a?0:.5/(a-i),l=a===o?0:.5/(o-a),r=a<i?-1:1,x}}function Jb(){var t=zr(Ql()(on));return t.copy=function(){return Hr(t,Jb())},Er.apply(t,arguments)}function Zb(){var t=eh(Ql()).domain([.1,1,10]);return t.copy=function(){return Hr(t,Zb()).base(t.base())},Er.apply(t,arguments)}function Kb(){var t=th(Ql());return t.copy=function(){return Hr(t,Kb()).constant(t.constant())},Er.apply(t,arguments)}function lh(){var t=nh(Ql());return t.copy=function(){return Hr(t,lh()).exponent(t.exponent())},Er.apply(t,arguments)}function k6(){return lh.apply(null,arguments).exponent(.5)}const B6=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:Kf,scaleDiverging:Jb,scaleDivergingLog:Zb,scaleDivergingPow:lh,scaleDivergingSqrt:k6,scaleDivergingSymlog:Kb,scaleIdentity:_b,scaleImplicit:Ku,scaleLinear:kn,scaleLog:wb,scaleOrdinal:Zf,scalePoint:XD,scalePow:rh,scaleQuantile:Sb,scaleQuantize:Eb,scaleRadial:Tb,scaleSequential:Xb,scaleSequentialLog:Gb,scaleSequentialPow:sh,scaleSequentialQuantile:jb,scaleSequentialSqrt:P6,scaleSequentialSymlog:qb,scaleSqrt:iL,scaleSymlog:xb,scaleThreshold:Cb,scaleTime:L6,scaleUtc:I6,tickFormat:bb},Symbol.toStringTag,{value:"Module"}));function Be(t){for(var e=t.length/6|0,n=new Array(e),r=0;r<e;)n[r]="#"+t.slice(r*6,++r*6);return n}const F6=Be("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf"),V6=Be("7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666"),W6=Be("1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666"),$6=Be("4269d0efb118ff725c6cc5b03ca951ff8ab7a463f297bbf59c6b4e9498a0"),z6=Be("a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928"),H6=Be("fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2"),U6=Be("b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc"),Y6=Be("e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999"),X6=Be("66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3"),G6=Be("8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f"),Qb=Be("4e79a7f28e2ce1575976b7b259a14fedc949af7aa1ff9da79c755fbab0ab"),ot=t=>oN(t[t.length-1]);var e_=new Array(3).concat("d8b365f5f5f55ab4ac","a6611adfc27d80cdc1018571","a6611adfc27df5f5f580cdc1018571","8c510ad8b365f6e8c3c7eae55ab4ac01665e","8c510ad8b365f6e8c3f5f5f5c7eae55ab4ac01665e","8c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e","8c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e","5430058c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e003c30","5430058c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e003c30").map(Be);const q6=ot(e_);var t_=new Array(3).concat("af8dc3f7f7f77fbf7b","7b3294c2a5cfa6dba0008837","7b3294c2a5cff7f7f7a6dba0008837","762a83af8dc3e7d4e8d9f0d37fbf7b1b7837","762a83af8dc3e7d4e8f7f7f7d9f0d37fbf7b1b7837","762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b7837","762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b7837","40004b762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b783700441b","40004b762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b783700441b").map(Be);const j6=ot(t_);var n_=new Array(3).concat("e9a3c9f7f7f7a1d76a","d01c8bf1b6dab8e1864dac26","d01c8bf1b6daf7f7f7b8e1864dac26","c51b7de9a3c9fde0efe6f5d0a1d76a4d9221","c51b7de9a3c9fde0eff7f7f7e6f5d0a1d76a4d9221","c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221","c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221","8e0152c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221276419","8e0152c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221276419").map(Be);const J6=ot(n_);var r_=new Array(3).concat("998ec3f7f7f7f1a340","5e3c99b2abd2fdb863e66101","5e3c99b2abd2f7f7f7fdb863e66101","542788998ec3d8daebfee0b6f1a340b35806","542788998ec3d8daebf7f7f7fee0b6f1a340b35806","5427888073acb2abd2d8daebfee0b6fdb863e08214b35806","5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b35806","2d004b5427888073acb2abd2d8daebfee0b6fdb863e08214b358067f3b08","2d004b5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b358067f3b08").map(Be);const Z6=ot(r_);var i_=new Array(3).concat("ef8a62f7f7f767a9cf","ca0020f4a58292c5de0571b0","ca0020f4a582f7f7f792c5de0571b0","b2182bef8a62fddbc7d1e5f067a9cf2166ac","b2182bef8a62fddbc7f7f7f7d1e5f067a9cf2166ac","b2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac","b2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac","67001fb2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac053061","67001fb2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac053061").map(Be);const K6=ot(i_);var a_=new Array(3).concat("ef8a62ffffff999999","ca0020f4a582bababa404040","ca0020f4a582ffffffbababa404040","b2182bef8a62fddbc7e0e0e09999994d4d4d","b2182bef8a62fddbc7ffffffe0e0e09999994d4d4d","b2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d","b2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d","67001fb2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d1a1a1a","67001fb2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d1a1a1a").map(Be);const Q6=ot(a_);var o_=new Array(3).concat("fc8d59ffffbf91bfdb","d7191cfdae61abd9e92c7bb6","d7191cfdae61ffffbfabd9e92c7bb6","d73027fc8d59fee090e0f3f891bfdb4575b4","d73027fc8d59fee090ffffbfe0f3f891bfdb4575b4","d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4","d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4","a50026d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4313695","a50026d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4313695").map(Be);const e3=ot(o_);var s_=new Array(3).concat("fc8d59ffffbf91cf60","d7191cfdae61a6d96a1a9641","d7191cfdae61ffffbfa6d96a1a9641","d73027fc8d59fee08bd9ef8b91cf601a9850","d73027fc8d59fee08bffffbfd9ef8b91cf601a9850","d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850","d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850","a50026d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850006837","a50026d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850006837").map(Be);const t3=ot(s_);var l_=new Array(3).concat("fc8d59ffffbf99d594","d7191cfdae61abdda42b83ba","d7191cfdae61ffffbfabdda42b83ba","d53e4ffc8d59fee08be6f59899d5943288bd","d53e4ffc8d59fee08bffffbfe6f59899d5943288bd","d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd","d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd","9e0142d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd5e4fa2","9e0142d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd5e4fa2").map(Be);const n3=ot(l_);var c_=new Array(3).concat("e5f5f999d8c92ca25f","edf8fbb2e2e266c2a4238b45","edf8fbb2e2e266c2a42ca25f006d2c","edf8fbccece699d8c966c2a42ca25f006d2c","edf8fbccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45006d2c00441b").map(Be);const r3=ot(c_);var u_=new Array(3).concat("e0ecf49ebcda8856a7","edf8fbb3cde38c96c688419d","edf8fbb3cde38c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d810f7c4d004b").map(Be);const i3=ot(u_);var f_=new Array(3).concat("e0f3dba8ddb543a2ca","f0f9e8bae4bc7bccc42b8cbe","f0f9e8bae4bc7bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe0868ac084081").map(Be);const a3=ot(f_);var h_=new Array(3).concat("fee8c8fdbb84e34a33","fef0d9fdcc8afc8d59d7301f","fef0d9fdcc8afc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301fb300007f0000").map(Be);const o3=ot(h_);var d_=new Array(3).concat("ece2f0a6bddb1c9099","f6eff7bdc9e167a9cf02818a","f6eff7bdc9e167a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016c59014636").map(Be);const s3=ot(d_);var g_=new Array(3).concat("ece7f2a6bddb2b8cbe","f1eef6bdc9e174a9cf0570b0","f1eef6bdc9e174a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0045a8d023858").map(Be);const l3=ot(g_);var m_=new Array(3).concat("e7e1efc994c7dd1c77","f1eef6d7b5d8df65b0ce1256","f1eef6d7b5d8df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125698004367001f").map(Be);const c3=ot(m_);var p_=new Array(3).concat("fde0ddfa9fb5c51b8a","feebe2fbb4b9f768a1ae017e","feebe2fbb4b9f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a017749006a").map(Be);const u3=ot(p_);var v_=new Array(3).concat("edf8b17fcdbb2c7fb8","ffffcca1dab441b6c4225ea8","ffffcca1dab441b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea8253494081d58").map(Be);const f3=ot(v_);var b_=new Array(3).concat("f7fcb9addd8e31a354","ffffccc2e69978c679238443","ffffccc2e69978c67931a354006837","ffffccd9f0a3addd8e78c67931a354006837","ffffccd9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443006837004529").map(Be);const h3=ot(b_);var __=new Array(3).concat("fff7bcfec44fd95f0e","ffffd4fed98efe9929cc4c02","ffffd4fed98efe9929d95f0e993404","ffffd4fee391fec44ffe9929d95f0e993404","ffffd4fee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c02993404662506").map(Be);const d3=ot(__);var y_=new Array(3).concat("ffeda0feb24cf03b20","ffffb2fecc5cfd8d3ce31a1c","ffffb2fecc5cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cbd0026800026").map(Be);const g3=ot(y_);var w_=new Array(3).concat("deebf79ecae13182bd","eff3ffbdd7e76baed62171b5","eff3ffbdd7e76baed63182bd08519c","eff3ffc6dbef9ecae16baed63182bd08519c","eff3ffc6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b508519c08306b").map(Be);const m3=ot(w_);var x_=new Array(3).concat("e5f5e0a1d99b31a354","edf8e9bae4b374c476238b45","edf8e9bae4b374c47631a354006d2c","edf8e9c7e9c0a1d99b74c47631a354006d2c","edf8e9c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45006d2c00441b").map(Be);const p3=ot(x_);var T_=new Array(3).concat("f0f0f0bdbdbd636363","f7f7f7cccccc969696525252","f7f7f7cccccc969696636363252525","f7f7f7d9d9d9bdbdbd969696636363252525","f7f7f7d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525000000").map(Be);const v3=ot(T_);var S_=new Array(3).concat("efedf5bcbddc756bb1","f2f0f7cbc9e29e9ac86a51a3","f2f0f7cbc9e29e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a354278f3f007d").map(Be);const b3=ot(S_);var E_=new Array(3).concat("fee0d2fc9272de2d26","fee5d9fcae91fb6a4acb181d","fee5d9fcae91fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181da50f1567000d").map(Be);const _3=ot(E_);var C_=new Array(3).concat("fee6cefdae6be6550d","feeddefdbe85fd8d3cd94701","feeddefdbe85fd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d94801a636037f2704").map(Be);const y3=ot(C_);function w3(t){return t=Math.max(0,Math.min(1,t)),"rgb("+Math.max(0,Math.min(255,Math.round(-4.54-t*(35.34-t*(2381.73-t*(6402.7-t*(7024.72-t*2710.57)))))))+", "+Math.max(0,Math.min(255,Math.round(32.49+t*(170.73+t*(52.82-t*(131.46-t*(176.58-t*67.37)))))))+", "+Math.max(0,Math.min(255,Math.round(81.24+t*(442.36-t*(2482.43-t*(6167.24-t*(6614.94-t*2475.67)))))))+")"}const x3=Wf(tr(300,.5,0),tr(-240,.5,1));var T3=Wf(tr(-100,.75,.35),tr(80,1.5,.8)),S3=Wf(tr(260,.75,.35),tr(80,1.5,.8)),fs=tr();function E3(t){(t<0||t>1)&&(t-=Math.floor(t));var e=Math.abs(t-.5);return fs.h=360*t-100,fs.s=1.5-1.5*e,fs.l=.8-.9*e,fs+""}var hs=fi(),C3=Math.PI/3,A3=Math.PI*2/3;function R3(t){var e;return t=(.5-t)*Math.PI,hs.r=255*(e=Math.sin(t))*e,hs.g=255*(e=Math.sin(t+C3))*e,hs.b=255*(e=Math.sin(t+A3))*e,hs+""}function A_(t){return t=Math.max(0,Math.min(1,t)),"rgb("+Math.max(0,Math.min(255,Math.round(34.61+t*(1172.33-t*(10793.56-t*(33300.12-t*(38394.49-t*14825.05)))))))+", "+Math.max(0,Math.min(255,Math.round(23.31+t*(557.33+t*(1225.33-t*(3574.96-t*(1073.77+t*707.56)))))))+", "+Math.max(0,Math.min(255,Math.round(27.2+t*(3211.1-t*(15327.97-t*(27814-t*(22569.18-t*6838.66)))))))+")"}function ec(t){var e=t.length;return function(n){return t[Math.max(0,Math.min(e-1,Math.floor(n*e)))]}}const M3=ec(Be("44015444025645045745055946075a46085c460a5d460b5e470d60470e6147106347116447136548146748166848176948186a481a6c481b6d481c6e481d6f481f70482071482173482374482475482576482677482878482979472a7a472c7a472d7b472e7c472f7d46307e46327e46337f463480453581453781453882443983443a83443b84433d84433e85423f854240864241864142874144874045884046883f47883f48893e49893e4a893e4c8a3d4d8a3d4e8a3c4f8a3c508b3b518b3b528b3a538b3a548c39558c39568c38588c38598c375a8c375b8d365c8d365d8d355e8d355f8d34608d34618d33628d33638d32648e32658e31668e31678e31688e30698e306a8e2f6b8e2f6c8e2e6d8e2e6e8e2e6f8e2d708e2d718e2c718e2c728e2c738e2b748e2b758e2a768e2a778e2a788e29798e297a8e297b8e287c8e287d8e277e8e277f8e27808e26818e26828e26828e25838e25848e25858e24868e24878e23888e23898e238a8d228b8d228c8d228d8d218e8d218f8d21908d21918c20928c20928c20938c1f948c1f958b1f968b1f978b1f988b1f998a1f9a8a1e9b8a1e9c891e9d891f9e891f9f881fa0881fa1881fa1871fa28720a38620a48621a58521a68522a78522a88423a98324aa8325ab8225ac8226ad8127ad8128ae8029af7f2ab07f2cb17e2db27d2eb37c2fb47c31b57b32b67a34b67935b77937b87838b9773aba763bbb753dbc743fbc7340bd7242be7144bf7046c06f48c16e4ac16d4cc26c4ec36b50c46a52c56954c56856c66758c7655ac8645cc8635ec96260ca6063cb5f65cb5e67cc5c69cd5b6ccd5a6ece5870cf5773d05675d05477d1537ad1517cd2507fd34e81d34d84d44b86d54989d5488bd6468ed64590d74393d74195d84098d83e9bd93c9dd93ba0da39a2da37a5db36a8db34aadc32addc30b0dd2fb2dd2db5de2bb8de29bade28bddf26c0df25c2df23c5e021c8e020cae11fcde11dd0e11cd2e21bd5e21ad8e219dae319dde318dfe318e2e418e5e419e7e419eae51aece51befe51cf1e51df4e61ef6e620f8e621fbe723fde725"));var N3=ec(Be("00000401000501010601010802010902020b02020d03030f03031204041405041606051806051a07061c08071e0907200a08220b09240c09260d0a290e0b2b100b2d110c2f120d31130d34140e36150e38160f3b180f3d19103f1a10421c10441d11471e114920114b21114e22115024125325125527125829115a2a115c2c115f2d11612f116331116533106734106936106b38106c390f6e3b0f703d0f713f0f72400f74420f75440f764510774710784910784a10794c117a4e117b4f127b51127c52137c54137d56147d57157e59157e5a167e5c167f5d177f5f187f601880621980641a80651a80671b80681c816a1c816b1d816d1d816e1e81701f81721f817320817521817621817822817922827b23827c23827e24828025828125818326818426818627818827818928818b29818c29818e2a81902a81912b81932b80942c80962c80982d80992d809b2e7f9c2e7f9e2f7fa02f7fa1307ea3307ea5317ea6317da8327daa337dab337cad347cae347bb0357bb2357bb3367ab5367ab73779b83779ba3878bc3978bd3977bf3a77c03a76c23b75c43c75c53c74c73d73c83e73ca3e72cc3f71cd4071cf4070d0416fd2426fd3436ed5446dd6456cd8456cd9466bdb476adc4869de4968df4a68e04c67e24d66e34e65e44f64e55064e75263e85362e95462ea5661eb5760ec5860ed5a5fee5b5eef5d5ef05f5ef1605df2625df2645cf3655cf4675cf4695cf56b5cf66c5cf66e5cf7705cf7725cf8745cf8765cf9785df9795df97b5dfa7d5efa7f5efa815ffb835ffb8560fb8761fc8961fc8a62fc8c63fc8e64fc9065fd9266fd9467fd9668fd9869fd9a6afd9b6bfe9d6cfe9f6dfea16efea36ffea571fea772fea973feaa74feac76feae77feb078feb27afeb47bfeb67cfeb77efeb97ffebb81febd82febf84fec185fec287fec488fec68afec88cfeca8dfecc8ffecd90fecf92fed194fed395fed597fed799fed89afdda9cfddc9efddea0fde0a1fde2a3fde3a5fde5a7fde7a9fde9aafdebacfcecaefceeb0fcf0b2fcf2b4fcf4b6fcf6b8fcf7b9fcf9bbfcfbbdfcfdbf")),O3=ec(Be("00000401000501010601010802010a02020c02020e03021004031204031405041706041907051b08051d09061f0a07220b07240c08260d08290e092b10092d110a30120a32140b34150b37160b39180c3c190c3e1b0c411c0c431e0c451f0c48210c4a230c4c240c4f260c51280b53290b552b0b572d0b592f0a5b310a5c320a5e340a5f3609613809623909633b09643d09653e0966400a67420a68440a68450a69470b6a490b6a4a0c6b4c0c6b4d0d6c4f0d6c510e6c520e6d540f6d550f6d57106e59106e5a116e5c126e5d126e5f136e61136e62146e64156e65156e67166e69166e6a176e6c186e6d186e6f196e71196e721a6e741a6e751b6e771c6d781c6d7a1d6d7c1d6d7d1e6d7f1e6c801f6c82206c84206b85216b87216b88226a8a226a8c23698d23698f24699025689225689326679526679727669827669a28659b29649d29649f2a63a02a63a22b62a32c61a52c60a62d60a82e5fa92e5eab2f5ead305dae305cb0315bb1325ab3325ab43359b63458b73557b93556ba3655bc3754bd3853bf3952c03a51c13a50c33b4fc43c4ec63d4dc73e4cc83f4bca404acb4149cc4248ce4347cf4446d04545d24644d34743d44842d54a41d74b3fd84c3ed94d3dda4e3cdb503bdd513ade5238df5337e05536e15635e25734e35933e45a31e55c30e65d2fe75e2ee8602de9612bea632aeb6429eb6628ec6726ed6925ee6a24ef6c23ef6e21f06f20f1711ff1731df2741cf3761bf37819f47918f57b17f57d15f67e14f68013f78212f78410f8850ff8870ef8890cf98b0bf98c0af98e09fa9008fa9207fa9407fb9606fb9706fb9906fb9b06fb9d07fc9f07fca108fca309fca50afca60cfca80dfcaa0ffcac11fcae12fcb014fcb216fcb418fbb61afbb81dfbba1ffbbc21fbbe23fac026fac228fac42afac62df9c72ff9c932f9cb35f8cd37f8cf3af7d13df7d340f6d543f6d746f5d949f5db4cf4dd4ff4df53f4e156f3e35af3e55df2e661f2e865f2ea69f1ec6df1ed71f1ef75f1f179f2f27df2f482f3f586f3f68af4f88ef5f992f6fa96f8fb9af9fc9dfafda1fcffa4")),D3=ec(Be("0d088710078813078916078a19068c1b068d1d068e20068f2206902406912605912805922a05932c05942e05952f059631059733059735049837049938049a3a049a3c049b3e049c3f049c41049d43039e44039e46039f48039f4903a04b03a14c02a14e02a25002a25102a35302a35502a45601a45801a45901a55b01a55c01a65e01a66001a66100a76300a76400a76600a76700a86900a86a00a86c00a86e00a86f00a87100a87201a87401a87501a87701a87801a87a02a87b02a87d03a87e03a88004a88104a78305a78405a78606a68707a68808a68a09a58b0aa58d0ba58e0ca48f0da4910ea3920fa39410a29511a19613a19814a099159f9a169f9c179e9d189d9e199da01a9ca11b9ba21d9aa31e9aa51f99a62098a72197a82296aa2395ab2494ac2694ad2793ae2892b02991b12a90b22b8fb32c8eb42e8db52f8cb6308bb7318ab83289ba3388bb3488bc3587bd3786be3885bf3984c03a83c13b82c23c81c33d80c43e7fc5407ec6417dc7427cc8437bc9447aca457acb4679cc4778cc4977cd4a76ce4b75cf4c74d04d73d14e72d24f71d35171d45270d5536fd5546ed6556dd7566cd8576bd9586ada5a6ada5b69db5c68dc5d67dd5e66de5f65de6164df6263e06363e16462e26561e26660e3685fe4695ee56a5de56b5de66c5ce76e5be76f5ae87059e97158e97257ea7457eb7556eb7655ec7754ed7953ed7a52ee7b51ef7c51ef7e50f07f4ff0804ef1814df1834cf2844bf3854bf3874af48849f48948f58b47f58c46f68d45f68f44f79044f79143f79342f89441f89540f9973ff9983ef99a3efa9b3dfa9c3cfa9e3bfb9f3afba139fba238fca338fca537fca636fca835fca934fdab33fdac33fdae32fdaf31fdb130fdb22ffdb42ffdb52efeb72dfeb82cfeba2cfebb2bfebd2afebe2afec029fdc229fdc328fdc527fdc627fdc827fdca26fdcb26fccd25fcce25fcd025fcd225fbd324fbd524fbd724fad824fada24f9dc24f9dd25f8df25f8e125f7e225f7e425f6e626f6e826f5e926f5eb27f4ed27f3ee27f3f027f2f227f1f426f1f525f0f724f0f921"));const L3=Object.freeze(Object.defineProperty({__proto__:null,interpolateBlues:m3,interpolateBrBG:q6,interpolateBuGn:r3,interpolateBuPu:i3,interpolateCividis:w3,interpolateCool:S3,interpolateCubehelixDefault:x3,interpolateGnBu:a3,interpolateGreens:p3,interpolateGreys:v3,interpolateInferno:O3,interpolateMagma:N3,interpolateOrRd:o3,interpolateOranges:y3,interpolatePRGn:j6,interpolatePiYG:J6,interpolatePlasma:D3,interpolatePuBu:l3,interpolatePuBuGn:s3,interpolatePuOr:Z6,interpolatePuRd:c3,interpolatePurples:b3,interpolateRainbow:E3,interpolateRdBu:K6,interpolateRdGy:Q6,interpolateRdPu:u3,interpolateRdYlBu:e3,interpolateRdYlGn:t3,interpolateReds:_3,interpolateSinebow:R3,interpolateSpectral:n3,interpolateTurbo:A_,interpolateViridis:M3,interpolateWarm:T3,interpolateYlGn:h3,interpolateYlGnBu:f3,interpolateYlOrBr:d3,interpolateYlOrRd:g3,schemeAccent:V6,schemeBlues:w_,schemeBrBG:e_,schemeBuGn:c_,schemeBuPu:u_,schemeCategory10:F6,schemeDark2:W6,schemeGnBu:f_,schemeGreens:x_,schemeGreys:T_,schemeObservable10:$6,schemeOrRd:h_,schemeOranges:C_,schemePRGn:t_,schemePaired:z6,schemePastel1:H6,schemePastel2:U6,schemePiYG:n_,schemePuBu:g_,schemePuBuGn:d_,schemePuOr:r_,schemePuRd:m_,schemePurples:S_,schemeRdBu:i_,schemeRdGy:a_,schemeRdPu:p_,schemeRdYlBu:o_,schemeRdYlGn:s_,schemeReds:E_,schemeSet1:Y6,schemeSet2:X6,schemeSet3:G6,schemeSpectral:l_,schemeTableau10:Qb,schemeYlGn:b_,schemeYlGnBu:v_,schemeYlOrBr:__,schemeYlOrRd:y_},Symbol.toStringTag,{value:"Module"})),ds=t=>()=>t;function I3(t,{sourceEvent:e,target:n,transform:r,dispatch:i}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:r,enumerable:!0,configurable:!0},_:{value:i}})}function Dn(t,e,n){this.k=t,this.x=e,this.y=n}Dn.prototype={constructor:Dn,scale:function(t){return t===1?this:new Dn(this.k*t,this.x,this.y)},translate:function(t,e){return t===0&e===0?this:new Dn(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var tc=new Dn(1,0,0);R_.prototype=Dn.prototype;function R_(t){for(;!t.__zoom;)if(!(t=t.parentNode))return tc;return t.__zoom}function cu(t){t.stopImmediatePropagation()}function Ra(t){t.preventDefault(),t.stopImmediatePropagation()}function P3(t){return(!t.ctrlKey||t.type==="wheel")&&!t.button}function k3(){var t=this;return t instanceof SVGElement?(t=t.ownerSVGElement||t,t.hasAttribute("viewBox")?(t=t.viewBox.baseVal,[[t.x,t.y],[t.x+t.width,t.y+t.height]]):[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]):[[0,0],[t.clientWidth,t.clientHeight]]}function Ap(){return this.__zoom||tc}function B3(t){return-t.deltaY*(t.deltaMode===1?.05:t.deltaMode?1:.002)*(t.ctrlKey?10:1)}function F3(){return navigator.maxTouchPoints||"ontouchstart"in this}function V3(t,e,n){var r=t.invertX(e[0][0])-n[0][0],i=t.invertX(e[1][0])-n[1][0],a=t.invertY(e[0][1])-n[0][1],o=t.invertY(e[1][1])-n[1][1];return t.translate(i>r?(r+i)/2:Math.min(0,r)||Math.max(0,i),o>a?(a+o)/2:Math.min(0,a)||Math.max(0,o))}function M_(){var t=P3,e=k3,n=V3,r=B3,i=F3,a=[0,1/0],o=[[-1/0,-1/0],[1/0,1/0]],s=250,l=wN,c=mo("start","zoom","end"),f,d,p,x=500,R=150,O=0,A=10;function I($){$.property("__zoom",Ap).on("wheel.zoom",X,{passive:!1}).on("mousedown.zoom",Z).on("dblclick.zoom",ie).filter(i).on("touchstart.zoom",ne).on("touchmove.zoom",J).on("touchend.zoom touchcancel.zoom",K).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}I.transform=function($,te,G,oe){var ge=$.selection?$.selection():$;ge.property("__zoom",Ap),$!==ge?k($,te,G,oe):ge.interrupt().each(function(){W(this,arguments).event(oe).start().zoom(null,typeof te=="function"?te.apply(this,arguments):te).end()})},I.scaleBy=function($,te,G,oe){I.scaleTo($,function(){var ge=this.__zoom.k,he=typeof te=="function"?te.apply(this,arguments):te;return ge*he},G,oe)},I.scaleTo=function($,te,G,oe){I.transform($,function(){var ge=e.apply(this,arguments),he=this.__zoom,pe=G==null?N(ge):typeof G=="function"?G.apply(this,arguments):G,re=he.invert(pe),ue=typeof te=="function"?te.apply(this,arguments):te;return n(D(S(he,ue),pe,re),ge,o)},G,oe)},I.translateBy=function($,te,G,oe){I.transform($,function(){return n(this.__zoom.translate(typeof te=="function"?te.apply(this,arguments):te,typeof G=="function"?G.apply(this,arguments):G),e.apply(this,arguments),o)},null,oe)},I.translateTo=function($,te,G,oe,ge){I.transform($,function(){var he=e.apply(this,arguments),pe=this.__zoom,re=oe==null?N(he):typeof oe=="function"?oe.apply(this,arguments):oe;return n(tc.translate(re[0],re[1]).scale(pe.k).translate(typeof te=="function"?-te.apply(this,arguments):-te,typeof G=="function"?-G.apply(this,arguments):-G),he,o)},oe,ge)};function S($,te){return te=Math.max(a[0],Math.min(a[1],te)),te===$.k?$:new Dn(te,$.x,$.y)}function D($,te,G){var oe=te[0]-G[0]*$.k,ge=te[1]-G[1]*$.k;return oe===$.x&&ge===$.y?$:new Dn($.k,oe,ge)}function N($){return[(+$[0][0]+ +$[1][0])/2,(+$[0][1]+ +$[1][1])/2]}function k($,te,G,oe){$.on("start.zoom",function(){W(this,arguments).event(oe).start()}).on("interrupt.zoom end.zoom",function(){W(this,arguments).event(oe).end()}).tween("zoom",function(){var ge=this,he=arguments,pe=W(ge,he).event(oe),re=e.apply(ge,he),ue=G==null?N(re):typeof G=="function"?G.apply(ge,he):G,de=Math.max(re[1][0]-re[0][0],re[1][1]-re[0][1]),ve=ge.__zoom,Me=typeof te=="function"?te.apply(ge,he):te,Oe=l(ve.invert(ue).concat(de/ve.k),Me.invert(ue).concat(de/Me.k));return function(Ce){if(Ce===1)Ce=Me;else{var Ie=Oe(Ce),me=de/Ie[2];Ce=new Dn(me,ue[0]-Ie[0]*me,ue[1]-Ie[1]*me)}pe.zoom(null,Ce)}})}function W($,te,G){return!G&&$.__zooming||new Y($,te)}function Y($,te){this.that=$,this.args=te,this.active=0,this.sourceEvent=null,this.extent=e.apply($,te),this.taps=0}Y.prototype={event:function($){return $&&(this.sourceEvent=$),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function($,te){return this.mouse&&$!=="mouse"&&(this.mouse[1]=te.invert(this.mouse[0])),this.touch0&&$!=="touch"&&(this.touch0[1]=te.invert(this.touch0[0])),this.touch1&&$!=="touch"&&(this.touch1[1]=te.invert(this.touch1[0])),this.that.__zoom=te,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function($){var te=Nt(this.that).datum();c.call($,this.that,new I3($,{sourceEvent:this.sourceEvent,target:I,transform:this.that.__zoom,dispatch:c}),te)}};function X($,...te){if(!t.apply(this,arguments))return;var G=W(this,te).event($),oe=this.__zoom,ge=Math.max(a[0],Math.min(a[1],oe.k*Math.pow(2,r.apply(this,arguments)))),he=Wn($);if(G.wheel)(G.mouse[0][0]!==he[0]||G.mouse[0][1]!==he[1])&&(G.mouse[1]=oe.invert(G.mouse[0]=he)),clearTimeout(G.wheel);else{if(oe.k===ge)return;G.mouse=[he,oe.invert(he)],Ni(this),G.start()}Ra($),G.wheel=setTimeout(pe,R),G.zoom("mouse",n(D(S(oe,ge),G.mouse[0],G.mouse[1]),G.extent,o));function pe(){G.wheel=null,G.end()}}function Z($,...te){if(p||!t.apply(this,arguments))return;var G=$.currentTarget,oe=W(this,te,!0).event($),ge=Nt($.view).on("mousemove.zoom",ue,!0).on("mouseup.zoom",de,!0),he=Wn($,G),pe=$.clientX,re=$.clientY;Uv($.view),cu($),oe.mouse=[he,this.__zoom.invert(he)],Ni(this),oe.start();function ue(ve){if(Ra(ve),!oe.moved){var Me=ve.clientX-pe,Oe=ve.clientY-re;oe.moved=Me*Me+Oe*Oe>O}oe.event(ve).zoom("mouse",n(D(oe.that.__zoom,oe.mouse[0]=Wn(ve,G),oe.mouse[1]),oe.extent,o))}function de(ve){ge.on("mousemove.zoom mouseup.zoom",null),Yv(ve.view,oe.moved),Ra(ve),oe.event(ve).end()}}function ie($,...te){if(t.apply(this,arguments)){var G=this.__zoom,oe=Wn($.changedTouches?$.changedTouches[0]:$,this),ge=G.invert(oe),he=G.k*($.shiftKey?.5:2),pe=n(D(S(G,he),oe,ge),e.apply(this,te),o);Ra($),s>0?Nt(this).transition().duration(s).call(k,pe,oe,$):Nt(this).call(I.transform,pe,oe,$)}}function ne($,...te){if(t.apply(this,arguments)){var G=$.touches,oe=G.length,ge=W(this,te,$.changedTouches.length===oe).event($),he,pe,re,ue;for(cu($),pe=0;pe<oe;++pe)re=G[pe],ue=Wn(re,this),ue=[ue,this.__zoom.invert(ue),re.identifier],ge.touch0?!ge.touch1&&ge.touch0[2]!==ue[2]&&(ge.touch1=ue,ge.taps=0):(ge.touch0=ue,he=!0,ge.taps=1+!!f);f&&(f=clearTimeout(f)),he&&(ge.taps<2&&(d=ue[0],f=setTimeout(function(){f=null},x)),Ni(this),ge.start())}}function J($,...te){if(this.__zooming){var G=W(this,te).event($),oe=$.changedTouches,ge=oe.length,he,pe,re,ue;for(Ra($),he=0;he<ge;++he)pe=oe[he],re=Wn(pe,this),G.touch0&&G.touch0[2]===pe.identifier?G.touch0[0]=re:G.touch1&&G.touch1[2]===pe.identifier&&(G.touch1[0]=re);if(pe=G.that.__zoom,G.touch1){var de=G.touch0[0],ve=G.touch0[1],Me=G.touch1[0],Oe=G.touch1[1],Ce=(Ce=Me[0]-de[0])*Ce+(Ce=Me[1]-de[1])*Ce,Ie=(Ie=Oe[0]-ve[0])*Ie+(Ie=Oe[1]-ve[1])*Ie;pe=S(pe,Math.sqrt(Ce/Ie)),re=[(de[0]+Me[0])/2,(de[1]+Me[1])/2],ue=[(ve[0]+Oe[0])/2,(ve[1]+Oe[1])/2]}else if(G.touch0)re=G.touch0[0],ue=G.touch0[1];else return;G.zoom("touch",n(D(pe,re,ue),G.extent,o))}}function K($,...te){if(this.__zooming){var G=W(this,te).event($),oe=$.changedTouches,ge=oe.length,he,pe;for(cu($),p&&clearTimeout(p),p=setTimeout(function(){p=null},x),he=0;he<ge;++he)pe=oe[he],G.touch0&&G.touch0[2]===pe.identifier?delete G.touch0:G.touch1&&G.touch1[2]===pe.identifier&&delete G.touch1;if(G.touch1&&!G.touch0&&(G.touch0=G.touch1,delete G.touch1),G.touch0)G.touch0[1]=this.__zoom.invert(G.touch0[0]);else if(G.end(),G.taps===2&&(pe=Wn(pe,this),Math.hypot(d[0]-pe[0],d[1]-pe[1])<A)){var re=Nt(this).on("dblclick.zoom");re&&re.apply(this,arguments)}}}return I.wheelDelta=function($){return arguments.length?(r=typeof $=="function"?$:ds(+$),I):r},I.filter=function($){return arguments.length?(t=typeof $=="function"?$:ds(!!$),I):t},I.touchable=function($){return arguments.length?(i=typeof $=="function"?$:ds(!!$),I):i},I.extent=function($){return arguments.length?(e=typeof $=="function"?$:ds([[+$[0][0],+$[0][1]],[+$[1][0],+$[1][1]]]),I):e},I.scaleExtent=function($){return arguments.length?(a[0]=+$[0],a[1]=+$[1],I):[a[0],a[1]]},I.translateExtent=function($){return arguments.length?(o[0][0]=+$[0][0],o[1][0]=+$[1][0],o[0][1]=+$[0][1],o[1][1]=+$[1][1],I):[[o[0][0],o[0][1]],[o[1][0],o[1][1]]]},I.constrain=function($){return arguments.length?(n=$,I):n},I.duration=function($){return arguments.length?(s=+$,I):s},I.interpolate=function($){return arguments.length?(l=$,I):l},I.on=function(){var $=c.on.apply(c,arguments);return $===c?I:$},I.clickDistance=function($){return arguments.length?(O=($=+$)*$,I):Math.sqrt(O)},I.tapDistance=function($){return arguments.length?(A=+$,I):A},I}const W3=Object.freeze(Object.defineProperty({__proto__:null,ZoomTransform:Dn,zoom:M_,zoomIdentity:tc,zoomTransform:R_},Symbol.toStringTag,{value:"Module"}));var Oa={exports:{}};const $3=Sn(QA),z3=Sn(B6),H3=Sn(ML),U3=Sn(YD),Y3=Sn(_D),X3=Sn(ZO),G3=Sn(VM);var ef=Math.PI,tf=2*ef,Zr=1e-6,q3=tf-Zr;function nf(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function _o(){return new nf}nf.prototype=_o.prototype={constructor:nf,moveTo:function(t,e){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+e)},closePath:function(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(t,e){this._+="L"+(this._x1=+t)+","+(this._y1=+e)},quadraticCurveTo:function(t,e,n,r){this._+="Q"+ +t+","+ +e+","+(this._x1=+n)+","+(this._y1=+r)},bezierCurveTo:function(t,e,n,r,i,a){this._+="C"+ +t+","+ +e+","+ +n+","+ +r+","+(this._x1=+i)+","+(this._y1=+a)},arcTo:function(t,e,n,r,i){t=+t,e=+e,n=+n,r=+r,i=+i;var a=this._x1,o=this._y1,s=n-t,l=r-e,c=a-t,f=o-e,d=c*c+f*f;if(i<0)throw new Error("negative radius: "+i);if(this._x1===null)this._+="M"+(this._x1=t)+","+(this._y1=e);else if(d>Zr)if(!(Math.abs(f*s-l*c)>Zr)||!i)this._+="L"+(this._x1=t)+","+(this._y1=e);else{var p=n-a,x=r-o,R=s*s+l*l,O=p*p+x*x,A=Math.sqrt(R),I=Math.sqrt(d),S=i*Math.tan((ef-Math.acos((R+d-O)/(2*A*I)))/2),D=S/I,N=S/A;Math.abs(D-1)>Zr&&(this._+="L"+(t+D*c)+","+(e+D*f)),this._+="A"+i+","+i+",0,0,"+ +(f*p>c*x)+","+(this._x1=t+N*s)+","+(this._y1=e+N*l)}},arc:function(t,e,n,r,i,a){t=+t,e=+e,n=+n,a=!!a;var o=n*Math.cos(r),s=n*Math.sin(r),l=t+o,c=e+s,f=1^a,d=a?r-i:i-r;if(n<0)throw new Error("negative radius: "+n);this._x1===null?this._+="M"+l+","+c:(Math.abs(this._x1-l)>Zr||Math.abs(this._y1-c)>Zr)&&(this._+="L"+l+","+c),n&&(d<0&&(d=d%tf+tf),d>q3?this._+="A"+n+","+n+",0,1,"+f+","+(t-o)+","+(e-s)+"A"+n+","+n+",0,1,"+f+","+(this._x1=l)+","+(this._y1=c):d>Zr&&(this._+="A"+n+","+n+",0,"+ +(d>=ef)+","+f+","+(this._x1=t+n*Math.cos(i))+","+(this._y1=e+n*Math.sin(i))))},rect:function(t,e,n,r){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+e)+"h"+ +n+"v"+ +r+"h"+-n+"Z"},toString:function(){return this._}};function Ue(t){return function(){return t}}var Qt=1e-12,mi=Math.PI,dl=mi/2,kr=2*mi;function j3(t){return t.innerRadius}function J3(t){return t.outerRadius}function Z3(t){return t.startAngle}function K3(t){return t.endAngle}function Q3(t){return t&&t.padAngle}function Rp(t){return t>=1?dl:t<=-1?-dl:Math.asin(t)}function eI(t,e,n,r,i,a,o,s){var l=n-t,c=r-e,f=o-i,d=s-a,p=(f*(e-a)-d*(t-i))/(d*l-f*c);return[t+p*l,e+p*c]}function gs(t,e,n,r,i,a,o){var s=t-n,l=e-r,c=(o?a:-a)/Math.sqrt(s*s+l*l),f=c*l,d=-c*s,p=t+f,x=e+d,R=n+f,O=r+d,A=(p+R)/2,I=(x+O)/2,S=R-p,D=O-x,N=S*S+D*D,k=i-a,W=p*O-R*x,Y=(D<0?-1:1)*Math.sqrt(Math.max(0,k*k*N-W*W)),X=(W*D-S*Y)/N,Z=(-W*S-D*Y)/N,ie=(W*D+S*Y)/N,ne=(-W*S+D*Y)/N,J=X-A,K=Z-I,$=ie-A,te=ne-I;return J*J+K*K>$*$+te*te&&(X=ie,Z=ne),{cx:X,cy:Z,x01:-f,y01:-d,x11:X*(i/k-1),y11:Z*(i/k-1)}}function N_(){var t=j3,e=J3,n=Ue(0),r=null,i=Z3,a=K3,o=Q3,s=null;function l(){var c,f,d=+t.apply(this,arguments),p=+e.apply(this,arguments),x=i.apply(this,arguments)-dl,R=a.apply(this,arguments)-dl,O=Math.abs(R-x),A=R>x;if(s||(s=c=_o()),p<d&&(f=p,p=d,d=f),!(p>Qt))s.moveTo(0,0);else if(O>kr-Qt)s.moveTo(p*Math.cos(x),p*Math.sin(x)),s.arc(0,0,p,x,R,!A),d>Qt&&(s.moveTo(d*Math.cos(R),d*Math.sin(R)),s.arc(0,0,d,R,x,A));else{var I=x,S=R,D=x,N=R,k=O,W=O,Y=o.apply(this,arguments)/2,X=Y>Qt&&(r?+r.apply(this,arguments):Math.sqrt(d*d+p*p)),Z=Math.min(Math.abs(p-d)/2,+n.apply(this,arguments)),ie=Z,ne=Z,J,K;if(X>Qt){var $=Rp(X/d*Math.sin(Y)),te=Rp(X/p*Math.sin(Y));(k-=$*2)>Qt?($*=A?1:-1,D+=$,N-=$):(k=0,D=N=(x+R)/2),(W-=te*2)>Qt?(te*=A?1:-1,I+=te,S-=te):(W=0,I=S=(x+R)/2)}var G=p*Math.cos(I),oe=p*Math.sin(I),ge=d*Math.cos(N),he=d*Math.sin(N);if(Z>Qt){var pe=p*Math.cos(S),re=p*Math.sin(S),ue=d*Math.cos(D),de=d*Math.sin(D);if(O<mi){var ve=k>Qt?eI(G,oe,ue,de,pe,re,ge,he):[ge,he],Me=G-ve[0],Oe=oe-ve[1],Ce=pe-ve[0],Ie=re-ve[1],me=1/Math.sin(Math.acos((Me*Ce+Oe*Ie)/(Math.sqrt(Me*Me+Oe*Oe)*Math.sqrt(Ce*Ce+Ie*Ie)))/2),Ee=Math.sqrt(ve[0]*ve[0]+ve[1]*ve[1]);ie=Math.min(Z,(d-Ee)/(me-1)),ne=Math.min(Z,(p-Ee)/(me+1))}}W>Qt?ne>Qt?(J=gs(ue,de,G,oe,p,ne,A),K=gs(pe,re,ge,he,p,ne,A),s.moveTo(J.cx+J.x01,J.cy+J.y01),ne<Z?s.arc(J.cx,J.cy,ne,Math.atan2(J.y01,J.x01),Math.atan2(K.y01,K.x01),!A):(s.arc(J.cx,J.cy,ne,Math.atan2(J.y01,J.x01),Math.atan2(J.y11,J.x11),!A),s.arc(0,0,p,Math.atan2(J.cy+J.y11,J.cx+J.x11),Math.atan2(K.cy+K.y11,K.cx+K.x11),!A),s.arc(K.cx,K.cy,ne,Math.atan2(K.y11,K.x11),Math.atan2(K.y01,K.x01),!A))):(s.moveTo(G,oe),s.arc(0,0,p,I,S,!A)):s.moveTo(G,oe),!(d>Qt)||!(k>Qt)?s.lineTo(ge,he):ie>Qt?(J=gs(ge,he,pe,re,d,-ie,A),K=gs(G,oe,ue,de,d,-ie,A),s.lineTo(J.cx+J.x01,J.cy+J.y01),ie<Z?s.arc(J.cx,J.cy,ie,Math.atan2(J.y01,J.x01),Math.atan2(K.y01,K.x01),!A):(s.arc(J.cx,J.cy,ie,Math.atan2(J.y01,J.x01),Math.atan2(J.y11,J.x11),!A),s.arc(0,0,d,Math.atan2(J.cy+J.y11,J.cx+J.x11),Math.atan2(K.cy+K.y11,K.cx+K.x11),A),s.arc(K.cx,K.cy,ie,Math.atan2(K.y11,K.x11),Math.atan2(K.y01,K.x01),!A))):s.arc(0,0,d,N,D,A)}if(s.closePath(),c)return s=null,c+""||null}return l.centroid=function(){var c=(+t.apply(this,arguments)+ +e.apply(this,arguments))/2,f=(+i.apply(this,arguments)+ +a.apply(this,arguments))/2-mi/2;return[Math.cos(f)*c,Math.sin(f)*c]},l.innerRadius=function(c){return arguments.length?(t=typeof c=="function"?c:Ue(+c),l):t},l.outerRadius=function(c){return arguments.length?(e=typeof c=="function"?c:Ue(+c),l):e},l.cornerRadius=function(c){return arguments.length?(n=typeof c=="function"?c:Ue(+c),l):n},l.padRadius=function(c){return arguments.length?(r=c==null?null:typeof c=="function"?c:Ue(+c),l):r},l.startAngle=function(c){return arguments.length?(i=typeof c=="function"?c:Ue(+c),l):i},l.endAngle=function(c){return arguments.length?(a=typeof c=="function"?c:Ue(+c),l):a},l.padAngle=function(c){return arguments.length?(o=typeof c=="function"?c:Ue(+c),l):o},l.context=function(c){return arguments.length?(s=c??null,l):s},l}function O_(t){this._context=t}O_.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e);break}}};function yo(t){return new O_(t)}function D_(t){return t[0]}function L_(t){return t[1]}function nc(){var t=D_,e=L_,n=Ue(!0),r=null,i=yo,a=null;function o(s){var l,c=s.length,f,d=!1,p;for(r==null&&(a=i(p=_o())),l=0;l<=c;++l)!(l<c&&n(f=s[l],l,s))===d&&((d=!d)?a.lineStart():a.lineEnd()),d&&a.point(+t(f,l,s),+e(f,l,s));if(p)return a=null,p+""||null}return o.x=function(s){return arguments.length?(t=typeof s=="function"?s:Ue(+s),o):t},o.y=function(s){return arguments.length?(e=typeof s=="function"?s:Ue(+s),o):e},o.defined=function(s){return arguments.length?(n=typeof s=="function"?s:Ue(!!s),o):n},o.curve=function(s){return arguments.length?(i=s,r!=null&&(a=i(r)),o):i},o.context=function(s){return arguments.length?(s==null?r=a=null:a=i(r=s),o):r},o}function I_(){var t=D_,e=null,n=Ue(0),r=L_,i=Ue(!0),a=null,o=yo,s=null;function l(f){var d,p,x,R=f.length,O,A=!1,I,S=new Array(R),D=new Array(R);for(a==null&&(s=o(I=_o())),d=0;d<=R;++d){if(!(d<R&&i(O=f[d],d,f))===A)if(A=!A)p=d,s.areaStart(),s.lineStart();else{for(s.lineEnd(),s.lineStart(),x=d-1;x>=p;--x)s.point(S[x],D[x]);s.lineEnd(),s.areaEnd()}A&&(S[d]=+t(O,d,f),D[d]=+n(O,d,f),s.point(e?+e(O,d,f):S[d],r?+r(O,d,f):D[d]))}if(I)return s=null,I+""||null}function c(){return nc().defined(i).curve(o).context(a)}return l.x=function(f){return arguments.length?(t=typeof f=="function"?f:Ue(+f),e=null,l):t},l.x0=function(f){return arguments.length?(t=typeof f=="function"?f:Ue(+f),l):t},l.x1=function(f){return arguments.length?(e=f==null?null:typeof f=="function"?f:Ue(+f),l):e},l.y=function(f){return arguments.length?(n=typeof f=="function"?f:Ue(+f),r=null,l):n},l.y0=function(f){return arguments.length?(n=typeof f=="function"?f:Ue(+f),l):n},l.y1=function(f){return arguments.length?(r=f==null?null:typeof f=="function"?f:Ue(+f),l):r},l.lineX0=l.lineY0=function(){return c().x(t).y(n)},l.lineY1=function(){return c().x(t).y(r)},l.lineX1=function(){return c().x(e).y(n)},l.defined=function(f){return arguments.length?(i=typeof f=="function"?f:Ue(!!f),l):i},l.curve=function(f){return arguments.length?(o=f,a!=null&&(s=o(a)),l):o},l.context=function(f){return arguments.length?(f==null?a=s=null:s=o(a=f),l):a},l}function tI(t,e){return e<t?-1:e>t?1:e>=t?0:NaN}function nI(t){return t}function rI(){var t=nI,e=tI,n=null,r=Ue(0),i=Ue(kr),a=Ue(0);function o(s){var l,c=s.length,f,d,p=0,x=new Array(c),R=new Array(c),O=+r.apply(this,arguments),A=Math.min(kr,Math.max(-kr,i.apply(this,arguments)-O)),I,S=Math.min(Math.abs(A)/c,a.apply(this,arguments)),D=S*(A<0?-1:1),N;for(l=0;l<c;++l)(N=R[x[l]=l]=+t(s[l],l,s))>0&&(p+=N);for(e!=null?x.sort(function(k,W){return e(R[k],R[W])}):n!=null&&x.sort(function(k,W){return n(s[k],s[W])}),l=0,d=p?(A-c*D)/p:0;l<c;++l,O=I)f=x[l],N=R[f],I=O+(N>0?N*d:0)+D,R[f]={data:s[f],index:l,value:N,startAngle:O,endAngle:I,padAngle:S};return R}return o.value=function(s){return arguments.length?(t=typeof s=="function"?s:Ue(+s),o):t},o.sortValues=function(s){return arguments.length?(e=s,n=null,o):e},o.sort=function(s){return arguments.length?(n=s,e=null,o):n},o.startAngle=function(s){return arguments.length?(r=typeof s=="function"?s:Ue(+s),o):r},o.endAngle=function(s){return arguments.length?(i=typeof s=="function"?s:Ue(+s),o):i},o.padAngle=function(s){return arguments.length?(a=typeof s=="function"?s:Ue(+s),o):a},o}var P_=ch(yo);function k_(t){this._curve=t}k_.prototype={areaStart:function(){this._curve.areaStart()},areaEnd:function(){this._curve.areaEnd()},lineStart:function(){this._curve.lineStart()},lineEnd:function(){this._curve.lineEnd()},point:function(t,e){this._curve.point(e*Math.sin(t),e*-Math.cos(t))}};function ch(t){function e(n){return new k_(t(n))}return e._curve=t,e}function Da(t){var e=t.curve;return t.angle=t.x,delete t.x,t.radius=t.y,delete t.y,t.curve=function(n){return arguments.length?e(ch(n)):e()._curve},t}function iI(){return Da(nc().curve(P_))}function aI(){var t=I_().curve(P_),e=t.curve,n=t.lineX0,r=t.lineX1,i=t.lineY0,a=t.lineY1;return t.angle=t.x,delete t.x,t.startAngle=t.x0,delete t.x0,t.endAngle=t.x1,delete t.x1,t.radius=t.y,delete t.y,t.innerRadius=t.y0,delete t.y0,t.outerRadius=t.y1,delete t.y1,t.lineStartAngle=function(){return Da(n())},delete t.lineX0,t.lineEndAngle=function(){return Da(r())},delete t.lineX1,t.lineInnerRadius=function(){return Da(i())},delete t.lineY0,t.lineOuterRadius=function(){return Da(a())},delete t.lineY1,t.curve=function(o){return arguments.length?e(ch(o)):e()._curve},t}const uh={draw:function(t,e){var n=Math.sqrt(e/mi);t.moveTo(n,0),t.arc(0,0,n,0,kr)}},B_={draw:function(t,e){var n=Math.sqrt(e/5)/2;t.moveTo(-3*n,-n),t.lineTo(-n,-n),t.lineTo(-n,-3*n),t.lineTo(n,-3*n),t.lineTo(n,-n),t.lineTo(3*n,-n),t.lineTo(3*n,n),t.lineTo(n,n),t.lineTo(n,3*n),t.lineTo(-n,3*n),t.lineTo(-n,n),t.lineTo(-3*n,n),t.closePath()}};var F_=Math.sqrt(1/3),oI=F_*2;const V_={draw:function(t,e){var n=Math.sqrt(e/oI),r=n*F_;t.moveTo(0,-n),t.lineTo(r,0),t.lineTo(0,n),t.lineTo(-r,0),t.closePath()}};var sI=.8908130915292852,W_=Math.sin(mi/10)/Math.sin(7*mi/10),lI=Math.sin(kr/10)*W_,cI=-Math.cos(kr/10)*W_;const $_={draw:function(t,e){var n=Math.sqrt(e*sI),r=lI*n,i=cI*n;t.moveTo(0,-n),t.lineTo(r,i);for(var a=1;a<5;++a){var o=kr*a/5,s=Math.cos(o),l=Math.sin(o);t.lineTo(l*n,-s*n),t.lineTo(s*r-l*i,l*r+s*i)}t.closePath()}},z_={draw:function(t,e){var n=Math.sqrt(e),r=-n/2;t.rect(r,r,n,n)}};var uu=Math.sqrt(3);const H_={draw:function(t,e){var n=-Math.sqrt(e/(uu*3));t.moveTo(0,n*2),t.lineTo(-uu*n,-n),t.lineTo(uu*n,-n),t.closePath()}};var Rn=-.5,Mn=Math.sqrt(3)/2,rf=1/Math.sqrt(12),uI=(rf/2+1)*3;const U_={draw:function(t,e){var n=Math.sqrt(e/uI),r=n/2,i=n*rf,a=r,o=n*rf+n,s=-a,l=o;t.moveTo(r,i),t.lineTo(a,o),t.lineTo(s,l),t.lineTo(Rn*r-Mn*i,Mn*r+Rn*i),t.lineTo(Rn*a-Mn*o,Mn*a+Rn*o),t.lineTo(Rn*s-Mn*l,Mn*s+Rn*l),t.lineTo(Rn*r+Mn*i,Rn*i-Mn*r),t.lineTo(Rn*a+Mn*o,Rn*o-Mn*a),t.lineTo(Rn*s+Mn*l,Rn*l-Mn*s),t.closePath()}};var fI=[uh,B_,V_,z_,$_,H_,U_];function hI(){var t=Ue(uh),e=Ue(64),n=null;function r(){var i;if(n||(n=i=_o()),t.apply(this,arguments).draw(n,+e.apply(this,arguments)),i)return n=null,i+""||null}return r.type=function(i){return arguments.length?(t=typeof i=="function"?i:Ue(i),r):t},r.size=function(i){return arguments.length?(e=typeof i=="function"?i:Ue(+i),r):e},r.context=function(i){return arguments.length?(n=i??null,r):n},r}function Vr(){}function gl(t,e,n){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+n)/6)}function rc(t){this._context=t}rc.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:gl(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:gl(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function dI(t){return new rc(t)}function Y_(t){this._context=t}Y_.prototype={areaStart:Vr,areaEnd:Vr,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x2=t,this._y2=e;break;case 1:this._point=2,this._x3=t,this._y3=e;break;case 2:this._point=3,this._x4=t,this._y4=e,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+e)/6);break;default:gl(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function gI(t){return new Y_(t)}function X_(t){this._context=t}X_.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+t)/6,r=(this._y0+4*this._y1+e)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:gl(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function mI(t){return new X_(t)}function G_(t,e){this._basis=new rc(t),this._beta=e}G_.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var t=this._x,e=this._y,n=t.length-1;if(n>0)for(var r=t[0],i=e[0],a=t[n]-r,o=e[n]-i,s=-1,l;++s<=n;)l=s/n,this._basis.point(this._beta*t[s]+(1-this._beta)*(r+l*a),this._beta*e[s]+(1-this._beta)*(i+l*o));this._x=this._y=null,this._basis.lineEnd()},point:function(t,e){this._x.push(+t),this._y.push(+e)}};const pI=function t(e){function n(r){return e===1?new rc(r):new G_(r,e)}return n.beta=function(r){return t(+r)},n}(.85);function ml(t,e,n){t._context.bezierCurveTo(t._x1+t._k*(t._x2-t._x0),t._y1+t._k*(t._y2-t._y0),t._x2+t._k*(t._x1-e),t._y2+t._k*(t._y1-n),t._x2,t._y2)}function fh(t,e){this._context=t,this._k=(1-e)/6}fh.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:ml(this,this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2,this._x1=t,this._y1=e;break;case 2:this._point=3;default:ml(this,t,e);break}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const vI=function t(e){function n(r){return new fh(r,e)}return n.tension=function(r){return t(+r)},n}(0);function hh(t,e){this._context=t,this._k=(1-e)/6}hh.prototype={areaStart:Vr,areaEnd:Vr,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x3=t,this._y3=e;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=e);break;case 2:this._point=3,this._x5=t,this._y5=e;break;default:ml(this,t,e);break}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const bI=function t(e){function n(r){return new hh(r,e)}return n.tension=function(r){return t(+r)},n}(0);function dh(t,e){this._context=t,this._k=(1-e)/6}dh.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:ml(this,t,e);break}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const _I=function t(e){function n(r){return new dh(r,e)}return n.tension=function(r){return t(+r)},n}(0);function gh(t,e,n){var r=t._x1,i=t._y1,a=t._x2,o=t._y2;if(t._l01_a>Qt){var s=2*t._l01_2a+3*t._l01_a*t._l12_a+t._l12_2a,l=3*t._l01_a*(t._l01_a+t._l12_a);r=(r*s-t._x0*t._l12_2a+t._x2*t._l01_2a)/l,i=(i*s-t._y0*t._l12_2a+t._y2*t._l01_2a)/l}if(t._l23_a>Qt){var c=2*t._l23_2a+3*t._l23_a*t._l12_a+t._l12_2a,f=3*t._l23_a*(t._l23_a+t._l12_a);a=(a*c+t._x1*t._l23_2a-e*t._l12_2a)/f,o=(o*c+t._y1*t._l23_2a-n*t._l12_2a)/f}t._context.bezierCurveTo(r,i,a,o,t._x2,t._y2)}function q_(t,e){this._context=t,this._alpha=e}q_.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,r=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3;default:gh(this,t,e);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const j_=function t(e){function n(r){return e?new q_(r,e):new fh(r,0)}return n.alpha=function(r){return t(+r)},n}(.5);function J_(t,e){this._context=t,this._alpha=e}J_.prototype={areaStart:Vr,areaEnd:Vr,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,r=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=t,this._y3=e;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=e);break;case 2:this._point=3,this._x5=t,this._y5=e;break;default:gh(this,t,e);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const yI=function t(e){function n(r){return e?new J_(r,e):new hh(r,0)}return n.alpha=function(r){return t(+r)},n}(.5);function Z_(t,e){this._context=t,this._alpha=e}Z_.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,r=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:gh(this,t,e);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const wI=function t(e){function n(r){return e?new Z_(r,e):new dh(r,0)}return n.alpha=function(r){return t(+r)},n}(.5);function K_(t){this._context=t}K_.prototype={areaStart:Vr,areaEnd:Vr,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,e){t=+t,e=+e,this._point?this._context.lineTo(t,e):(this._point=1,this._context.moveTo(t,e))}};function xI(t){return new K_(t)}function Mp(t){return t<0?-1:1}function Np(t,e,n){var r=t._x1-t._x0,i=e-t._x1,a=(t._y1-t._y0)/(r||i<0&&-0),o=(n-t._y1)/(i||r<0&&-0),s=(a*i+o*r)/(r+i);return(Mp(a)+Mp(o))*Math.min(Math.abs(a),Math.abs(o),.5*Math.abs(s))||0}function Op(t,e){var n=t._x1-t._x0;return n?(3*(t._y1-t._y0)/n-e)/2:e}function fu(t,e,n){var r=t._x0,i=t._y0,a=t._x1,o=t._y1,s=(a-r)/3;t._context.bezierCurveTo(r+s,i+s*e,a-s,o-s*n,a,o)}function pl(t){this._context=t}pl.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:fu(this,this._t0,Op(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var n=NaN;if(t=+t,e=+e,!(t===this._x1&&e===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,fu(this,Op(this,n=Np(this,t,e)),n);break;default:fu(this,this._t0,n=Np(this,t,e));break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=n}}};function Q_(t){this._context=new ey(t)}(Q_.prototype=Object.create(pl.prototype)).point=function(t,e){pl.prototype.point.call(this,e,t)};function ey(t){this._context=t}ey.prototype={moveTo:function(t,e){this._context.moveTo(e,t)},closePath:function(){this._context.closePath()},lineTo:function(t,e){this._context.lineTo(e,t)},bezierCurveTo:function(t,e,n,r,i,a){this._context.bezierCurveTo(e,t,r,n,a,i)}};function TI(t){return new pl(t)}function SI(t){return new Q_(t)}function ty(t){this._context=t}ty.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,e=this._y,n=t.length;if(n)if(this._line?this._context.lineTo(t[0],e[0]):this._context.moveTo(t[0],e[0]),n===2)this._context.lineTo(t[1],e[1]);else for(var r=Dp(t),i=Dp(e),a=0,o=1;o<n;++a,++o)this._context.bezierCurveTo(r[0][a],i[0][a],r[1][a],i[1][a],t[o],e[o]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,e){this._x.push(+t),this._y.push(+e)}};function Dp(t){var e,n=t.length-1,r,i=new Array(n),a=new Array(n),o=new Array(n);for(i[0]=0,a[0]=2,o[0]=t[0]+2*t[1],e=1;e<n-1;++e)i[e]=1,a[e]=4,o[e]=4*t[e]+2*t[e+1];for(i[n-1]=2,a[n-1]=7,o[n-1]=8*t[n-1]+t[n],e=1;e<n;++e)r=i[e]/a[e-1],a[e]-=r,o[e]-=r*o[e-1];for(i[n-1]=o[n-1]/a[n-1],e=n-2;e>=0;--e)i[e]=(o[e]-i[e+1])/a[e];for(a[n-1]=(t[n]+i[n-1])/2,e=0;e<n-1;++e)a[e]=2*t[e+1]-i[e+1];return[i,a]}function EI(t){return new ty(t)}function ic(t,e){this._context=t,this._t=e}ic.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(t,e);else{var n=this._x*(1-this._t)+t*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,e)}break}}this._x=t,this._y=e}};function CI(t){return new ic(t,.5)}function AI(t){return new ic(t,0)}function RI(t){return new ic(t,1)}var Lp=Array.prototype.slice;function qi(t,e){if((a=t.length)>1)for(var n=1,r,i=t[e[0]],a,o=i.length;n<a;++n){r=i,i=t[e[n]];for(var s=0;s<o;++s)i[s][1]+=i[s][0]=isNaN(r[s][1])?r[s][0]:r[s][1]}}function ji(t){for(var e=t.length,n=new Array(e);--e>=0;)n[e]=e;return n}function MI(t,e){return t[e]}function NI(){var t=Ue([]),e=ji,n=qi,r=MI;function i(a){var o=t.apply(this,arguments),s,l=a.length,c=o.length,f=new Array(c),d;for(s=0;s<c;++s){for(var p=o[s],x=f[s]=new Array(l),R=0,O;R<l;++R)x[R]=O=[0,+r(a[R],p,R,a)],O.data=a[R];x.key=p}for(s=0,d=e(f);s<c;++s)f[d[s]].index=s;return n(f,d),f}return i.keys=function(a){return arguments.length?(t=typeof a=="function"?a:Ue(Lp.call(a)),i):t},i.value=function(a){return arguments.length?(r=typeof a=="function"?a:Ue(+a),i):r},i.order=function(a){return arguments.length?(e=a==null?ji:typeof a=="function"?a:Ue(Lp.call(a)),i):e},i.offset=function(a){return arguments.length?(n=a??qi,i):n},i}function OI(t,e){if((r=t.length)>0){for(var n,r,i=0,a=t[0].length,o;i<a;++i){for(o=n=0;n<r;++n)o+=t[n][i][1]||0;if(o)for(n=0;n<r;++n)t[n][i][1]/=o}qi(t,e)}}function DI(t,e){if((i=t.length)>0){for(var n=0,r=t[e[0]],i,a=r.length;n<a;++n){for(var o=0,s=0;o<i;++o)s+=t[o][n][1]||0;r[n][1]+=r[n][0]=-s/2}qi(t,e)}}function LI(t,e){if(!(!((o=t.length)>0)||!((a=(i=t[e[0]]).length)>0))){for(var n=0,r=1,i,a,o;r<a;++r){for(var s=0,l=0,c=0;s<o;++s){for(var f=t[e[s]],d=f[r][1]||0,p=f[r-1][1]||0,x=(d-p)/2,R=0;R<s;++R){var O=t[e[R]],A=O[r][1]||0,I=O[r-1][1]||0;x+=A-I}l+=d,c+=x*d}i[r-1][1]+=i[r-1][0]=n,l&&(n-=c/l)}i[r-1][1]+=i[r-1][0]=n,qi(t,e)}}function ny(t){var e=t.map(ry);return ji(t).sort(function(n,r){return e[n]-e[r]})}function ry(t){for(var e=0,n=-1,r=t.length,i;++n<r;)(i=+t[n][1])&&(e+=i);return e}function II(t){return ny(t).reverse()}function PI(t){var e=t.length,n,r,i=t.map(ry),a=ji(t).sort(function(f,d){return i[d]-i[f]}),o=0,s=0,l=[],c=[];for(n=0;n<e;++n)r=a[n],o<s?(o+=i[r],l.push(r)):(s+=i[r],c.push(r));return c.reverse().concat(l)}function kI(t){return ji(t).reverse()}const BI=Object.freeze(Object.defineProperty({__proto__:null,arc:N_,area:I_,curveBasis:dI,curveBasisClosed:gI,curveBasisOpen:mI,curveBundle:pI,curveCardinal:vI,curveCardinalClosed:bI,curveCardinalOpen:_I,curveCatmullRom:j_,curveCatmullRomClosed:yI,curveCatmullRomOpen:wI,curveLinear:yo,curveLinearClosed:xI,curveMonotoneX:TI,curveMonotoneY:SI,curveNatural:EI,curveStep:CI,curveStepAfter:RI,curveStepBefore:AI,line:nc,pie:rI,radialArea:aI,radialLine:iI,stack:NI,stackOffsetExpand:OI,stackOffsetNone:qi,stackOffsetSilhouette:DI,stackOffsetWiggle:LI,stackOrderAscending:ny,stackOrderDescending:II,stackOrderInsideOut:PI,stackOrderNone:ji,stackOrderReverse:kI,symbol:hI,symbolCircle:uh,symbolCross:B_,symbolDiamond:V_,symbolSquare:z_,symbolStar:$_,symbolTriangle:H_,symbolWye:U_,symbols:fI},Symbol.toStringTag,{value:"Module"})),FI=Sn(BI),VI=Sn(L3),WI=Sn(rR),$I=Sn(GO),zI=Sn(W3);var HI=Oa.exports,Ip;function UI(){return Ip||(Ip=1,function(t,e){(function(n,r){r(e,$3,z3,H3,U3,Y3,X3,G3,FI,VI,WI,$I,zI)})(HI,function(n,r,i,a,o,s,l,c,f,d,p,x,R){var O=function(u,h,g){var v=h[g];if(typeof v!="function")throw new Error("Attempt to rebind ".concat(g," which isn't a function on the source object"));return function(){for(var y=arguments.length,w=new Array(y),m=0;m<y;m++)w[m]=arguments[m];var b=v.apply(h,w);return b===h?u:b}},A=function(u,h){for(var g=arguments.length,v=new Array(g>2?g-2:0),y=2;y<g;y++)v[y-2]=arguments[y];for(var w=0,m=v;w<m.length;w++){var b=m[w];u[b]=O(u,h,b)}return u},I=function(h){return function(g){return h.reduce(function(v,y){return v&&y(v)},g)}},S=function(u,h){for(var g=arguments.length,v=new Array(g>2?g-2:0),y=2;y<g;y++)v[y-2]=arguments[y];for(var w=I(v),m=0,b=Object.keys(h);m<b.length;m++){var _=b[m],T=w(_);T&&(u[T]=O(u,h,_))}return u},D=function(u){return u.map(function(h){return typeof h=="string"?new RegExp("^".concat(h,"$")):h})},N=function(){for(var u=arguments.length,h=new Array(u),g=0;g<u;g++)h[g]=arguments[g];return h=D(h),function(v){return h.every(function(y){return!y.test(v)})&&v}},k=function(){for(var u=arguments.length,h=new Array(u),g=0;g<u;g++)h[g]=arguments[g];return h=D(h),function(v){return h.some(function(y){return y.test(v)})&&v}},W=function(u){return function(h){return u[h]}},Y=function(h){return h[0].toUpperCase()+h.slice(1)},X=function(u){return function(h){return u+Y(h)}};function Z(u){return u}function ie(u){}function ne(u){return typeof u=="function"?u:function(){return u}}function J(u){return typeof u=="number"&&isNaN(u)?void 0:u}function K(){var u=function(){return 10},h=ie,g=Z,v=function(m){return m!=null},y=function(m){var b=u.apply(this,arguments),_=m.slice(0,b).map(g);return m.map(function(T,E){return E>=b&&(_.shift(),_.push(g(T,E))),E<b-1||_.some(function(M){return!v(M)})?h(void 0,E):h(_,E)})};return y.period=function(){return arguments.length?(u=ne(arguments.length<=0?void 0:arguments[0]),y):u},y.accumulator=function(){return arguments.length?(h=arguments.length<=0?void 0:arguments[0],y):h},y.defined=function(){return arguments.length?(v=arguments.length<=0?void 0:arguments[0],y):v},y.value=function(){return arguments.length?(g=arguments.length<=0?void 0:arguments[0],y):g},y}function $(){var u=2,h=K().accumulator(function(v){var y=v&&r.deviation(v),w=v&&r.mean(v);return{average:w,upper:J(w+u*y),lower:J(w-u*y)}}),g=function(y){return h(y)};return g.multiplier=function(){return arguments.length?(u=arguments.length<=0?void 0:arguments[0],g):u},A(g,h,"period","value"),g}function te(){var u=Z,h=function(){return 9},g=function(w){var m=[];return function(b){var _;return m.length<w&&(b!=null?m.push(b):m=[]),m.length>=w&&(_=r.mean(m)),_}},v=function(w){var m=h.apply(this,arguments),b=2/(m+1),_=g(m),T;return w.map(function(E,M){var L=u(E,M);return T===void 0?T=_(L):T=L*b+(1-b)*T,J(T)})};return v.period=function(){return arguments.length?(h=ne(arguments.length<=0?void 0:arguments[0]),v):h},v.value=function(){return arguments.length?(u=arguments.length<=0?void 0:arguments[0],v):u},v}function G(){var u=Z,h=te().period(12),g=te().period(26),v=te().period(9),y=function(m){h.value(u),g.value(u);var b=r.zip(h(m),g(m)).map(function(T){return T[0]!==void 0&&T[1]!==void 0?T[0]-T[1]:void 0}),_=v(b);return r.zip(b,_).map(function(T){return{macd:T[0],signal:T[1],divergence:T[0]!==void 0&&T[1]!==void 0?T[0]-T[1]:void 0}})};return y.value=function(){return arguments.length?(u=arguments.length<=0?void 0:arguments[0],y):u},S(y,h,W({period:"fastPeriod"})),S(y,g,W({period:"slowPeriod"})),S(y,v,W({period:"signalPeriod"})),y}function oe(u,h){(h==null||h>u.length)&&(h=u.length);for(var g=0,v=Array(h);g<h;g++)v[g]=u[g];return v}function ge(u){if(Array.isArray(u))return u}function he(u){if(Array.isArray(u))return oe(u)}function pe(u){if(u===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return u}function re(u,h){if(!(u instanceof h))throw new TypeError("Cannot call a class as a function")}function ue(u,h,g){if(Ee())return Reflect.construct.apply(null,arguments);var v=[null];v.push.apply(v,h);var y=new(u.bind.apply(u,v));return g&&it(y,g.prototype),y}function de(u,h){for(var g=0;g<h.length;g++){var v=h[g];v.enumerable=v.enumerable||!1,v.configurable=!0,"value"in v&&(v.writable=!0),Object.defineProperty(u,Hy(v.key),v)}}function ve(u,h,g){return h&&de(u.prototype,h),g&&de(u,g),Object.defineProperty(u,"prototype",{writable:!1}),u}function Me(u,h){var g=typeof Symbol<"u"&&u[Symbol.iterator]||u["@@iterator"];if(!g){if(Array.isArray(u)||(g=xo(u))||h){g&&(u=g);var v=0,y=function(){};return{s:y,n:function(){return v>=u.length?{done:!0}:{done:!1,value:u[v++]}},e:function(_){throw _},f:y}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var w,m=!0,b=!1;return{s:function(){g=g.call(u)},n:function(){var _=g.next();return m=_.done,_},e:function(_){b=!0,w=_},f:function(){try{m||g.return==null||g.return()}finally{if(b)throw w}}}}function Oe(u){var h=Ee();return function(){var g,v=Ce(u);if(h){var y=Ce(this).constructor;g=Reflect.construct(v,arguments,y)}else g=v.apply(this,arguments);return tt(this,g)}}function Ce(u){return Ce=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(h){return h.__proto__||Object.getPrototypeOf(h)},Ce(u)}function Ie(u,h){if(typeof h!="function"&&h!==null)throw new TypeError("Super expression must either be null or a function");u.prototype=Object.create(h&&h.prototype,{constructor:{value:u,writable:!0,configurable:!0}}),Object.defineProperty(u,"prototype",{writable:!1}),h&&it(u,h)}function me(u){try{return Function.toString.call(u).indexOf("[native code]")!==-1}catch{return typeof u=="function"}}function Ee(){try{var u=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Ee=function(){return!!u})()}function De(u){if(typeof Symbol<"u"&&u[Symbol.iterator]!=null||u["@@iterator"]!=null)return Array.from(u)}function ce(u,h){var g=u==null?null:typeof Symbol<"u"&&u[Symbol.iterator]||u["@@iterator"];if(g!=null){var v,y,w,m,b=[],_=!0,T=!1;try{if(w=(g=g.call(u)).next,h===0){if(Object(g)!==g)return;_=!1}else for(;!(_=(v=w.call(g)).done)&&(b.push(v.value),b.length!==h);_=!0);}catch(E){T=!0,y=E}finally{try{if(!_&&g.return!=null&&(m=g.return(),Object(m)!==m))return}finally{if(T)throw y}}return b}}function et(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function fe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function tt(u,h){if(h&&(typeof h=="object"||typeof h=="function"))return h;if(h!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return pe(u)}function it(u,h){return it=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(g,v){return g.__proto__=v,g},it(u,h)}function _e(u,h){return ge(u)||ce(u,h)||xo(u,h)||et()}function ft(u){return ge(u)||De(u)||xo(u)||et()}function Tt(u){return he(u)||De(u)||xo(u)||fe()}function Yn(u,h){if(typeof u!="object"||!u)return u;var g=u[Symbol.toPrimitive];if(g!==void 0){var v=g.call(u,h);if(typeof v!="object")return v;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(u)}function Hy(u){var h=Yn(u,"string");return typeof h=="symbol"?h:h+""}function wo(u){"@babel/helpers - typeof";return wo=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(h){return typeof h}:function(h){return h&&typeof Symbol=="function"&&h.constructor===Symbol&&h!==Symbol.prototype?"symbol":typeof h},wo(u)}function xo(u,h){if(u){if(typeof u=="string")return oe(u,h);var g={}.toString.call(u).slice(8,-1);return g==="Object"&&u.constructor&&(g=u.constructor.name),g==="Map"||g==="Set"?Array.from(u):g==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(g)?oe(u,h):void 0}}function To(u){var h=typeof Map=="function"?new Map:void 0;return To=function(g){if(g===null||!me(g))return g;if(typeof g!="function")throw new TypeError("Super expression must either be null or a function");if(h!==void 0){if(h.has(g))return h.get(g);h.set(g,v)}function v(){return ue(g,arguments,Ce(this).constructor)}return v.prototype=Object.create(g.prototype,{constructor:{value:v,enumerable:!1,writable:!0,configurable:!0}}),it(v,g)},To(u)}function Uy(){var u=K().period(14),h=function(_,T){return T+(_[_.length-1]-T)/_.length},g=function(_){var T=_e(_,2),E=T[0],M=T[1];return E<M?0:E-M},v=function(_){var T=_e(_,2),E=T[0],M=T[1];return E>M?0:M-E},y=function(_,T){return T!==void 0?h(_,T):r.mean(_)},w=function(){var _,T,E;return function(M){if(!M){_!==void 0&&(_=NaN);return}if(_===void 0){_=M[0];return}var L=r.pairs([_].concat(Tt(M)));T=y(L.map(g),T),E=y(L.map(v),E);var P=isNaN(_)?NaN:E/T;return J(100-100/(1+P))}},m=function(_){var T=w();return u.accumulator(T),u(_)};return A(m,u,"period","value"),m}function yh(){var u=K().accumulator(function(g){return g&&r.mean(g)}),h=function(v){return u(v)};return A(h,u,"period","value"),h}function Yy(){var u=function(b,_){return b.close},h=function(b,_){return b.high},g=function(b,_){return b.low},v=K().period(5).defined(function(m){return u(m)!=null&&h(m)!=null&&g(m)!=null}).accumulator(function(m){var b=m&&r.max(m,h),_=m&&r.min(m,g),T=m&&100*(u(m[m.length-1])-_)/(b-_);return J(T)}),y=yh().period(3),w=function(b){var _=v(b),T=y(_);return _.map(function(E,M){return{k:E,d:T[M]}})};return w.closeValue=function(){return arguments.length?(u=arguments.length<=0?void 0:arguments[0],w):u},w.highValue=function(){return arguments.length?(h=arguments.length<=0?void 0:arguments[0],w):h},w.lowValue=function(){return arguments.length?(g=arguments.length<=0?void 0:arguments[0],w):g},S(w,v,W({period:"kPeriod"})),S(w,y,W({period:"dPeriod"})),w}function Xy(){var u=function(m,b){return m.volume},h=function(m,b){return m.close},g=te().period(13),v=K().period(2).defined(function(w){return h(w)!=null&&u(w)!=null}).accumulator(function(w){return w&&J((h(w[1])-h(w[0]))*u(w[1]))}),y=function(m){var b=v(m);return g(b)};return y.volumeValue=function(){return arguments.length?(u=arguments.length<=0?void 0:arguments[0],y):u},y.closeValue=function(){return arguments.length?(h=arguments.length<=0?void 0:arguments[0],y):h},A(y,g,"period"),y}function Gy(){var u=.1,h=Z,g=function(y){return y.map(function(w){var m=J(h(w)*(1-u)),b=J(h(w)*(1+u));return{lower:m,upper:b}})};return g.factor=function(){return arguments.length?(u=arguments.length<=0?void 0:arguments[0],g):u},g.value=function(){return arguments.length?(h=arguments.length<=0?void 0:arguments[0],g):h},g}function qy(){var u=function(m,b){return m.close},h=function(m,b){return m.high},g=function(m,b){return m.low},v=te().period(13),y=function(m){return v.value(u),r.zip(m,v(m)).map(function(b){var _=J(h(b[0])-b[1]),T=J(g(b[0])-b[1]);return{bullPower:_,bearPower:T}})};return y.closeValue=function(){return arguments.length?(u=arguments.length<=0?void 0:arguments[0],y):u},y.highValue=function(){return arguments.length?(h=arguments.length<=0?void 0:arguments[0],y):h},y.lowValue=function(){return arguments.length?(g=arguments.length<=0?void 0:arguments[0],y):g},A(y,v,"period"),y}function wh(){var u={};return u.distance=function(h,g){return g-h},u.offset=function(h,g){return h instanceof Date?new Date(h.getTime()+g):h+g},u.clampUp=function(h){return h},u.clampDown=function(h){return h},u.copy=function(){return u},u}function jy(u,h){var g=u.map(h.clampUp);return g.length,new Set(g.map(function(v){return v==null?void 0:v.valueOf()})).size,g}function xh(u){var h=this;arguments.length||(u=i.scaleIdentity());var g=wh(),v=function(w){var m=u.domain(),b=u.range(),_=g.distance(m[0],m[1]),T=g.distance(m[0],w),E=T/_,M=E*(b[1]-b[0])+b[0];return M};return v.invert=function(y){var w=u.domain(),m=u.range(),b=(y-m[0])/(m[1]-m[0]),_=g.distance(w[0],w[1]),T=b*_;return g.offset(w[0],T)},v.domain=function(){if(!arguments.length)return u.domain();var y=arguments.length<=0?void 0:arguments[0],w=g.clampUp(y[0]),m=g.clampDown(y[1]);return u.domain([w,m]),v},v.nice=function(){u.nice();var y=u.domain(),w=g.clampUp(y[0]),m=g.clampDown(y[1]);return u.domain([w,m]),v},v.ticks=function(){for(var y=arguments.length,w=new Array(y),m=0;m<y;m++)w[m]=arguments[m];var b=u.ticks.apply(h,w);return jy(b,g)},v.copy=function(){return xh(u.copy()).discontinuityProvider(g.copy())},v.discontinuityProvider=function(){return arguments.length?(g=arguments.length<=0?void 0:arguments[0],v):g},S(v,u,k("range","rangeRound","interpolate","clamp","tickFormat")),v}var Th=function(h,g,v,y){var w={sunday:0,monday:1,saturday:6},m=24*3600*1e3,b=m*5,_=m*7,T={},E=function(L){return h(L)===0||h(L)===6};return T.clampDown=function(M){if(M&&E(M)){var L=g.ceil(M);return h(L)===w.sunday?g.offset(L,-1):h(L)===w.monday?g.offset(L,-2):L}else return M},T.clampUp=function(M){if(M&&E(M)){var L=g.floor(M);return h(L)===w.saturday?g.offset(L,2):h(L)===w.sunday?g.offset(L,1):L}else return M},T.distance=function(M,L){M=T.clampUp(M),L=T.clampDown(L);var P=v.ceil(M);if(L<P)return L.getTime()-M.getTime();var F=P.getTime()-M.getTime(),B=v.ceil(L),V=B.getTime()-L.getTime(),z=Math.round((B.getTime()-P.getTime())/_);return z*b+F-V},T.offset=function(M,L){var P=E(M)?T.clampUp(M):M;if(L===0)return P;var F=L<0,B=L>0,V=L,z=F?y.floor(P):v.ceil(P);if(V-=z.getTime()-P.getTime(),F&&V>0||B&&V<0)return new Date(P.getTime()+L);P=F?z:g.offset(z,2);var U=Math.floor(V/b);return P=g.offset(P,U*7),V-=U*b,P=new Date(P.getTime()+V),P},T.copy=function(){return T},T},Jy=function(){return Th(function(u){return u.getDay()},a.timeDay,a.timeSaturday,a.timeMonday)},Zy=function(){return Th(function(u){return u.getUTCDay()},a.utcDay,a.utcSaturday,a.utcMonday)},Ky=function(){for(var h=arguments.length,g=new Array(h),v=0;v<h;v++)g[v]=arguments[v];var y=function(T,E){return T>E[0]&&T<E[1]},w=function(T,E){return T[0]>=E[0]&&T[1]<=E[1]},m={};m.distance=function(_,T){_=m.clampUp(_),T=m.clampDown(T);var E=g.filter(function(L){return w(L,[_,T])}),M=E.map(function(L){return L[1]-L[0]});return T-_-M.reduce(function(L,P){return L+P},0)};var b=function(T,E){return T instanceof Date?new Date(T.getTime()+E):T+E};return m.offset=function(_,T){if(T>0){for(var E=m.clampUp(_),M=T;M>0;){var L=g.filter(function(j){return j[0]>E}).sort(function(j,ae){return j[0]-ae[0]});if(L.length){var P=L[0],F=P[0]-E;F>M?(E=b(E,M),M=0):(E=P[1],M-=F)}else E=b(E,M),M=0}return E}else{for(var B=m.clampDown(_),V=T;V<0;){var z=g.filter(function(j){return j[1]<B}).sort(function(j,ae){return ae[0]-j[0]});if(z.length){var U=z[0],H=U[1]-B;H<V?(B=b(B,V),V=0):(B=U[0],V-=H)}else B=b(B,V),V=0}return B}},m.clampUp=function(_){return g.reduce(function(T,E){return y(T,E)?E[1]:T},_)},m.clampDown=function(_){return g.reduce(function(T,E){return y(T,E)?E[0]:T},_)},m.copy=function(){return m},m},So=24*3600*1e3,En="00:00:00.000",Qy="SOD",e1="EOD";function Sh(u){if(arguments.length!==1||typeof u!="string")throw"Expected single argument of type string";var h=function(m,b){return Number.isInteger(m)?m>=0&&m<=b:!1},g=[0,0,0,0],v=u.split(":");if(v.length<2||v.length>3)throw"Expected an argument wiht 2 or 3 colon delimited parts.";if(g[0]=h(parseInt(v[0],10),23)?parseInt(v[0],10):function(){throw"'Hours' component must be an int between 0 and 23, but was '".concat(v[0],"'")}(),g[1]=h(parseInt(v[1],10),59)?parseInt(v[1],10):function(){throw"'Minutes' component must be an int between 0 and 59, but was '".concat(v[1],"'")}(),v.length===3){var y=v[2].split(".").map(function(w){return parseInt(w,10)});g[2]=h(y[0],59)?y[0]:function(){throw"'Seconds' component must be an int between 0 and 59, but was '".concat(y[0],"'")}(),y.length===2&&(g[3]=h(y[1],999)?y[1]:function(){throw"'Miliseconds' component must be an int between 0 and 999, but was '".concat(y[1],"'")}())}return"".concat(g[0].toString(10).padStart(2,"0"),":").concat(g[1].toString(10).padStart(2,"0"),":").concat(g[2].toString(10).padStart(2,"0"),".").concat(g[3].toString(10).padStart(3,"0"))}function t1(u,h){if(arguments.length!=2||!Array.isArray(u)||u.length!==2||typeof u[0]!="string"||typeof u[1]!="string")throw"Expected argument is a single string[] of length 2.";u[0]===Qy&&(u[0]=En),u[1]===e1&&(u[1]=En);var g=Sh(u[0]),v=Sh(u[1]);if(v!==En&&g>v)throw"Time range start time '".concat(g,"' must be before end time '").concat(v,"' or both must equal ").concat(En);var y=h.setTime(new Date(v===En?So:0),v)-h.setTime(new Date(0),g),w={startTime:g,endTime:v,lenghtInMs:y};return w.isInRange=function(m){var b=h.getTimeString(m);return w.startTime<=b&&(w.endTime===En||w.endTime>b)},w}var Yr=function(h,g){var v=h.map(function(b){return t1(b,g)}).sort(function(b,_){return b.startTime<_.startTime?-1:b.startTime>_.startTime?1:0}),y=So-v.reduce(function(b,_){return b+_.lenghtInMs},0),w=function(_,T){if(_.getTime()===T.getTime())return 0;if(g.dayInterval(_).getTime()!==g.dayInterval(T).getTime()&&g.getStartOfNextDay(_).getTime()!==T.getTime())throw"tradingDay.totalTradingMillisecondsBetween arguments must be on the same day or intervalEnd must be the start of the next day instead: intervalStart: '".concat(_,"'; intervalEnd: '").concat(T,"'");var E=0,M=v.filter(function(z){return z.endTime===En||g.setTime(_,z.endTime)>=_}),L=Me(M),P;try{for(L.s();!(P=L.n()).done;){var F=P.value,B=g.setTime(_,F.startTime),V=F.endTime===En?g.getStartOfNextDay(_):g.setTime(_,F.endTime);if(_<B&&T<B)return E+g.msInterval.count(_,T);if(_<B&&(E+=g.msInterval.count(_,B)),T<V)return E;_=V}}catch(z){L.e(z)}finally{L.f()}return E+g.msInterval.count(_,T)},m=function(_,T){if(T===0)return[_,T];var E=g.msInterval.offset(_,T),M=T>0?v.filter(function(j){return g.setTime(_,j.startTime)>=_}):v.filter(function(j){return g.setTime(_,j.startTime)<_}).reverse();if(M.length===0)return[g.msInterval.offset(_,T),0];if(T>0){var L=Me(M),P;try{for(L.s();!(P=L.n()).done;){var F=P.value,B=g.setTime(_,F.startTime);B<=E&&(T-=g.msInterval.count(_,B),_=F.endTime===En?g.getStartOfNextDay(_):g.setTime(_,F.endTime),E=g.msInterval.offset(_,T))}}catch(j){L.e(j)}finally{L.f()}T-=g.msInterval.count(_,E)}else{var V=Me(M),z;try{for(V.s();!(z=V.n()).done;){var U=z.value,H=U.endTime===En?g.getStartOfNextDay(_):g.setTime(_,U.endTime);E<H&&(T+=g.msInterval.count(H,_)+1,_=g.msInterval.offset(g.setTime(_,U.startTime),-1),E=g.msInterval.offset(_,T))}}catch(j){V.e(j)}finally{V.f()}T+=g.msInterval.count(E,_)}if(T!==0)throw"tradingDay.offset was called with an offset that spans more than a day";return[E,T]};return{totalTradingTimeInMiliseconds:y,nonTradingTimeRanges:v,totalTradingMillisecondsBetween:w,offset:m}},Eh=function(h,g,v,y,w){var m={};return m.getTimeComponentArrayFromString=function(b){return[b.slice(0,2),b.slice(3,5),b.slice(6,8),b.slice(9,12)]},m.getTimeString=function(b){var _=v(b).map(function(F){return F.toString(10).padStart(2,"0")}),T=_e(_,4),E=T[0],M=T[1],L=T[2],P=T[3];return"".concat(E,":").concat(M,":").concat(L,".").concat(P.padStart(3,"0"))},m.setTime=function(b,_){var T=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,E=m.getTimeComponentArrayFromString(_),M=_e(E,4),L=M[0],P=M[1],F=M[2],B=M[3];return w.offset(h(b,L,P,F,B),T)},m.getStartOfNextDay=function(b){return y.offset(y.floor(b),1)},m.getEndOfPreviousDay=function(b){return w.offset(y.floor(b),-1)},m.dayInterval=y,m.msInterval=w,m.getDay=g,m},n1=Eh(function(u,h,g,v,y){return new Date(u.getFullYear(),u.getMonth(),u.getDate(),h,g,v,y)},function(u){return u.getDay()},function(u){return[u.getHours(),u.getMinutes(),u.getSeconds(),u.getMilliseconds()]},a.timeDay,a.timeMillisecond),Ch=function(h,g){var v=function(_){return h[_]===void 0?[]:h[_]},y=[Yr(v("Sunday"),g),Yr(v("Monday"),g),Yr(v("Tuesday"),g),Yr(v("Wednesday"),g),Yr(v("Thursday"),g),Yr(v("Friday"),g),Yr(v("Saturday"),g)],w=y.reduce(function(b,_){return b+_.totalTradingTimeInMiliseconds},0);if(w===0)throw"Trading pattern must yield at least 1 ms of trading time";var m={tradingDays:y,totalTradingWeekMilliseconds:w};return m.clampUp=function(b){var _=y[g.getDay(b)],T=Me(_.nonTradingTimeRanges),E;try{for(T.s();!(E=T.n()).done;){var M=E.value;if(M.isInRange(b))return M.endTime===En?m.clampUp(g.getStartOfNextDay(b)):g.setTime(b,M.endTime)}}catch(L){T.e(L)}finally{T.f()}return b},m.clampDown=function(b){var _=y[g.getDay(b)],T=Me(_.nonTradingTimeRanges),E;try{for(T.s();!(E=T.n()).done;){var M=E.value;if(M.isInRange(b))return M.startTime===En?m.clampDown(g.getEndOfPreviousDay(b)):g.setTime(b,M.startTime,-1)}}catch(L){T.e(L)}finally{T.f()}return b},m.distance=function(b,_){if(b.getTime()===_.getTime())return 0;var T=b<=_?[b,_,1]:[_,b,-1],E=_e(T,3),M=E[0],L=E[1],P=E[2];if(g.dayInterval(M).getTime()===g.dayInterval(L).getTime())return m.tradingDays[g.getDay(M)].totalTradingMillisecondsBetween(M,L);var F=m.tradingDays[g.getDay(M)].totalTradingMillisecondsBetween(M,g.dayInterval.offset(g.dayInterval(M),1))+m.tradingDays[g.getDay(L)].totalTradingMillisecondsBetween(g.dayInterval(L),L);return g.dayInterval.count(M,L)===1?F:(M=g.dayInterval.offset(g.dayInterval(M),1),L=g.dayInterval(L),P*g.dayInterval.range(M,L).reduce(function(B,V,z,U){var H=z<U.length-1?U[z+1]:g.dayInterval.offset(V,1),j=H-V!==So,ae=m.tradingDays[g.getDay(V)];return B+=j?ae.totalTradingMillisecondsBetween(V,H):ae.totalTradingTimeInMiliseconds},F))},m.offset=function(b,_){b=_>=0?m.clampUp(b):m.clampDown(b);var T=function(j){return g.dayInterval.offset(j)-g.dayInterval(j)!==So},E=function(j,ae,we){if(we<0){var Se=g.dayInterval(ae),ye=j.totalTradingMillisecondsBetween(Se,ae);return Math.abs(we)<=ye?j.offset(ae,we):[m.clampDown(g.msInterval.offset(Se,-1)),we+ye+1]}else{var He=g.getStartOfNextDay(ae),Vt=j.totalTradingMillisecondsBetween(ae,He);return we<Vt?j.offset(ae,we):[m.clampUp(He),we-Vt]}};if(_===0)return b;var M=_<0?function(H,j,ae){return[m.clampDown(g.dayInterval.offset(H,-1)),j+ae]}:function(H,j,ae){return[m.clampUp(g.dayInterval.offset(H)),j-ae]},L=m.tradingDays[g.getDay(b)],P=E(L,b,_),F=_e(P,2);for(b=F[0],_=F[1];_!==0;)if(L=m.tradingDays[g.getDay(b)],T(b)){var B=E(L,b,_),V=_e(B,2);b=V[0],_=V[1]}else{var z=Math.abs(_)>=L.totalTradingTimeInMiliseconds?M(b,_,L.totalTradingTimeInMiliseconds):E(L,b,_),U=_e(z,2);b=U[0],_=U[1]}return b},m.copy=function(){return m},m},r1=function(u){return Ch(u,n1)},i1=Eh(function(u,h,g,v,y){return new Date(Date.UTC(u.getUTCFullYear(),u.getUTCMonth(),u.getUTCDate(),h,g,v,y))},function(u){return u.getUTCDay()},function(u){return[u.getUTCHours(),u.getUTCMinutes(),u.getUTCSeconds(),u.getUTCMilliseconds()]},a.utcDay,a.utcMillisecond),a1=function(u){return Ch(u,i1)};function Ah(){var u=[function(m){return m}],h=[0,0],g="percent",v=null,y=[],w=function(b){var _=new Array(b.length),T=Me(u),E;try{for(T.s();!(E=T.n()).done;)for(var M=E.value,L=0;L<b.length;L++){var P=M(b[L],L);Array.isArray(P)?_.push.apply(_,Tt(P)):_.push(P)}}catch(z){T.e(z)}finally{T.f()}var F=[r.min(_),r.max(_)];if(F[0]=F[0]==null?r.min(y):r.min([F[0]].concat(Tt(y))),F[1]=F[1]==null?r.max(y):r.max([F[1]].concat(Tt(y))),v!=null){var B=Math.max(Math.abs(F[1]-v),Math.abs(F[0]-v));F[0]=v-B,F[1]=v+B}switch(g){case"domain":{F[0]-=h[0],F[1]+=h[1];break}case"percent":{var V=F[1]-F[0];F[0]-=h[0]*V,F[1]+=h[1]*V;break}default:throw new Error("Unknown padUnit: ".concat(g))}return F};return w.accessors=function(){return arguments.length?(u=arguments.length<=0?void 0:arguments[0],w):u},w.pad=function(){return arguments.length?(h=arguments.length<=0?void 0:arguments[0],w):h},w.padUnit=function(){return arguments.length?(g=arguments.length<=0?void 0:arguments[0],w):g},w.include=function(){return arguments.length?(y=arguments.length<=0?void 0:arguments[0],w):y},w.symmetricalAbout=function(){return arguments.length?(v=arguments.length<=0?void 0:arguments[0],w):v},w}function Rh(){var u=[],h=[0,0],g="percent",v=null,y=[],w=Ah(),m=function(T){return T!=null?T.valueOf():null},b=function(T){var E=u.map(function(M){return function(){var L=M.apply(void 0,arguments);return Array.isArray(L)?L.map(m):m(L)}});return w.accessors(E).pad(h).padUnit(g).symmetricalAbout(v!=null?v.valueOf():null).include(y.map(function(M){return M.valueOf()})),w(T).map(function(M){return new Date(M)})};return b.accessors=function(){return arguments.length?(u=arguments.length<=0?void 0:arguments[0],b):u},b.pad=function(){return arguments.length?(h=arguments.length<=0?void 0:arguments[0],b):h},b.padUnit=function(){return arguments.length?(g=arguments.length<=0?void 0:arguments[0],b):g},b.include=function(){return arguments.length?(y=arguments.length<=0?void 0:arguments[0],b):y},b.symmetricalAbout=function(){return arguments.length?(v=arguments.length<=0?void 0:arguments[0],b):v},b}function Mh(){var u=1,h=20,g=.1,v=.1,y=o.randomNormal(),w=function(){for(var b=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,_=u/h,T=[],E=0;E<h+1;E++){T.push(b);var M=y()*Math.sqrt(_)*v+(g-v*v/2)*_;b=b*Math.exp(M)}return T};return w.period=function(){return arguments.length?(u=arguments.length<=0?void 0:arguments[0],w):u},w.steps=function(){return arguments.length?(h=arguments.length<=0?void 0:arguments[0],w):h},w.mu=function(){return arguments.length?(g=arguments.length<=0?void 0:arguments[0],w):g},w.sigma=function(){return arguments.length?(v=arguments.length<=0?void 0:arguments[0],w):v},w.random=function(){return arguments.length?(y=arguments.length<=0?void 0:arguments[0],w):y},w}function o1(u){return typeof u=="function"?u:function(){return u}}function s1(){var u=new Date,h=100,g=a.timeDay,v=1,y=a.timeYear,w=1,m=null,b=function(){var B=o.randomNormal(1,.1);return Math.ceil(B()*1e3)},_=Mh(),T=function(B){var V=y.offset(B,w)-B;return(g.offset(B,v)-B)/V},E=function(B,V){var z=T(B),U=_.period(z)(V),H={date:B,open:U[0],high:Math.max.apply(Math,U),low:Math.min.apply(Math,U),close:U[_.steps()]};return H.volume=b(H),H},M=function(B){var V,z,U;do V=B?g.offset(B.date,v):new Date(u.getTime()),z=B?B.close:h,B=E(V,z),U=m&&!m(B);while(U);return B},L=function(){var B,V={};return V.next=function(){var z=M(B);return B=z,z},V.take=function(z){return V.until(function(U,H){return!z||z<0||H===z})},V.until=function(z){for(var U=[],H=0,j=M(B),ae=z&&!z(j,H);ae;)U.push(j),B=j,j=M(B),H+=1,ae=z&&!z(j,H);return U},V},P=function(B){return L().take(B)};if(P.stream=L,typeof Symbol!="function"||wo(Symbol.iterator)!=="symbol")throw new Error("d3fc-random-data depends on Symbol. Make sure that you load a polyfill in older browsers. See README.");return P[Symbol.iterator]=function(){var F=L();return{next:function(){return{value:F.next(),done:!1}}}},P.startDate=function(){return arguments.length?(u=arguments.length<=0?void 0:arguments[0],P):u},P.startPrice=function(){return arguments.length?(h=arguments.length<=0?void 0:arguments[0],P):h},P.interval=function(){return arguments.length?(g=arguments.length<=0?void 0:arguments[0],P):g},P.intervalStep=function(){return arguments.length?(v=arguments.length<=0?void 0:arguments[0],P):v},P.unitInterval=function(){return arguments.length?(y=arguments.length<=0?void 0:arguments[0],P):y},P.unitIntervalStep=function(){return arguments.length?(w=arguments.length<=0?void 0:arguments[0],P):w},P.filter=function(){return arguments.length?(m=arguments.length<=0?void 0:arguments[0],P):m},P.volume=function(){return arguments.length?(b=o1(arguments.length<=0?void 0:arguments[0]),P):b},S(P,_),P}function l1(u){var h=u.date.getDay();return!(h===0||h===6)}function c1(){var u="BTC-USD",h=null,g=null,v=null,y=function(){var m=[];h!=null&&m.push("start="+h.toISOString()),g!=null&&m.push("end="+g.toISOString()),v!=null&&m.push("granularity="+v);var b="https://api.gdax.com/products/"+u+"/candles?"+m.join("&");return s.json(b).then(function(_){return _.map(function(T){return{date:new Date(T[0]*1e3),open:T[3],high:T[2],low:T[1],close:T[4],volume:T[5]}})})};return y.product=function(w){return arguments.length?(u=w,y):u},y.start=function(w){return arguments.length?(h=w,y):h},y.end=function(w){return arguments.length?(g=w,y):g},y.granularity=function(w){return arguments.length?(v=w,y):v},y}function Eo(){var u=10,h=function(v){return u<=1?v.map(function(y){return[y]}):r.range(0,Math.ceil(v.length/u)).map(function(y){return v.slice(y*u,(y+1)*u)})};return h.bucketSize=function(g){return arguments.length?(u=g,h):u},h}function u1(){var u=Eo(),h=function(m){return m},g=function(m){return m},v=function(m){if(u.bucketSize()>=m.length)return m;var b=y(m),_=u(b),T=u(m.slice(1,m.length-1)),E=T.map(function(M,L){var P=_[L],F=r.max(P),B=P.indexOf(F);return M[B]});return[].concat([m[0]],E,[m[m.length-1]])};function y(w){var m=w.map(function(_){return[h(_),g(_)]}),b=r.range(1,m.length-1).map(function(_){var T=m[_-1],E=m[_],M=m[_+1];return .5*Math.abs((T[0]-M[0])*(E[1]-T[1])-(T[0]-E[0])*(M[1]-T[1]))});return b}return A(v,u,"bucketSize"),v.x=function(w){return arguments.length?(h=w,v):h},v.y=function(w){return arguments.length?(g=w,v):g},v}function f1(){var u=function(w){return w},h=function(w){return w},g=Eo(),v=function(w){if(g.bucketSize()>=w.length)return w;var m=g(w.slice(1,w.length-1)),b=w[0],_=w[w.length-1],T=[].concat([b],m,[_]),E=u(b),M=h(b),L=m.map(function(P,F){var B=r.mean(T[F+1],u),V=r.mean(T[F+1],h),z=P.map(function(ae){return[u(ae),h(ae)]}),U=z.map(function(ae){return .5*Math.abs((E-B)*(ae[1]-M)-(E-ae[0])*(V-M))}),H=U.indexOf(r.max(U)),j=z[H];return E=j[0],M=j[1],P[H]});return[].concat([w[0]],L,[w[w.length-1]])};return A(v,g,"bucketSize"),v.x=function(y){return arguments.length?(u=y,v):u},v.y=function(y){return arguments.length?(h=y,v):h},v}function h1(){var u=Eo(),h=function(y){return y},g=function(y){if(u.bucketSize()>y.length)return y;var w=r.extent(y,h),m=u(y.slice(1,y.length-1)),b=m.map(function(_,T){var E={},M,L,P=!0,F=_.map(h),B=F.filter(function(V){return V===w[0]||V===w[1]}).map(function(V){return F.indexOf(V)})[0];return B!==void 0?_[B]:(F.forEach(function(V,z){E[V]===void 0&&(E[V]=0),E[V]++,E[V]>E[M]||M===void 0?(M=V,L=z,P=!0):E[V]===E[M]&&(P=!1)}),P?_[L]:_[Math.floor(_.length/2)])});return[].concat([y[0]],b,[y[y.length-1]])};return A(g,u,"bucketSize"),g.value=function(v){return arguments.length?(h=v,g):h},g}var Xe=function(u){return typeof u=="function"?u:function(){return u}},lc=function(){var u=null,h=function(E){return E.date},g=function(E){return E.open},v=function(E){return E.high},y=function(E){return E.low},w=function(E){return E.close},m="vertical",b=Xe(3),_=function(E){var M=u||l.path();return E.forEach(function(L,P){var F=h(L,P),B=g(L,P),V=v(L,P),z=y(L,P),U=w(L,P),H=b(L,P)/2;m==="vertical"?(M.moveTo(F,z),M.lineTo(F,V),M.moveTo(F,B),M.lineTo(F-H,B),M.moveTo(F,U),M.lineTo(F+H,U)):(M.moveTo(z,F),M.lineTo(V,F),M.moveTo(B,F),M.lineTo(B,F+H),M.moveTo(U,F),M.lineTo(U,F-H))}),u?null:M.toString()};return _.context=function(){return arguments.length?(u=arguments.length<=0?void 0:arguments[0],_):u},_.x=function(){return arguments.length?(h=Xe(arguments.length<=0?void 0:arguments[0]),_):h},_.open=function(){return arguments.length?(g=Xe(arguments.length<=0?void 0:arguments[0]),_):g},_.high=function(){return arguments.length?(v=Xe(arguments.length<=0?void 0:arguments[0]),_):v},_.low=function(){return arguments.length?(y=Xe(arguments.length<=0?void 0:arguments[0]),_):y},_.close=function(){return arguments.length?(w=Xe(arguments.length<=0?void 0:arguments[0]),_):w},_.width=function(){return arguments.length?(b=Xe(arguments.length<=0?void 0:arguments[0]),_):b},_.orient=function(){return arguments.length?(m=arguments.length<=0?void 0:arguments[0],_):m},_},_i=function(){var u=null,h=function(T){return T.x},g=function(T){return T.y},v="center",y="center",w=function(T){return T.height},m=Xe(3),b=function(T,E){var M=u||l.path();return T.forEach(function(L,P){var F=h.call(this,L,E||P),B=g.call(this,L,E||P),V=w.call(this,L,E||P),z=m.call(this,L,E||P),U;switch(v){case"left":U=z;break;case"right":U=0;break;case"center":U=z/2;break;default:throw new Error("Invalid horizontal alignment "+v)}var H;switch(y){case"bottom":H=-V;break;case"top":H=0;break;case"center":H=V/2;break;default:throw new Error("Invalid vertical alignment "+y)}M.rect(F-U,B-H,z,V)},this),u?null:M.toString()};return b.context=function(){return arguments.length?(u=arguments.length<=0?void 0:arguments[0],b):u},b.x=function(){return arguments.length?(h=Xe(arguments.length<=0?void 0:arguments[0]),b):h},b.y=function(){return arguments.length?(g=Xe(arguments.length<=0?void 0:arguments[0]),b):g},b.width=function(){return arguments.length?(m=Xe(arguments.length<=0?void 0:arguments[0]),b):m},b.horizontalAlign=function(){return arguments.length?(v=arguments.length<=0?void 0:arguments[0],b):v},b.height=function(){return arguments.length?(w=Xe(arguments.length<=0?void 0:arguments[0]),b):w},b.verticalAlign=function(){return arguments.length?(y=arguments.length<=0?void 0:arguments[0],b):y},b},cc=function(){var u=null,h=function(T){return T.date},g=function(T){return T.open},v=function(T){return T.high},y=function(T){return T.low},w=function(T){return T.close},m=Xe(3),b=function(T){var E=u||l.path();return T.forEach(function(M,L){var P=h(M,L),F=g(M,L),B=v(M,L),V=y(M,L),z=w(M,L),U=m(M,L),H=U/2;E.rect(P-H,F,U,z-F),E.moveTo(P,Math.min(z,F)),E.lineTo(P,B),E.moveTo(P,Math.max(z,F)),E.lineTo(P,V)}),u?null:E.toString()};return b.context=function(){return arguments.length?(u=arguments.length<=0?void 0:arguments[0],b):u},b.x=function(){return arguments.length?(h=Xe(arguments.length<=0?void 0:arguments[0]),b):h},b.open=function(){return arguments.length?(g=Xe(arguments.length<=0?void 0:arguments[0]),b):g},b.high=function(){return arguments.length?(v=Xe(arguments.length<=0?void 0:arguments[0]),b):v},b.low=function(){return arguments.length?(y=Xe(arguments.length<=0?void 0:arguments[0]),b):y},b.close=function(){return arguments.length?(w=Xe(arguments.length<=0?void 0:arguments[0]),b):w},b.width=function(){return arguments.length?(m=Xe(arguments.length<=0?void 0:arguments[0]),b):m},b},uc=function(){var u=null,h=function(L){return L.value},g=function(L){return L.median},v=function(L){return L.upperQuartile},y=function(L){return L.lowerQuartile},w=function(L){return L.high},m=function(L){return L.low},b="vertical",_=Xe(5),T=Xe(.5),E=function(L){var P=u||l.path();return L.forEach(function(F,B){var V=h(F,B),z=_(F,B),U=z/2,H=z*T(F,B),j=H/2,ae=w(F,B),we=v(F,B),Se=g(F,B),ye=y(F,B),He=m(F,B),Vt=ye-we;b==="vertical"?(P.moveTo(V-j,ae),P.lineTo(V+j,ae),P.moveTo(V,ae),P.lineTo(V,we),P.rect(V-U,we,z,Vt),P.moveTo(V-U,Se),P.lineTo(V+U,Se),P.moveTo(V,ye),P.lineTo(V,He),P.moveTo(V-j,He),P.lineTo(V+j,He)):(P.moveTo(He,V-j),P.lineTo(He,V+j),P.moveTo(He,V),P.lineTo(ye,V),P.rect(ye,V-U,-Vt,z),P.moveTo(Se,V-U),P.lineTo(Se,V+U),P.moveTo(we,V),P.lineTo(ae,V),P.moveTo(ae,V-j),P.lineTo(ae,V+j))}),u?null:P.toString()};return E.context=function(){return arguments.length?(u=arguments.length<=0?void 0:arguments[0],E):u},E.value=function(){return arguments.length?(h=Xe(arguments.length<=0?void 0:arguments[0]),E):h},E.median=function(){return arguments.length?(g=Xe(arguments.length<=0?void 0:arguments[0]),E):g},E.upperQuartile=function(){return arguments.length?(v=Xe(arguments.length<=0?void 0:arguments[0]),E):v},E.lowerQuartile=function(){return arguments.length?(y=Xe(arguments.length<=0?void 0:arguments[0]),E):y},E.high=function(){return arguments.length?(w=Xe(arguments.length<=0?void 0:arguments[0]),E):w},E.low=function(){return arguments.length?(m=Xe(arguments.length<=0?void 0:arguments[0]),E):m},E.width=function(){return arguments.length?(_=Xe(arguments.length<=0?void 0:arguments[0]),E):_},E.orient=function(){return arguments.length?(b=arguments.length<=0?void 0:arguments[0],E):b},E.cap=function(){return arguments.length?(T=Xe(arguments.length<=0?void 0:arguments[0]),E):T},E},fc=function(){var u=null,h=function(_){return _.x},g=function(_){return _.high},v=function(_){return _.low},y="vertical",w=Xe(5),m=function(_){var T=u||l.path();return _.forEach(function(E,M){var L=h(E,M),P=w(E,M),F=P/2,B=g(E,M),V=v(E,M);y==="vertical"?(T.moveTo(L-F,B),T.lineTo(L+F,B),T.moveTo(L,B),T.lineTo(L,V),T.moveTo(L-F,V),T.lineTo(L+F,V)):(T.moveTo(V,L-F),T.lineTo(V,L+F),T.moveTo(V,L),T.lineTo(B,L),T.moveTo(B,L-F),T.lineTo(B,L+F))}),u?null:T.toString()};return m.context=function(){return arguments.length?(u=arguments.length<=0?void 0:arguments[0],m):u},m.value=function(){return arguments.length?(h=Xe(arguments.length<=0?void 0:arguments[0]),m):h},m.high=function(){return arguments.length?(g=Xe(arguments.length<=0?void 0:arguments[0]),m):g},m.low=function(){return arguments.length?(v=Xe(arguments.length<=0?void 0:arguments[0]),m):v},m.width=function(){return arguments.length?(w=Xe(arguments.length<=0?void 0:arguments[0]),m):w},m.orient=function(){return arguments.length?(y=arguments.length<=0?void 0:arguments[0],m):y},m},hc=function(u){return typeof u=="function"?u:function(){return u}},dc=1e-6,Ct=function(h){return h.selection()!==h},qe=function(u,h){u=u||"g";var g=function(m,b){return b},v=null,y=function(m,b){b=b||function(B){return B};var _=m.selection(),T=Ct(m)?m:null,E=_.selectChildren(h==null?u:"".concat(u,".").concat(h)),M=E.data(b,g),L=M.enter().append(u).attr("class",h),P=M.exit();M=M.merge(L);var F=T||v;return F&&(M=M.transition(F).style("opacity",1),L.style("opacity",dc),P=P.transition(F).style("opacity",dc)),P.remove(),M.enter=function(){return L},M.exit=function(){return P},M};return y.element=function(){return arguments.length?(u=arguments.length<=0?void 0:arguments[0],y):u},y.className=function(){return arguments.length?(h=arguments.length<=0?void 0:arguments[0],y):h},y.key=function(){return arguments.length?(g=arguments.length<=0?void 0:arguments[0],y):g},y.transition=function(){return arguments.length?(v=arguments.length<=0?void 0:arguments[0],y):v},y},d1=function(u){var h=function(){},g=function(){return[0,0]},v=function(M,L){return[M.x,M.y]},y=u||function(E){return E},w=function(){},m=i.scaleIdentity(),b=i.scaleIdentity(),_=qe("g","label"),T=function(M){M.each(function(L,P,F){var B=_(c.select(F[P]),L).call(w),V=B.nodes(),z=V.map(function(H,j){var ae=c.select(H).datum(),we=v(ae,j,V),Se=[m(we[0]),b(we[1])],ye=g(ae,j,V);return{hidden:!1,x:Se[0],y:Se[1],width:ye[0],height:ye[1]}}),U=y(z);B.attr("style",function(H,j){return"display:"+(U[j].hidden?"none":"inherit")}).attr("transform",function(H,j){return"translate("+U[j].x+", "+U[j].y+")"}).attr("layout-width",function(H,j){return U[j].width}).attr("layout-height",function(H,j){return U[j].height}).attr("anchor-x",function(H,j,ae){return z[j].x-U[j].x}).attr("anchor-y",function(H,j,ae){return z[j].y-U[j].y}),B.call(w),h(B,L,P)})};return S(T,_,k("key")),S(T,y),T.size=function(){return arguments.length?(g=hc(arguments.length<=0?void 0:arguments[0]),T):g},T.position=function(){return arguments.length?(v=hc(arguments.length<=0?void 0:arguments[0]),T):v},T.component=function(){return arguments.length?(w=arguments.length<=0?void 0:arguments[0],T):w},T.decorate=function(){return arguments.length?(h=arguments.length<=0?void 0:arguments[0],T):h},T.xScale=function(){return arguments.length?(m=arguments.length<=0?void 0:arguments[0],T):m},T.yScale=function(){return arguments.length?(b=arguments.length<=0?void 0:arguments[0],T):b},T},g1=function(u){var h=2,g=function(_){return _},v=qe("text"),y=qe("rect"),w=qe("circle"),m=function(_){_.each(function(T,E,M){var L=M[E],P=c.select(L),F=Number(L.getAttribute("layout-width")),B=Number(L.getAttribute("layout-height")),V=y(P,[T]);V.attr("width",F).attr("height",B);var z=Number(L.getAttribute("anchor-x")),U=Number(L.getAttribute("anchor-y")),H=w(P,[T]);H.attr("r",2).attr("cx",z).attr("cy",U);var j=v(P,[T]);j.enter().attr("dy","0.9em").attr("transform","translate(".concat(h,", ").concat(h,")")),j.text(g)})};return m.padding=function(){return arguments.length?(h=arguments.length<=0?void 0:arguments[0],m):h},m.value=function(){return arguments.length?(g=hc(arguments.length<=0?void 0:arguments[0]),m):g},m},m1=function(h,g){return!(h.x>=g.x+g.width||h.x+h.width<=g.x||h.y>=g.y+g.height||h.y+h.height<=g.y)},gc=function(u,h){if(m1(u,h)){var g=Math.max(u.x,h.x),v=Math.min(u.x+u.width,h.x+h.width),y=Math.max(u.y,h.y),w=Math.min(u.y+u.height,h.y+h.height);return(v-g)*(w-y)}else return 0},mc=function(h,g){return r.sum(h.map(function(v,y){return g===y?0:gc(h[g],v)}))},Cr=function(h,g,v,y,w){return{x:h,y:g,width:v,height:y,location:w}},Nh=function(u){var h=u.x,g=u.y,v=u.width,y=u.height;return[Cr(h,g,v,y,"bottom-right"),Cr(h-v,g,v,y,"bottom-left"),Cr(h-v,g-y,v,y,"top-left"),Cr(h,g-y,v,y,"top-right"),Cr(h,g-y/2,v,y,"middle-right"),Cr(h-v/2,g,v,y,"bottom-center"),Cr(h-v,g-y/2,v,y,"middle-left"),Cr(h-v/2,g-y,v,y,"top-center")]},Oh=function(h,g,v){return[].concat(Tt(h.slice(0,g)),[v],Tt(h.slice(g+1)))},p1=function(h,g){return h<g},Dh=function u(){var h=null,g=p1,v=function(){return 0},y,w=function(_,T){return h-v(y[T],T,y)+v(_,T,Oh(y,T,_))},m=function b(_,T){h||(h=r.sum(y.map(function(M,L){return v(M,L,y)})));var E=w(_,T);return g(E,h)?u().locationScore(v).winningScore(g).score(E).rectangles(Oh(y,T,_)):b};return m.rectangles=function(){return arguments.length?(y=arguments.length<=0?void 0:arguments[0],m):y},m.score=function(){return arguments.length?(h=arguments.length<=0?void 0:arguments[0],m):h},m.winningScore=function(){return arguments.length?(g=arguments.length<=0?void 0:arguments[0],m):g},m.locationScore=function(){return arguments.length?(v=arguments.length<=0?void 0:arguments[0],m):v},m},v1=function(){var u,h=function(w){return u?w.width*w.height-gc(w,u):0},g=function(w,m,b){return mc(b,m)+h(w)},v=function(w){var m=Dh().locationScore(g).rectangles(w);return w.forEach(function(b,_){Nh(b).forEach(function(T,E){m=m(T,_)})}),m.rectangles()};return v.bounds=function(){return arguments.length?(u=arguments.length<=0?void 0:arguments[0],v):u},v},b1=function(h){return h[Lh(h)]},Lh=function(h){return Math.floor(Math.random()*h.length)},_1=function(){var u=1e3,h=1,g,v=function(_){switch(_.location){case"bottom-right":return 0;case"middle-right":case"bottom-center":return _.width*_.height/8}return _.width*_.height/4},y=function(_){return g?_.width*_.height-gc(_,g):0},w=function(_,T,E){return mc(E,T)+y(_)+v(_)},m=function(_){for(var T=u,E=function(B,V){return Math.exp((V-B)/T)>Math.random()},M=Dh().locationScore(w).winningScore(E).rectangles(_);T>0;){var L=Lh(_),P=b1(Nh(_[L]));M=M(P,L),T-=h}return M.rectangles()};return m.temperature=function(){return arguments.length?(u=arguments.length<=0?void 0:arguments[0],m):u},m.cooling=function(){return arguments.length?(h=arguments.length<=0?void 0:arguments[0],m):h},m.bounds=function(){return arguments.length?(g=arguments.length<=0?void 0:arguments[0],m):g},m},y1=function(h,g){return h[r.scan(h,g)]},w1=function(u){u=u||function(g){return g};var h=function(v){v=u(v);for(var y=function(){var b=v.filter(function(E){return!E.hidden}),_=b.map(function(E,M){return[E,mc(b,M)]}),T=y1(_,function(E,M){return M[1]-E[1]});if(T[1]>0)T[0].hidden=!0;else return"break"};;){var w=y();if(w==="break")break}return v};return S(h,u),h},x1=function(){var u=[0,0],h=function(v){return v.map(function(y,w){var m=y.x,b=y.y;return m+y.width>u[0]&&(m-=y.width),b+y.height>u[1]&&(b-=y.height),{height:y.height,width:y.width,x:m,y:b}})};return h.bounds=function(){return arguments.length?(u=arguments.length<=0?void 0:arguments[0],h):u},h},st=function(u){return typeof u=="function"?u:function(){return u}};function ha(){var u=arguments;return function(h,g){for(var v=0,y=u.length;v<y;v++)if(u[v](h,g)==null)return!1;return!0}}var da=function(u,h){switch(u){case"left":return h/2;case"right":return-h/2;default:return 0}},Xr=function(u){var h=Object.assign({},u),g=function(){};return Object.keys(h).forEach(function(v){g[v]=function(){return arguments.length?(h[v]=arguments.length<=0?void 0:arguments[0],g):h[v]}}),g},Cn=function(){var u=function(){return 0},h=function(_){return _.x},g=function(_){return _.y},v="center",y=function(){return 5},w="vertical",m=Xr({decorate:function(){},defined:function(_,T){return ha(u,h,g)(_,T)},xScale:i.scaleIdentity(),yScale:i.scaleIdentity()});return m.values=function(b,_){var T=y(b,_),E=da(v,T),M=m.xScale(),L=m.yScale();if(w==="vertical"){var P=L(g(b,_),_),F=L(u(b,_),_),B=M(h(b,_),_)+E;return{d:b,x:B,y:P,y0:F,width:T,height:P-F,origin:[B,P],baseOrigin:[B,F],transposedX:B,transposedY:P}}else{var V=M(g(b,_),_),z=M(u(b,_),_),U=L(h(b,_),_)+E;return{d:b,x:U,y:V,y0:z,width:T,height:V-z,origin:[V,U],baseOrigin:[z,U],transposedX:V,transposedY:U}}},m.xValues=function(){return w==="vertical"?[h]:[u,g]},m.yValues=function(){return w!=="vertical"?[h]:[u,g]},m.baseValue=function(){return arguments.length?(u=st(arguments.length<=0?void 0:arguments[0]),m):u},m.crossValue=function(){return arguments.length?(h=st(arguments.length<=0?void 0:arguments[0]),m):h},m.mainValue=function(){return arguments.length?(g=st(arguments.length<=0?void 0:arguments[0]),m):g},m.bandwidth=function(){return arguments.length?(y=st(arguments.length<=0?void 0:arguments[0]),m):y},m.align=function(){return arguments.length?(v=arguments.length<=0?void 0:arguments[0],m):v},m.orient=function(){return arguments.length?(w=arguments.length<=0?void 0:arguments[0],m):w},m},T1="#c60",S1="#6c0",E1="#000",C1="#ddd",A1="#999",pt={red:T1,green:S1,black:E1,gray:C1,darkGray:A1},pc=function(){var u=Cn(),h=f.line().x(function(y,w){return u.values(y,w).transposedX}).y(function(y,w){return u.values(y,w).transposedY}),g=qe("path","line"),v=function(w){Ct(w)&&g.transition(w),h.defined(u.defined()),w.each(function(m,b,_){var T=g(c.select(_[b]),[m]);T.enter().attr("fill","none").attr("stroke",pt.black),T.attr("d",h),u.decorate()(T,m,b)})};return S(v,u,N("baseValue","bandwidth","align")),A(v,g,"key"),A(v,h,"curve"),v},vc=function(){var u=Cn(),h=f.line().x(function(v,y){return u.values(v,y).transposedX}).y(function(v,y){return u.values(v,y).transposedY}),g=function(y){var w=h.context();w.beginPath(),w.strokeStyle=pt.black,w.fillStyle="transparent",u.decorate()(w,y),h.defined(u.defined())(y),w.fill(),w.stroke(),w.closePath()};return S(g,u,N("baseValue","bandwidth","align")),A(g,h,"curve","context"),g},Mt=function(){var u=[0,1],h=[-1,1],g=function(){};return g.domain=function(){return arguments.length?(u=arguments.length<=0?void 0:arguments[0],g):u},g.range=function(){return arguments.length?(h=arguments.length<=0?void 0:arguments[0],g):h},g},Ih=function(){var u={},h={},g=null,v=function(w,m){var b=w.context();Object.keys(u).forEach(function(_){var T=u[_];if(typeof T!="function")throw new Error("Expected an attribute for ".concat(_,", found ").concat(T));var E=b.getAttribLocation(m,_);T.location(E)(w)}),Object.keys(h).forEach(function(_){var T=h[_];if(typeof T!="function")throw new Error("Expected a uniform for ".concat(_,", found ").concat(T));var E=b.getUniformLocation(m,_);T.location(E)(w)}),g!==null&&g(w)};return v.flush=function(){Object.values(u).forEach(function(y){return y.clear()}),Object.values(h).forEach(function(y){return y.clear()}),g!==null&&g.clear()},v.attribute=function(){for(var y=arguments.length,w=new Array(y),m=0;m<y;m++)w[m]=arguments[m];return w.length===1?u[w[0]]:(u[w[0]]=w[1],v)},v.uniform=function(){for(var y=arguments.length,w=new Array(y),m=0;m<y;m++)w[m]=arguments[m];return w.length===1?h[w[0]]:(h[w[0]]=w[1],v)},v.elementIndices=function(){return arguments.length?(g=arguments.length<=0?void 0:arguments[0],v):g},v},bn=function(u){var h=-1,g=u,v=!0,y=function(m){if(v){var b=m.context();if(Array.isArray(g))switch(g.length){case 1:b.uniform1fv(h,g);break;case 2:b.uniform2fv(h,g);break;case 3:b.uniform3fv(h,g);break;case 4:b.uniform4fv(h,g);break;default:throw new Error("Uniform supports up to 4 elements. ".concat(g.length," provided."))}else b.uniform1f(h,g);v=!1}};return y.clear=function(){v=!0},y.location=function(){return arguments.length?(h!==(arguments.length<=0?void 0:arguments[0])&&(h=arguments.length<=0?void 0:arguments[0],v=!0),y):h},y.data=function(){return arguments.length?(g=arguments.length<=0?void 0:arguments[0],v=!0,y):g},y},cr={POINTS:0,TRIANGLES:4},ur=function(){var u=null,h=null,g=null,v=null,y=null,w=null,m=cr.TRIANGLES,b=0,_=Ih(),T=!1,E=null,M=!0,L=1,P=function z(U){if(u!=null){var H=g(),j=v();if(F(h,H,j)&&(h=B(H,j),y=H,w=j,M=!1),u.useProgram(h),_.uniform("uScreen",bn([u.canvas.width/L,u.canvas.height/L])),_(z,h),b===0)_.elementIndices()==null?u.drawArrays(m,0,U):u.drawElements(m,U,u.UNSIGNED_SHORT,0);else if(_.elementIndices()==null)E.drawArraysInstancedANGLE(m,0,b,U);else{var ae=_.elementIndices().data().length;if(b!==ae)throw new Error("Expected elementIndices length ".concat(ae)+" to match subInstanceCount ".concat(b,"."));E.drawElementsInstancedANGLE(m,b,u.UNSIGNED_SHORT,0,U)}}};return P.extInstancedArrays=function(){return E},P.context=function(){for(var z=arguments.length,U=new Array(z),H=0;H<z;H++)U[H]=arguments[H];return U.length?((U[0]==null||U[0]!==u)&&(_.flush(),M=!0),U[0]!=null&&U[0]!==u&&(E=U[0].getExtension("ANGLE_instanced_arrays")),u=U[0],P):u},P.buffers=function(){return arguments.length?(_=arguments.length<=0?void 0:arguments[0],P):_},P.vertexShader=function(){return arguments.length?(g=arguments.length<=0?void 0:arguments[0],P):g},P.fragmentShader=function(){return arguments.length?(v=arguments.length<=0?void 0:arguments[0],P):v},P.mode=function(){return arguments.length?(m=arguments.length<=0?void 0:arguments[0],P):m},P.subInstanceCount=function(){return arguments.length?(b=arguments.length<=0?void 0:arguments[0],P):b},P.debug=function(){return arguments.length?(T=arguments.length<=0?void 0:arguments[0],P):T},P.pixelRatio=function(){return arguments.length?(L=arguments.length<=0?void 0:arguments[0],P):L},P;function F(z,U,H){return!z||M?!0:U!==y||H!==w}function B(z,U){var H=V(z,u.VERTEX_SHADER),j=V(U,u.FRAGMENT_SHADER),ae=u.createProgram();if(u.attachShader(ae,H),u.attachShader(ae,j),u.linkProgram(ae),T&&!u.getProgramParameter(ae,u.LINK_STATUS)){var we=u.getProgramInfoLog(ae);throw u.deleteProgram(ae),new Error("Failed to link program : ".concat(we,`
            Vertex Shader : `).concat(z,`
            Fragment Shader : `).concat(U))}return ae}function V(z,U){var H=u.createShader(U);if(u.shaderSource(H,z),u.compileShader(H),T&&!u.getShaderParameter(H,u.COMPILE_STATUS)){var j=u.getShaderInfoLog(H);throw u.deleteShader(H),new Error("Failed to compile shader : ".concat(j,`
            Shader : `).concat(z))}return H}},nt=function(u){var h=[],g=[],v=function(){return u(h.join(`
`),g.join(`
`))};function y(b,_){b.push(_)}function w(b,_,T){var E=b.indexOf(T);b.splice(E>=0?E:b.length,0,_)}function m(b,_){var T=b.indexOf(_);T===-1&&b.push(_)}return v.appendHeader=function(b){return y(h,b),v},v.insertHeader=function(b,_){return w(h,b,_),v},v.appendHeaderIfNotExists=function(b){return m(h,b),v},v.appendBody=function(b){return y(g,b),v},v.insertBody=function(b,_){return w(g,b,_),v},v.appendBodyIfNotExists=function(b){return m(g,b),v},v},un=function(h,g){return`
precision mediump float;
float inf = 1.0 / 0.0;
`.concat(h,`
void main() {
    `).concat(g,`
}`)},fn=function(h,g){return`
precision mediump float;
`.concat(h,`
void main() {
    gl_FragColor = vec4(0.0, 0.0, 0.0, 1.0);
    `).concat(g,`
}`)},Ph={header:`attribute vec4 aFillColor;
             varying vec4 vFillColor;`,body:"vFillColor = aFillColor;"},kh={header:`attribute vec4 aStrokeColor;
             varying vec4 vStrokeColor;`,body:"vStrokeColor = aStrokeColor;"},Bh={header:`
        attribute float aCrossValue;
        attribute float aMainValue;
        attribute float aSize;
        attribute float aDefined;

        uniform float uStrokeWidth;

        varying float vSize;
        varying float vDefined;`,body:`
        vDefined = aDefined;
        vSize = 2.0 * sqrt(aSize / 3.14159);
        gl_PointSize = vSize + uStrokeWidth + 1.0;
        gl_Position = vec4(aCrossValue, aMainValue, 0, 1);`},Fh={header:`
        attribute float aCrossValue;
        attribute float aMainValue;
        attribute float aSize;
        attribute float aDefined;

        uniform float uStrokeWidth;

        varying float vSize;
        varying float vDefined;`,body:`
        vDefined = aDefined;
        vSize = 4.0 * sqrt(aSize / 3.14159);
        gl_PointSize = vSize + uStrokeWidth + 1.0;
        gl_Position = vec4(aCrossValue, aMainValue, 0, 1);`},Vh={header:`
        attribute float aCrossValue;
        attribute float aMainValue;
        attribute float aSize;
        attribute float aDefined;

        uniform float uStrokeWidth;

        varying float vSize;
        varying float vDefined;`,body:`
        vDefined = aDefined;
        vSize = 3.0 * sqrt(aSize / 3.14159);
        gl_PointSize = vSize + uStrokeWidth + 1.0;
        gl_Position = vec4(aCrossValue, aMainValue, 0, 1);`},Wh={header:`
        attribute float aCrossValue;
        attribute float aMainValue;
        attribute float aSize;
        attribute float aDefined;

        uniform float uStrokeWidth;

        varying float vSize;
        varying float vDefined;`,body:`
        vDefined = aDefined;
        vSize = sqrt(aSize);
        gl_PointSize = vSize + uStrokeWidth + 1.0;
        gl_Position = vec4(aCrossValue, aMainValue, 0, 1);`},$h={header:`
        attribute float aCrossValue;
        attribute float aMainValue;
        attribute float aSize;
        attribute float aDefined;

        uniform float uStrokeWidth;

        varying float vSize;
        varying float vDefined;`,body:`
        vDefined = aDefined;
        vSize = sqrt(aSize);
        gl_PointSize = 2.0 * (vSize + uStrokeWidth + 1.0);
        gl_Position = vec4(aCrossValue, aMainValue, 0, 1);`},zh={header:`
        attribute float aCrossValue;
        attribute float aMainValue;
        attribute float aSize;
        attribute float aDefined;

        uniform float uStrokeWidth;

        varying float vSize;
        varying float vDefined;`,body:`
        vDefined = aDefined;
        vSize = sqrt((16.0 * aSize) / (3.0 * sqrt(3.0)));
        gl_PointSize = vSize + uStrokeWidth + 1.0;
        gl_Position = vec4(aCrossValue, aMainValue, 0, 1);`},Hh={header:`
        attribute float aCrossValue;
        attribute float aMainValue;
        attribute float aSize;
        attribute float aDefined;

        uniform float uStrokeWidth;

        varying float vSize;
        varying float vStrokeWidthRatio;
        varying float vDefined;`,body:`
        vDefined = aDefined;
        vSize = 3.0 * sqrt(aSize / 5.0);
        vStrokeWidthRatio = uStrokeWidth / (vSize + uStrokeWidth + 1.0);
        gl_PointSize = vSize + uStrokeWidth + 1.0;
        gl_Position = vec4(aCrossValue, aMainValue, 0, 1);`},Uh={header:`
        attribute float aCrossValue;
        attribute float aBandwidth;
        attribute float aHighValue;
        attribute float aOpenValue;
        attribute float aCloseValue;
        attribute float aLowValue;
        attribute vec3 aCorner;
        attribute float aDefined;

        uniform vec2 uScreen;
        uniform float uStrokeWidth;

        varying float vColorIndicator;
        varying float vDefined;`,body:`
        vDefined = aDefined;
        vColorIndicator = sign(aCloseValue - aOpenValue);

        float isPositiveY = (sign(aCorner.y) + 1.0) / 2.0;
        float isNotPositiveY = 1.0 - isPositiveY;
        float isExtremeY = abs(aCorner.y) - 1.0;
        float isNotExtremeY = 1.0 - isExtremeY;
        float yValue =
         (isPositiveY * isExtremeY * aLowValue) +
         (isPositiveY * isNotExtremeY * aCloseValue) +
         (isNotPositiveY * isNotExtremeY * aOpenValue) +
         (isNotPositiveY * isExtremeY * aHighValue);

        float lineWidthXDirection = (isNotExtremeY * aCorner.x) + (isExtremeY * aCorner.z);

        float bodyThickness = (aOpenValue == aCloseValue ? 1.0 : sign(aCloseValue - aOpenValue));
        float lineWidthYDirection = (isNotExtremeY * bodyThickness * aCorner.y);

        float bandwidthModifier = aBandwidth * aCorner.x / 2.0;

        float xModifier = (uStrokeWidth * lineWidthXDirection / 2.0) + bandwidthModifier;
        float yModifier = uStrokeWidth * lineWidthYDirection / 2.0;

        gl_Position = vec4(aCrossValue, yValue, 0, 1);`},Yh={header:`
        attribute float aCrossValue;
        attribute float aBandwidth;
        attribute float aHighValue;
        attribute float aOpenValue;
        attribute float aCloseValue;
        attribute float aLowValue;
        attribute vec3 aCorner;
        attribute float aDefined;

        uniform vec2 uScreen;
        uniform float uStrokeWidth;

        varying float vColorIndicator;
        varying float vDefined;`,body:`
        vDefined = aDefined;
        vColorIndicator = sign(aCloseValue - aOpenValue);

        float isPositiveY = (sign(aCorner.y) + 1.0) / 2.0;
        float isNotPositiveY = 1.0 - isPositiveY;
        float isExtremeY = abs(aCorner.y) - 1.0;
        float isNotExtremeY = 1.0 - isExtremeY;
        float yValue =
            (isPositiveY * isExtremeY * aLowValue) +
            (isPositiveY * isNotExtremeY * aCloseValue) +
            (isNotPositiveY * isNotExtremeY * aOpenValue) +
            (isNotPositiveY * isExtremeY * aHighValue);

        float lineWidthXDirection = isExtremeY * aCorner.z;
        float lineWidthYDirection = isNotExtremeY * aCorner.z;

        float bandwidthModifier = isNotExtremeY * aCorner.x * aBandwidth / 2.0;

        float xModifier = (uStrokeWidth * lineWidthXDirection / 2.0) + bandwidthModifier;
        float yModifier = uStrokeWidth * lineWidthYDirection / 2.0;

        gl_Position = vec4(aCrossValue, yValue, 0, 1);`},Xh={header:`
        attribute float aCrossValue;
        attribute float aBandwidth;
        attribute float aMainValue;
        attribute float aBaseValue;
        attribute vec2 aCorner;
        attribute float aDefined;

        uniform vec2 uScreen;
        uniform float uStrokeWidth;

        varying float vDefined;`,body:`
        vDefined = aDefined;
        float isBaseline = (1.0 - aCorner.y) / 2.0;
        float yValue = (isBaseline * aBaseValue) + ((1.0 - isBaseline) * aMainValue);

        float xModifier = aCorner.x * (aBandwidth) / 2.0;

        gl_Position = vec4(aCrossValue, yValue, 0, 1);`},Gh={header:`
        attribute vec3 aCorner;
        attribute float aCrossValue;
        attribute float aBandwidth;
        attribute float aHighValue;
        attribute float aLowValue;
        attribute float aDefined;

        uniform vec2 uScreen;
        uniform float uStrokeWidth;

        varying float vDefined;`,body:`
        vDefined = aDefined;
        float isLow = (aCorner.y + 1.0) / 2.0;
        float yValue = isLow * aLowValue + (1.0 - isLow) * aHighValue;

        float isEdgeCorner = abs(aCorner.x);
        float lineWidthXDirection = (1.0 - isEdgeCorner) * aCorner.z;
        float lineWidthYDirection = isEdgeCorner * aCorner.z;

        gl_Position = vec4(aCrossValue, yValue, 0, 1);

        float xModifier = (uStrokeWidth * lineWidthXDirection) + (aBandwidth * aCorner.x / 2.0);
        float yModifier = (uStrokeWidth * lineWidthYDirection);`},qh={header:`
        attribute vec3 aCorner;
        attribute float aCrossValue;
        attribute float aMainValue;
        attribute float aCrossNextValue;
        attribute float aMainNextValue;
        attribute float aBaseValue;
        attribute float aBaseNextValue;
        attribute float aDefined;
        attribute float aDefinedNext;

        varying float vDefined;

        float when_lt(float a, float b) {
            return max(sign(b - a), 0.0);
        }

        float and(float a, float b) {
            return a * b;
        }`,body:`
        vDefined = aDefined * aDefinedNext;
        gl_Position = vec4(0, 0, 0, 1);

        float hasIntercepted = when_lt((aMainNextValue - aBaseNextValue) * (aMainValue - aBaseValue), 0.0);
        float useIntercept = and(aCorner.z, hasIntercepted);

        float yGradient = (aMainNextValue - aMainValue) / (aCrossNextValue - aCrossValue);
        float yConstant = aMainNextValue - (yGradient * aCrossNextValue);

        float y0Gradient = (aBaseNextValue - aBaseValue) / (aCrossNextValue - aCrossValue);
        float y0Constant = aBaseNextValue - (y0Gradient * aCrossNextValue);

        float denominator = (yGradient - y0Gradient) + step(abs(yGradient - y0Gradient), 0.0);
        float interceptXValue = (y0Constant - yConstant) / denominator;
        float interceptYValue = (yGradient * interceptXValue) + yConstant;

        gl_Position = vec4(interceptXValue * useIntercept, interceptYValue * useIntercept, 0, 1);

        gl_Position.x += (1.0 - useIntercept) * ((aCorner.x * aCrossNextValue) + ((1.0 - aCorner.x) * aCrossValue));
        gl_Position.y += (1.0 - useIntercept) * (1.0 - aCorner.y) * ((aCorner.x * aMainNextValue) + ((1.0 - aCorner.x) * aMainValue));
        gl_Position.y += (1.0 - useIntercept) * aCorner.y * ((aCorner.x * aBaseNextValue) + ((1.0 - aCorner.x) * aBaseValue));`},jh={header:`
        attribute vec4 aCorner;
        attribute float aCrossValue;
        attribute float aBandwidth;
        attribute float aCapWidth;
        attribute float aHighValue;
        attribute float aUpperQuartileValue;
        attribute float aMedianValue;
        attribute float aLowerQuartileValue;
        attribute float aLowValue;
        attribute float aDefined;

        uniform vec2 uScreen;
        uniform float uStrokeWidth;

        varying float vDefined;
    `,body:`
        vDefined = aDefined;
        float isExtremeY = sign(abs(aCorner.y) - 2.0) + 1.0;
        float isNotExtremeY = 1.0 - isExtremeY;

        float isNonZeroY = abs(sign(aCorner.y));
        float isZeroY = 1.0 - isNonZeroY;

        float isQuartileY = isNotExtremeY * isNonZeroY;

        float isPositiveY = (sign(aCorner.y + 0.5) + 1.0) / 2.0;
        float isNegativeY = 1.0 - isPositiveY;

        float yValue =
          (isExtremeY * isNegativeY) * aHighValue +
          (isQuartileY * isNegativeY) * aUpperQuartileValue +
          isZeroY * aMedianValue +
          (isQuartileY * isPositiveY) * aLowerQuartileValue +
          (isExtremeY * isPositiveY) * aLowValue;

        gl_Position = vec4(aCrossValue, yValue, 0, 1);

        float isHorizontal = aCorner.w;
        float isVertical = 1.0 - isHorizontal;

        float xDisplacement = aCorner.x * (isExtremeY * aCapWidth + isNotExtremeY * aBandwidth) / 2.0;

        float xModifier = (isVertical * uStrokeWidth * aCorner.z / 2.0) + xDisplacement;
        float yModifier = isHorizontal * uStrokeWidth * aCorner.z / 2.0;`},Jh={header:`
        varying float vSize;
        varying float vDefined;`,body:`
        float canFill = 1.0;
        float distance = length(2.0 * gl_PointCoord - 1.0);
        float canStroke = smoothstep(vSize - 2.0, vSize, distance * vSize);
        if (distance > 1.0 || vDefined < 0.5) {
            discard;
            return;
        }`},Zh={header:`
        varying float vSize;
        varying float vDefined;

        // anterior, exterior angles
        float an = 0.628319;
        vec2 acs = vec2(0.809017, 0.587786); // (cos, sin)
        float en = 0.952000;
        vec2 ecs = vec2(0.580055, 0.814577);
    `,body:`
        float canFill = 1.0;

        vec2 p = 2.0 * gl_PointCoord - 1.0;
        p.y *= -1.0;

        // sector
        float bn = mod(atan(p.x, p.y), 2.0 * an) - an;
        p = length(p) * vec2(cos(bn), abs(sin(bn)));

        p -= acs;
        p += ecs * clamp(-dot(p, ecs), 0.0, acs.y / ecs.y);
        float d = length(p) * sign(p.x);

        float distance = 1.0 + d;
        float canStroke = smoothstep(vSize - 2.0, vSize, distance * vSize);
        if (distance > 1.0 || vDefined < 0.5) {
            discard;
            return;
        }`},Kh={header:`
        varying float vSize;
        varying float vDefined;
    `,body:`
        float canFill = 1.0;

        vec2 p = 2.0 * gl_PointCoord - 1.0;
        p.y *= -1.0;

        // sector
        float an = 3.141593 / 3.0;
        float bn = mod(atan(p.x, p.y), 2.0 * an) - an;
        p = length(p) * vec2(cos(bn), abs(sin(bn)));

        // box
        vec2 d = abs(p) - vec2(0.9, 0.35);
        float sdf = length(max(d, 0.0)) + min(max(d.x, d.y), 0.0);

        float distance = 1.0 + sdf;
        float canStroke = smoothstep(vSize - 2.0, vSize, distance * vSize);
        if (distance > 1.0 || vDefined < 0.5) {
            discard;
            return;
        }`},Qh={header:`
        varying float vSize;
        varying float vDefined;`,body:`
        float canFill = 1.0;
        if (vDefined < 0.5) {
            discard;
        }
        vec2 pointCoordTransform = 2.0 * gl_PointCoord - 1.0;
        float distance = max(abs(pointCoordTransform.x), abs(pointCoordTransform.y));
        float canStroke = smoothstep(vSize - 2.0, vSize, distance * vSize);`},ed={header:`
        varying float vSize;
        varying float vDefined;
        float a = 0.6;
        float b = 1.0;
    `,body:`
        if (vDefined < 0.5) {
            discard;
        }

        vec2 pointCoordTransform = 2.0 * gl_PointCoord - 1.0;

        float x = abs(pointCoordTransform.x);
        float y = abs(pointCoordTransform.y);

        float X = (a * b * x) / (a * y + b * x);
        float Y = (a * b * y) / (a * y + b * x);

        float distance = length(vec2(x, y)) / length(vec2(X, Y));

        if (distance > 1.0) {
            discard;
        }
    `},td={header:`
        varying float vSize;
        varying float vDefined;`,body:`
        float canFill = 1.0;
        vec2 pointCoordTransform = 2.0 * gl_PointCoord - 1.0;
        float topEdgesDistance = abs(pointCoordTransform.x) - ((pointCoordTransform.y - 0.6) / sqrt(3.0));
        float bottomEdgeDistance = pointCoordTransform.y + 0.5;
        float distance = max(topEdgesDistance, bottomEdgeDistance);
        float canStroke = smoothstep(vSize - 2.0, vSize, distance * vSize);
        if (distance > 1.0 || vDefined < 0.5) {
            discard;
        }`},nd={header:`
        varying float vSize;
        varying float vStrokeWidthRatio;
        varying float vDefined;`,body:`
        float canFill = 1.0;
        vec2 pointCoordTransform = 2.0 * gl_PointCoord - 1.0;
        float innerCornerDistance = min(abs(pointCoordTransform.x), abs(pointCoordTransform.y)) + 0.66 - vStrokeWidthRatio;
        float outerEdgeDistance = max(abs(pointCoordTransform.x), abs(pointCoordTransform.y));
        float distance = max(innerCornerDistance, outerEdgeDistance);
        float canStroke = smoothstep(vSize - 2.0, vSize, distance * vSize);
        if (distance > 1.0 || vDefined < 0.5) {
            discard;
        }`},rd={header:`
        varying float vColorIndicator;
        varying float vDefined;`,body:`
        float canFill = 1.0;
        float canStroke = 0.0;
        if (vDefined < 0.5) {
            discard;
        }
        gl_FragColor = vec4(0.4, 0.8, 0, 1);
        if (vColorIndicator < 0.0) {
            gl_FragColor = vec4(0.8, 0.4, 0, 1);
        }`},id={header:`
        varying float vColorIndicator;
        varying float vDefined;`,body:`
        float canFill = 0.0;
        float canStroke = 1.0;
        if (vDefined < 0.5) {
            discard;
        }
        gl_FragColor = vec4(0.4, 0.8, 0, 1);
        if (vColorIndicator < 0.0) {
            gl_FragColor = vec4(0.8, 0.4, 0, 1);
        }`},ad={header:`
        varying float vDefined;`,body:`
        float canFill = 1.0;
        float canStroke = 0.0;
        if (vDefined < 0.5) {
            discard;
        }
        gl_FragColor = vec4(0.86, 0.86, 0.86, 1);`},od={header:`
        varying float vDefined;
    `,body:`
        float canFill = 0.0;
        float canStroke = 1.0;

        if (vDefined < 0.5) {
            discard;
        }`},sd={header:"varying float vDefined;",body:`
        float canFill = 0.0;
        float canStroke = 1.0;
        if (vDefined < 0.5) {
            discard;
        }`},ld={header:"varying float vDefined;",body:`
        float canFill = 1.0;
        float canStroke = 0.0;

        gl_FragColor = vec4(0.60, 0.60, 0.60, 1.0);

        if (vDefined < 0.5) {
            discard;
        }`},cd={header:"varying vec4 vFillColor;",body:"gl_FragColor = (canFill * vFillColor) + ((1.0 - canFill) * gl_FragColor);"},ud={header:"varying vec4 vStrokeColor;",body:"gl_FragColor = (canStroke * vStrokeColor) + ((1.0 - canStroke) * gl_FragColor);"},R1=function(){var u=nt(un),h=nt(fn);return u.appendHeader(qh.header).appendBody(qh.body),h.appendHeader(ad.header).appendBody(ad.body),{vertex:function(){return u},fragment:function(){return h}}},Ge={BYTE:5120,UNSIGNED_BYTE:5121,SHORT:5122,UNSIGNED_SHORT:5123,FLOAT:5126};function bc(u){switch(u){case Ge.BYTE:case Ge.UNSIGNED_BYTE:return 1;case Ge.SHORT:case Ge.UNSIGNED_SHORT:return 2;case Ge.FLOAT:return 4;default:throw new Error("Unknown type ".concat(u))}}function fd(u){switch(u){case Ge.BYTE:return Int8Array;case Ge.UNSIGNED_BYTE:return Uint8Array;case Ge.SHORT:return Int16Array;case Ge.UNSIGNED_SHORT:return Uint16Array;case Ge.FLOAT:return Float32Array;default:throw new Error("Unknown type ".concat(u))}}var Co=function(){var u=-1,h=null,g=1,v=Ge.FLOAT,y=!1,w=0,m=0,b=null,_=function(E){var M=E.context();h==null&&(h=M.createBuffer()),M.bindBuffer(M.ARRAY_BUFFER,h),M.vertexAttribPointer(u,g,v,y,w,m),M.enableVertexAttribArray(u);var L=E.extInstancedArrays();L.vertexAttribDivisorANGLE(u,b??(E.subInstanceCount()>0?1:0))};return _.location=function(){return arguments.length?(u=arguments.length<=0?void 0:arguments[0],_):u},_.buffer=function(){return arguments.length?(h=arguments.length<=0?void 0:arguments[0],_):h},_.size=function(){return arguments.length?(g=arguments.length<=0?void 0:arguments[0],_):g},_.type=function(){return arguments.length?(v=arguments.length<=0?void 0:arguments[0],_):v},_.normalized=function(){return arguments.length?(y=arguments.length<=0?void 0:arguments[0],_):y},_.stride=function(){return arguments.length?(w=arguments.length<=0?void 0:arguments[0],_):w},_.offset=function(){return arguments.length?(m=arguments.length<=0?void 0:arguments[0],_):m},_.divisor=function(){return arguments.length?(b=arguments.length<=0?void 0:arguments[0],_):b},_},M1=function(){var u=Ge.FLOAT,h=new Float32Array(0),g=function(y){var w=fd(u);return h.length>y?h=new w(h.buffer,0,y):h.length!==y&&(h=new w(y)),h};return g.type=function(){if(!arguments.length)return u;if(u!==(arguments.length<=0?void 0:arguments[0])){u=arguments.length<=0?void 0:arguments[0];var v=fd(u);h=new v(0)}return g},g},hd=function(){var u=!0,h=1,g=Ge.FLOAT,v=M1(),y=function(_,T){return _},w=null,m=function(){var _=w.length,T=v.type(g)(_*h);if(h>1)for(var E=0;E<_;E++){var M=y(w[E],E);if(M.length!==h)throw new Error("Expected components array of size ".concat(h,", recieved array with length ").concat(M.length,"."));for(var L=0;L<h;L++)T[E*h+L]=M[L]}else for(var P=0;P<_;P++){var F=y(w[P],P);if(Array.isArray(F))throw new Error("Expected a single component value, recieved array with length ".concat(F.length,"."));T[P]=F}return u=!1,T};return m.dirty=function(){return u},m.clear=function(){u=!0},m.size=function(){return arguments.length?(h=arguments.length<=0?void 0:arguments[0],u=!0,m):h},m.type=function(){return arguments.length?(g=arguments.length<=0?void 0:arguments[0],u=!0,m):g},m.arrayViewFactory=function(){return arguments.length?(v=arguments.length<=0?void 0:arguments[0],u=!0,m):v},m.value=function(){return arguments.length?(y=arguments.length<=0?void 0:arguments[0],u=!0,m):y},m.data=function(){return arguments.length?(w=arguments.length<=0?void 0:arguments[0],u=!0,m):w},m},We=function(){var u=Co(),h=hd(),g=function v(y){if(u.size(v.size()).type(v.type()),u(y),!!h.dirty()){var w=h(),m=y.context();m.bindBuffer(m.ARRAY_BUFFER,u.buffer()),m.bufferData(m.ARRAY_BUFFER,w,m.DYNAMIC_DRAW)}};return g.clear=function(){u.buffer(null),h.clear()},A(g,u,"normalized","location","divisor"),A(g,h,"data","value","size","type"),g},Ae=function(u,h,g,v){for(var y=arguments.length,w=new Array(y>4?y-4:0),m=4;m<y;m++)w[m-4]=arguments[m];u[h]=function(){for(var b=arguments.length,_=new Array(b),T=0;T<b;T++)_[T]=arguments[T];var E=g[v].apply(g,w.concat(_));return E===g?u:E}},dd=function(){var u=ur().mode(cr.TRIANGLES).subInstanceCount(6),h=Mt(),g=Mt(),v=function(){},y=We().divisor(0).size(3).type(Ge.UNSIGNED_BYTE).data([[0,0,0],[0,1,0],[1,1,1],[0,0,1],[1,0,0],[1,1,0]]);u.buffers().attribute("aCorner",y);var w=function(b){var _=R1();u.vertexShader(_.vertex()).fragmentShader(_.fragment()),h(u,"gl_Position",0),g(u,"gl_Position",1),v(u),u(b-1)};return w.decorate=function(){return arguments.length?(v=arguments.length<=0?void 0:arguments[0],w):v},w.xScale=function(){return arguments.length?(h=arguments.length<=0?void 0:arguments[0],w):h},w.yScale=function(){return arguments.length?(g=arguments.length<=0?void 0:arguments[0],w):g},A(w,u,"context","pixelRatio"),Ae(w,"crossValueAttribute",u.buffers(),"attribute","aCrossValue"),Ae(w,"crossNextValueAttribute",u.buffers(),"attribute","aCrossNextValue"),Ae(w,"mainValueAttribute",u.buffers(),"attribute","aMainValue"),Ae(w,"mainNextValueAttribute",u.buffers(),"attribute","aMainNextValue"),Ae(w,"baseValueAttribute",u.buffers(),"attribute","aBaseValue"),Ae(w,"baseNextValueAttribute",u.buffers(),"attribute","aBaseNextValue"),Ae(w,"definedAttribute",u.buffers(),"attribute","aDefined"),Ae(w,"definedNextAttribute",u.buffers(),"attribute","aDefinedNext"),w},gd=function(){var u=nt(un),h=nt(fn);return u.appendHeader(Bh.header).appendBody(Bh.body),h.appendHeader(Jh.header).appendBody(Jh.body),{vertex:function(){return u},fragment:function(){return h}}},md=function(){var u=ur().mode(cr.POINTS),h=Mt(),g=Mt(),v=gd(),y=function(){},w=function(b){u.vertexShader(v.vertex()).fragmentShader(v.fragment()),h(u,"gl_Position",0),g(u,"gl_Position",1),y(u),u(b)};return w.type=function(){return arguments.length?(v=arguments.length<=0?void 0:arguments[0],w):v},w.decorate=function(){return arguments.length?(y=arguments.length<=0?void 0:arguments[0],w):y},w.xScale=function(){return arguments.length?(h=arguments.length<=0?void 0:arguments[0],w):h},w.yScale=function(){return arguments.length?(g=arguments.length<=0?void 0:arguments[0],w):g},A(w,u,"context","pixelRatio"),Ae(w,"crossValueAttribute",u.buffers(),"attribute","aCrossValue"),Ae(w,"mainValueAttribute",u.buffers(),"attribute","aMainValue"),Ae(w,"sizeAttribute",u.buffers(),"attribute","aSize"),Ae(w,"definedAttribute",u.buffers(),"attribute","aDefined"),w},ga=function(){var u=1,h=function(v){v.buffers().uniform("uStrokeWidth",bn(u))};return h.lineWidth=function(){return arguments.length?(u=arguments.length<=0?void 0:arguments[0],h):u},h},Gr=function(u){var h=null,g=u,v=!0,y=function(m){var b=m.context();h==null&&(h=b.createBuffer()),b.bindBuffer(b.ELEMENT_ARRAY_BUFFER,h),v&&(b.bufferData(b.ELEMENT_ARRAY_BUFFER,new Uint16Array(g),b.STATIC_DRAW),v=!1)};return y.clear=function(){h=null,v=!0},y.data=function(){return arguments.length?(v=!0,g=arguments.length<=0?void 0:arguments[0],y):g},y},pd=function(){var u=ur().mode(cr.TRIANGLES).subInstanceCount(6),h=Mt(),g=Mt(),v=function(){},y=ga(),w=We().divisor(0).size(4).type(Ge.BYTE).data([[-1,1,1,0],[1,1,0,1],[1,-1,0,1],[-1,-1,1,0]]);u.buffers().elementIndices(Gr([0,1,2,2,3,0])).attribute("aCorner",w);var m=function(_){var T=nt(un),E=nt(fn);u.vertexShader(T).fragmentShader(E),T.appendHeader(`
            attribute vec4 aCorner;
            attribute float aCrossValue;
            attribute float aCrossNextValue;
            attribute float aMainValue;
            attribute float aMainNextValue;
            attribute float aDefined;
            attribute float aDefinedNext;

            uniform float uStrokeWidth;
            uniform vec2 uScreen;

            varying float vLength;
            varying vec2 vPosition;
        `),T.appendBody(`
            vec4 value = vec4(aCrossValue, aMainValue, 0.0, 1.0);
            vec4 nextValue = vec4(aCrossNextValue, aMainNextValue, 0.0, 1.0);
        `),h(u,"value",0),h(u,"nextValue",0),g(u,"value",1),g(u,"nextValue",1),T.appendBody(`
            vec2 position = aCorner[2] * value.xy + aCorner[3] * nextValue.xy;

            vec2 direction = normalize((nextValue.xy - value.xy) * uScreen);
            vec2 normal = vec2(direction.y, -direction.x);
            vec2 padding = ((uStrokeWidth / 2.0) / (uScreen / 2.0));
            
            padding *= aDefined * aDefinedNext;
            position += (aCorner[0] * direction + aCorner[1] * normal) * padding;

            gl_Position = vec4(position.x, position.y, 0.0, 1.0);

            vLength = length((nextValue.xy - value.xy) * (uScreen / 2.0));
            vPosition = aCorner.xy * (uStrokeWidth / 2.0);
            vPosition.x += aCorner[3] * vLength;
        `),E.appendHeader(`
            uniform float uStrokeWidth;
            varying float vLength;
            varying vec2 vPosition;

            float canFill = 0.0;
            float canStroke = 1.0;
        `),E.appendBody(`
            vec2 position = vPosition;
            position.x -= clamp(position.x, 0.0, vLength);
            float sdf = length(position) - uStrokeWidth / 2.0;
            if (sdf > 0.5) {
                discard;
            }
        `),y(u),v(u),u(_-1)};return m.decorate=function(){return arguments.length?(v=arguments.length<=0?void 0:arguments[0],m):v},m.xScale=function(){return arguments.length?(h=arguments.length<=0?void 0:arguments[0],m):h},m.yScale=function(){return arguments.length?(g=arguments.length<=0?void 0:arguments[0],m):g},A(m,u,"context","pixelRatio"),A(m,y,"lineWidth"),Ae(m,"crossValueAttribute",u.buffers(),"attribute","aCrossValue"),Ae(m,"crossNextValueAttribute",u.buffers(),"attribute","aCrossNextValue"),Ae(m,"mainValueAttribute",u.buffers(),"attribute","aMainValue"),Ae(m,"mainNextValueAttribute",u.buffers(),"attribute","aMainNextValue"),Ae(m,"definedAttribute",u.buffers(),"attribute","aDefined"),Ae(m,"definedNextAttribute",u.buffers(),"attribute","aDefinedNext"),m},N1=function(){var u=nt(un),h=nt(fn);return u.appendHeader(Yh.header).appendBody(Yh.body),h.appendHeader(id.header).appendBody(id.body),{vertex:function(){return u},fragment:function(){return h}}},vd=function(){var u=ur().mode(cr.TRIANGLES).subInstanceCount(18),h=Mt(),g=Mt(),v=ga(),y=function(){},w=We().divisor(0).size(3).type(Ge.BYTE).data([[0,-2,-1],[0,-2,1],[0,2,1],[0,2,-1],[-1,-1,-1],[-1,-1,1],[0,-1,1],[0,-1,-1],[1,1,1],[0,1,1],[0,1,-1],[1,1,-1]]);u.buffers().elementIndices(Gr([0,1,2,0,3,2,4,5,6,4,7,6,8,9,10,10,11,8])).attribute("aCorner",w);var m=function(_){var T=N1();u.vertexShader(T.vertex()).fragmentShader(T.fragment()),h(u,"gl_Position",0),g(u,"gl_Position",1),v(u),u.vertexShader().appendBody(`
          gl_Position.x += xModifier / uScreen.x * 2.0;
          gl_Position.y += yModifier / uScreen.y * 2.0;
        `),y(u),u(_)};return m.decorate=function(){return arguments.length?(y=arguments.length<=0?void 0:arguments[0],m):y},m.xScale=function(){return arguments.length?(h=arguments.length<=0?void 0:arguments[0],m):h},m.yScale=function(){return arguments.length?(g=arguments.length<=0?void 0:arguments[0],m):g},A(m,u,"context","pixelRatio"),A(m,v,"lineWidth"),Ae(m,"crossValueAttribute",u.buffers(),"attribute","aCrossValue"),Ae(m,"openValueAttribute",u.buffers(),"attribute","aOpenValue"),Ae(m,"highValueAttribute",u.buffers(),"attribute","aHighValue"),Ae(m,"lowValueAttribute",u.buffers(),"attribute","aLowValue"),Ae(m,"closeValueAttribute",u.buffers(),"attribute","aCloseValue"),Ae(m,"bandwidthAttribute",u.buffers(),"attribute","aBandwidth"),Ae(m,"definedAttribute",u.buffers(),"attribute","aDefined"),m},O1=function(){var u=nt(un),h=nt(fn);return u.appendHeader(Xh.header).appendBody(Xh.body),h.appendHeader(ld.header).appendBody(ld.body),{vertex:function(){return u},fragment:function(){return h}}},bd=function(){var u=ur().mode(cr.TRIANGLES).subInstanceCount(6),h=Mt(),g=Mt(),v=function(){},y=We().divisor(0).size(2).type(Ge.BYTE).data([[-1,-1],[1,1],[-1,1],[1,-1]]);u.buffers().elementIndices(Gr([0,1,2,0,1,3])).attribute("aCorner",y);var w=function(b){var _=O1();u.vertexShader(_.vertex()).fragmentShader(_.fragment()),h(u,"gl_Position",0),g(u,"gl_Position",1),u.vertexShader().appendBody(`
            gl_Position.x += xModifier / uScreen.x * 2.0;
        `),v(u),u(b)};return w.decorate=function(){return arguments.length?(v=arguments.length<=0?void 0:arguments[0],w):v},w.xScale=function(){return arguments.length?(h=arguments.length<=0?void 0:arguments[0],w):h},w.yScale=function(){return arguments.length?(g=arguments.length<=0?void 0:arguments[0],w):g},A(w,u,"context","pixelRatio"),Ae(w,"crossValueAttribute",u.buffers(),"attribute","aCrossValue"),Ae(w,"mainValueAttribute",u.buffers(),"attribute","aMainValue"),Ae(w,"baseValueAttribute",u.buffers(),"attribute","aBaseValue"),Ae(w,"bandwidthAttribute",u.buffers(),"attribute","aBandwidth"),Ae(w,"definedAttribute",u.buffers(),"attribute","aDefined"),w},D1=function(){var u=nt(un),h=nt(fn);return u.appendHeader(Gh.header).appendBody(Gh.body),h.appendHeader(sd.header).appendBody(sd.body),{vertex:function(){return u},fragment:function(){return h}}},_d=function(){var u=ur().mode(cr.TRIANGLES).subInstanceCount(18),h=Mt(),g=Mt(),v=function(){},y=ga(),w=We().divisor(0).size(3).type(Ge.BYTE).data([[0,1,1],[0,1,-1],[0,-1,-1],[0,-1,1],[1,-1,1],[1,-1,-1],[-1,-1,-1],[-1,-1,1],[-1,1,-1],[-1,1,1],[1,1,1],[1,1,-1]]);u.buffers().elementIndices(Gr([0,1,2,0,3,2,4,5,6,4,7,6,8,9,10,8,11,10])).attribute("aCorner",w);var m=function(_){var T=D1();u.vertexShader(T.vertex()).fragmentShader(T.fragment()),h(u,"gl_Position",0),g(u,"gl_Position",1),y(u),u.vertexShader().appendBody(`
                gl_Position.x += xModifier / uScreen.x * 2.0;
                gl_Position.y += yModifier / uScreen.y * 2.0;
            `),v(u),u(_)};return m.decorate=function(){return arguments.length?(v=arguments.length<=0?void 0:arguments[0],m):v},m.xScale=function(){return arguments.length?(h=arguments.length<=0?void 0:arguments[0],m):h},m.yScale=function(){return arguments.length?(g=arguments.length<=0?void 0:arguments[0],m):g},A(m,u,"context","pixelRatio"),A(m,y,"lineWidth"),Ae(m,"crossValueAttribute",u.buffers(),"attribute","aCrossValue"),Ae(m,"highValueAttribute",u.buffers(),"attribute","aHighValue"),Ae(m,"lowValueAttribute",u.buffers(),"attribute","aLowValue"),Ae(m,"bandwidthAttribute",u.buffers(),"attribute","aBandwidth"),Ae(m,"definedAttribute",u.buffers(),"attribute","aDefined"),m},L1=function(){var u=nt(un),h=nt(fn);return u.appendHeader(Uh.header).appendBody(Uh.body),h.appendHeader(rd.header).appendBody(rd.body),{vertex:function(){return u},fragment:function(){return h}}},yd=function(){var u=ur().mode(cr.TRIANGLES).subInstanceCount(12),h=Mt(),g=Mt(),v=ga(),y=function(){},w=We().divisor(0).size(3).type(Ge.BYTE).data([[0,2,1],[0,2,-1],[0,-2,-1],[0,-2,1],[1,-1,0],[-1,-1,0],[-1,1,0],[1,1,0]]);u.buffers().elementIndices(Gr([0,1,2,0,3,2,4,5,6,4,7,6])).attribute("aCorner",w);var m=function(_){var T=L1();u.vertexShader(T.vertex()).fragmentShader(T.fragment()),h(u,"gl_Position",0),g(u,"gl_Position",1),v(u),u.vertexShader().appendBody(`
          gl_Position.x += xModifier / uScreen.x * 2.0;
          gl_Position.y += yModifier / uScreen.y * 2.0;
        `),y(u),u(_)};return m.decorate=function(){return arguments.length?(y=arguments.length<=0?void 0:arguments[0],m):y},m.xScale=function(){return arguments.length?(h=arguments.length<=0?void 0:arguments[0],m):h},m.yScale=function(){return arguments.length?(g=arguments.length<=0?void 0:arguments[0],m):g},A(m,u,"context","pixelRatio"),A(m,v,"lineWidth"),Ae(m,"crossValueAttribute",u.buffers(),"attribute","aCrossValue"),Ae(m,"openValueAttribute",u.buffers(),"attribute","aOpenValue"),Ae(m,"highValueAttribute",u.buffers(),"attribute","aHighValue"),Ae(m,"lowValueAttribute",u.buffers(),"attribute","aLowValue"),Ae(m,"closeValueAttribute",u.buffers(),"attribute","aCloseValue"),Ae(m,"bandwidthAttribute",u.buffers(),"attribute","aBandwidth"),Ae(m,"definedAttribute",u.buffers(),"attribute","aDefined"),m},I1=function(){var u=nt(un),h=nt(fn);return u.appendHeader(jh.header).appendBody(jh.body),h.appendHeader(od.header).appendBody(od.body),{vertex:function(){return u},fragment:function(){return h}}},wd=function(){var u=ur().mode(cr.TRIANGLES).subInstanceCount(54),h=Mt(),g=Mt(),v=function(){},y=ga(),w=We().divisor(0).size(4).type(Ge.BYTE).data([[-1,-2,-1,1],[1,-2,-1,1],[1,-2,1,1],[-1,-2,1,1],[0,-2,-1,0],[0,-2,1,0],[0,-1,1,0],[0,-1,-1,0],[-1,-1,-1,1],[1,-1,-1,1],[1,-1,1,1],[-1,-1,1,1],[-1,0,-1,1],[1,0,-1,1],[1,0,1,1],[-1,0,1,1],[-1,1,-1,1],[1,1,-1,1],[1,1,1,1],[-1,1,1,1],[-1,-1,-1,0],[-1,-1,1,0],[-1,1,1,0],[-1,1,-1,0],[1,-1,-1,0],[1,-1,1,0],[1,1,1,0],[1,1,-1,0],[0,2,-1,0],[0,2,1,0],[0,1,1,0],[0,1,-1,0],[-1,2,-1,1],[1,2,-1,1],[1,2,1,1],[-1,2,1,1]]);u.buffers().elementIndices(Gr([0,1,2,0,2,3,4,5,6,4,6,7,8,9,10,8,10,11,12,13,14,12,14,15,16,17,18,16,18,19,20,21,22,20,22,23,24,25,26,24,26,27,28,29,30,28,30,31,32,33,34,32,34,35])).attribute("aCorner",w);var m=function(_){var T=I1();u.vertexShader(T.vertex()).fragmentShader(T.fragment()),h(u,"gl_Position",0),g(u,"gl_Position",1),y(u),u.vertexShader().appendBody(`
            gl_Position.x += xModifier / uScreen.x * 2.0;
            gl_Position.y += yModifier / uScreen.y * 2.0;
        `),v(u),u(_)};return m.decorate=function(){return arguments.length?(v=arguments.length<=0?void 0:arguments[0],m):v},m.xScale=function(){return arguments.length?(h=arguments.length<=0?void 0:arguments[0],m):h},m.yScale=function(){return arguments.length?(g=arguments.length<=0?void 0:arguments[0],m):g},A(m,u,"context","pixelRatio"),A(m,y,"lineWidth"),Ae(m,"crossValueAttribute",u.buffers(),"attribute","aCrossValue"),Ae(m,"highValueAttribute",u.buffers(),"attribute","aHighValue"),Ae(m,"upperQuartileValueAttribute",u.buffers(),"attribute","aUpperQuartileValue"),Ae(m,"medianValueAttribute",u.buffers(),"attribute","aMedianValue"),Ae(m,"lowerQuartileValueAttribute",u.buffers(),"attribute","aLowerQuartileValue"),Ae(m,"lowValueAttribute",u.buffers(),"attribute","aLowValue"),Ae(m,"bandwidthAttribute",u.buffers(),"attribute","aBandwidth"),Ae(m,"capAttribute",u.buffers(),"attribute","aCapWidth"),Ae(m,"definedAttribute",u.buffers(),"attribute","aDefined"),m},Ar=function(){var u=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,h=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;if(u>0||h<0)throw new Error("Offset values (".concat(u," & ").concat(h,") must straddle 0 "));var g=Co(),v=hd(),y=function w(m){var b=w.size()*bc(w.type()),_=Math.abs(u)*b;if(g.offset(_).size(w.size()).type(w.type()),g(m),!!v.dirty()){var T=v(),E=h*b,M=_+T.length*bc(w.type())+E,L=m.context();L.bindBuffer(L.ARRAY_BUFFER,g.buffer()),L.bufferData(L.ARRAY_BUFFER,M,L.DYNAMIC_DRAW),L.bufferSubData(L.ARRAY_BUFFER,_,T)}};return y.offset=function(w){if(u>w||w>h)throw new Error("Requested offset ".concat(w," exceeds bounds (").concat(u," & ").concat(h,") "));var m=function(_){g.offset((w-u)*y.size()*bc(y.type())),g(_)};return A(m,y,"clear","location"),m},y.clear=function(){g.buffer(null),v.clear()},A(y,g,"normalized","location","divisor"),A(y,v,"data","value","size","type"),y},Ao=function(){var u=Mt(),h=function(y){return"linear".concat(y)},g=function(y,w,m){y.vertexShader().appendHeaderIfNotExists("uniform vec4 ".concat(h(m),"Offset;")).appendHeaderIfNotExists("uniform vec4 ".concat(h(m),"Scale;")).appendBody("".concat(w," = ").concat(w," + ").concat(h(m),"Offset;")).appendBody("".concat(w," = ").concat(w," * ").concat(h(m),"Scale;"));var b=u.domain()[1]-u.domain()[0],_=u.range()[1]-u.range()[0],T=u.range()[0]*(b/_)-u.domain()[0],E=_/b,M=[0,0,0,0],L=[1,1,1,1];M[m]=T,L[m]=E,y.buffers().uniform("".concat(h(m),"Offset"),bn(M)).uniform("".concat(h(m),"Scale"),bn(L))};return S(g,u),g},xd=function(){var u=Mt(),h=10;function g(w,m){return Math.log10(w)/Math.log10(m)}var v=function(m){return"log".concat(m)},y=function(m,b,_){var T="".concat(v(_),"Offset + (").concat(v(_),"Scale * clamp(log(").concat(b,") / log(").concat(v(_),"Base), -inf, inf))");m.vertexShader().appendHeaderIfNotExists("uniform vec4 ".concat(v(_),"Offset;")).appendHeaderIfNotExists("uniform vec4 ".concat(v(_),"Scale;")).appendHeaderIfNotExists("uniform vec4 ".concat(v(_),"Include;")).appendHeaderIfNotExists("uniform float ".concat(v(_),"Base;")).appendBody("".concat(b," = (").concat(v(_),"Include * (").concat(T,")) + ((1.0 - ").concat(v(_),"Include) * ").concat(b,");"));var E=g(u.domain()[1],h)-g(u.domain()[0],h),M=u.range()[1]-u.range()[0],L=M/E,P=u.range()[0]-L*g(u.domain()[0],h),F=[0,0,0,0],B=[0,0,0,0],V=[0,0,0,0];F[_]=P,B[_]=L,V[_]=1,m.buffers().uniform("".concat(v(_),"Offset"),bn(F)).uniform("".concat(v(_),"Scale"),bn(B)).uniform("".concat(v(_),"Include"),bn(V)).uniform("".concat(v(_),"Base"),bn(h))};return y.base=function(){return arguments.length?(h=arguments.length<=0?void 0:arguments[0],y):h},S(y,u),y},Td=function(){var u=Mt(),h=1;function g(w,m){return Math.sign(w)*Math.pow(Math.abs(w),m)}var v=function(m){return"pow".concat(m)},y=function(m,b,_){var T="".concat(v(_),"Offset + (").concat(v(_),"Scale * sign(").concat(b,") * pow(abs(").concat(b,"), vec4(").concat(v(_),"Exp)))");m.vertexShader().appendHeaderIfNotExists("uniform vec4 ".concat(v(_),"Offset;")).appendHeaderIfNotExists("uniform vec4 ".concat(v(_),"Scale;")).appendHeaderIfNotExists("uniform vec4 ".concat(v(_),"Include;")).appendHeaderIfNotExists("uniform float ".concat(v(_),"Exp;")).appendBody("".concat(b," = (").concat(v(_),"Include * (").concat(T,")) + ((1.0 - ").concat(v(_),"Include) * ").concat(b,");"));var E=g(u.domain()[1],h)-g(u.domain()[0],h),M=u.range()[1]-u.range()[0],L=M/E,P=u.range()[0]-L*g(u.domain()[0],h),F=[0,0,0,0],B=[0,0,0,0],V=[0,0,0,0];F[_]=P,B[_]=L,V[_]=1,m.buffers().uniform("".concat(v(_),"Offset"),bn(F)).uniform("".concat(v(_),"Scale"),bn(B)).uniform("".concat(v(_),"Include"),bn(V)).uniform("".concat(v(_),"Exp"),bn(h))};return y.exponent=function(){return arguments.length?(h=arguments.length<=0?void 0:arguments[0],y):h},S(y,u),y},P1=i.scaleLinear().copy.toString(),k1=i.scaleLog().copy.toString(),B1=i.scalePow().copy.toString(),F1=i.scaleTime().copy.toString(),_c=i.scaleIdentity(),V1=Date.now(),Sd=function(h){return h-V1},Rr=function(u){switch(u.copy.toString()){case P1:return{scale:_c,webglScale:Ao().domain(u.domain())};case F1:return{scale:Sd,webglScale:Ao().domain(u.domain().map(Sd))};case k1:return{scale:_c,webglScale:xd().domain(u.domain()).base(u.base())};case B1:return{scale:_c,webglScale:Td().domain(u.domain()).exponent(u.exponent())};default:return{scale:u.copy(),webglScale:Ao().domain(u.range())}}},W1=function(){var u=nt(un),h=nt(fn);return u.appendHeader(Wh.header).appendBody(Wh.body),h.appendHeader(Qh.header).appendBody(Qh.body),{vertex:function(){return u},fragment:function(){return h}}},$1=function(){var u=nt(un),h=nt(fn);return u.appendHeader(zh.header).appendBody(zh.body),h.appendHeader(td.header).appendBody(td.body),{vertex:function(){return u},fragment:function(){return h}}},z1=function(){var u=nt(un),h=nt(fn);return u.appendHeader(Hh.header).appendBody(Hh.body),h.appendHeader(nd.header).appendBody(nd.body),{vertex:function(){return u},fragment:function(){return h}}},H1=function(){var u=nt(un),h=nt(fn);return u.appendHeader($h.header).appendBody($h.body),h.appendHeader(ed.header).appendBody(ed.body),{vertex:function(){return u},fragment:function(){return h}}},U1=function(){var u=nt(un),h=nt(fn);return u.appendHeader(Fh.header).appendBody(Fh.body),h.appendHeader(Zh.header).appendBody(Zh.body),{vertex:function(){return u},fragment:function(){return h}}},Y1=function(){var u=nt(un),h=nt(fn);return u.appendHeader(Vh.header).appendBody(Vh.body),h.appendHeader(Kh.header).appendBody(Kh.body),{vertex:function(){return u},fragment:function(){return h}}},Ed=function(u){switch(u){case f.symbolCircle:return gd();case f.symbolSquare:return W1();case f.symbolTriangle:return $1();case f.symbolCross:return z1();case f.symbolDiamond:return H1();case f.symbolStar:return U1();case f.symbolWye:return Y1();default:throw new Error("Unrecognised symbol: ".concat(u))}},Cd=function(u){var h=Co().divisor(1),g=u,v=!0,y=function(m){if(h(m),!!v){if(!Array.isArray(g))throw new Error("Expected an array, received: ".concat(g));if(g.length!==h.size())throw new Error("Expected array of length: ".concat(h.size(),", recieved array of length: ").concat(g.length));var b=m.context();b["vertexAttrib".concat(g.length,"fv")](h.location(),g),b.disableVertexAttribArray(h.location()),v=!1}};return y.clear=function(){v=!0},y.value=function(){return arguments.length?(g=arguments.length<=0?void 0:arguments[0],v=!0,y):g},A(y,h,"normalized","size","location"),y},X1=function(){var u=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[0,0,0,1],h=We().size(4),g=u,v=!0,y=function(m){if(m.vertexShader().appendHeaderIfNotExists(Ph.header).appendBodyIfNotExists(Ph.body),m.fragmentShader().appendHeaderIfNotExists(cd.header).appendBodyIfNotExists(cd.body),Array.isArray(g))m.buffers().attribute("aFillColor",Cd(g).size(4));else if(typeof g=="function"){if(!v)return;h.value(g),m.buffers().attribute("aFillColor",h)}else throw new Error("Expected value to be an array or function, received ".concat(g));v=!1};return y.value=function(){return arguments.length?(g!==(arguments.length<=0?void 0:arguments[0])&&(g=arguments.length<=0?void 0:arguments[0],v=!0),y):g},A(y,h,"data"),y},G1=function(){var u=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[0,0,0,1],h=We().size(4),g=u,v=!0,y=function(m){if(m.vertexShader().appendHeaderIfNotExists(kh.header).appendBodyIfNotExists(kh.body),m.fragmentShader().appendHeaderIfNotExists(ud.header).appendBodyIfNotExists(ud.body),Array.isArray(g))m.buffers().attribute("aStrokeColor",Cd(g).size(4));else if(typeof g=="function"){if(!v)return;h.value(g),m.buffers().attribute("aStrokeColor",h)}else throw new Error("Expected value to be an array or function, received ".concat(g));v=!1};return y.value=function(){return arguments.length?(g!==(arguments.length<=0?void 0:arguments[0])&&(g=arguments.length<=0?void 0:arguments[0],v=!0),y):g},A(y,h,"data"),y},Ad=function(){var u=Cn(),h=Ar(0,1),g=h.offset(1),v=Ar(0,1),y=v.offset(1),w=Ar(0,1).type(Ge.UNSIGNED_BYTE),m=w.offset(1),b=pd().crossValueAttribute(h).crossNextValueAttribute(g).mainValueAttribute(v).mainNextValueAttribute(y).definedAttribute(w).definedNextAttribute(m),_=function(B,V){return!1},T=Rr,E=[],M=null,L=null,P=function(B){var V=T(u.xScale()),z=T(u.yScale()),U=!_(E,B);U&&(E=B,w.value(function(H,j){return u.defined()(H,j)}).data(B)),(U||V.scale!==M)&&(M=V.scale,u.orient()==="vertical"?h.value(function(H,j){return V.scale(u.crossValue()(H,j))}).data(B):h.value(function(H,j){return V.scale(u.mainValue()(H,j))}).data(B)),(U||z.scale!==L)&&(L=z.scale,u.orient()==="vertical"?v.value(function(H,j){return z.scale(u.mainValue()(H,j))}).data(B):v.value(function(H,j){return z.scale(u.crossValue()(H,j))}).data(B)),b.xScale(V.webglScale).yScale(z.webglScale).decorate(function(H){return u.decorate()(H,B,0)}),b(B.length)};return P.equals=function(){return arguments.length?(_=arguments.length<=0?void 0:arguments[0],P):_},P.scaleMapper=function(){return arguments.length?(T=arguments.length<=0?void 0:arguments[0],P):T},S(P,u,N("baseValue","bandwidth","align")),A(P,b,"context","lineWidth","pixelRatio"),P},Rd=function(){var u=f.symbol(),h=Cn(),g=qe("g","point"),v=function(m){return"translate("+m[0]+", "+m[1]+")"},y=function(m){Ct(m)&&g.transition(m),m.each(function(b,_,T){var E=b.filter(h.defined()),M=g(c.select(T[_]),E);M.enter().attr("transform",function(L,P){return v(h.values(L,P).origin)}).attr("fill",pt.gray).attr("stroke",pt.black).append("path"),M.attr("transform",function(L,P){return v(h.values(L,P).origin)}).select("path").attr("d",u),h.decorate()(M,b,_)})};return S(y,h,N("baseValue","bandwidth","align")),A(y,g,"key"),A(y,u,"type","size"),y},Md=function(){var u=f.symbol(),h=Cn(),g=function(y){var w=y.filter(h.defined()),m=u.context();w.forEach(function(b,_){m.save();var T=h.values(b,_);m.translate(T.origin[0],T.origin[1]),m.beginPath(),m.strokeStyle=pt.black,m.fillStyle=pt.gray,h.decorate()(m,b,_),u(b,_),m.fill(),m.stroke(),m.closePath(),m.restore()})};return S(g,h,N("baseValue","bandwidth","align")),A(g,u,"size","type","context"),g},q1=function(){var u=Cn(),h=st(64),g=f.symbolCircle,v=We(),y=We(),w=We().type(Ge.UNSIGNED_SHORT),m=We().type(Ge.UNSIGNED_BYTE),b=md().crossValueAttribute(v).mainValueAttribute(y).sizeAttribute(w).definedAttribute(m),_=function(B,V){return!1},T=Rr,E=[],M=null,L=null,P=function(B){var V=T(u.xScale()),z=T(u.yScale()),U=!_(E,B);U&&(E=B,w.value(function(H,j){return h(H,j)}).data(B),m.value(function(H,j){return u.defined()(H,j)}).data(B)),(U||V.scale!==M)&&(M=V.scale,u.orient()==="vertical"?v.value(function(H,j){return V.scale(u.crossValue()(H,j))}).data(B):v.value(function(H,j){return V.scale(u.mainValue()(H,j))}).data(B)),(U||z.scale!==L)&&(L=z.scale,u.orient()==="vertical"?y.value(function(H,j){return z.scale(u.mainValue()(H,j))}).data(B):y.value(function(H,j){return z.scale(u.crossValue()(H,j))}).data(B)),b.xScale(V.webglScale).yScale(z.webglScale).type(Ed(g)).decorate(function(H){return u.decorate()(H,B,0)}),b(B.length)};return P.size=function(){return arguments.length?(h=st(arguments.length<=0?void 0:arguments[0]),P):h},P.type=function(){return arguments.length?(g=arguments.length<=0?void 0:arguments[0],P):g},P.equals=function(){return arguments.length?(_=arguments.length<=0?void 0:arguments[0],P):_},P.scaleMapper=function(){return arguments.length?(T=arguments.length<=0?void 0:arguments[0],P):T},S(P,u,N("baseValue","bandwidth","align")),A(P,b,"context","pixelRatio"),P},j1=function(){var u=_i().x(0).y(0),h=Cn(),g=qe("g","bar"),v=function(_){return h.orient()==="vertical"?_.height:_.width},y=function(_){return h.orient()==="vertical"?_.width:_.height},w=function(_){return"translate("+_[0]+", "+_[1]+")"},m=function(_){Ct(_)&&g.transition(_),_.each(function(T,E,M){var L=h.orient();if(L!=="vertical"&&L!=="horizontal")throw new Error("The bar series does not support an orientation of "+L);var P=T.filter(h.defined()),F=P.map(h.values);u.width(0).height(0),h.orient()==="vertical"?(u.verticalAlign("top"),u.horizontalAlign("center")):(u.horizontalAlign("right"),u.verticalAlign("center"));var B=g(c.select(M[E]),P);B.enter().attr("transform",function(V,z){return w(F[z].baseOrigin)}).attr("class","bar "+h.orient()).attr("fill",pt.darkGray).append("path").attr("d",function(V,z){return y(u)(F[z].width),u([V])}),B.attr("transform",function(V,z){return w(F[z].origin)}).select("path").attr("d",function(V,z){return y(u)(F[z].width),v(u)(-F[z].height),u([V])}),h.decorate()(B,P,E)})};return S(m,h),A(m,g,"key"),m},J1=function(){var u=Cn(),h=_i().x(0).y(0),g=function(m){return u.orient()==="vertical"?m.height:m.width},v=function(m){return u.orient()==="vertical"?m.width:m.height},y=function(m){var b=h.context(),_=m.filter(u.defined()),T=_.map(u.values);u.orient()==="vertical"?(h.verticalAlign("top"),h.horizontalAlign("center")):(h.horizontalAlign("right"),h.verticalAlign("center")),T.forEach(function(E,M){b.save(),b.beginPath(),b.translate(E.origin[0],E.origin[1]),b.fillStyle=pt.darkGray,b.strokeStyle="transparent",u.decorate()(b,E.d,M),g(h)(-E.height),v(h)(E.width),h([E]),b.fill(),b.stroke(),b.closePath(),b.restore()})};return S(y,u),A(y,h,"context"),y},Z1=function(){var u=Cn(),h=We(),g=We(),v=We(),y=We().type(Ge.UNSIGNED_SHORT),w=We().type(Ge.UNSIGNED_BYTE),m=bd().crossValueAttribute(h).mainValueAttribute(g).baseValueAttribute(v).bandwidthAttribute(y).definedAttribute(w),b=function(F,B){return!1},_=Rr,T=[],E=null,M=null,L=function(F){if(u.orient()!=="vertical")throw new Error("Unsupported orientation ".concat(u.orient()));var B=_(u.xScale()),V=_(u.yScale()),z=!b(T,F);z&&(T=F,y.value(function(U,H){return u.bandwidth()(U,H)}).data(F),w.value(function(U,H){return u.defined()(U,H)}).data(F)),(z||B.scale!==E)&&(E=B.scale,h.value(function(U,H){return B.scale(u.crossValue()(U,H))}).data(F)),(z||V.scale!==M)&&(M=V.scale,v.value(function(U,H){return V.scale(u.baseValue()(U,H))}).data(F),g.value(function(U,H){return V.scale(u.mainValue()(U,H))}).data(F)),m.xScale(B.webglScale).yScale(V.webglScale).decorate(function(U){return u.decorate()(U,F,0)}),m(F.length)};return L.equals=function(){return arguments.length?(b=arguments.length<=0?void 0:arguments[0],L):b},L.scaleMapper=function(){return arguments.length?(_=arguments.length<=0?void 0:arguments[0],L):_},S(L,u,N("align")),A(L,m,"context","pixelRatio"),L},yc=function(){var u=function(_){return _.high},h=function(_){return _.low},g=function(_){return _.cross},v="vertical",y="center",w=function(){return 5},m=Xr({decorate:function(){},defined:function(_,T){return ha(h,u,g)(_,T)},xScale:i.scaleIdentity(),yScale:i.scaleIdentity()});return m.values=function(b,_){var T=w(b,_),E=da(y,T),M=m.xScale(),L=m.yScale();if(v==="vertical"){var P=L(u(b,_));return{origin:[M(g(b,_))+E,P],high:0,low:L(h(b,_))-P,width:T}}else{var F=M(h(b,_));return{origin:[F,L(g(b,_))+E],high:M(u(b,_))-F,low:0,width:T}}},m.xValues=function(){return v==="vertical"?[g]:[u,h]},m.yValues=function(){return v!=="vertical"?[g]:[u,h]},m.orient=function(){return arguments.length?(v=arguments.length<=0?void 0:arguments[0],m):v},m.lowValue=function(){return arguments.length?(h=st(arguments.length<=0?void 0:arguments[0]),m):h},m.highValue=function(){return arguments.length?(u=st(arguments.length<=0?void 0:arguments[0]),m):u},m.crossValue=function(){return arguments.length?(g=st(arguments.length<=0?void 0:arguments[0]),m):g},m.bandwidth=function(){return arguments.length?(w=st(arguments.length<=0?void 0:arguments[0]),m):w},m.align=function(){return arguments.length?(y=arguments.length<=0?void 0:arguments[0],m):y},m},K1=function(){var u=yc(),h=qe("g","error-bar"),g=fc().value(0),v=function(b){return function(_){return Ct(b)?_.transition(b):_}},y=function(b){return"translate("+b.origin[0]+", "+b.origin[1]+")"},w=function(b){Ct(b)&&h.transition(b);var _=v(b);b.each(function(T,E,M){var L=T.filter(u.defined()),P=L.map(u.values),F=h(c.select(M[E]),L);F.enter().attr("stroke",pt.black).attr("fill",pt.gray).attr("transform",function(B,V){return y(u.values(B,V))+" scale(1e-6, 1)"}).append("path"),g.orient(u.orient()),F.each(function(B,V,z){var U=P[V];g.high(U.high).low(U.low).width(U.width),_(c.select(z[V])).attr("transform",y(U)+" scale(1)").select("path").attr("d",g([B]))}),u.decorate()(F,T,E)})};return S(w,u),A(w,h,"key"),w},Q1=function(){var u=yc(),h=fc().value(0),g=function(y){var w=y.filter(u.defined()),m=h.context();h.orient(u.orient()),w.forEach(function(b,_){m.save();var T=u.values(b,_);m.translate(T.origin[0],T.origin[1]),m.beginPath(),m.strokeStyle=pt.black,m.fillStyle=pt.gray,u.decorate()(m,b,_),h.high(T.high).width(T.width).low(T.low)([b]),m.fill(),m.stroke(),m.closePath(),m.restore()})};return S(g,u),A(g,h,"context"),g},ew=function(){var u=yc(),h=We(),g=We(),v=We(),y=We().type(Ge.UNSIGNED_SHORT),w=We().type(Ge.UNSIGNED_BYTE),m=_d().crossValueAttribute(h).highValueAttribute(g).lowValueAttribute(v).bandwidthAttribute(y).definedAttribute(w),b=function(F,B){return!1},_=Rr,T=[],E=null,M=null,L=function(F){if(u.orient()!=="vertical")throw new Error("Unsupported orientation ".concat(u.orient()));var B=_(u.xScale()),V=_(u.yScale()),z=!b(T,F);z&&(T=F,y.value(function(U,H){return u.bandwidth()(U,H)}).data(F),w.value(function(U,H){return u.defined()(U,H)}).data(F)),(z||B.scale!==E)&&(E=B.scale,h.value(function(U,H){return B.scale(u.crossValue()(U,H))}).data(F)),(z||V.scale!==M)&&(M=V.scale,g.value(function(U,H){return V.scale(u.highValue()(U,H))}).data(F),v.value(function(U,H){return V.scale(u.lowValue()(U,H))}).data(F)),m.xScale(B.webglScale).yScale(V.webglScale).decorate(function(U){return u.decorate()(U,F,0)}),m(F.length)};return L.equals=function(){return arguments.length?(b=arguments.length<=0?void 0:arguments[0],L):b},L.scaleMapper=function(){return arguments.length?(_=arguments.length<=0?void 0:arguments[0],L):_},S(L,u,N("align")),A(L,m,"context","lineWidth","pixelRatio"),L},tw=function(){var u=Cn(),h=f.area(),g=qe("path","area"),v=function(w){Ct(w)&&g.transition(w),h.defined(u.defined()),w.each(function(m,b,_){var T=m.map(u.values);h.x(function(L,P){return T[P].transposedX}).y(function(L,P){return T[P].transposedY});var E=u.orient()==="vertical"?"y":"x";h[E+"0"](function(L,P){return T[P].y0}),h[E+"1"](function(L,P){return T[P].y});var M=g(c.select(_[b]),[m]);M.enter().attr("fill",pt.gray),M.attr("d",h),u.decorate()(M,m,b)})};return S(v,u,N("bandwidth","align")),A(v,g,"key"),A(v,h,"curve"),v},nw=function(){var u=Cn(),h=f.area(),g=function(y){var w=h.context();h.defined(u.defined());var m=y.map(u.values);h.x(function(_,T){return m[T].transposedX}).y(function(_,T){return m[T].transposedY});var b=u.orient()==="vertical"?"y":"x";h[b+"0"](function(_,T){return m[T].y0}),h[b+"1"](function(_,T){return m[T].y}),w.beginPath(),w.fillStyle=pt.gray,w.strokeStyle="transparent",u.decorate()(w,y),h(y),w.fill(),w.stroke(),w.closePath()};return S(g,u,N("bandwidth","align")),A(g,h,"curve","context"),g},rw=function(){var u=Cn(),h=Ar(0,1),g=h.offset(1),v=Ar(0,1),y=v.offset(1),w=Ar(0,1),m=w.offset(1),b=Ar(0,1).type(Ge.UNSIGNED_BYTE),_=b.offset(1),T=dd().crossValueAttribute(h).crossNextValueAttribute(g).mainValueAttribute(v).mainNextValueAttribute(y).baseValueAttribute(w).baseNextValueAttribute(m).definedAttribute(b).definedNextAttribute(_),E=function(z,U){return!1},M=Rr,L=[],P=null,F=null,B=function(z){if(u.orient()!=="vertical")throw new Error("Unsupported orientation ".concat(u.orient()));var U=M(u.xScale()),H=M(u.yScale()),j=!E(L,z);j&&(L=z,b.value(function(ae,we){return u.defined()(ae,we)}).data(z)),(j||U.scale!==P)&&(P=U.scale,h.value(function(ae,we){return U.scale(u.crossValue()(ae,we))}).data(z)),(j||H.scale!==F)&&(F=H.scale,w.value(function(ae,we){return H.scale(u.baseValue()(ae,we))}).data(z),v.value(function(ae,we){return H.scale(u.mainValue()(ae,we))}).data(z)),T.xScale(U.webglScale).yScale(H.webglScale).decorate(function(ae){return u.decorate()(ae,z,0)}),T(z.length)};return B.equals=function(){return arguments.length?(E=arguments.length<=0?void 0:arguments[0],B):E},B.scaleMapper=function(){return arguments.length?(M=arguments.length<=0?void 0:arguments[0],B):M},S(B,u,N("bandwidth","align")),A(B,T,"context","pixelRatio"),B},wc=function(){var u,h=function(E){return E.date},g=function(E){return E.open},v=function(E){return E.high},y=function(E){return E.low},w=function(E){return E.close},m=function(){return 5},b="center",_=function(E,M){return u.xScale()(h(E,M))};return u=Xr({decorate:function(){},defined:function(E,M){return ha(h,g,y,v,w)(E,M)},xScale:i.scaleIdentity(),yScale:i.scaleIdentity()}),u.values=function(T,E){var M=w(T,E),L=g(T,E),P=m(T,E),F=da(b,P),B="";return M>L?B="up":M<L&&(B="down"),{cross:_(T,E)+F,open:u.yScale()(L),high:u.yScale()(v(T,E)),low:u.yScale()(y(T,E)),close:u.yScale()(M),width:P,direction:B}},u.xValues=function(){return[h]},u.yValues=function(){return[g,v,y,w]},u.crossValue=function(){return arguments.length?(h=arguments.length<=0?void 0:arguments[0],u):h},u.openValue=function(){return arguments.length?(g=arguments.length<=0?void 0:arguments[0],u):g},u.highValue=function(){return arguments.length?(v=arguments.length<=0?void 0:arguments[0],u):v},u.lowValue=function(){return arguments.length?(y=arguments.length<=0?void 0:arguments[0],u):y},u.yValue=u.closeValue=function(){return arguments.length?(w=arguments.length<=0?void 0:arguments[0],u):w},u.bandwidth=function(){return arguments.length?(m=st(arguments.length<=0?void 0:arguments[0]),u):m},u.align=function(){return arguments.length?(b=arguments.length<=0?void 0:arguments[0],u):b},u},Nd=function(u,h){var g=wc(),v=qe("g",h),y=function(_){return"translate("+_.cross+", "+_.high+")"},w=function(_){return function(T){return Ct(_)?T.transition(_):T}},m=function(_){Ct(_)&&v.transition(_);var T=w(_);_.each(function(E,M,L){var P=E.filter(g.defined()),F=v(c.select(L[M]),P);F.enter().attr("transform",function(B,V){return y(g.values(B,V))+" scale(1e-6, 1)"}).append("path"),F.each(function(B,V,z){var U=g.values(B,V),H=U.direction==="up"?pt.green:pt.red,j=T(c.select(z[V])).attr("class",h+" "+U.direction).attr("stroke",H).attr("fill",H).attr("transform",function(){return y(U)+" scale(1)"});u.x(0).width(U.width).open(function(){return U.open-U.high}).high(0).low(function(){return U.low-U.high}).close(function(){return U.close-U.high}),j.select("path").attr("d",u([B]))}),g.decorate()(F,E,M)})};return A(m,v,"key"),S(m,g),m},iw=function(){return Nd(cc(),"candlestick")},Od=function(u){var h=wc(),g=function(y){var w=y.filter(h.defined()),m=u.context();w.forEach(function(b,_){m.save();var T=h.values(b,_);m.translate(T.cross,T.high),m.beginPath(),u.x(0).open(function(){return T.open-T.high}).width(T.width).high(0).low(function(){return T.low-T.high}).close(function(){return T.close-T.high})([b]);var E=T.direction==="up"?pt.green:pt.red;m.strokeStyle=E,m.fillStyle=E,h.decorate()(m,b,_),m.fill(),m.stroke(),m.closePath(),m.restore()})};return A(g,u,"context"),S(g,h),g},aw=function(){return Od(cc())},Dd=function(u){var h=wc(),g=We(),v=We(),y=We(),w=We(),m=We(),b=We().type(Ge.UNSIGNED_SHORT),_=We().type(Ge.UNSIGNED_BYTE);u.crossValueAttribute(g).openValueAttribute(v).highValueAttribute(y).lowValueAttribute(w).closeValueAttribute(m).bandwidthAttribute(b).definedAttribute(_);var T=function(V,z){return!1},E=Rr,M=[],L=null,P=null,F=function(V){var z=E(h.xScale()),U=E(h.yScale()),H=!T(M,V);H&&(M=V,b.value(function(j,ae){return h.bandwidth()(j,ae)}).data(V),_.value(function(j,ae){return h.defined()(j,ae)}).data(V)),(H||z.scale!==L)&&(L=z.scale,g.value(function(j,ae){return z.scale(h.crossValue()(j,ae))}).data(V)),(H||U.scale!==P)&&(P=U.scale,v.value(function(j,ae){return U.scale(h.openValue()(j,ae))}).data(V),y.value(function(j,ae){return U.scale(h.highValue()(j,ae))}).data(V),w.value(function(j,ae){return U.scale(h.lowValue()(j,ae))}).data(V),m.value(function(j,ae){return U.scale(h.closeValue()(j,ae))}).data(V)),u.xScale(z.webglScale).yScale(U.webglScale).decorate(function(j){return h.decorate()(j,V,0)}),u(V.length)};return F.equals=function(){return arguments.length?(T=arguments.length<=0?void 0:arguments[0],F):T},F.scaleMapper=function(){return arguments.length?(E=arguments.length<=0?void 0:arguments[0],F):E},S(F,h,N("align")),A(F,u,"context","lineWidth","pixelRatio"),F},ow=function(){return Dd(yd())},xc=function(){var u=function(M){return M.upperQuartile},h=function(M){return M.lowerQuartile},g=function(M){return M.high},v=function(M){return M.low},y=function(M){return M.value},w=function(M){return M.median},m="vertical",b="center",_=function(){return 5},T=Xr({decorate:function(){},defined:function(M,L){return ha(v,g,h,u,y,w)(M,L)},xScale:i.scaleIdentity(),yScale:i.scaleIdentity()});return T.values=function(E,M){var L=_(E,M),P=da(b,L),F=T.xScale(),B=T.yScale();if(m==="vertical"){var V=B(g(E,M));return{origin:[F(y(E,M))+P,V],high:0,upperQuartile:B(u(E,M))-V,median:B(w(E,M))-V,lowerQuartile:B(h(E,M))-V,low:B(v(E,M))-V,width:L}}else{var z=F(v(E,M));return{origin:[z,B(y(E,M))+P],high:F(g(E,M))-z,upperQuartile:F(u(E,M))-z,median:F(w(E,M))-z,lowerQuartile:F(h(E,M))-z,low:0,width:L}}},T.xValues=function(){return m==="vertical"?[y]:[u,h,g,v,w]},T.yValues=function(){return m!=="vertical"?[y]:[u,h,g,v,w]},T.orient=function(){return arguments.length?(m=arguments.length<=0?void 0:arguments[0],T):m},T.lowerQuartileValue=function(){return arguments.length?(h=st(arguments.length<=0?void 0:arguments[0]),T):h},T.upperQuartileValue=function(){return arguments.length?(u=st(arguments.length<=0?void 0:arguments[0]),T):u},T.lowValue=function(){return arguments.length?(v=st(arguments.length<=0?void 0:arguments[0]),T):v},T.highValue=function(){return arguments.length?(g=st(arguments.length<=0?void 0:arguments[0]),T):g},T.crossValue=function(){return arguments.length?(y=st(arguments.length<=0?void 0:arguments[0]),T):y},T.medianValue=function(){return arguments.length?(w=st(arguments.length<=0?void 0:arguments[0]),T):w},T.bandwidth=function(){return arguments.length?(_=st(arguments.length<=0?void 0:arguments[0]),T):_},T.align=function(){return arguments.length?(b=arguments.length<=0?void 0:arguments[0],T):b},T},sw=function(){var u=xc(),h=qe("g","box-plot"),g=uc().value(0),v=function(b){return function(_){return Ct(b)?_.transition(b):_}},y=function(b){return"translate("+b.origin[0]+", "+b.origin[1]+")"},w=function(b){Ct(b)&&h.transition(b);var _=v(b);b.each(function(T,E,M){var L=T.filter(u.defined()),P=h(c.select(M[E]),L);P.enter().attr("stroke",pt.black).attr("fill",pt.gray).attr("transform",function(F,B){return y(u.values(F,B))+" scale(1e-6, 1)"}).append("path"),g.orient(u.orient()),P.each(function(F,B,V){var z=u.values(F,B);g.median(z.median).upperQuartile(z.upperQuartile).lowerQuartile(z.lowerQuartile).width(z.width).high(z.high).low(z.low),_(c.select(V[B])).attr("transform",y(z)).select("path").attr("d",g([F]))}),u.decorate()(P,T,E)})};return S(w,u),A(w,h,"key"),A(w,g,"cap"),w},lw=function(){var u=xc(),h=uc().value(0),g=function(y){var w=y.filter(u.defined()),m=h.context();h.orient(u.orient()),w.forEach(function(b,_){m.save();var T=u.values(b,_);m.translate(T.origin[0],T.origin[1]),m.beginPath(),m.fillStyle=pt.gray,m.strokeStyle=pt.black,u.decorate()(m,b,_),h.median(T.median).upperQuartile(T.upperQuartile).lowerQuartile(T.lowerQuartile).high(T.high).width(T.width).low(T.low)([b]),m.fill(),m.stroke(),m.closePath(),m.restore()})};return S(g,u),A(g,h,"cap","context"),g},cw=function(){var u=xc(),h=We(),g=We(),v=We(),y=We(),w=We(),m=We(),b=We().type(Ge.UNSIGNED_SHORT),_=We().type(Ge.UNSIGNED_SHORT),T=We().type(Ge.UNSIGNED_BYTE),E=wd().crossValueAttribute(h).highValueAttribute(g).upperQuartileValueAttribute(v).medianValueAttribute(y).lowerQuartileValueAttribute(w).lowValueAttribute(m).bandwidthAttribute(b).capAttribute(_).definedAttribute(T),M=function(H,j){return!1},L=Rr,P=[],F=null,B=null,V=st(20),z=function(H){if(u.orient()!=="vertical")throw new Error("Unsupported orientation ".concat(u.orient()));var j=L(u.xScale()),ae=L(u.yScale()),we=!M(P,H);we&&(P=H,b.value(function(Se,ye){return u.bandwidth()(Se,ye)}).data(H),_.value(function(Se,ye){return V(Se,ye)}).data(H),T.value(function(Se,ye){return u.defined()(Se,ye)}).data(H)),(we||j.scale!==F)&&(F=j.scale,h.value(function(Se,ye){return j.scale(u.crossValue()(Se,ye))}).data(H)),(we||ae.scale!==B)&&(B=ae.scale,g.value(function(Se,ye){return ae.scale(u.highValue()(Se,ye))}).data(H),v.value(function(Se,ye){return ae.scale(u.upperQuartileValue()(Se,ye))}).data(H),y.value(function(Se,ye){return ae.scale(u.medianValue()(Se,ye))}).data(H),w.value(function(Se,ye){return ae.scale(u.lowerQuartileValue()(Se,ye))}).data(H),m.value(function(Se,ye){return ae.scale(u.lowValue()(Se,ye))}).data(H)),E.xScale(j.webglScale).yScale(ae.webglScale).decorate(function(Se){return u.decorate()(Se,H,0)}),E(H.length)};return z.cap=function(){return arguments.length?(V=st(arguments.length<=0?void 0:arguments[0]),z):V},z.equals=function(){return arguments.length?(M=arguments.length<=0?void 0:arguments[0],z):M},z.scaleMapper=function(){return arguments.length?(L=arguments.length<=0?void 0:arguments[0],z):L},S(z,u,N("align")),A(z,E,"context","lineWidth","pixelRatio"),z},uw=function(){return Nd(lc(),"ohlc")},fw=function(){return Od(lc())},hw=function(){return Dd(vd())},Tc=function(){var u=[],h=function(w){return w},g=function(w,m){return m},v=Xr({decorate:function(){},xScale:i.scaleIdentity(),yScale:i.scaleIdentity()});return v.xValues=function(){return u.map(function(y){return y.xValues()}).reduce(function(y,w){return y.concat(w)})},v.yValues=function(){return u.map(function(y){return y.yValues()}).reduce(function(y,w){return y.concat(w)})},v.mapping=function(){return arguments.length?(h=arguments.length<=0?void 0:arguments[0],v):h},v.key=function(){return arguments.length?(g=arguments.length<=0?void 0:arguments[0],v):g},v.series=function(){return arguments.length?(u=arguments.length<=0?void 0:arguments[0],v):u},v},Sc=function(){var u=Tc(),h=qe("g"),g=qe("g","multi"),v=function(w){Ct(w)&&(g.transition(w),h.transition(w));var m=u.mapping(),b=u.series(),_=u.xScale(),T=u.yScale();w.each(function(E,M,L){var P=g(c.select(L[M]),b);P.each(function(F,B,V){F.xScale(_).yScale(T);var z=m(E,B,b),U=h(c.select(V[B]),[z]);U.call(F)}),P.selection().order(),u.decorate()(P,E,M)})};return S(v,u),A(v,g,"key"),v},Ec=function(){var u=null,h=Tc(),g=function(y){var w=h.mapping(),m=h.series(),b=h.xScale(),_=h.yScale();m.forEach(function(T,E){var M=w(y,E,m);T.context(u).xScale(b).yScale(_);var L;T.decorate?(L=T.decorate(),T.decorate(function(P,F,B){h.decorate()(P,y,E),L(P,F,B)})):h.decorate()(u,y,E),T(M),L&&T.decorate(L)})};return g.context=function(){return arguments.length?(u=arguments.length<=0?void 0:arguments[0],g):u},S(g,h),g},Ld=function(){var u=null,h=1,g=Tc(),v=function(w){var m=g.mapping(),b=g.series(),_=g.xScale(),T=g.yScale();b.forEach(function(E,M){var L=m(w,M,b);E.context(u).pixelRatio(h).xScale(_).yScale(T);var P;E.decorate?(P=E.decorate(),E.decorate(function(F,B,V){g.decorate()(F,w,M),P(F,B,V)})):g.decorate()(u,w,M),E(L),P&&E.decorate(P)})};return v.context=function(){return arguments.length?(u=arguments.length<=0?void 0:arguments[0],v):u},v.pixelRatio=function(){return arguments.length?(h=arguments.length<=0?void 0:arguments[0],v):h},S(v,g),v},Id=function(u){var h=function(){return 50},g="center",v=i.scaleBand(),y=Xr({decorate:function(){},xScale:i.scaleLinear(),yScale:i.scaleLinear()});return y.offsetScaleForDatum=function(w,m,b){var _=h(m,b),T=da(g,_),E=_/2;return v.domain(r.range(0,w.length)).range([-E+T,E+T])},y.bandwidth=function(){return arguments.length?(h=st(arguments.length<=0?void 0:arguments[0]),y):h},y.align=function(){return arguments.length?(g=arguments.length<=0?void 0:arguments[0],y):g},S(y,v,W({paddingInner:"paddingOuter"})),y},dw=function(u){var h=Id(),g=qe("g","grouped"),v=function(w){Ct(w)&&g.transition(w),w.each(function(m,b,_){var T=g(c.select(_[b]),m);T.enter().append("g"),T.select("g").each(function(E,M,L){var P=c.select(L[M]),F=u.orient()!=="horizontal",B=function(z,U){var H=h.offsetScaleForDatum(m,z,U),j=F?h.xScale():h.yScale();return j(z)+H(M)+H.bandwidth()/2};F?(u.xScale(B),u.yScale(h.yScale())):(u.yScale(B),u.xScale(h.xScale())),u.bandwidth&&u.bandwidth(function(V,z){return h.offsetScaleForDatum(m,V,z).bandwidth()}),u.decorate(function(V,z){return h.decorate()(V,z,M)}),P.call(u)})})};return S(v,u,N("decorate","xScale","yScale")),S(v,h,N("offsetScaleForDatum")),v};function gw(u){var h=Id(),g=function(y){y.forEach(function(w,m){var b=u.orient()!=="horizontal",_=function(E,M){var L=h.offsetScaleForDatum(y,E,M),P=b?h.xScale():h.yScale();return P(E)+L(m)+L.bandwidth()/2};b?(u.xScale(_),u.yScale(h.yScale())):(u.yScale(_),u.xScale(h.xScale())),u.bandwidth&&u.bandwidth(function(T,E){return h.offsetScaleForDatum(y,T,E).bandwidth()}),u.decorate(function(T,E){return h.decorate()(T,E,m)}),u(w)})};return S(g,u,N("decorate","xScale","yScale")),S(g,h,N("offsetScaleForDatum")),g}var mw=function(){var u="vertical",h=pc(),g=Sc(),v=function(w){return w.each(function(m,b,_){u==="vertical"?g.series(m[0].map(function(T){return h})).mapping(function(T,E){return T.map(function(M){return M[E]})}):g.series(m.map(function(T){return h})).mapping(function(T,E){return T[E]}),c.select(_[b]).call(g)})};return v.series=function(){return arguments.length?(h=arguments.length<=0?void 0:arguments[0],v):h},v.orient=function(){return arguments.length?(u=arguments.length<=0?void 0:arguments[0],v):u},S(v,g,N("series","mapping")),v},pw=function(){var u="vertical",h=vc(),g=Ec(),v=function(w){u==="vertical"?g.series(w[0].map(function(m){return h})).mapping(function(m,b){return m.map(function(_){return _[b]})}):g.series(w.map(function(m){return h})).mapping(function(m,b){return m[b]}),g(w)};return v.series=function(){return arguments.length?(h=arguments.length<=0?void 0:arguments[0],v):h},v.orient=function(){return arguments.length?(u=arguments.length<=0?void 0:arguments[0],v):u},S(v,g,N("series","mapping")),v},vw=function(){var u="vertical",h=function(){return Ad()},g=Ld(),v=[],y=function(m){if(u==="vertical"){var b=v;v=m[0].map(function(T,E){return E<b.length?b[E]:h()}),g.series(v).mapping(function(T,E){return T.map(function(M){return M[E]})})}else{var _=v;v=m.map(function(T,E){return E<_.length?_[E]:h()}),g.series(v).mapping(function(T,E){return T[E]})}g(m)};return y.series=function(){for(var w=arguments.length,m=new Array(w),b=0;b<w;b++)m[b]=arguments[b];return m.length?(typeof m[0].xScale=="function"&&typeof m[0].yScale=="function"?h=function(){return m[0]}:h=m[0],v=[],y):h},y.orient=function(){return arguments.length?(u=arguments.length<=0?void 0:arguments[0],v=[],y):u},S(y,g,N("series","mapping")),y},bw=function(h){return h.sort(r.ascending).filter(function(g,v,y){return y.indexOf(g,v+1)===-1})},_w=function(u){var h=.75,g=function(m){if(m.length<=1)return 10;m=bw(m);var b=r.pairs(m).map(function(T){return Math.abs(T[0]-T[1])}),_=r.min(b);return h*_},v=function(m,b,_){if(m.bandwidth)return m.bandwidth();var T,E=Array.isArray(b)?(T=[]).concat.apply(T,Tt(b)):b,M=E.filter(u.defined()).map(_()).map(m),L=g(M);return L},y=function(m){var b=function(T){if(u.xBandwidth&&u.yBandwidth)u.xBandwidth(v(u.xScale(),T,u.xValue)),u.yBandwidth(v(u.yScale(),T,u.yValue));else{var E=u.orient&&u.orient()==="horizontal"?u.yScale():u.xScale();u.bandwidth(v(E,T,u.crossValue))}};m instanceof c.selection?m.each(function(_,T,E){b(_),u(c.select(E[T]))}):(b(m),u(m))};return S(y,u),y.widthFraction=function(){return arguments.length?(h=arguments.length<=0?void 0:arguments[0],y):h},y},Pd=function(){var u=function(_){return _.x},h=function(_){return _.y},g=function(_){return _.color},v=function(){return 5},y=function(){return 5},w=d.interpolateViridis,m=Xr({decorate:function(){},defined:function(_,T){return ha(u,h,g)(_,T)},xScale:i.scaleIdentity(),yScale:i.scaleIdentity()});return m.pathGenerator=_i().x(0).y(0),m.colorScale=function(b){var _=b.map(g);return i.scaleLinear().domain([r.min(_),r.max(_)])},m.values=function(b,_){return{x:m.xScale()(u(b,_)),y:m.yScale()(h(b,_)),colorValue:g(b,_),width:y(b,_),height:v(b,_)}},m.xValues=function(){return[u]},m.yValues=function(){return[h]},m.xValue=function(){return arguments.length?(u=st(arguments.length<=0?void 0:arguments[0]),m):u},m.yValue=function(){return arguments.length?(h=st(arguments.length<=0?void 0:arguments[0]),m):h},m.colorValue=function(){return arguments.length?(g=st(arguments.length<=0?void 0:arguments[0]),m):g},m.colorInterpolate=function(){return arguments.length?(w=arguments.length<=0?void 0:arguments[0],m):w},m.xBandwidth=function(){return arguments.length?(y=st(arguments.length<=0?void 0:arguments[0]),m):y},m.yBandwidth=function(){return arguments.length?(v=st(arguments.length<=0?void 0:arguments[0]),m):v},S(m,m.pathGenerator,W({horizontalAlign:"xAlign",verticalAlign:"yAlign"})),m},yw=function(){var u=Pd(),h=qe("g","box"),g=function(w){return"translate("+w.x+", "+w.y+")"},v=function(w){w.each(function(m,b,_){var T=m.filter(u.defined()),E=u.colorValue(),M=u.colorInterpolate(),L=u.colorScale(T),P=h(c.select(_[b]),T);P.enter().append("path").attr("stroke","transparent"),P.attr("transform",function(F,B){return g(u.values(F,B))}).select("path").attr("d",function(F,B){return u.pathGenerator.width(u.values(F,B).width).height(u.values(F,B).height)([F])}).attr("fill",function(F,B){return M(L(E(F,B)))}),u.decorate()(P,m,b)})};return S(v,u),v},ww=function(){var u=Pd(),h=function(v){var y=v.filter(u.defined()),w=u.colorInterpolate(),m=u.colorScale(y),b=u.pathGenerator.context();y.forEach(function(_,T){b.save(),b.beginPath();var E=u.values(_,T);b.translate(E.x,E.y),b.fillStyle=w(m(E.colorValue)),b.strokeStyle="transparent",u.decorate()(b,_,T),u.pathGenerator.height(E.height).width(E.width)([_]),b.fill(),b.stroke(),b.closePath(),b.restore()})};return A(h,u.pathGenerator,"context"),S(h,u),h},Mr=function(u){return typeof u=="function"?u:function(){return u}},xw=function(){var u=i.scaleIdentity(),h=i.scaleIdentity(),g="horizontal",v=function(E){return E.from},y=function(E){return E.to},w=function(){},m=qe("g","annotation-band"),b=_i().horizontalAlign("center").verticalAlign("center").x(0).y(0),_=function(E){if(Ct(E)&&m.transition(E),g!=="horizontal"&&g!=="vertical")throw new Error("Invalid orientation");var M=g==="horizontal",L=M?function(j,ae){return"translate(".concat(j,", ").concat(ae,")")}:function(j,ae){return"translate(".concat(ae,", ").concat(j,")")},P=M?u:h,F=M?h:u,B=P.range(),V=B[1]-B[0],z=M?"height":"width",U=M?"width":"height",H=function(){return L((B[1]+B[0])/2,(F(y.apply(void 0,arguments))+F(v.apply(void 0,arguments)))/2)};b[U](V),b[z](function(){return F(y.apply(void 0,arguments))-F(v.apply(void 0,arguments))}),E.each(function(j,ae,we){var Se=m(c.select(we[ae]),j);Se.enter().attr("transform",H).append("path").classed("band",!0),Se.attr("class","annotation-band ".concat(g)).attr("transform",H).select("path").attr("d",function(ye,He){return b([ye],He)}),w(Se,j,ae)})};return _.xScale=function(){return arguments.length?(u=arguments.length<=0?void 0:arguments[0],_):u},_.yScale=function(){return arguments.length?(h=arguments.length<=0?void 0:arguments[0],_):h},_.orient=function(){return arguments.length?(g=arguments.length<=0?void 0:arguments[0],_):g},_.decorate=function(){return arguments.length?(w=arguments.length<=0?void 0:arguments[0],_):w},_.fromValue=function(){return arguments.length?(v=Mr(arguments.length<=0?void 0:arguments[0]),_):v},_.toValue=function(){return arguments.length?(y=Mr(arguments.length<=0?void 0:arguments[0]),_):y},_},Tw=function(){var u=i.scaleIdentity(),h=i.scaleIdentity(),g="horizontal",v=function(T){return T.from},y=function(T){return T.to},w=function(){},m=_i().horizontalAlign("right").verticalAlign("top"),b=function(T){if(g!=="horizontal"&&g!=="vertical")throw new Error("Invalid orientation");var E=m.context(),M=g==="horizontal",L=M?u:h,P=M?h:u,F=L.range(),B=F[1]-F[0],V=M?"x":"y",z=M?"y":"x",U=M?"height":"width",H=M?"width":"height";T.forEach(function(j,ae){E.save(),E.beginPath(),E.strokeStyle="transparent",m[z](P(v(j))),m[V](F[0]),m[H](B),m[U](P(y(j))-P(v(j))),w(E,j,ae),m.context(E)([j],ae),E.fill(),E.stroke(),E.closePath(),E.restore()})};return b.xScale=function(){return arguments.length?(u=arguments.length<=0?void 0:arguments[0],b):u},b.yScale=function(){return arguments.length?(h=arguments.length<=0?void 0:arguments[0],b):h},b.orient=function(){return arguments.length?(g=arguments.length<=0?void 0:arguments[0],b):g},b.decorate=function(){return arguments.length?(w=arguments.length<=0?void 0:arguments[0],b):w},b.fromValue=function(){return arguments.length?(v=Mr(arguments.length<=0?void 0:arguments[0]),b):v},b.toValue=function(){return arguments.length?(y=Mr(arguments.length<=0?void 0:arguments[0]),b):y},A(b,m,"context"),b},Cc=function(){var u=i.scaleIdentity(),h=i.scaleIdentity(),g=function(T){return T},v=g,y=function(){},w="horizontal",m=qe("g","annotation-line"),b=function(T){if(Ct(T)&&m.transition(T),w!=="horizontal"&&w!=="vertical")throw new Error("Invalid orientation");var E=w==="horizontal",M=E?function(ye,He){return"translate(".concat(ye,", ").concat(He,")")}:function(ye,He){return"translate(".concat(He,", ").concat(ye,")")},L=E?"x2":"y2",P=E?u:h,F=E?h:u,B=E?"left-handle":"bottom-handle",V=E?"right-handle":"top-handle",z=E?"9":"0",U=E?"0":"9",H=E?"0.32em":"0.71em",j=E?"start":"middle",ae=P.range(),we=function(){return M(ae[0],F(g.apply(void 0,arguments)))},Se=ae[1]-ae[0];T.each(function(ye,He,Vt){var _n=m(c.select(Vt[He]),ye),Xn=_n.enter().attr("transform",we).style("stroke","#bbb");Xn.append("line").attr(L,Se),Xn.append("g").classed(B,!0).style("stroke","none"),Xn.append("g").classed(V,!0).style("stroke","none").attr("transform",M(Se,0)).append("text").attr("text-anchor",j).attr("x",z).attr("y",U).attr("dy",H),_n.attr("class","annotation-line ".concat(w)),_n.attr("transform",we),_n.select("line").attr(L,Se),_n.select("g."+V).attr("transform",M(Se,0)),_n.select("text").text(v),y(_n,ye,He)})};return b.xScale=function(){return arguments.length?(u=arguments.length<=0?void 0:arguments[0],b):u},b.yScale=function(){return arguments.length?(h=arguments.length<=0?void 0:arguments[0],b):h},b.value=function(){return arguments.length?(g=Mr(arguments.length<=0?void 0:arguments[0]),b):g},b.label=function(){return arguments.length?(v=Mr(arguments.length<=0?void 0:arguments[0]),b):v},b.decorate=function(){return arguments.length?(y=arguments.length<=0?void 0:arguments[0],b):y},b.orient=function(){return arguments.length?(w=arguments.length<=0?void 0:arguments[0],b):w},b};function Sw(){var u=function(B){return B.x},h=function(B){return B.y},g=i.scaleIdentity(),v=i.scaleIdentity(),y=function(){},w=qe("g","annotation-crosshair"),m=Rd(),b=Cc(),_=Cc().orient("vertical"),T=i.scaleIdentity(),E=i.scaleIdentity(),M=Sc().series([b,_,m]).xScale(T).yScale(E).mapping(function(F){return[F]}),L=function(B){Ct(B)&&w.transition(B),B.each(function(V,z,U){var H=w(c.select(U[z]),V);H.enter().style("pointer-events","none"),T.range(g.range()),E.range(v.range()),m.crossValue(u).mainValue(h),b.value(h),_.value(u),H.call(M),y(H,V,z)})};L.x=function(){return arguments.length?(u=arguments.length<=0?void 0:arguments[0],L):u},L.y=function(){return arguments.length?(h=arguments.length<=0?void 0:arguments[0],L):h},L.xScale=function(){return arguments.length?(g=arguments.length<=0?void 0:arguments[0],L):g},L.yScale=function(){return arguments.length?(v=arguments.length<=0?void 0:arguments[0],L):v},L.decorate=function(){return arguments.length?(y=arguments.length<=0?void 0:arguments[0],L):y};var P=k("label");return S(L,b,P,X("y")),S(L,_,P,X("x")),L}var Ac=function(){var u=i.scaleIdentity(),h=i.scaleIdentity(),g=function(T){return T},v=g,y=function(){},w="horizontal",m=f.line(),b=function(T){if(w!=="horizontal"&&w!=="vertical")throw new Error("Invalid orientation");var E=w==="horizontal",M=m.context(),L=E?u:h,P=E?h:u,F=L.domain(),B=E?9:0,V=E?0:9,z=E?"left":"center",U=E?"middle":"hanging";T.forEach(function(H,j){M.save(),M.beginPath(),M.strokeStyle="#bbb",M.fillStyle="#000",M.textAlign=z,M.textBaseline=U,y(M,H,j),m.context(M)(F.map(function(Se){var ye=[L(Se),P(g(H))];return E?ye:ye.reverse()}));var ae=E?L(F[1]):P(g(H)),we=E?P(g(H)):L(F[1]);M.fillText(v(H),ae+B,we+V),M.fill(),M.stroke(),M.closePath(),M.restore()})};return b.xScale=function(){return arguments.length?(u=arguments.length<=0?void 0:arguments[0],b):u},b.yScale=function(){return arguments.length?(h=arguments.length<=0?void 0:arguments[0],b):h},b.value=function(){return arguments.length?(g=Mr(arguments.length<=0?void 0:arguments[0]),b):g},b.label=function(){return arguments.length?(v=Mr(arguments.length<=0?void 0:arguments[0]),b):v},b.decorate=function(){return arguments.length?(y=arguments.length<=0?void 0:arguments[0],b):y},b.orient=function(){return arguments.length?(w=arguments.length<=0?void 0:arguments[0],b):w},A(b,m,"context"),b},Ew=function(){var u=function(P){return P.x},h=function(P){return P.y},g=i.scaleIdentity(),v=i.scaleIdentity(),y=Md(),w=Ac(),m=Ac().orient("vertical"),b=i.scaleIdentity(),_=i.scaleIdentity(),T=Ec().series([w,m,y]).xScale(b).yScale(_).mapping(function(L){return[L]}),E=function(P){P.forEach(function(F){b.range(g.range()),_.range(v.range()),y.crossValue(u).mainValue(h),w.value(h),m.value(u),T(F)})};E.x=function(){return arguments.length?(u=arguments.length<=0?void 0:arguments[0],E):u},E.y=function(){return arguments.length?(h=arguments.length<=0?void 0:arguments[0],E):h},E.xScale=function(){return arguments.length?(g=arguments.length<=0?void 0:arguments[0],E):g},E.yScale=function(){return arguments.length?(v=arguments.length<=0?void 0:arguments[0],E):v};var M=k("label","decorate");return S(E,w,M,X("y")),S(E,m,M,X("x")),A(E,y,"decorate"),A(E,T,"context"),E},Ro=function(){var u=i.scaleIdentity(),h=[10],g=null,v=function(){var w;return g??(u.ticks?(w=u).ticks.apply(w,Tt(h)):u.domain())};return v.scale=function(){return arguments.length?(u=arguments.length<=0?void 0:arguments[0],v):u},v.ticks=function(){for(var y=arguments.length,w=new Array(y),m=0;m<y;m++)w[m]=arguments[m];return h=w,v},v.tickArguments=function(){return arguments.length?(h=arguments.length<=0?void 0:arguments[0],v):h},v.tickValues=function(){return arguments.length?(g=arguments.length<=0?void 0:arguments[0],v):g},v},kd=function(h){return h},Cw=function(){var u=function(){},h=function(){},g=Ro(),v=Ro(),y=qe("line","gridline-y").key(kd),w=qe("line","gridline-x").key(kd),m=function(_){Ct(_)&&(y.transition(_),w.transition(_)),_.each(function(T,E,M){var L=M[E],P=c.select(M[E]),F=g.scale(),B=v.scale(),V=L.__x_scale__||F;L.__x_scale__=F.copy();var z=g(),U=y(P,z);U.enter().attr("x1",V).attr("x2",V).attr("y1",B.range()[0]).attr("y2",B.range()[1]).attr("stroke","#bbb"),U.attr("x1",F).attr("x2",F).attr("y1",B.range()[0]).attr("y2",B.range()[1]),U.exit().attr("x1",F).attr("x2",F),u(U,z,E);var H=L.__y_scale__||B;L.__y_scale__=B.copy();var j=v(),ae=w(P,j);ae.enter().attr("y1",H).attr("y2",H).attr("x1",F.range()[0]).attr("x2",F.range()[1]).attr("stroke","#bbb"),ae.attr("y1",B).attr("y2",B).attr("x1",F.range()[0]).attr("x2",F.range()[1]),ae.exit().attr("y1",B).attr("y2",B),h(ae,j,E)})};return m.yDecorate=function(){return arguments.length?(h=arguments.length<=0?void 0:arguments[0],m):h},m.xDecorate=function(){return arguments.length?(u=arguments.length<=0?void 0:arguments[0],m):u},S(m,y,W({key:"xKey"})),S(m,w,W({key:"yKey"})),S(m,g,X("x")),S(m,v,X("y")),m},Aw=function(){var u=function(){},h=function(){},g=Ro(),v=Ro(),y=f.line(),w=function(){var b=y.context(),_=g.scale(),T=v.scale();g().forEach(function(E,M){b.save(),b.beginPath(),b.strokeStyle="#bbb",b.fillStyle="transparent",u(b,E,M),y.context(b)(T.domain().map(function(L){return[_(E),T(L)]})),b.fill(),b.stroke(),b.closePath(),b.restore()}),v().forEach(function(E,M){b.save(),b.beginPath(),b.strokeStyle="#bbb",b.fillStyle="transparent",h(b,E,M),y.context(b)(_.domain().map(function(L){return[_(L),T(E)]})),b.fill(),b.stroke(),b.closePath(),b.restore()})};return w.yDecorate=function(){return arguments.length?(h=arguments.length<=0?void 0:arguments[0],w):h},w.xDecorate=function(){return arguments.length?(u=arguments.length<=0?void 0:arguments[0],w):u},S(w,g,X("x")),S(w,v,X("y")),A(w,y,"context"),w},Rw=function(h){return h},Bd=function(h,g,v,y){return h[g]?h[g].apply(h,v):y},Fd=function(h){var g;return(g=h.tickValues())!==null&&g!==void 0?g:Bd(h.scale(),"ticks",h.tickArguments(),h.scale().domain())},Vd=function(h){var g;return(g=h.tickFormat())!==null&&g!==void 0?g:Bd(h.scale(),"tickFormat",h.tickArguments(),Rw)},Mw=function(h){return h},Wd=function(h,g){var v=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},y=[10],w=null,m=function(){},b=null,_=6,T=6,E=3,M=f.line(),L=qe("g","tick").key(Mw),P=qe("path","domain"),F=function(){return{offset:[0,T+E]}},B=function(){return{path:[[0,0],[0,T]]}},V=v.labelOffset||F,z=v.tickPath||B,U=function(ye,He){var Vt=0;return ye.bandwidth&&(Vt=ye.bandwidth()/2,ye.round()&&(Vt=Math.round(Vt))),function(_n){return He(ye(_n)+Vt,0)}},H=function(ye,He){return ae()?"translate(".concat(He,", ").concat(ye,")"):"translate(".concat(ye,", ").concat(He,")")},j=function(ye){return ae()?ye.map(function(He){return[He[1],He[0]]}):ye},ae=function(){return h==="left"||h==="right"},we=function Se(ye){Ct(ye)&&(L.transition(ye),P.transition(ye)),ye.each(function(He,Vt,_n){var Xn=_n[Vt],ba=c.select(Xn);Xn.__scale__||ba.attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",h==="right"?"start":h==="left"?"end":"middle");var Ic=Xn.__scale__||g;Xn.__scale__=g.copy();var qr=Fd(Se),Ye=Vd(Se),yi=h==="bottom"||h==="right"?1:-1,qt=function(je){var ht=_e(je,2),$t=ht[0],An=ht[1];return[$t,yi*An]},Gn=g.range(),Nr=j([[Gn[0],yi*_],[Gn[0],0],[Gn[1],0],[Gn[1],yi*_]]),Lt=P(ba,[He]);Lt.enter().attr("stroke","#000"),Lt.attr("d",M(Nr));var qn=L(ba,qr),_a=qr.map(function(Le,je){return V(Le,je,qr)}),Wt=qr.map(function(Le,je){return z(Le,je,qr)});qn.enter().attr("transform",U(Ic,H)).append("path").attr("stroke","#000"),qn.enter().append("text").attr("transform",function(Le,je){return H.apply(void 0,Tt(qt(_a[je].offset)))}).attr("fill","#000"),qn.exit().attr("transform",U(g,H)),qn.select("path").attr("visibility",function(Le,je){return Wt[je].hidden&&"hidden"}).attr("d",function(Le,je){return M(j(Wt[je].path.map(qt)))}),qn.select("text").attr("visibility",function(Le,je){return _a[je].hidden&&"hidden"}).attr("transform",function(Le,je){return H.apply(void 0,Tt(qt(_a[je].offset)))}).attr("dy",function(){var Le="0em";return ae()?Le="0.32em":h==="bottom"&&(Le="0.71em"),Le}).text(Ye),qn.attr("transform",U(g,H)),m(qn,He,Vt)})};return we.tickFormat=function(){return arguments.length?(b=arguments.length<=0?void 0:arguments[0],we):b},we.tickSize=function(){return arguments.length?(T=_=Number(arguments.length<=0?void 0:arguments[0]),we):T},we.tickSizeInner=function(){return arguments.length?(T=Number(arguments.length<=0?void 0:arguments[0]),we):T},we.tickSizeOuter=function(){return arguments.length?(_=Number(arguments.length<=0?void 0:arguments[0]),we):_},we.tickPadding=function(){return arguments.length?(E=arguments.length<=0?void 0:arguments[0],we):E},we.decorate=function(){return arguments.length?(m=arguments.length<=0?void 0:arguments[0],we):m},we.scale=function(){return arguments.length?(g=arguments.length<=0?void 0:arguments[0],we):g},we.ticks=function(){for(var Se=arguments.length,ye=new Array(Se),He=0;He<Se;He++)ye[He]=arguments[He];return y=[].concat(ye),we},we.tickArguments=function(){return arguments.length?(y=(arguments.length<=0?void 0:arguments[0])==null?[]:Tt(arguments.length<=0?void 0:arguments[0]),we):y!==null?y.slice():null},we.tickValues=function(){return arguments.length?(w=(arguments.length<=0?void 0:arguments[0])==null?[]:Tt(arguments.length<=0?void 0:arguments[0]),we):w!==null?w.slice():null},we.orient=function(){return h},we},Mo=function(h,g){var v=!1,y=function(_,T,E){var M=0,L=w.tickSizeInner()+w.tickPadding(),P=!1;if(v){var F=g(_),B=T<E.length-1?g(E[T+1]):g.range()[1];M=(B-F)/2,L=w.tickPadding(),P=T===E.length-1&&F===B}return{offset:[M,L],hidden:P}},w=Wd(h,g,{labelOffset:y}),m=function(_){return w(_)};return m.tickCenterLabel=function(){return arguments.length?(v=arguments.length<=0?void 0:arguments[0],m):v},S(m,w),m},$d=function(h){return Mo("top",h)},zd=function(h){return Mo("bottom",h)},Hd=function(h){return Mo("left",h)},Ud=function(h){return Mo("right",h)},No=function(h,g){var v=null,y=function(E,M,L){if(g.step)return g.step();var P=g(E);return M<L.length-1?g(L[M+1])/P:(g.range()[1]-P)*2},w=function(E,M,L){var P=0;return v?P=v(E,M):P=y(E,M,L)/2,{path:[[P,0],[P,b.tickSizeInner()]],hidden:M===L.length-1}},m=function(){return{offset:[0,b.tickPadding()]}},b=Wd(h,g,{labelOffset:m,tickPath:w}),_=function(E){b(E)};return _.tickOffset=function(){return arguments.length?(v=arguments.length<=0?void 0:arguments[0],_):v},S(_,b),_},Nw=function(h){return No("top",h)},Ow=function(h){return No("bottom",h)},Dw=function(h){return No("left",h)},Lw=function(h){return No("right",h)},Yd=function(u){var h=function(v){var y=Fd(u),w=Vd(u),m=y.map(w),b=v.append("text"),_=m.map(function(M){return b.text(M).node().getBBox()}),T=Math.max.apply(Math,Tt(_.map(function(M){return M.height}))),E=Math.max.apply(Math,Tt(_.map(function(M){return M.width})));return b.remove(),{maxHeight:T,maxWidth:E,labelCount:m.length}};return h},Iw=function(u){var h="auto",g=function(){},v=function(){return u.orient()==="left"||u.orient()==="right"},y=function(){return u.orient()==="top"||u.orient()==="left"?-1:1},w=function(){switch(u.orient()){case"top":case"right":return"start";default:return"end"}},m=function(E){var M=Yd(u)(E),L=M.maxHeight,P=M.maxWidth,F=M.labelCount,B=F*P,V;if(h==="auto"){var z=u.scale().range()[1];V=z<B?90*Math.min(1,(B/z-.8)/2):0}else V=h;return{rotate:v()?Math.floor(y()*(90-V)):Math.floor(-V),maxHeight:L,maxWidth:P,anchor:V?w():"middle"}},b=function(E){var M=m(E),L=M.rotate,P=M.maxHeight,F=M.anchor,B=E.select("text"),V=B.attr("transform"),z=y()*Math.floor(P/2),U=v()?"translate(".concat(z,", 0)"):"translate(0, ".concat(z,")");B.style("text-anchor",F).attr("transform","".concat(V," ").concat(U," rotate(").concat(L," 0 0)"))},_=function(E){u(E)};return u.decorate(function(T){b(T),g(T)}),_.decorate=function(){return arguments.length?(g=arguments.length<=0?void 0:arguments[0],_):g},_.labelRotate=function(){return arguments.length?(h=arguments.length<=0?void 0:arguments[0],_):h},S(_,u,N("decorate")),_},Pw=function(u){var h="auto",g=function(){},v=function(){return u.orient()==="left"||u.orient()==="right"},y=function(){return u.orient()==="top"||u.orient()==="left"?-1:1},w=function(_){var T=Yd(u)(_),E=T.maxHeight,M=T.maxWidth,L=T.labelCount,P=u.scale().range()[1],F=h==="auto"?Math.floor((v()?E:M)*L/P)+1:h,B=_.select("text"),V=B.attr("transform"),z=function(H){return v()?"translate(".concat(H%F*M*y(),", 0)"):"translate(0, ".concat(H%F*E*y(),")")};B.attr("transform",function(U,H){return"".concat(V," ").concat(z(H))})},m=function(_){return u(_)};return u.decorate(function(b){w(b),g(b)}),m.decorate=function(){return arguments.length?(g=arguments.length<=0?void 0:arguments[0],m):g},m.labelOffsetDepth=function(){return arguments.length?(h=arguments.length<=0?void 0:arguments[0],m):h},S(m,u,N("decorate")),m},Rc="__d3fc-elements__",ma=function(h){return h[Rc]||{}},Xd=function(h,g){return void(h[Rc]=g)},kw=function(h){return delete h[Rc]},Bw=function(h){return h.tagName==="D3FC-GROUP"?[h].concat(Tt(h.querySelectorAll("d3fc-canvas, d3fc-group, d3fc-svg"))):[h]},Fw=function(h){var g=ma(h),v=g.width,y=g.height,w=h.useDevicePixelRatio&&window.devicePixelRatio!=null?window.devicePixelRatio:1,m=h.clientWidth*w,b=h.clientHeight*w,_=m!==v||b!==y,T=h.children[0];Xd(h,{pixelRatio:w,width:m,height:b,resized:_,child:T})};if(typeof CustomEvent!="function")throw new Error("d3fc-element depends on CustomEvent. Make sure that you load a polyfill in older browsers. See README.");var Vw=function(h){var g=ma(h),v=new CustomEvent("measure",{detail:g});h.dispatchEvent(v)},Ww=function(h){var g=ma(h),v=new CustomEvent("draw",{detail:g});h.dispatchEvent(v)},$w=function(u){var h=u.map(Bw).reduce(function(g,v){return g.concat(v)});h.forEach(Fw),h.forEach(Vw),h.forEach(Ww)},Gd=function(h){return ma(h.ownerDocument).queue||[]},zw=function(h,g){var v=ma(h.ownerDocument),y=v.requestId;y==null&&(y=requestAnimationFrame(function(){var w=Gd(h);$w(w),Hw(h)})),Xd(h.ownerDocument,{queue:g,requestId:y})},Hw=function(h){return kw(h.ownerDocument)},qd=function(h,g){var v=h;do if(v.parentNode===g)return!0;while(v=v.parentNode);return!1},Mc=function(u){var h=Gd(u),g=h.indexOf(u)>-1;if(!g){var v=h.some(function(w){return qd(u,w)});if(!v){var y=h.filter(function(w){return!qd(w,u)});y.push(u),zw(u,y)}}};if(typeof HTMLElement!="function")throw new Error("d3fc-element depends on Custom Elements (v1). Make sure that you load a polyfill in older browsers. See README.");var Uw=function(h){h.__measureListener__==null&&(h.__measureListener__=function(g){return h.setMeasurements(g.detail)},h.addEventListener("measure",h.__measureListener__))},Yw=function(h){h.__measureListener__!=null&&(h.removeEventListener("measure",h.__measureListener__),h.__measureListener__=null)},jd=function(u,h){return function(g){Ie(y,g);var v=Oe(y);function y(){return re(this,y),v.apply(this,arguments)}return ve(y,[{key:"attributeChangedCallback",value:function(m){switch(m){case"use-device-pixel-ratio":this.requestRedraw();break}}},{key:"connectedCallback",value:function(){this.childNodes.length===0&&this.appendChild(u()),Uw(this)}},{key:"disconnectedCallback",value:function(){Yw(this)}},{key:"setMeasurements",value:function(m){var b=m.width,_=m.height,T=ft(this.childNodes),E=T[0],M=T.slice(1);if(M.length>0)throw new Error("A d3fc-svg/canvas element must only contain a single svg/canvas element.");h(this,E,{width:b,height:_})}},{key:"useDevicePixelRatio",get:function(){return this.hasAttribute("use-device-pixel-ratio")&&this.getAttribute("use-device-pixel-ratio")!=="false"},set:function(m){m&&!this.useDevicePixelRatio?this.setAttribute("use-device-pixel-ratio",""):!m&&this.useDevicePixelRatio&&this.removeAttribute("use-device-pixel-ratio"),this.requestRedraw()}},{key:"requestRedraw",value:function(){Mc(this)}}],[{key:"observedAttributes",get:function(){return["use-device-pixel-ratio"]}}]),y}(To(HTMLElement))},Xw=function(u){Ie(g,u);var h=Oe(g);function g(){return re(this,g),h.apply(this,arguments)}return ve(g,[{key:"setWebglViewport",get:function(){return this.hasAttribute("set-webgl-viewport")&&this.getAttribute("set-webgl-viewport")!=="false"},set:function(y){y&&!this.setWebglViewport?this.setAttribute("set-webgl-viewport",""):!y&&this.setWebglViewport&&this.removeAttribute("set-webgl-viewport"),this.requestRedraw()}}]),g}(jd(function(){return document.createElement("canvas")},function(u,h,g){var v=g.width,y=g.height;if(h.setAttribute("width",v),h.setAttribute("height",y),u.setWebglViewport){var w=h.getContext("webgl");w.viewport(0,0,v,y)}})),Nc=function(h){h.autoResize?Gw(h):Jd(h)},Gw=function(h){h.__autoResizeListener__==null&&(h.__autoResizeListener__=function(){return Mc(h)},addEventListener("resize",h.__autoResizeListener__))},Jd=function(h){h.__autoResizeListener__!=null&&(removeEventListener("resize",h.__autoResizeListener__),h.__autoResizeListener__=null)},qw=function(u){Ie(g,u);var h=Oe(g);function g(){return re(this,g),h.apply(this,arguments)}return ve(g,[{key:"connectedCallback",value:function(){Nc(this)}},{key:"disconnectedCallback",value:function(){Jd(this)}},{key:"requestRedraw",value:function(){Mc(this)}},{key:"autoResize",get:function(){return this.hasAttribute("auto-resize")&&this.getAttribute("auto-resize")!=="false"},set:function(y){y&&!this.autoResize?this.setAttribute("auto-resize",""):!y&&this.autoResize&&this.removeAttribute("auto-resize"),Nc(this)}},{key:"attributeChangedCallback",value:function(y){switch(y){case"auto-resize":Nc(this);break}}}],[{key:"observedAttributes",get:function(){return["auto-resize"]}}]),g}(To(HTMLElement)),jw=jd(function(){return document.createElementNS("http://www.w3.org/2000/svg","svg")},function(u,h,g){var v=g.width,y=g.height;h.setAttribute("viewBox","0 0 ".concat(v," ").concat(y))}),Zd="d3fc-canvas,d3fc-svg{position:relative;display:block}d3fc-canvas>canvas,d3fc-svg>svg{position:absolute;height:100%;width:100%}d3fc-svg>svg{overflow:visible}",pa=document.createElement("style");if(pa.setAttribute("type","text/css"),document.querySelector("head").appendChild(pa),pa.styleSheet?pa.styleSheet.cssText+=Zd:pa.textContent+=Zd,(typeof customElements>"u"?"undefined":wo(customElements))!=="object"||typeof customElements.define!="function")throw new Error("d3fc-element depends on Custom Elements (v1). Make sure that you load a polyfill in older browsers. See README.");var Kd=[],Oc=function(h,g){customElements.get(h)?Kd.push(h):customElements.define(h,g)};Oc("d3fc-canvas",Xw),Oc("d3fc-group",qw),Oc("d3fc-svg",jw),Kd.length>0;var Jw=function(){var u=p.dispatch("point");function h(y){var w=c.pointer(y);u.call("point",this,[{x:w[0],y:w[1]}])}function g(){u.call("point",this,[])}var v=function(w){w.on("mouseenter.pointer",h).on("mousemove.pointer",h).on("mouseleave.pointer",g)};return A(v,u,"on"),v},Zw=function(){var u="",h="vertical",g=function(b,_){return Number(b[_])},v=function(b){return Object.keys(b[0]).filter(function(_){return _!==u}).map(function(_){var T=b.filter(function(E){return E[_]}).map(function(E){var M=[E[u],g(E,_)];return M.data=E,M});return T.key=_,T})},y=function(b){return b.map(function(_){var T=Object.keys(_).filter(function(E){return E!==u}).map(function(E){var M=[E,g(_,E)];return M.data=_,M});return T.key=_[u],T})},w=function(b){return h==="vertical"?v(b):y(b)};return w.key=function(){return arguments.length?(u=arguments.length<=0?void 0:arguments[0],w):u},w.value=function(){return arguments.length?(g=arguments.length<=0?void 0:arguments[0],w):g},w.orient=function(){return arguments.length?(h=arguments.length<=0?void 0:arguments[0],w):h},w},Qd=function(){for(var u={},h=function(T){for(var E=0,M=Object.keys(u);E<M.length;E++){var L=M[E];T[L].apply(null,u[L])}return T},g=arguments.length,v=new Array(g),y=0;y<g;y++)v[y]=arguments[y];for(var w=function(){var T=b[m];h[T]=function(){for(var E=arguments.length,M=new Array(E),L=0;L<E;L++)M[L]=arguments[L];return M.length?(u[T]=M,h):u[T]}},m=0,b=v;m<b.length;m++)w();return h},eg=`d3fc-group.cartesian-chart{width:100%;height:100%;overflow:hidden;display:grid;display:-ms-grid;grid-template-columns:minmax(1em,max-content) auto 1fr auto minmax(1em,max-content);-ms-grid-columns:minmax(1em,max-content) auto 1fr auto minmax(1em,max-content);grid-template-rows:minmax(1em,max-content) auto 1fr auto minmax(1em,max-content);-ms-grid-rows:minmax(1em,max-content) auto 1fr auto minmax(1em,max-content);}
d3fc-group.cartesian-chart>.top-label{align-self:center;-ms-grid-column-align:center;justify-self:center;-ms-grid-row-align:center;grid-column:3;-ms-grid-column:3;grid-row:1;-ms-grid-row:1;}
d3fc-group.cartesian-chart>.top-axis{height:2em;grid-column:3;-ms-grid-column:3;grid-row:2;-ms-grid-row:2;}
d3fc-group.cartesian-chart>.left-label{align-self:center;-ms-grid-column-align:center;justify-self:center;-ms-grid-row-align:center;grid-column:1;-ms-grid-column:1;grid-row:3;-ms-grid-row:3;}
d3fc-group.cartesian-chart>.left-axis{width:3em;grid-column:2;-ms-grid-column:2;grid-row:3;-ms-grid-row:3;}
d3fc-group.cartesian-chart>.plot-area{overflow:hidden;grid-column:3;-ms-grid-column:3;grid-row:3;-ms-grid-row:3;}
d3fc-group.cartesian-chart>.right-axis{width:3em;grid-column:4;-ms-grid-column:4;grid-row:3;-ms-grid-row:3;}
d3fc-group.cartesian-chart>.right-label{align-self:center;-ms-grid-column-align:center;justify-self:center;-ms-grid-row-align:center;grid-column:5;-ms-grid-column:5;grid-row:3;-ms-grid-row:3;}
d3fc-group.cartesian-chart>.bottom-axis{height:2em;grid-column:3;-ms-grid-column:3;grid-row:4;-ms-grid-row:4;}
d3fc-group.cartesian-chart>.bottom-label{align-self:center;-ms-grid-column-align:center;justify-self:center;-ms-grid-row-align:center;grid-column:3;-ms-grid-column:3;grid-row:5;-ms-grid-row:5;}
d3fc-group.cartesian-chart>.y-label{display:flex;transform:rotate(-90deg);width:1em;white-space:nowrap;justify-content:center;}`,va=document.createElement("style");va.setAttribute("type","text/css"),document.querySelector("head").appendChild(va),va.styleSheet?va.styleSheet.cssText+=eg:va.textContent+=eg;var hn=function(h){return typeof h=="function"?h:function(){return h}},tg=function(){var u=Kw.apply(void 0,arguments),h=u.xScale,g=u.yScale,v=u.xAxis,y=u.yAxis,w=hn(""),m=hn(""),b=hn(""),_=hn(null),T=hn(null),E=hn("right"),M=hn("bottom"),L=null,P=null,F=null,B=!1,V=!0,z=Qd("tickFormat","ticks","tickArguments","tickSize","tickSizeInner","tickSizeOuter","tickValues","tickPadding","tickCenterLabel"),U=function(){},H=Qd("tickFormat","ticks","tickArguments","tickSize","tickSizeInner","tickSizeOuter","tickValues","tickPadding","tickCenterLabel"),j=function(){},ae=function(){},we=qe("d3fc-group","cartesian-chart"),Se=qe("d3fc-canvas","webgl-plot-area"),ye=qe("d3fc-canvas","canvas-plot-area"),He=qe("d3fc-svg","svg-plot-area"),Vt=qe("d3fc-svg","x-axis").key(function(qt){return qt}),_n=qe("d3fc-svg","y-axis").key(function(qt){return qt}),Xn=qe("div","chart-label"),ba=qe("div","x-label").key(function(qt){return qt}),Ic=qe("div","y-label").key(function(qt){return qt}),qr=function(Gn){return function(Nr){return Ct(Gn)?Nr.transition(Gn):Nr}},Ye=function(Gn){var Nr=qr(Gn);Gn.each(function(Lt,qn,_a){var Wt=we(c.select(_a[qn]),[Lt]);Wt.enter().attr("auto-resize",""),Xn(Wt,[M(Lt)]).attr("class",function(Le){return Le==="top"?"chart-label bottom-label":"chart-label top-label"}).style("margin-bottom",function(Le){return Le==="top"?0:"1em"}).style("margin-top",function(Le){return Le==="top"?"1em":0}).text(w(Lt)),ba(Wt,[M(Lt)]).attr("class",function(Le){return"x-label ".concat(Le,"-label")}).text(m(Lt)),Ic(Wt,[E(Lt)]).attr("class",function(Le){return"y-label ".concat(Le,"-label")}).text(b(Lt)),Se(Wt,L?[Lt]:[]).attr("set-webgl-viewport","").classed("plot-area",!0).attr("use-device-pixel-ratio",V).on("draw",function(Le,je){var ht=Le.detail,$t=ht.child,An=ht.pixelRatio;L.context(B?null:$t.getContext("webgl")).pixelRatio(An).xScale(h).yScale(g),L(je)}),Wt.select(".webgl-plot-area>canvas").on("webglcontextlost",function(Le){Le.preventDefault(),B=!0,Wt.node().requestRedraw()}).on("webglcontextrestored",function(){B=!1,Wt.node().requestRedraw()}),ye(Wt,P?[Lt]:[]).classed("plot-area",!0).attr("use-device-pixel-ratio",V).on("draw",function(Le,je){var ht=Le.detail,$t=ht.child,An=ht.pixelRatio,Or=$t.getContext("2d");Or.save(),V&&Or.scale(An,An),P.context(Or).xScale(h).yScale(g),P(je),Or.restore()}),He(Wt,F?[Lt]:[]).classed("plot-area",!0).on("draw",function(Le,je){var ht=Le.detail.child;F.xScale(h).yScale(g),Nr(c.select(ht).datum(je)).call(F)}),Vt(Wt,[M(Lt)]).attr("class",function(Le){return"x-axis ".concat(Le,"-axis")}).style("height",_(Lt)).on("measure",function(Le,je){var ht=Le.detail,$t=ht.width,An=ht.height,Or=ht.child;je==="top"&&c.select(Or).attr("viewBox","0 ".concat(-An," ").concat($t," ").concat(An)),h.range([0,$t])}).on("draw",function(Le,je){var ht=Le.detail.child,$t=je==="top"?v.top(h):v.bottom(h);$t.decorate(U),Nr(c.select(ht).datum(je)).call(z($t))}),_n(Wt,[E(Lt)]).attr("class",function(Le){return"y-axis ".concat(Le,"-axis")}).style("width",T(Lt)).on("measure",function(Le,je){var ht=Le.detail,$t=ht.width,An=ht.height,Or=ht.child;je==="left"&&c.select(Or).attr("viewBox","".concat(-$t," 0 ").concat($t," ").concat(An)),g.range([An,0])}).on("draw",function(Le,je){var ht=Le.detail.child,$t=je==="left"?y.left(g):y.right(g);$t.decorate(j),Nr(c.select(ht).datum(je)).call(H($t))}),Wt.each(function(Le,je,ht){return ht[je].requestRedraw()}),ae(Wt,Lt,qn)})},yi=N(/range\w*/,/tickFormat/);return S(Ye,h,yi,X("x")),S(Ye,g,yi,X("y")),S(Ye,z,X("x")),S(Ye,H,X("y")),Ye.xOrient=function(){return arguments.length?(M=hn(arguments.length<=0?void 0:arguments[0]),Ye):M},Ye.yOrient=function(){return arguments.length?(E=hn(arguments.length<=0?void 0:arguments[0]),Ye):E},Ye.xDecorate=function(){return arguments.length?(U=arguments.length<=0?void 0:arguments[0],Ye):U},Ye.yDecorate=function(){return arguments.length?(j=arguments.length<=0?void 0:arguments[0],Ye):j},Ye.chartLabel=function(){return arguments.length?(w=hn(arguments.length<=0?void 0:arguments[0]),Ye):w},Ye.xLabel=function(){return arguments.length?(m=hn(arguments.length<=0?void 0:arguments[0]),Ye):m},Ye.yLabel=function(){return arguments.length?(b=hn(arguments.length<=0?void 0:arguments[0]),Ye):b},Ye.xAxisHeight=function(){return arguments.length?(_=hn(arguments.length<=0?void 0:arguments[0]),Ye):_},Ye.yAxisWidth=function(){return arguments.length?(T=hn(arguments.length<=0?void 0:arguments[0]),Ye):T},Ye.webglPlotArea=function(){return arguments.length?(L=arguments.length<=0?void 0:arguments[0],Ye):L},Ye.canvasPlotArea=function(){return arguments.length?(P=arguments.length<=0?void 0:arguments[0],Ye):P},Ye.svgPlotArea=function(){return arguments.length?(F=arguments.length<=0?void 0:arguments[0],Ye):F},Ye.decorate=function(){return arguments.length?(ae=arguments.length<=0?void 0:arguments[0],Ye):ae},Ye.useDevicePixelRatio=function(){return arguments.length?(V=arguments.length<=0?void 0:arguments[0],Ye):V},Ye},Kw=function(){for(var h={xScale:i.scaleIdentity(),yScale:i.scaleIdentity(),xAxis:{bottom:zd,top:$d},yAxis:{right:Ud,left:Hd}},g=arguments.length,v=new Array(g),y=0;y<g;y++)v[y]=arguments[y];return v.length===1&&!v[0].domain&&!v[0].range?Object.assign(h,v[0]):Object.assign(h,{xScale:v[0]||h.xScale,yScale:v[1]||h.yScale})},ng=function(h){return typeof h=="function"?h:function(){return h}},rg=function(u,h){return function(){var g=ng(""),v=h,y=function(){},w=tg.apply(void 0,arguments),m=function(_){u(w,v),w.decorate(function(T,E,M){T.enter().select(".x-label").style("height","1em").style("line-height","1em");var L=w.yOrient()(E);T.enter().append("div").attr("class","y-label-container").style("grid-column",L==="left"?1:5).style("-ms-grid-column",L==="left"?1:5).style("grid-row",3).style("-ms-grid-row",3).style("width","1em").style("display","flex").style("align-items","center").style("justify-content","center").style("white-space","nowrap").append("div").attr("class","y-label").style("transform","rotate(-90deg)"),T.select(".y-label-container>.y-label").text(g),y(T,E,M)}),_.call(w)};return S(m,w,k(/^x/,/^y/,"chartLabel")),m.yLabel=function(){return arguments.length?(g=ng(arguments.length<=0?void 0:arguments[0]),m):g},m.plotArea=function(){return arguments.length?(v=arguments.length<=0?void 0:arguments[0],m):v},m.decorate=function(){return arguments.length?(y=arguments.length<=0?void 0:arguments[0],m):y},m}},Qw=rg(function(u,h){return u.svgPlotArea(h)},pc),ex=rg(function(u,h){return u.canvasPlotArea(h)},vc),tx=function(h){switch(h){case"x":return x.brushX();case"y":return x.brushY();case"xy":return x.brush()}},Dc=function(h){return[h[1],h[0]]},Lc=function(h){var g=tx(h),v=p.dispatch("brush","start","end"),y=i.scaleIdentity(),w=i.scaleIdentity(),m=qe("g","brush"),b=function(B,V,z){switch(h){case"x":return B.map(V);case"y":return B.map(z);case"xy":return[[V(B[0][0]),z(B[0][1])],[V(B[1][0]),z(B[1][1])]]}},_=function(B){return b(B,i.scaleLinear().domain(y.range()).invert,i.scaleLinear().domain(Dc(w.range())).invert)},T=function(B){return b(B,i.scaleLinear().domain(y.range()),i.scaleLinear().domain(Dc(w.range())))},E=function(B){var V=i.scaleLinear().domain(y.domain());if(h==="x")return B.map(V.invert);if(h==="xy")return[V.invert(B[0][0]),V.invert(B[1][0])]},M=function(B){var V=i.scaleLinear().domain(Dc(w.domain()));if(h==="y")return[B[1],B[0]].map(V.invert);if(h==="xy")return[V.invert(B[1][1]),V.invert(B[0][1])]},L=function(B){if(!(B.sourceEvent&&B.sourceEvent.type==="draw"))if(B.selection){var V=T(B.selection);v.call(B.type,{},{selection:V,xDomain:E(V),yDomain:M(V)})}else v.call(B.type,{},{})},P=function(B){B.each(function(V,z,U){g.extent([[y.range()[0],w.range()[1]],[y.range()[1],w.range()[0]]]),g.on("end",function(j){return L(j)}).on("brush",function(j){return L(j)}).on("start",function(j){return L(j)});var H=m(c.select(U[z]),[V]);H.call(g).call(g.move,V?_(V):null)})};return P.xScale=function(){return arguments.length?(y=arguments.length<=0?void 0:arguments[0],P):y},P.yScale=function(){return arguments.length?(w=arguments.length<=0?void 0:arguments[0],P):w},A(P,v,"on"),A(P,g,"filter","handleSize"),P},nx=function(){return Lc("x")},rx=function(){return Lc("y")},ix=function(){return Lc("xy")},ig=function(h,g){if(h==null&&g==null)return!0;var v=h.domain(),y=g.domain();return v.length===y.length&&v.every(function(w,m){var b;return(w==null?void 0:w.valueOf())===((b=y[m])===null||b===void 0?void 0:b.valueOf())})},ax=function(h,g){return R.zoomIdentity.scale(h.k/g.k).translate(h.x-g.x,h.y-g.y)},Oo=Symbol("d3fc-domain-zoom"),ox=function(){var u=p.dispatch("zoom"),h=R.zoom().on("zoom",function(v){var y=v.transform,w=this,m=y,b=w[Oo],_=b.originalXScale,T=b.previousXScale,E=b.xScale,M=b.originalYScale,L=b.previousYScale,P=b.yScale,F=b.previousTransform;(!ig(T,E)||!ig(L,P))&&(_=E==null?void 0:E.copy(),M=P==null?void 0:P.copy(),m=ax(y,F)),E!=null&&(T=m.rescaleX(_.range(E.range())),E.domain(T.domain())),P!=null&&(L=m.rescaleY(M.range(P.range())),P.domain(L.domain())),F=m,w[Oo]={originalXScale:_,previousXScale:T,xScale:E,originalYScale:M,previousYScale:L,yScale:P,previousTransform:F},m!==y&&h.transform(c.select(w),m),u.call("zoom",this,v)}),g=function(y){var w=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,m=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null;w==null&&m==null,y.each(function(b,_,T){var E=T[_][Oo];E!=null&&E.xScale===w&&E.yScale;var M=w==null?void 0:w.copy(),L=m==null?void 0:m.copy();T[_][Oo]={originalXScale:M,previousXScale:M,xScale:w,originalYScale:L,previousYScale:L,yScale:m,previousTransform:R.zoomIdentity}}).call(h)};return A(g,u,"on"),A(g,h,"extent","filter","wheelDelta","touchable","clickDistance","tapDistance","duration","interpolate","scaleExtent","translateExtent"),g};n.annotationCanvasBand=Tw,n.annotationCanvasCrosshair=Ew,n.annotationCanvasGridline=Aw,n.annotationCanvasLine=Ac,n.annotationSvgBand=xw,n.annotationSvgCrosshair=Sw,n.annotationSvgGridline=Cw,n.annotationSvgLine=Cc,n.autoBandwidth=_w,n.axisBottom=zd,n.axisLabelOffset=Pw,n.axisLabelRotate=Iw,n.axisLeft=Hd,n.axisOrdinalBottom=Ow,n.axisOrdinalLeft=Dw,n.axisOrdinalRight=Lw,n.axisOrdinalTop=Nw,n.axisRight=Ud,n.axisTop=$d,n.brush=ix,n.brushX=nx,n.brushY=rx,n.bucket=Eo,n.chartCanvasCartesian=ex,n.chartCartesian=tg,n.chartSvgCartesian=Qw,n.dataJoin=qe,n.discontinuityIdentity=wh,n.discontinuityRange=Ky,n.discontinuitySkipUtcWeekends=Zy,n.discontinuitySkipUtcWeeklyPattern=a1,n.discontinuitySkipWeekends=Jy,n.discontinuitySkipWeeklyPattern=r1,n.effectivelyZero=dc,n.exclude=N,n.extentDate=Rh,n.extentLinear=Ah,n.extentTime=Rh,n.feedGdax=c1,n.group=Zw,n.include=k,n.includeMap=W,n.indicatorBollingerBands=$,n.indicatorElderRay=qy,n.indicatorEnvelope=Gy,n.indicatorExponentialMovingAverage=te,n.indicatorForceIndex=Xy,n.indicatorMacd=G,n.indicatorMovingAverage=yh,n.indicatorRelativeStrengthIndex=Uy,n.indicatorStochasticOscillator=Yy,n.isTransition=Ct,n.largestTriangleOneBucket=u1,n.largestTriangleThreeBucket=f1,n.layoutAnnealing=_1,n.layoutBoundingBox=x1,n.layoutGreedy=v1,n.layoutLabel=d1,n.layoutRemoveOverlaps=w1,n.layoutTextLabel=g1,n.modeMedian=h1,n.pointer=Jw,n.prefix=X,n.randomFinancial=s1,n.randomGeometricBrownianMotion=Mh,n.randomSkipWeekends=l1,n.rebind=A,n.rebindAll=S,n.scaleDiscontinuous=xh,n.seriesCanvasArea=nw,n.seriesCanvasBar=J1,n.seriesCanvasBoxPlot=lw,n.seriesCanvasCandlestick=aw,n.seriesCanvasErrorBar=Q1,n.seriesCanvasGrouped=gw,n.seriesCanvasHeatmap=ww,n.seriesCanvasLine=vc,n.seriesCanvasMulti=Ec,n.seriesCanvasOhlc=fw,n.seriesCanvasPoint=Md,n.seriesCanvasRepeat=pw,n.seriesSvgArea=tw,n.seriesSvgBar=j1,n.seriesSvgBoxPlot=sw,n.seriesSvgCandlestick=iw,n.seriesSvgErrorBar=K1,n.seriesSvgGrouped=dw,n.seriesSvgHeatmap=yw,n.seriesSvgLine=pc,n.seriesSvgMulti=Sc,n.seriesSvgOhlc=uw,n.seriesSvgPoint=Rd,n.seriesSvgRepeat=mw,n.seriesWebglArea=rw,n.seriesWebglBar=Z1,n.seriesWebglBoxPlot=cw,n.seriesWebglCandlestick=ow,n.seriesWebglErrorBar=ew,n.seriesWebglLine=Ad,n.seriesWebglMulti=Ld,n.seriesWebglOhlc=hw,n.seriesWebglPoint=q1,n.seriesWebglRepeat=vw,n.shapeBar=_i,n.shapeBoxPlot=uc,n.shapeCandlestick=cc,n.shapeErrorBar=fc,n.shapeOhlc=lc,n.webglAdjacentAttribute=Ar,n.webglAttribute=We,n.webglBaseAttribute=Co,n.webglBufferBuilder=Ih,n.webglElementIndices=Gr,n.webglFillColor=X1,n.webglProgramBuilder=ur,n.webglScaleLinear=Ao,n.webglScaleLog=xd,n.webglScaleMapper=Rr,n.webglScalePow=Td,n.webglSeriesArea=dd,n.webglSeriesBar=bd,n.webglSeriesBoxPlot=wd,n.webglSeriesCandlestick=yd,n.webglSeriesErrorBar=_d,n.webglSeriesLine=pd,n.webglSeriesOhlc=vd,n.webglSeriesPoint=md,n.webglShaderBuilder=nt,n.webglStrokeColor=G1,n.webglSymbolMapper=Ed,n.webglTypes=Ge,n.webglUniform=bn,n.zoom=ox,Object.defineProperty(n,"__esModule",{value:!0})})}(Oa,Oa.exports)),Oa.exports}var Et=UI(),af="http://www.w3.org/1999/xhtml";const Pp={svg:"http://www.w3.org/2000/svg",xhtml:af,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function iy(t){var e=t+="",n=e.indexOf(":");return n>=0&&(e=t.slice(0,n))!=="xmlns"&&(t=t.slice(n+1)),Pp.hasOwnProperty(e)?{space:Pp[e],local:t}:t}function YI(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===af&&e.documentElement.namespaceURI===af?e.createElement(t):e.createElementNS(n,t)}}function XI(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function ay(t){var e=iy(t);return(e.local?XI:YI)(e)}function GI(){}function oy(t){return t==null?GI:function(){return this.querySelector(t)}}function qI(t){typeof t!="function"&&(t=oy(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var a=e[i],o=a.length,s=r[i]=new Array(o),l,c,f=0;f<o;++f)(l=a[f])&&(c=t.call(l,l.__data__,f,a))&&("__data__"in l&&(c.__data__=l.__data__),s[f]=c);return new Bn(r,this._parents)}function jI(){return[]}function JI(t){return t==null?jI:function(){return this.querySelectorAll(t)}}function ZI(t){typeof t!="function"&&(t=JI(t));for(var e=this._groups,n=e.length,r=[],i=[],a=0;a<n;++a)for(var o=e[a],s=o.length,l,c=0;c<s;++c)(l=o[c])&&(r.push(t.call(l,l.__data__,c,o)),i.push(l));return new Bn(r,i)}function KI(t){return function(){return this.matches(t)}}function QI(t){typeof t!="function"&&(t=KI(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var a=e[i],o=a.length,s=r[i]=[],l,c=0;c<o;++c)(l=a[c])&&t.call(l,l.__data__,c,a)&&s.push(l);return new Bn(r,this._parents)}function sy(t){return new Array(t.length)}function eP(){return new Bn(this._enter||this._groups.map(sy),this._parents)}function vl(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}vl.prototype={constructor:vl,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function tP(t){return function(){return t}}var kp="$";function nP(t,e,n,r,i,a){for(var o=0,s,l=e.length,c=a.length;o<c;++o)(s=e[o])?(s.__data__=a[o],r[o]=s):n[o]=new vl(t,a[o]);for(;o<l;++o)(s=e[o])&&(i[o]=s)}function rP(t,e,n,r,i,a,o){var s,l,c={},f=e.length,d=a.length,p=new Array(f),x;for(s=0;s<f;++s)(l=e[s])&&(p[s]=x=kp+o.call(l,l.__data__,s,e),x in c?i[s]=l:c[x]=l);for(s=0;s<d;++s)x=kp+o.call(t,a[s],s,a),(l=c[x])?(r[s]=l,l.__data__=a[s],c[x]=null):n[s]=new vl(t,a[s]);for(s=0;s<f;++s)(l=e[s])&&c[p[s]]===l&&(i[s]=l)}function iP(t,e){if(!t)return x=new Array(this.size()),c=-1,this.each(function(W){x[++c]=W}),x;var n=e?rP:nP,r=this._parents,i=this._groups;typeof t!="function"&&(t=tP(t));for(var a=i.length,o=new Array(a),s=new Array(a),l=new Array(a),c=0;c<a;++c){var f=r[c],d=i[c],p=d.length,x=t.call(f,f&&f.__data__,c,r),R=x.length,O=s[c]=new Array(R),A=o[c]=new Array(R),I=l[c]=new Array(p);n(f,d,O,A,I,x,e);for(var S=0,D=0,N,k;S<R;++S)if(N=O[S]){for(S>=D&&(D=S+1);!(k=A[D])&&++D<R;);N._next=k||null}}return o=new Bn(o,r),o._enter=s,o._exit=l,o}function aP(){return new Bn(this._exit||this._groups.map(sy),this._parents)}function oP(t,e,n){var r=this.enter(),i=this,a=this.exit();return r=typeof t=="function"?t(r):r.append(t+""),e!=null&&(i=e(i)),n==null?a.remove():n(a),r&&i?r.merge(i).order():i}function sP(t){for(var e=this._groups,n=t._groups,r=e.length,i=n.length,a=Math.min(r,i),o=new Array(r),s=0;s<a;++s)for(var l=e[s],c=n[s],f=l.length,d=o[s]=new Array(f),p,x=0;x<f;++x)(p=l[x]||c[x])&&(d[x]=p);for(;s<r;++s)o[s]=e[s];return new Bn(o,this._parents)}function lP(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var r=t[e],i=r.length-1,a=r[i],o;--i>=0;)(o=r[i])&&(a&&o.compareDocumentPosition(a)^4&&a.parentNode.insertBefore(o,a),a=o);return this}function cP(t){t||(t=uP);function e(d,p){return d&&p?t(d.__data__,p.__data__):!d-!p}for(var n=this._groups,r=n.length,i=new Array(r),a=0;a<r;++a){for(var o=n[a],s=o.length,l=i[a]=new Array(s),c,f=0;f<s;++f)(c=o[f])&&(l[f]=c);l.sort(e)}return new Bn(i,this._parents).order()}function uP(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function fP(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this}function hP(){var t=new Array(this.size()),e=-1;return this.each(function(){t[++e]=this}),t}function dP(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],i=0,a=r.length;i<a;++i){var o=r[i];if(o)return o}return null}function gP(){var t=0;return this.each(function(){++t}),t}function mP(){return!this.node()}function pP(t){for(var e=this._groups,n=0,r=e.length;n<r;++n)for(var i=e[n],a=0,o=i.length,s;a<o;++a)(s=i[a])&&t.call(s,s.__data__,a,i);return this}function vP(t){return function(){this.removeAttribute(t)}}function bP(t){return function(){this.removeAttributeNS(t.space,t.local)}}function _P(t,e){return function(){this.setAttribute(t,e)}}function yP(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function wP(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttribute(t):this.setAttribute(t,n)}}function xP(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}function TP(t,e){var n=iy(t);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((e==null?n.local?bP:vP:typeof e=="function"?n.local?xP:wP:n.local?yP:_P)(n,e))}function ly(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function SP(t){return function(){this.style.removeProperty(t)}}function EP(t,e,n){return function(){this.style.setProperty(t,e,n)}}function CP(t,e,n){return function(){var r=e.apply(this,arguments);r==null?this.style.removeProperty(t):this.style.setProperty(t,r,n)}}function AP(t,e,n){return arguments.length>1?this.each((e==null?SP:typeof e=="function"?CP:EP)(t,e,n??"")):RP(this.node(),t)}function RP(t,e){return t.style.getPropertyValue(e)||ly(t).getComputedStyle(t,null).getPropertyValue(e)}function MP(t){return function(){delete this[t]}}function NP(t,e){return function(){this[t]=e}}function OP(t,e){return function(){var n=e.apply(this,arguments);n==null?delete this[t]:this[t]=n}}function DP(t,e){return arguments.length>1?this.each((e==null?MP:typeof e=="function"?OP:NP)(t,e)):this.node()[t]}function cy(t){return t.trim().split(/^|\s+/)}function mh(t){return t.classList||new uy(t)}function uy(t){this._node=t,this._names=cy(t.getAttribute("class")||"")}uy.prototype={add:function(t){var e=this._names.indexOf(t);e<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};function fy(t,e){for(var n=mh(t),r=-1,i=e.length;++r<i;)n.add(e[r])}function hy(t,e){for(var n=mh(t),r=-1,i=e.length;++r<i;)n.remove(e[r])}function LP(t){return function(){fy(this,t)}}function IP(t){return function(){hy(this,t)}}function PP(t,e){return function(){(e.apply(this,arguments)?fy:hy)(this,t)}}function kP(t,e){var n=cy(t+"");if(arguments.length<2){for(var r=mh(this.node()),i=-1,a=n.length;++i<a;)if(!r.contains(n[i]))return!1;return!0}return this.each((typeof e=="function"?PP:e?LP:IP)(n,e))}function BP(){this.textContent=""}function FP(t){return function(){this.textContent=t}}function VP(t){return function(){var e=t.apply(this,arguments);this.textContent=e??""}}function WP(t){return arguments.length?this.each(t==null?BP:(typeof t=="function"?VP:FP)(t)):this.node().textContent}function $P(){this.innerHTML=""}function zP(t){return function(){this.innerHTML=t}}function HP(t){return function(){var e=t.apply(this,arguments);this.innerHTML=e??""}}function UP(t){return arguments.length?this.each(t==null?$P:(typeof t=="function"?HP:zP)(t)):this.node().innerHTML}function YP(){this.nextSibling&&this.parentNode.appendChild(this)}function XP(){return this.each(YP)}function GP(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function qP(){return this.each(GP)}function jP(t){var e=typeof t=="function"?t:ay(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})}function JP(){return null}function ZP(t,e){var n=typeof t=="function"?t:ay(t),r=e==null?JP:typeof e=="function"?e:oy(e);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function KP(){var t=this.parentNode;t&&t.removeChild(this)}function QP(){return this.each(KP)}function e4(){return this.parentNode.insertBefore(this.cloneNode(!1),this.nextSibling)}function t4(){return this.parentNode.insertBefore(this.cloneNode(!0),this.nextSibling)}function n4(t){return this.select(t?t4:e4)}function r4(t){return arguments.length?this.property("__data__",t):this.node().__data__}var dy={},Yt=null;if(typeof document<"u"){var i4=document.documentElement;"onmouseenter"in i4||(dy={mouseenter:"mouseover",mouseleave:"mouseout"})}function a4(t,e,n){return t=gy(t,e,n),function(r){var i=r.relatedTarget;(!i||i!==this&&!(i.compareDocumentPosition(this)&8))&&t.call(this,r)}}function gy(t,e,n){return function(r){var i=Yt;Yt=r;try{t.call(this,this.__data__,e,n)}finally{Yt=i}}}function o4(t){return t.trim().split(/^|\s+/).map(function(e){var n="",r=e.indexOf(".");return r>=0&&(n=e.slice(r+1),e=e.slice(0,r)),{type:e,name:n}})}function s4(t){return function(){var e=this.__on;if(e){for(var n=0,r=-1,i=e.length,a;n<i;++n)a=e[n],(!t.type||a.type===t.type)&&a.name===t.name?this.removeEventListener(a.type,a.listener,a.capture):e[++r]=a;++r?e.length=r:delete this.__on}}}function l4(t,e,n){var r=dy.hasOwnProperty(t.type)?a4:gy;return function(i,a,o){var s=this.__on,l,c=r(e,a,o);if(s){for(var f=0,d=s.length;f<d;++f)if((l=s[f]).type===t.type&&l.name===t.name){this.removeEventListener(l.type,l.listener,l.capture),this.addEventListener(l.type,l.listener=c,l.capture=n),l.value=e;return}}this.addEventListener(t.type,c,n),l={type:t.type,name:t.name,value:e,listener:c,capture:n},s?s.push(l):this.__on=[l]}}function c4(t,e,n){var r=o4(t+""),i,a=r.length,o;if(arguments.length<2){var s=this.node().__on;if(s){for(var l=0,c=s.length,f;l<c;++l)for(i=0,f=s[l];i<a;++i)if((o=r[i]).type===f.type&&o.name===f.name)return f.value}return}for(s=e?l4:s4,n==null&&(n=!1),i=0;i<a;++i)this.each(s(r[i],e,n));return this}function my(t,e,n){var r=ly(t),i=r.CustomEvent;typeof i=="function"?i=new i(e,n):(i=r.document.createEvent("Event"),n?(i.initEvent(e,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(e,!1,!1)),t.dispatchEvent(i)}function u4(t,e){return function(){return my(this,t,e)}}function f4(t,e){return function(){return my(this,t,e.apply(this,arguments))}}function h4(t,e){return this.each((typeof e=="function"?f4:u4)(t,e))}var d4=[null];function Bn(t,e){this._groups=t,this._parents=e}Bn.prototype={constructor:Bn,select:qI,selectAll:ZI,filter:QI,data:iP,enter:eP,exit:aP,join:oP,merge:sP,order:lP,sort:cP,call:fP,nodes:hP,node:dP,size:gP,empty:mP,each:pP,attr:TP,style:AP,property:DP,classed:kP,text:WP,html:UP,raise:XP,lower:qP,append:jP,insert:ZP,remove:QP,clone:n4,datum:r4,on:c4,dispatch:h4};function ac(t){return typeof t=="string"?new Bn([[document.querySelector(t)]],[document.documentElement]):new Bn([[t]],d4)}var g4=0;function Bp(){this._="@"+(++g4).toString(36)}Bp.prototype={constructor:Bp,get:function(t){for(var e=this._;!(e in t);)if(!(t=t.parentNode))return;return t[e]},set:function(t,e){return t[this._]=e},remove:function(t){return this._ in t&&delete t[this._]},toString:function(){return this._}};var m4={value:function(){}};function py(){for(var t=0,e=arguments.length,n={},r;t<e;++t){if(!(r=arguments[t]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new Ms(n)}function Ms(t){this._=t}function p4(t,e){return t.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");if(i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),n&&!e.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}Ms.prototype=py.prototype={constructor:Ms,on:function(t,e){var n=this._,r=p4(t+"",n),i,a=-1,o=r.length;if(arguments.length<2){for(;++a<o;)if((i=(t=r[a]).type)&&(i=v4(n[i],t.name)))return i;return}if(e!=null&&typeof e!="function")throw new Error("invalid callback: "+e);for(;++a<o;)if(i=(t=r[a]).type)n[i]=Fp(n[i],t.name,e);else if(e==null)for(i in n)n[i]=Fp(n[i],t.name,null);return this},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new Ms(t)},call:function(t,e){if((i=arguments.length-2)>0)for(var n=new Array(i),r=0,i,a;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(a=this._[t],r=0,i=a.length;r<i;++r)a[r].value.apply(e,n)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],i=0,a=r.length;i<a;++i)r[i].value.apply(e,n)}};function v4(t,e){for(var n=0,r=t.length,i;n<r;++n)if((i=t[n]).name===e)return i.value}function Fp(t,e,n){for(var r=0,i=t.length;r<i;++r)if(t[r].name===e){t[r]=m4,t=t.slice(0,r).concat(t.slice(r+1));break}return n!=null&&t.push({name:e,value:n}),t}var of="http://www.w3.org/1999/xhtml";const Vp={svg:"http://www.w3.org/2000/svg",xhtml:of,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function vy(t){var e=t+="",n=e.indexOf(":");return n>=0&&(e=t.slice(0,n))!=="xmlns"&&(t=t.slice(n+1)),Vp.hasOwnProperty(e)?{space:Vp[e],local:t}:t}function b4(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===of&&e.documentElement.namespaceURI===of?e.createElement(t):e.createElementNS(n,t)}}function _4(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function by(t){var e=vy(t);return(e.local?_4:b4)(e)}function y4(){}function _y(t){return t==null?y4:function(){return this.querySelector(t)}}function w4(t){typeof t!="function"&&(t=_y(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var a=e[i],o=a.length,s=r[i]=new Array(o),l,c,f=0;f<o;++f)(l=a[f])&&(c=t.call(l,l.__data__,f,a))&&("__data__"in l&&(c.__data__=l.__data__),s[f]=c);return new Fn(r,this._parents)}function x4(){return[]}function T4(t){return t==null?x4:function(){return this.querySelectorAll(t)}}function S4(t){typeof t!="function"&&(t=T4(t));for(var e=this._groups,n=e.length,r=[],i=[],a=0;a<n;++a)for(var o=e[a],s=o.length,l,c=0;c<s;++c)(l=o[c])&&(r.push(t.call(l,l.__data__,c,o)),i.push(l));return new Fn(r,i)}function E4(t){return function(){return this.matches(t)}}function C4(t){typeof t!="function"&&(t=E4(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var a=e[i],o=a.length,s=r[i]=[],l,c=0;c<o;++c)(l=a[c])&&t.call(l,l.__data__,c,a)&&s.push(l);return new Fn(r,this._parents)}function yy(t){return new Array(t.length)}function A4(){return new Fn(this._enter||this._groups.map(yy),this._parents)}function bl(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}bl.prototype={constructor:bl,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function R4(t){return function(){return t}}var Wp="$";function M4(t,e,n,r,i,a){for(var o=0,s,l=e.length,c=a.length;o<c;++o)(s=e[o])?(s.__data__=a[o],r[o]=s):n[o]=new bl(t,a[o]);for(;o<l;++o)(s=e[o])&&(i[o]=s)}function N4(t,e,n,r,i,a,o){var s,l,c={},f=e.length,d=a.length,p=new Array(f),x;for(s=0;s<f;++s)(l=e[s])&&(p[s]=x=Wp+o.call(l,l.__data__,s,e),x in c?i[s]=l:c[x]=l);for(s=0;s<d;++s)x=Wp+o.call(t,a[s],s,a),(l=c[x])?(r[s]=l,l.__data__=a[s],c[x]=null):n[s]=new bl(t,a[s]);for(s=0;s<f;++s)(l=e[s])&&c[p[s]]===l&&(i[s]=l)}function O4(t,e){if(!t)return x=new Array(this.size()),c=-1,this.each(function(W){x[++c]=W}),x;var n=e?N4:M4,r=this._parents,i=this._groups;typeof t!="function"&&(t=R4(t));for(var a=i.length,o=new Array(a),s=new Array(a),l=new Array(a),c=0;c<a;++c){var f=r[c],d=i[c],p=d.length,x=t.call(f,f&&f.__data__,c,r),R=x.length,O=s[c]=new Array(R),A=o[c]=new Array(R),I=l[c]=new Array(p);n(f,d,O,A,I,x,e);for(var S=0,D=0,N,k;S<R;++S)if(N=O[S]){for(S>=D&&(D=S+1);!(k=A[D])&&++D<R;);N._next=k||null}}return o=new Fn(o,r),o._enter=s,o._exit=l,o}function D4(){return new Fn(this._exit||this._groups.map(yy),this._parents)}function L4(t,e,n){var r=this.enter(),i=this,a=this.exit();return r=typeof t=="function"?t(r):r.append(t+""),e!=null&&(i=e(i)),n==null?a.remove():n(a),r&&i?r.merge(i).order():i}function I4(t){for(var e=this._groups,n=t._groups,r=e.length,i=n.length,a=Math.min(r,i),o=new Array(r),s=0;s<a;++s)for(var l=e[s],c=n[s],f=l.length,d=o[s]=new Array(f),p,x=0;x<f;++x)(p=l[x]||c[x])&&(d[x]=p);for(;s<r;++s)o[s]=e[s];return new Fn(o,this._parents)}function P4(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var r=t[e],i=r.length-1,a=r[i],o;--i>=0;)(o=r[i])&&(a&&o.compareDocumentPosition(a)^4&&a.parentNode.insertBefore(o,a),a=o);return this}function k4(t){t||(t=B4);function e(d,p){return d&&p?t(d.__data__,p.__data__):!d-!p}for(var n=this._groups,r=n.length,i=new Array(r),a=0;a<r;++a){for(var o=n[a],s=o.length,l=i[a]=new Array(s),c,f=0;f<s;++f)(c=o[f])&&(l[f]=c);l.sort(e)}return new Fn(i,this._parents).order()}function B4(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function F4(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this}function V4(){var t=new Array(this.size()),e=-1;return this.each(function(){t[++e]=this}),t}function W4(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],i=0,a=r.length;i<a;++i){var o=r[i];if(o)return o}return null}function $4(){var t=0;return this.each(function(){++t}),t}function z4(){return!this.node()}function H4(t){for(var e=this._groups,n=0,r=e.length;n<r;++n)for(var i=e[n],a=0,o=i.length,s;a<o;++a)(s=i[a])&&t.call(s,s.__data__,a,i);return this}function U4(t){return function(){this.removeAttribute(t)}}function Y4(t){return function(){this.removeAttributeNS(t.space,t.local)}}function X4(t,e){return function(){this.setAttribute(t,e)}}function G4(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function q4(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttribute(t):this.setAttribute(t,n)}}function j4(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}function J4(t,e){var n=vy(t);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((e==null?n.local?Y4:U4:typeof e=="function"?n.local?j4:q4:n.local?G4:X4)(n,e))}function wy(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function Z4(t){return function(){this.style.removeProperty(t)}}function K4(t,e,n){return function(){this.style.setProperty(t,e,n)}}function Q4(t,e,n){return function(){var r=e.apply(this,arguments);r==null?this.style.removeProperty(t):this.style.setProperty(t,r,n)}}function e8(t,e,n){return arguments.length>1?this.each((e==null?Z4:typeof e=="function"?Q4:K4)(t,e,n??"")):t8(this.node(),t)}function t8(t,e){return t.style.getPropertyValue(e)||wy(t).getComputedStyle(t,null).getPropertyValue(e)}function n8(t){return function(){delete this[t]}}function r8(t,e){return function(){this[t]=e}}function i8(t,e){return function(){var n=e.apply(this,arguments);n==null?delete this[t]:this[t]=n}}function a8(t,e){return arguments.length>1?this.each((e==null?n8:typeof e=="function"?i8:r8)(t,e)):this.node()[t]}function xy(t){return t.trim().split(/^|\s+/)}function ph(t){return t.classList||new Ty(t)}function Ty(t){this._node=t,this._names=xy(t.getAttribute("class")||"")}Ty.prototype={add:function(t){var e=this._names.indexOf(t);e<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};function Sy(t,e){for(var n=ph(t),r=-1,i=e.length;++r<i;)n.add(e[r])}function Ey(t,e){for(var n=ph(t),r=-1,i=e.length;++r<i;)n.remove(e[r])}function o8(t){return function(){Sy(this,t)}}function s8(t){return function(){Ey(this,t)}}function l8(t,e){return function(){(e.apply(this,arguments)?Sy:Ey)(this,t)}}function c8(t,e){var n=xy(t+"");if(arguments.length<2){for(var r=ph(this.node()),i=-1,a=n.length;++i<a;)if(!r.contains(n[i]))return!1;return!0}return this.each((typeof e=="function"?l8:e?o8:s8)(n,e))}function u8(){this.textContent=""}function f8(t){return function(){this.textContent=t}}function h8(t){return function(){var e=t.apply(this,arguments);this.textContent=e??""}}function d8(t){return arguments.length?this.each(t==null?u8:(typeof t=="function"?h8:f8)(t)):this.node().textContent}function g8(){this.innerHTML=""}function m8(t){return function(){this.innerHTML=t}}function p8(t){return function(){var e=t.apply(this,arguments);this.innerHTML=e??""}}function v8(t){return arguments.length?this.each(t==null?g8:(typeof t=="function"?p8:m8)(t)):this.node().innerHTML}function b8(){this.nextSibling&&this.parentNode.appendChild(this)}function _8(){return this.each(b8)}function y8(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function w8(){return this.each(y8)}function x8(t){var e=typeof t=="function"?t:by(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})}function T8(){return null}function S8(t,e){var n=typeof t=="function"?t:by(t),r=e==null?T8:typeof e=="function"?e:_y(e);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function E8(){var t=this.parentNode;t&&t.removeChild(this)}function C8(){return this.each(E8)}function A8(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function R8(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function M8(t){return this.select(t?R8:A8)}function N8(t){return arguments.length?this.property("__data__",t):this.node().__data__}var Cy={},lt=null;if(typeof document<"u"){var O8=document.documentElement;"onmouseenter"in O8||(Cy={mouseenter:"mouseover",mouseleave:"mouseout"})}function D8(t,e,n){return t=Ay(t,e,n),function(r){var i=r.relatedTarget;(!i||i!==this&&!(i.compareDocumentPosition(this)&8))&&t.call(this,r)}}function Ay(t,e,n){return function(r){var i=lt;lt=r;try{t.call(this,this.__data__,e,n)}finally{lt=i}}}function L8(t){return t.trim().split(/^|\s+/).map(function(e){var n="",r=e.indexOf(".");return r>=0&&(n=e.slice(r+1),e=e.slice(0,r)),{type:e,name:n}})}function I8(t){return function(){var e=this.__on;if(e){for(var n=0,r=-1,i=e.length,a;n<i;++n)a=e[n],(!t.type||a.type===t.type)&&a.name===t.name?this.removeEventListener(a.type,a.listener,a.capture):e[++r]=a;++r?e.length=r:delete this.__on}}}function P8(t,e,n){var r=Cy.hasOwnProperty(t.type)?D8:Ay;return function(i,a,o){var s=this.__on,l,c=r(e,a,o);if(s){for(var f=0,d=s.length;f<d;++f)if((l=s[f]).type===t.type&&l.name===t.name){this.removeEventListener(l.type,l.listener,l.capture),this.addEventListener(l.type,l.listener=c,l.capture=n),l.value=e;return}}this.addEventListener(t.type,c,n),l={type:t.type,name:t.name,value:e,listener:c,capture:n},s?s.push(l):this.__on=[l]}}function k8(t,e,n){var r=L8(t+""),i,a=r.length,o;if(arguments.length<2){var s=this.node().__on;if(s){for(var l=0,c=s.length,f;l<c;++l)for(i=0,f=s[l];i<a;++i)if((o=r[i]).type===f.type&&o.name===f.name)return f.value}return}for(s=e?P8:I8,n==null&&(n=!1),i=0;i<a;++i)this.each(s(r[i],e,n));return this}function $p(t,e,n,r){var i=lt;t.sourceEvent=lt,lt=t;try{return e.apply(n,r)}finally{lt=i}}function Ry(t,e,n){var r=wy(t),i=r.CustomEvent;typeof i=="function"?i=new i(e,n):(i=r.document.createEvent("Event"),n?(i.initEvent(e,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(e,!1,!1)),t.dispatchEvent(i)}function B8(t,e){return function(){return Ry(this,t,e)}}function F8(t,e){return function(){return Ry(this,t,e.apply(this,arguments))}}function V8(t,e){return this.each((typeof e=="function"?F8:B8)(t,e))}var W8=[null];function Fn(t,e){this._groups=t,this._parents=e}Fn.prototype={constructor:Fn,select:w4,selectAll:S4,filter:C4,data:O4,enter:A4,exit:D4,join:L4,merge:I4,order:P4,sort:k4,call:F4,nodes:V4,node:W4,size:$4,empty:z4,each:H4,attr:J4,style:e8,property:a8,classed:c8,text:d8,html:v8,raise:_8,lower:w8,append:x8,insert:S8,remove:C8,clone:M8,datum:N8,on:k8,dispatch:V8};function _l(t){return typeof t=="string"?new Fn([[document.querySelector(t)]],[document.documentElement]):new Fn([[t]],W8)}function My(){for(var t=lt,e;e=t.sourceEvent;)t=e;return t}function Ny(t,e){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=e.clientX,r.y=e.clientY,r=r.matrixTransform(t.getScreenCTM().inverse()),[r.x,r.y]}var i=t.getBoundingClientRect();return[e.clientX-i.left-t.clientLeft,e.clientY-i.top-t.clientTop]}function $8(t){var e=My();return e.changedTouches&&(e=e.changedTouches[0]),Ny(t,e)}function z8(t,e,n){arguments.length<3&&(n=e,e=My().changedTouches);for(var r=0,i=e?e.length:0,a;r<i;++r)if((a=e[r]).identifier===n)return Ny(t,a);return null}function hu(){lt.stopImmediatePropagation()}function Oi(){lt.preventDefault(),lt.stopImmediatePropagation()}function H8(t){var e=t.document.documentElement,n=_l(t).on("dragstart.drag",Oi,!0);"onselectstart"in e?n.on("selectstart.drag",Oi,!0):(e.__noselect=e.style.MozUserSelect,e.style.MozUserSelect="none")}function U8(t,e){var n=t.document.documentElement,r=_l(t).on("dragstart.drag",null);e&&(r.on("click.drag",Oi,!0),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}function ms(t){return function(){return t}}function sf(t,e,n,r,i,a,o,s,l,c){this.target=t,this.type=e,this.subject=n,this.identifier=r,this.active=i,this.x=a,this.y=o,this.dx=s,this.dy=l,this._=c}sf.prototype.on=function(){var t=this._.on.apply(this._,arguments);return t===this._?this:t};function Y8(){return!lt.button}function X8(){return this.parentNode}function G8(t){return t??{x:lt.x,y:lt.y}}function q8(){return"ontouchstart"in this}function Oy(){var t=Y8,e=X8,n=G8,r=q8,i={},a=py("start","drag","end"),o=0,s,l,c,f,d=0;function p(N){N.on("mousedown.drag",x).filter(r).on("touchstart.drag",A).on("touchmove.drag",I).on("touchend.drag touchcancel.drag",S).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function x(){if(!(f||!t.apply(this,arguments))){var N=D("mouse",e.apply(this,arguments),$8,this,arguments);N&&(_l(lt.view).on("mousemove.drag",R,!0).on("mouseup.drag",O,!0),H8(lt.view),hu(),c=!1,s=lt.clientX,l=lt.clientY,N("start"))}}function R(){if(Oi(),!c){var N=lt.clientX-s,k=lt.clientY-l;c=N*N+k*k>d}i.mouse("drag")}function O(){_l(lt.view).on("mousemove.drag mouseup.drag",null),U8(lt.view,c),Oi(),i.mouse("end")}function A(){if(t.apply(this,arguments)){var N=lt.changedTouches,k=e.apply(this,arguments),W=N.length,Y,X;for(Y=0;Y<W;++Y)(X=D(N[Y].identifier,k,z8,this,arguments))&&(hu(),X("start"))}}function I(){var N=lt.changedTouches,k=N.length,W,Y;for(W=0;W<k;++W)(Y=i[N[W].identifier])&&(Oi(),Y("drag"))}function S(){var N=lt.changedTouches,k=N.length,W,Y;for(f&&clearTimeout(f),f=setTimeout(function(){f=null},500),W=0;W<k;++W)(Y=i[N[W].identifier])&&(hu(),Y("end"))}function D(N,k,W,Y,X){var Z=W(k,N),ie,ne,J,K=a.copy();if($p(new sf(p,"beforestart",ie,N,o,Z[0],Z[1],0,0,K),function(){return(lt.subject=ie=n.apply(Y,X))==null?!1:(ne=ie.x-Z[0]||0,J=ie.y-Z[1]||0,!0)}))return function $(te){var G=Z,oe;switch(te){case"start":i[N]=$,oe=o++;break;case"end":delete i[N],--o;case"drag":Z=W(k,N),oe=o;break}$p(new sf(p,te,ie,N,oe,Z[0]+ne,Z[1]+J,Z[0]-G[0],Z[1]-G[1],K),K.apply,K,[te,Y,X])}}return p.filter=function(N){return arguments.length?(t=typeof N=="function"?N:ms(!!N),p):t},p.container=function(N){return arguments.length?(e=typeof N=="function"?N:ms(N),p):e},p.subject=function(N){return arguments.length?(n=typeof N=="function"?N:ms(N),p):n},p.touchable=function(N){return arguments.length?(r=typeof N=="function"?N:ms(!!N),p):r},p.on=function(){var N=a.on.apply(a,arguments);return N===a?p:N},p.clickDistance=function(N){return arguments.length?(d=(N=+N)*N,p):Math.sqrt(d)},p}var j8={value:function(){}};function Dy(){for(var t=0,e=arguments.length,n={},r;t<e;++t){if(!(r=arguments[t]+"")||r in n)throw new Error("illegal type: "+r);n[r]=[]}return new Ns(n)}function Ns(t){this._=t}function J8(t,e){return t.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");if(i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),n&&!e.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}Ns.prototype=Dy.prototype={constructor:Ns,on:function(t,e){var n=this._,r=J8(t+"",n),i,a=-1,o=r.length;if(arguments.length<2){for(;++a<o;)if((i=(t=r[a]).type)&&(i=Z8(n[i],t.name)))return i;return}if(e!=null&&typeof e!="function")throw new Error("invalid callback: "+e);for(;++a<o;)if(i=(t=r[a]).type)n[i]=zp(n[i],t.name,e);else if(e==null)for(i in n)n[i]=zp(n[i],t.name,null);return this},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new Ns(t)},call:function(t,e){if((i=arguments.length-2)>0)for(var n=new Array(i),r=0,i,a;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(a=this._[t],r=0,i=a.length;r<i;++r)a[r].value.apply(e,n)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],i=0,a=r.length;i<a;++i)r[i].value.apply(e,n)}};function Z8(t,e){for(var n=0,r=t.length,i;n<r;++n)if((i=t[n]).name===e)return i.value}function zp(t,e,n){for(var r=0,i=t.length;r<i;++r)if(t[r].name===e){t[r]=j8,t=t.slice(0,r).concat(t.slice(r+1));break}return n!=null&&t.push({name:e,value:n}),t}var K8=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ua=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},fa=function(){function t(e,n){for(var r=0;r<n.length;r++){var i=n[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),vn=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},gr=function t(e,n,r){e===null&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,n);if(i===void 0){var a=Object.getPrototypeOf(e);return a===null?void 0:t(a,n,r)}else{if("value"in i)return i.value;var o=i.get;return o===void 0?void 0:o.call(r)}},vh=function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)},bh=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t},Q8=function(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}else return Array.from(t)},e5=function(){function t(e){var n=e.x,r=n===void 0?0:n,i=e.y,a=i===void 0?0:i,o=e.nx,s=e.ny,l=e.dy,c=l===void 0?0:l,f=e.dx,d=f===void 0?0:f,p=e.color,x=p===void 0?"grey":p,R=e.data,O=e.type,A=e.subject,I=e.connector,S=e.note,D=e.disable,N=e.id,k=e.className;ua(this,t),this._dx=o!==void 0?o-r:d,this._dy=s!==void 0?s-a:c,this._x=r,this._y=a,this._color=x,this.id=N,this._className=k||"",this._type=O||"",this.data=R,this.note=S||{},this.connector=I||{},this.subject=A||{},this.disable=D||[]}return fa(t,[{key:"updatePosition",value:function(){this.type.setPosition&&(this.type.setPosition(),this.type.subject&&this.type.subject.selectAll(":not(.handle)").nodes().length!==0&&this.type.redrawSubject())}},{key:"clearComponents",value:function(){this.type.clearComponents&&this.type.clearComponents()}},{key:"updateOffset",value:function(){this.type.setOffset&&(this.type.setOffset(),this.type.connector.selectAll(":not(.handle)").nodes().length!==0&&this.type.redrawConnector(),this.type.redrawNote())}},{key:"className",get:function(){return this._className},set:function(n){this._className=n,this.type.setClassName&&this.type.setClassName()}},{key:"type",get:function(){return this._type},set:function(n){this._type=n,this.clearComponents()}},{key:"x",get:function(){return this._x},set:function(n){this._x=n,this.updatePosition()}},{key:"y",get:function(){return this._y},set:function(n){this._y=n,this.updatePosition()}},{key:"color",get:function(){return this._color},set:function(n){this._color=n,this.updatePosition()}},{key:"dx",get:function(){return this._dx},set:function(n){this._dx=n,this.updateOffset()}},{key:"dy",get:function(){return this._dy},set:function(n){this._dy=n,this.updateOffset()}},{key:"nx",set:function(n){this._dx=n-this._x,this.updateOffset()}},{key:"ny",set:function(n){this._dy=n-this._y,this.updateOffset()}},{key:"offset",get:function(){return{x:this._dx,y:this._dy}},set:function(n){var r=n.x,i=n.y;this._dx=r,this._dy=i,this.updateOffset()}},{key:"position",get:function(){return{x:this._x,y:this._y}},set:function(n){var r=n.x,i=n.y;this._x=r,this._y=i,this.updatePosition()}},{key:"translation",get:function(){return{x:this._x+this._dx,y:this._y+this._dy}}},{key:"json",get:function(){var n={x:this._x,y:this._y,dx:this._dx,dy:this._dy};return this.data&&Object.keys(this.data).length>0&&(n.data=this.data),this.type&&(n.type=this.type),this._className&&(n.className=this._className),Object.keys(this.connector).length>0&&(n.connector=this.connector),Object.keys(this.subject).length>0&&(n.subject=this.subject),Object.keys(this.note).length>0&&(n.note=this.note),n}}]),t}(),t5=function(){function t(e){var n=e.annotations,r=e.accessors,i=e.accessorsInverse;ua(this,t),this.accessors=r,this.accessorsInverse=i,this.annotations=n}return fa(t,[{key:"clearTypes",value:function(n){this.annotations.forEach(function(r){r.type=void 0,r.subject=n&&n.subject||r.subject,r.connector=n&&n.connector||r.connector,r.note=n&&n.note||r.note})}},{key:"setPositionWithAccessors",value:function(){var n=this;this.annotations.forEach(function(r){r.type.setPositionWithAccessors(n.accessors)})}},{key:"editMode",value:function(n){this.annotations.forEach(function(r){r.type&&(r.type.editMode=n,r.type.updateEditMode())})}},{key:"updateDisable",value:function(n){this.annotations.forEach(function(r){r.disable=n,r.type&&n.forEach(function(i){r.type[i]&&(r.type[i].remove&&r.type[i].remove(),r.type[i]=void 0)})})}},{key:"updateTextWrap",value:function(n){this.annotations.forEach(function(r){r.type&&r.type.updateTextWrap&&r.type.updateTextWrap(n)})}},{key:"updateText",value:function(){this.annotations.forEach(function(n){n.type&&n.type.drawText&&n.type.drawText()})}},{key:"updateNotePadding",value:function(n){this.annotations.forEach(function(r){r.type&&(r.type.notePadding=n)})}},{key:"json",get:function(){var n=this;return this.annotations.map(function(r){var i=r.json;return n.accessorsInverse&&r.data&&(i.data={},Object.keys(n.accessorsInverse).forEach(function(a){i.data[a]=n.accessorsInverse[a]({x:r.x,y:r.y})})),i})}},{key:"noteNodes",get:function(){return this.annotations.map(function(n){return vn({},n.type.getNoteBBoxOffset(),{positionX:n.x,positionY:n.y})})}}]),t}(),n5=function(e){var n=e.cx,r=n===void 0?0:n,i=e.cy,a=i===void 0?0:i;return{move:{x:r,y:a}}},r5=function(e){var n=e.cx,r=n===void 0?0:n,i=e.cy,a=i===void 0?0:i,o=e.r1,s=e.r2,l=e.padding,c={move:{x:r,y:a}};return o!==void 0&&(c.r1={x:r+o/Math.sqrt(2),y:a+o/Math.sqrt(2)}),s!==void 0&&(c.r2={x:r+s/Math.sqrt(2),y:a+s/Math.sqrt(2)}),l!==void 0&&(c.padding={x:r+o+l,y:a}),c},i5=function(e){var n=e.group,r=e.handles,i=e.r,a=i===void 0?10:i,o=n.selectAll("circle.handle").data(r);o.enter().append("circle").attr("class","handle").attr("fill","grey").attr("fill-opacity",.1).attr("cursor","move").attr("stroke-dasharray",5).attr("stroke","grey").call(Oy().container(ac("g.annotations").node()).on("start",function(s){return s.start&&s.start(s)}).on("drag",function(s){return s.drag&&s.drag(s)}).on("end",function(s){return s.end&&s.end(s)})),n.selectAll("circle.handle").attr("cx",function(s){return s.x}).attr("cy",function(s){return s.y}).attr("r",function(s){return s.r||a}).attr("class",function(s){return"handle "+(s.className||"")}),o.exit().remove()},Ly=function(e,n){return(e==="dynamic"||e==="left"||e==="right")&&(n<0?e="top":e="bottom"),e},Iy=function(e,n){return(e==="dynamic"||e==="top"||e==="bottom")&&(n<0?e="right":e="left"),e},a5=["topBottom","top","bottom"],o5=["leftRight","left","right"],s5=function(t){var e=t.padding,n=e===void 0?0:e,r=t.bbox,i=r===void 0?{x:0,width:0,height:0}:r,a=t.align,o=t.orientation,s=t.offset,l=s===void 0?{x:0,y:0}:s,c=-i.x,f=0;return a5.indexOf(o)!==-1?(a=Iy(a,l.x),l.y<0&&o==="topBottom"||o==="top"?f-=i.height+n:f+=n,a==="middle"?c-=i.width/2:a==="right"&&(c-=i.width)):o5.indexOf(o)!==-1&&(a=Ly(a,l.y),l.x<0&&o==="leftRight"||o==="left"?c-=i.width+n:c+=n,a==="middle"?f-=i.height/2:a==="top"&&(f-=i.height)),{x:c,y:f}},ir=function(e){var n=e.data,r=e.curve,i=r===void 0?yo:r,a=e.canvasContext,o=e.className,s=e.classID,l=nc().curve(i),c={type:"path",className:o,classID:s,data:n};return a?(l.context(a),c.pathMethods=l):c.attrs={d:l(n)},c},yl=function(e){var n=e.data,r=e.canvasContext,i=e.className,a=e.classID,o={type:"path",className:i,classID:a,data:n},s=N_().innerRadius(n.innerRadius||0).outerRadius(n.outerRadius||n.radius||2).startAngle(n.startAngle||0).endAngle(n.endAngle||2*Math.PI);return r?(s.context(r),o.pathMethods=lineGen):o.attrs={d:s()},o},l5=function(t){var e=t.align,n=t.x,r=n===void 0?0:n,i=t.y,a=i===void 0?0:i,o=t.bbox,s=t.offset;e=Ly(e,s.y),e==="top"?a-=o.height:e==="middle"&&(a-=o.height/2);var l=[[r,a],[r,a+o.height]];return{components:[ir({data:l,className:"note-line"})]}},c5=function(t){var e=t.align,n=t.x,r=n===void 0?0:n,i=t.y,a=i===void 0?0:i,o=t.offset,s=t.bbox;e=Iy(e,o.x),e==="right"?r-=s.width:e==="middle"&&(r-=s.width/2);var l=[[r,a],[r+s.width,a]];return{components:[ir({data:l,className:"note-line"})]}},Py=function(e){var n=e.type,r=e.subjectType,i=n.annotation,a=i.position,o=i.x-a.x,s=o+i.dx,l=i.y-a.y,c=l+i.dy,f=i.subject;if(r==="circle"&&(f.outerRadius||f.radius)){var d=Math.sqrt((o-s)*(o-s)+(l-c)*(l-c)),p=Math.asin(-c/d),x=f.outerRadius||f.radius+(f.radiusPadding||0);o=Math.abs(Math.cos(p)*x)*(s<0?-1:1),l=Math.abs(Math.sin(p)*x)*(c<0?-1:1)}if(r==="rect"){var R=f.width,O=f.height;(R>0&&i.dx>0||R<0&&i.dx<0)&&(Math.abs(R)>Math.abs(i.dx)?o=R/2:o=R),(O>0&&i.dy>0||O<0&&i.dy<0)&&(Math.abs(O)>Math.abs(i.dy)?l=O/2:l=O),o===R/2&&l===O/2&&(o=s,l=c)}return[[o,l],[s,c]]},u5=function(t){var e=Py(t);return{components:[ir({data:e,className:"connector"})]}},f5=function(t){var e=t.type,n=t.subjectType,r=e.annotation,i=r.position,a=r.x-i.x,o=a+r.dx,s=r.y-i.y,l=s+r.dy,c=r.subject;if(n==="rect"){var f=c.width,d=c.height;(f>0&&r.dx>0||f<0&&r.dx<0)&&(Math.abs(f)>Math.abs(r.dx)?a=f/2:a=f),(d>0&&r.dy>0||d<0&&r.dy<0)&&(Math.abs(d)>Math.abs(r.dy)?s=d/2:s=d),a===f/2&&s===d/2&&(a=o,s=l)}var p=[[a,s],[o,l]],x=l-s,R=o-a,O=o,A=l,I=l<s&&o>a||o<a&&l>s?-1:1;if(Math.abs(R)<Math.abs(x)?(O=o,A=s+R*I):(A=l,O=a+x*I),n==="circle"&&(c.outerRadius||c.radius)){var S=(c.outerRadius||c.radius)+(c.radiusPadding||0),D=S/Math.sqrt(2);if(Math.abs(R)>D&&Math.abs(x)>D)a=D*(o<0?-1:1),s=D*(l<0?-1:1),p=[[a,s],[O,A],[o,l]];else if(Math.abs(R)>Math.abs(x)){var N=Math.asin(-l/S);a=Math.abs(Math.cos(N)*S)*(o<0?-1:1),p=[[a,l],[o,l]]}else{var k=Math.acos(o/S);s=Math.abs(Math.sin(k)*S)*(l<0?-1:1),p=[[o,s],[o,l]]}}else p=[[a,s],[O,A],[o,l]];return{components:[ir({data:p,className:"connector"})]}},h5=function(t){var e=t.type,n=t.connectorData,r=t.subjectType;n||(n={}),(!n.points||typeof n.points=="number")&&(n.points=d5(e.annotation.offset,n.points)),n.curve||(n.curve=j_);var i=[];if(e.editMode){var a=n.points.map(function(c,f){return vn({},n5({cx:c[0],cy:c[1]}),{index:f})}),o=function(f){n.points[f][0]+=Yt.dx,n.points[f][1]+=Yt.dy,e.redrawConnector()};i=e.mapHandles(a.map(function(c){return vn({},c.move,{drag:o.bind(e,c.index)})}))}var s=Py({type:e,subjectType:r});s=[s[0]].concat(Q8(n.points),[s[1]]);var l=[ir({data:s,curve:n.curve,className:"connector"})];return{components:l,handles:i}},d5=function(e){for(var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:2,r={x:e.x/(n+1),y:e.y/(n+1)},i=[],a=1;a<=n;a++)i.push([r.x*a+a%2*20,r.y*a-a%2*20]);return i},g5=function(t){var e=t.annotation,n=t.start,r=t.end,i=t.scale,a=i===void 0?1:i,o=e.position;n?n=[-r[0]+n[0],-r[1]+n[1]]:n=[e.dx,e.dy],r||(r=[e.x-o.x,e.y-o.y]);var s=r[0],l=r[1],c=n[0],f=n[1],d=10*a,p=16/180*Math.PI,x=Math.atan(f/c);c<0&&(x+=Math.PI);var R=[[s,l],[Math.cos(x+p)*d+s,Math.sin(x+p)*d+l],[Math.cos(x-p)*d+s,Math.sin(x-p)*d+l],[s,l]];return{components:[ir({data:R,className:"connector-end connector-arrow",classID:"connector-end"})]}},m5=function(t){var e=t.line,n=t.scale,r=n===void 0?1:n,i=yl({className:"connector-end connector-dot",classID:"connector-end",data:{radius:3*Math.sqrt(r)}});return i.attrs.transform="translate("+e.data[0][0]+", "+e.data[0][1]+")",{components:[i]}},p5=function(t){var e=t.subjectData,n=t.type;!e.radius&&!e.outerRadius&&(e.radius=20);var r=[],i=yl({data:e,className:"subject"});if(n.editMode){var a=r5({r1:i.data.outerRadius||i.data.radius,r2:i.data.innerRadius,padding:e.radiusPadding}),o=function(c){var f=e[c]+Yt.dx*Math.sqrt(2);e[c]=f,n.redrawSubject(),n.redrawConnector()},s=[vn({},a.r1,{drag:o.bind(n,e.outerRadius!==void 0?"outerRadius":"radius")})];e.innerRadius&&s.push(vn({},a.r2,{drag:o.bind(n,"innerRadius")})),r=n.mapHandles(s)}return i.attrs["fill-opacity"]=0,{components:[i],handles:r}},v5=function(t){var e=t.subjectData,n=t.type;e.width||(e.width=100),e.height||(e.height=100);var r=[],i=e.width,a=e.height,o=[[0,0],[i,0],[i,a],[0,a],[0,0]],s=ir({data:o,className:"subject"});if(n.editMode){var l=function(){e.width=Yt.x,n.redrawSubject(),n.redrawConnector()},c=function(){e.height=Yt.y,n.redrawSubject(),n.redrawConnector()},f=[{x:i,y:a/2,drag:l.bind(n)},{x:i/2,y:a,drag:c.bind(n)}];r=n.mapHandles(f)}return s.attrs["fill-opacity"]=.1,{components:[s],handles:r}},b5=function(t){var e=t.subjectData,n=t.type,r=n.annotation.position,i=(e.x1!==void 0?e.x1:r.x)-r.x,a=(e.x2!==void 0?e.x2:r.x)-r.x,o=(e.y1!==void 0?e.y1:r.y)-r.y,s=(e.y2!==void 0?e.y2:r.y)-r.y,l=[[i,o],[a,s]];return{components:[ir({data:l,className:"subject"})]}},_5=function(t){var e=t.subjectData,n=e===void 0?{}:e,r=t.type,i=r===void 0?{}:r,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o=i.typeSettings&&i.typeSettings.subject;n.radius||(o&&o.radius?n.radius=o.radius:n.radius=14),n.x||o&&o.x&&(n.x=o.x),n.y||o&&o.y&&(n.y=o.y);var s=[],l=[],c=n.radius,f=c*.7,d=0,p=0,x=Math.sqrt(2)*c,R={xleftcorner:-c,xrightcorner:c,ytopcorner:-c,ybottomcorner:c,xleft:-x,xright:x,ytop:-x,ybottom:x};n.x&&!n.y?d=R["x"+n.x]:n.y&&!n.x?p=R["y"+n.y]:n.x&&n.y&&(d=R["x"+n.x+"corner"],p=R["y"+n.y+"corner"]);var O="translate("+d+", "+p+")",A=yl({className:"subject",data:{radius:c}});A.attrs.transform=O,A.attrs.fill=a.color,A.attrs["stroke-linecap"]="round",A.attrs["stroke-width"]="3px";var I=yl({className:"subject-ring",data:{outerRadius:c,innerRadius:f}});I.attrs.transform=O,I.attrs["stroke-width"]="3px",I.attrs.fill="white";var S=void 0;if(d&&p||!d&&!p)S=ir({className:"subject-pointer",data:[[0,0],[d||0,0],[0,p||0],[0,0]]});else if(d||p){var D=function(X){var Z=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;return X&&X/Math.sqrt(2)/Math.sqrt(2)||Z*c/Math.sqrt(2)};S=ir({className:"subject-pointer",data:[[0,0],[D(d),D(p)],[D(d,-1),D(p,-1)],[0,0]]})}if(S&&(S.attrs.fill=a.color,S.attrs["stroke-linecap"]="round",S.attrs["stroke-width"]="3px",l.push(S)),i.editMode){var N=function(){n.x=Yt.x<-c*2?"left":Yt.x>c*2?"right":void 0,n.y=Yt.y<-c*2?"top":Yt.y>c*2?"bottom":void 0,i.redrawSubject()},k={x:d*2,y:p*2,drag:N.bind(i)};!k.x&&!k.y&&(k.y=-c),s=i.mapHandles([k])}var W=void 0;return n.text&&(W={type:"text",className:"badge-text",attrs:{fill:"white",stroke:"none","font-size":".7em",text:n.text,"text-anchor":"middle",dy:".25em",x:d,y:p}}),l.push(A),l.push(I),l.push(W),{components:l,handles:s}},ky=function(){function t(e){var n=e.a,r=e.annotation,i=e.editMode,a=e.dispatcher,o=e.notePadding,s=e.accessors;if(ua(this,t),this.a=n,this.note=r.disable.indexOf("note")===-1&&n.select("g.annotation-note"),this.noteContent=this.note&&n.select("g.annotation-note-content"),this.connector=r.disable.indexOf("connector")===-1&&n.select("g.annotation-connector"),this.subject=r.disable.indexOf("subject")===-1&&n.select("g.annotation-subject"),this.dispatcher=a,a){var l=x5.bind(null,a,r);l({component:this.note,name:"note"}),l({component:this.connector,name:"connector"}),l({component:this.subject,name:"subject"})}this.annotation=r,this.editMode=r.editMode||i,this.notePadding=o!==void 0?o:3,this.offsetCornerX=0,this.offsetCornerY=0,s&&r.data&&this.init(s)}return fa(t,[{key:"init",value:function(n){this.annotation.x||this.mapX(n),this.annotation.y||this.mapY(n)}},{key:"mapY",value:function(n){n.y&&(this.annotation.y=n.y(this.annotation.data))}},{key:"mapX",value:function(n){n.x&&(this.annotation.x=n.x(this.annotation.data))}},{key:"updateEditMode",value:function(){this.a.selectAll("circle.handle").remove()}},{key:"drawOnSVG",value:function(n,r){var i=this;Array.isArray(r)||(r=[r]),r.filter(function(a){return a}).forEach(function(a){var o=a.type,s=a.className,l=a.attrs,c=a.handles,f=a.classID;if(o==="handle")i5({group:n,r:l&&l.r,handles:c});else{Kn(n,[i.annotation],o,s,f);for(var d=n.select(o+"."+(f||s)),p=Object.keys(l),x=[],R=d.node().attributes,O=R.length-1;O>=0;O--){var A=R[O].name;p.indexOf(A)===-1&&A!=="class"&&x.push(A)}p.forEach(function(I){I==="text"?d.text(l[I]):d.attr(I,l[I])}),x.forEach(function(I){return d.attr(I,null)})}})}},{key:"getNoteBBox",value:function(){return Up(this.note,".annotation-note-content text")}},{key:"getNoteBBoxOffset",value:function(){var n=Up(this.note,".annotation-note-content"),r=this.noteContent.attr("transform").split(/\(|\,|\)/g);return n.offsetCornerX=parseFloat(r[1])+this.annotation.dx,n.offsetCornerY=parseFloat(r[2])+this.annotation.dy,n.offsetX=this.annotation.dx,n.offsetY=this.annotation.dy,n}},{key:"drawSubject",value:function(){var n=this,r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},i=this.annotation.subject,a=r.type,o={type:this,subjectData:i},s={};a==="circle"?s=p5(o):a==="rect"?s=v5(o):a==="threshold"?s=b5(o):a==="badge"&&(s=_5(o,this.annotation));var l=s,c=l.components,f=c===void 0?[]:c,d=l.handles,p=d===void 0?[]:d;return f.forEach(function(x){x&&x.attrs&&!x.attrs.stroke&&(x.attrs.stroke=n.annotation.color)}),this.editMode&&(p=p.concat(this.mapHandles([{drag:this.dragSubject.bind(this)}])),f.push({type:"handle",handles:p})),f}},{key:"drawConnector",value:function(){var n=this,r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},i=this.annotation.connector,a=i.type||r.type,o={type:this,connectorData:i};o.subjectType=this.typeSettings&&this.typeSettings.subject&&this.typeSettings.subject.type;var s={};a==="curve"?s=h5(o):a==="elbow"?s=f5(o):s=u5(o);var l=s,c=l.components,f=c===void 0?[]:c,d=l.handles,p=d===void 0?[]:d,x=f[0];x&&(x.attrs.stroke=this.annotation.color,x.attrs.fill="none");var R=i.end||r.end,O={};if(R==="arrow"){var A=x.data[1],I=x.data[0],S=Math.sqrt(Math.pow(A[0]-I[0],2)+Math.pow(A[1]-I[1],2));S<5&&x.data[2]&&(A=x.data[2]),O=g5({annotation:this.annotation,start:A,end:I,scale:i.endScale})}else R==="dot"?O=m5({line:x,scale:i.endScale}):(!R||R==="none")&&this.connector&&this.connector.select(".connector-end").remove();return O.components&&(O.components.forEach(function(D){D.attrs.fill=n.annotation.color,D.attrs.stroke=n.annotation.color}),f=f.concat(O.components)),this.editMode&&p.length!==0&&f.push({type:"handle",handles:p}),f}},{key:"drawNote",value:function(){var n=this,r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},i=this.annotation.note,a=i.align||r.align||"dynamic",o={bbox:r.bbox,align:a,offset:this.annotation.offset},s=i.lineType||r.lineType,l={};s==="vertical"?l=l5(o):s==="horizontal"&&(l=c5(o));var c=l,f=c.components,d=f===void 0?[]:f,p=c.handles,x=p===void 0?[]:p;if(d.forEach(function(I){I.attrs.stroke=n.annotation.color}),this.editMode){x=this.mapHandles([{x:0,y:0,drag:this.dragNote.bind(this)}]),d.push({type:"handle",handles:x});var R=this.dragNote.bind(this),O=this.dragstarted.bind(this),A=this.dragended.bind(this);this.note.call(Oy().container(ac("g.annotations").node()).on("start",function(I){return O(I)}).on("drag",function(I){return R(I)}).on("end",function(I){return A(I)}))}else this.note.on("mousedown.drag",null);return d}},{key:"drawNoteContent",value:function(n){var r=this.annotation.note,i=r.padding!==void 0?r.padding:this.notePadding,a=r.orientation||n.orientation||"topBottom",o=r.lineType||n.lineType,s=r.align||n.align||"dynamic";o==="vertical"?a="leftRight":o==="horizontal"&&(a="topBottom");var l={padding:i,bbox:n.bbox,offset:this.annotation.offset,orientation:a,align:s},c=s5(l),f=c.x,d=c.y;return this.offsetCornerX=f+this.annotation.dx,this.offsetCornerY=d+this.annotation.dy,this.note&&this.noteContent.attr("transform","translate("+f+", "+d+")"),[]}},{key:"drawOnScreen",value:function(n,r){return this.drawOnSVG(n,r)}},{key:"redrawSubject",value:function(){this.subject&&this.drawOnScreen(this.subject,this.drawSubject())}},{key:"redrawConnector",value:function(){this.connector&&this.drawOnScreen(this.connector,this.drawConnector())}},{key:"redrawNote",value:function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.getNoteBBox();this.noteContent&&this.drawOnScreen(this.noteContent,this.drawNoteContent({bbox:n})),this.note&&this.drawOnScreen(this.note,this.drawNote({bbox:n}))}},{key:"setPosition",value:function(){var n=this.annotation.position;this.a.attr("transform","translate("+n.x+", "+n.y+")")}},{key:"clearComponents",value:function(){this.subject&&this.subject.select("*").remove(),this.connector&&this.connector.select("*").remove()}},{key:"setOffset",value:function(){if(this.note){var n=this.annotation.offset;this.note.attr("transform","translate("+n.x+", "+n.y+")")}}},{key:"setPositionWithAccessors",value:function(n){n&&this.annotation.data&&(this.mapX(n),this.mapY(n)),this.setPosition()}},{key:"setClassName",value:function(){this.a.attr("class","annotation "+(this.className&&this.className())+" "+(this.editMode?"editable":"")+" "+(this.annotation.className||""))}},{key:"draw",value:function(){this.setClassName(),this.setPosition(),this.setOffset(),this.redrawSubject(),this.redrawConnector(),this.redrawNote()}},{key:"dragstarted",value:function(){Yt.sourceEvent.stopPropagation(),this.dispatcher&&this.dispatcher.call("dragstart",this.a,this.annotation),this.a.classed("dragging",!0),this.a.selectAll("circle.handle").style("pointer-events","none")}},{key:"dragended",value:function(){this.dispatcher&&this.dispatcher.call("dragend",this.a,this.annotation),this.a.classed("dragging",!1),this.a.selectAll("circle.handle").style("pointer-events","all")}},{key:"dragSubject",value:function(){var n=this.annotation.position;n.x+=Yt.dx,n.y+=Yt.dy,this.annotation.position=n}},{key:"dragNote",value:function(){var n=this.annotation.offset;n.x+=Yt.dx,n.y+=Yt.dy,this.annotation.offset=n}},{key:"mapHandles",value:function(n){var r=this;return n.map(function(i){return vn({},i,{start:r.dragstarted.bind(r),end:r.dragended.bind(r)})})}}]),t}(),Ur=function(e,n,r){return function(i){vh(a,i);function a(o){ua(this,a);var s=bh(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,o));return s.typeSettings=n,n.disable&&n.disable.forEach(function(l){s[l]&&s[l].remove(),s[l]=void 0,l==="note"&&(s.noteContent=void 0)}),s}return fa(a,[{key:"className",value:function(){return""+(n.className||gr(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"className",this)&&gr(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"className",this).call(this)||"")}},{key:"drawSubject",value:function(s){return this.typeSettings.subject=vn({},n.subject,this.typeSettings.subject),gr(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"drawSubject",this).call(this,vn({},s,this.typeSettings.subject))}},{key:"drawConnector",value:function(s){return this.typeSettings.connector=vn({},n.connector,this.typeSettings.connector),gr(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"drawConnector",this).call(this,vn({},s,n.connector,this.typeSettings.connector))}},{key:"drawNote",value:function(s){return this.typeSettings.note=vn({},n.note,this.typeSettings.note),gr(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"drawNote",this).call(this,vn({},s,n.note,this.typeSettings.note))}},{key:"drawNoteContent",value:function(s){return gr(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"drawNoteContent",this).call(this,vn({},s,n.note,this.typeSettings.note))}}],[{key:"init",value:function(s,l){return gr(a.__proto__||Object.getPrototypeOf(a),"init",this).call(this,s,l),r&&(s=r(s,l)),s}}]),a}(e)},oc=function(t){vh(e,t);function e(n){ua(this,e);var r=bh(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n));return r.textWrap=n.textWrap||120,r.drawText(),r}return fa(e,[{key:"updateTextWrap",value:function(r){this.textWrap=r,this.drawText()}},{key:"drawText",value:function(){if(this.note){Kn(this.note,[this.annotation],"g","annotation-note-content");var r=this.note.select("g.annotation-note-content");Kn(r,[this.annotation],"rect","annotation-note-bg"),Kn(r,[this.annotation],"text","annotation-note-label"),Kn(r,[this.annotation],"text","annotation-note-title");var i={height:0},a=this.a.select("text.annotation-note-label"),o=this.annotation.note&&this.annotation.note.wrap||this.typeSettings&&this.typeSettings.note&&this.typeSettings.note.wrap||this.textWrap,s=this.annotation.note&&this.annotation.note.wrapSplitter||this.typeSettings&&this.typeSettings.note&&this.typeSettings.note.wrapSplitter,l=this.annotation.note&&this.annotation.note.bgPadding||this.typeSettings&&this.typeSettings.note&&this.typeSettings.note.bgPadding,c={top:0,bottom:0,left:0,right:0};if(typeof l=="number"?c={top:l,bottom:l,left:l,right:l}:l&&(typeof l>"u"?"undefined":K8(l))==="object"&&(c=vn(c,l)),this.annotation.note.title){var f=this.a.select("text.annotation-note-title");f.text(this.annotation.note.title),f.attr("fill",this.annotation.color),f.attr("font-weight","bold"),f.call(Hp,o,s),i=f.node().getBBox()}a.text(this.annotation.note.label).attr("dx","0"),a.call(Hp,o,s),a.attr("y",i.height*1.1||0),a.attr("fill",this.annotation.color);var d=this.getNoteBBox();this.a.select("rect.annotation-note-bg").attr("width",d.width+c.left+c.right).attr("height",d.height+c.top+c.bottom).attr("x",d.x-c.left).attr("y",-c.top).attr("fill","white").attr("fill-opacity",0)}}}]),e}(ky);Ur(oc,{className:"label",note:{align:"middle"}});var sc=Ur(oc,{className:"callout",note:{lineType:"horizontal"}});Ur(sc,{className:"callout elbow",connector:{type:"elbow"}});Ur(sc,{className:"callout curve",connector:{type:"curve"}});Ur(ky,{className:"badge",subject:{type:"badge"},disable:["connector","note"]});Ur(oc,{className:"callout circle",subject:{type:"circle"},note:{lineType:"horizontal"},connector:{type:"elbow"}});Ur(oc,{className:"callout rect",subject:{type:"rect"},note:{lineType:"horizontal"},connector:{type:"elbow"}});var y5=function(t){vh(e,t);function e(){return ua(this,e),bh(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return fa(e,[{key:"mapY",value:function(r){gr(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"mapY",this).call(this,r);var i=this.annotation;(i.subject.x1||i.subject.x2)&&i.data&&r.y&&(i.y=r.y(i.data)),(i.subject.x1||i.subject.x2)&&!i.x&&(i.x=i.subject.x1||i.subject.x2)}},{key:"mapX",value:function(r){gr(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"mapX",this).call(this,r);var i=this.annotation;(i.subject.y1||i.subject.y2)&&i.data&&r.x&&(i.x=r.x(i.data)),(i.subject.y1||i.subject.y2)&&!i.y&&(i.y=i.subject.y1||i.subject.y2)}}]),e}(sc),w5=Ur(y5,{className:"callout xythreshold",subject:{type:"threshold"}}),Kn=function(e,n,r,i,a){var o=e.selectAll(r+"."+(a||i)).data(n);return o.enter().append(r).merge(o).attr("class",i),o.exit().remove(),e},x5=function(e,n,r){var i=r.component,a=r.name;i&&i.on("mouseover.annotations",function(){e.call(a+"over",i,n)}).on("mouseout.annotations",function(){return e.call(a+"out",i,n)}).on("click.annotations",function(){return e.call(a+"click",i,n)})},Hp=function(e,n,r){var i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:1.2;e.each(function(){for(var a=ac(this),o=a.text().split(r||/[ \t\r\n]+/).reverse().filter(function(f){return f!==""}),s=void 0,l=[],c=a.text(null).append("tspan").attr("x",0).attr("dy",.8+"em");s=o.pop();)l.push(s),c.text(l.join(" ")),c.node().getComputedTextLength()>n&&l.length>1&&(l.pop(),c.text(l.join(" ")),l=[s],c=a.append("tspan").attr("x",0).attr("dy",i+"em").text(s))})},Up=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:":not(.handle)";return e?e.selectAll(n).nodes().reduce(function(r,i){var a=i.getBBox();r.x=Math.min(r.x,a.x),r.y=Math.min(r.y,a.y),r.width=Math.max(r.width,a.width);var o=i&&i.attributes&&i.attributes.y;return r.height=Math.max(r.height,(o&&parseFloat(o.value)||0)+a.height),r},{x:0,y:0,width:0,height:0}):{x:0,y:0,width:0,height:0}};function T5(){var t=[],e=void 0,n=void 0,r=[],i={},a={},o=!1,s=void 0,l=sc,c=void 0,f=void 0,d=Dy("subjectover","subjectout","subjectclick","connectorover","connectorout","connectorclick","noteover","noteout","noteclick","dragend","dragstart"),p=void 0,x=function(O){p=O,o||O.selectAll("circle.handle").remove();var A=t.map(function(N){return N.type||(N.type=l),N.disable||(N.disable=r),new e5(N)});e=e||new t5({annotations:A,accessors:i,accessorsInverse:a,ids:s});var I=O.selectAll("g").data([e]);I.enter().append("g").attr("class","annotations");var S=O.select("g.annotations");Kn(S,e.annotations,"g","annotation");var D=S.selectAll("g.annotation");D.each(function(N){var k=ac(this);k.attr("class","annotation"),Kn(k,[N],"g","annotation-connector"),Kn(k,[N],"g","annotation-subject"),Kn(k,[N],"g","annotation-note"),Kn(k.select("g.annotation-note"),[N],"g","annotation-note-content"),N.type=N.type.toString()==="[object Object]"?N.type:new N.type({a:k,annotation:N,textWrap:c,notePadding:f,editMode:o,dispatcher:d,accessors:i}),N.type.draw(),N.type.drawText&&N.type.drawText()})};return x.json=function(){return window.copy(JSON.stringify(e.json.map(function(R){return delete R.type,R}))),x},x.update=function(){return t&&e&&(t=e.annotations.map(function(R){return R.type.draw(),R})),x},x.updateText=function(){return e&&(e.updateText(c),t=e.annotations),x},x.updatedAccessors=function(){return e.setPositionWithAccessors(),t=e.annotations,x},x.disable=function(R){return arguments.length?(r=R,e&&(e.updateDisable(r),t=e.annotations),x):r},x.textWrap=function(R){return arguments.length?(c=R,e&&(e.updateTextWrap(c),t=e.annotations),x):c},x.notePadding=function(R){return arguments.length?(f=R,e&&(e.updateNotePadding(f),t=e.annotations),x):f},x.type=function(R,O){return arguments.length?(l=R,e&&(e.annotations.map(function(A){A.type.note&&A.type.note.selectAll("*:not(.annotation-note-content)").remove(),A.type.noteContent&&A.type.noteContent.selectAll("*").remove(),A.type.subject&&A.type.subject.selectAll("*").remove(),A.type.connector&&A.type.connector.selectAll("*").remove(),A.type.typeSettings={},A.type=l,A.subject=O&&O.subject||A.subject,A.connector=O&&O.connector||A.connector,A.note=O&&O.note||A.note}),t=e.annotations),x):l},x.annotations=function(R){if(!arguments.length)return e&&e.annotations||t;if(t=R,e&&e.annotations){var O=t.some(function(A){return!A.type||A.type.toString()!=="[object Object]"});O?(e=null,x(p)):e.annotations=t}return x},x.context=function(R){return arguments.length?(n=R,x):n},x.accessors=function(R){return arguments.length?(i=R,x):i},x.accessorsInverse=function(R){return arguments.length?(a=R,x):a},x.ids=function(R){return arguments.length?(s=R,x):s},x.editMode=function(R){return arguments.length?(o=R,p&&p.selectAll("g.annotation").classed("editable",o),e&&(e.editMode(o),t=e.annotations),x):o},x.collection=function(R){return arguments.length?(e=R,x):e},x.on=function(){var R=d.on.apply(d,arguments);return R===d?x:R},x}function S5(){const t=T5();let e=kn(),n=kn();const r=Et.dataJoin("g","annotation"),i=a=>{a.each((o,s,l)=>{const c=o.map(f=>({...f,x:e(f.x),y:n(f.y)}));t.annotations(c),r(Nt(l[s]),c).call(t)})};return i.xScale=(...a)=>a.length?(e=a[0],i):e,i.yScale=(...a)=>a.length?(n=a[0],i):n,Et.rebindAll(i,t),i}const E5=(t,e,n)=>{const r=e[n];if(typeof r!="function")throw new Error(`Attempt to rebind ${n} which isn't a function on the source object`);return(...i)=>{var a=r.apply(e,i);return a===e?t:a}},C5=t=>e=>t.reduce((n,r)=>n&&r(n),e),A5=(t,e,...n)=>{const r=C5(n);for(const i of Object.keys(e)){const a=r(i);a&&(t[a]=E5(t,e,i))}return t},R5=t=>t.map(e=>typeof e=="string"?new RegExp(`^${e}$`):e),M5=(...t)=>(t=R5(t),e=>t.every(n=>!n.test(e))&&e),N5=t=>t,By=(t,e,n,r)=>t[e]?t[e].apply(t,n):r,O5=t=>t.tickValues()??By(t.scale(),"ticks",t.tickArguments(),t.scale().domain()),D5=t=>t.tickFormat()??By(t.scale(),"tickFormat",t.tickArguments(),N5),L5=t=>n=>{const r=O5(t),i=D5(t),a=r.map(i),o=n.append("text"),s=a.map(f=>o.text(f).node().getBBox()),l=Math.max(...s.map(f=>f.height)),c=Math.max(...s.map(f=>f.width));return o.remove(),{maxHeight:l,maxWidth:c,labelCount:a.length}},Yp=t=>{let e=o=>{},n=null;const r=()=>t.orient()==="left"||t.orient()==="right",i=o=>{const{maxHeight:s,maxWidth:l,labelCount:c}=L5(t)(o),f=r(),d=t.scale().range()[f?0:1],p=t.scale().domain(),x=Math.floor((f?s:l)*c/d)+1;o.select("text").attr("visibility",(R,O)=>{const A=R>=p[0]&&R<=p[1],I=O%x===0;return A&&I?"visible":"hidden"}),o.select("path").attr("visibility",R=>R>=p[0]&&R<=p[1]?"visible":"hidden"),n&&f&&n.yAxisWidth(`max(${Math.ceil(l)+10+2}px, 3rem)`)},a=o=>t(o);return t.decorate(o=>{i(o),e(o)}),a.decorate=(...o)=>o.length?(e=o[0],a):e,a.series=(...o)=>o.length?(n=o[0],a):n,A5(a,t,M5("decorate","series")),a},Lr=class Lr extends ia{constructor(){super(...arguments),this.containerRef=ei(),this.annotations=[],this.resizeObserver=new ResizeObserver(e=>{const[n]=e;n.contentRect.width&&n.contentRect.height&&this.redraw()})}getCSSColorByIdx(e){const n=this.props.plotData.length;let r;if(n<=8)r=["#00E58D","#0093E5","#E56000","#007F8C","#159500","#DE1135","#9E1FDA","#E59700"][e];else if(n<=10)r=Qb[e];else{const i=e/(n-1)*.96+.04;r=A_(i)}return r}getWebglColorFromCSS(e){var n;if(Lr.cssColors!==void 0)return((n=Fr(Lr.cssColors.getPropertyValue(e)))==null?void 0:n.rgb())??void 0}getWebGLColor(e){const n=typeof e=="string"?this.getWebglColorFromCSS(e):e;if(n!==void 0)return[n.r/255,n.g/255,n.b/255,n.opacity]}getWebglColorByIdx(e){const n=[1,0,0,1];if(this.props.plotData===void 0)return n;const r=this.getCSSColorByIdx(e);return this.getWebGLColor(fi(r))??n}redraw(){Nt(this.containerRef.current).datum({annotations:this.annotations,data:this.props.plotData}).call(this.series),Nt(this.containerRef.current).select("rect.annotation-note-bg").attr("rx",2).attr("ry",2);const e=Nt(this.containerRef.current).select(".svg-plot-area svg"),n=e.select("clipPath");if(n.empty()){const r=crypto.randomUUID();e.append("clipPath").attr("id",r).html('<rect x="0" y="0" width="100%" height="100%" />')}else{const r=n.attr("id");e.select("g.multi > g:not(g .annotation)").attr("clip-path",`url(#${r})`),e.select("g.multi > g:has(g .annotation)").attr("clip-path",null)}}_webglMapping(e,n,r){return e.data[n]}_svgMapping(e,n,r,i){return i?e.annotations:e.data[n]}_createWebglSeries(){return[]}_createSvgSeries(){return[]}_findClosestPoint(e,n){return null}_annotationData(e){return null}_annotationOrientation(){return"vertical"}_addAnnotation(e){if(!e){this.redraw();return}const n=this._annotationData(e);if(!n){this.redraw();return}const r=this.xScale.domain(),i=this.yScale.domain(),a=this._annotationOrientation()==="vertical"?{y1:this.yScale.range()[0],y2:this.yScale.range()[1]}:{x1:this.xScale.range()[0],x2:this.xScale.range()[1]},o=Math.max(Math.min(n.x,r[1]),r[0]),s=o<(r[1]+r[0])/2?1:-1,l=Math.max(Math.min(n.y,i[1]),i[0]);this.annotations.push({x:o,y:l,dx:s*20,dy:(l-i[0])/(i[1]-i[0])>=.5?15:-15,note:{title:n.title,label:n.note,wrapSplitter:`
`,bgPadding:5},subject:a}),this.redraw()}_createPointer(){return Et.pointer().on("point",([e])=>{if(this.annotations.pop(),!e){this.redraw();return}const n=this.xScale.invert(e.x),r=this.yScale.invert(e.y),i=this._findClosestPoint(n,r);this._addAnnotation(i)})}_createZoom(){let e=!1,n=1,r,i;return M_().on("zoom",a=>{r=a.transform.rescaleX(this.xScaleBase).domain(),i=a.transform.rescaleY(this.yScaleBase).domain();const o=a.transform.k,s=this.xScale.domain(),l=this.yScale.domain();r[0]<this._xScaleInitial.domain()[0]&&(r[0]=this._xScaleInitial.domain()[0],e=!0,n===o&&(r[1]=r[0]+(s[1]-s[0]))),i[0]<this._yScaleInitial.domain()[0]&&(i[0]=this._yScaleInitial.domain()[0],e=!0,n===o&&(i[1]=i[0]+(l[1]-l[0]))),i[1]>this._yScaleInitial.domain()[1]&&(i[1]=this._yScaleInitial.domain()[1],e=!0,n===o&&(i[0]=i[1]-(l[1]-l[0]))),this.xScale.domain(r),this.yScale.domain(i),n=o,this.redraw()}).on("end",a=>{e&&(this.xScaleBase.domain(r),this.yScaleBase.domain(i),this.d3fcSvgNode.__zoom=new Dn(1,0,0)),this.redraw(),this.props.onZoomEnd&&this.props.onZoomEnd()})}setScale({xDomain:e,yDomain:n}){e&&this.xScale.domain(e),n&&this.yScale.domain(n),(e||n)&&(this.xScaleBase.domain(this.xScale.domain()),this.yScaleBase.domain(this.yScale.domain()),this.d3fcSvgNode.__zoom=new Dn(1,0,0),this.redraw())}_createAnnotations(){return S5().notePadding(15).type(w5)}_xLabel(){return null}_yLabel(){return null}_xTickValues(){return null}_yTickValues(){return null}_xTickFormat(){return e=>e}_yTickFormat(){return null}_createSeries(){const e=this._createZoom(),n=this._createPointer();this.series=Et.chartCartesian({xScale:this.xScale,yScale:this.yScale,xAxis:{bottom:p=>Yp(Et.axisBottom(p))},yAxis:{left:p=>Yp(Et.axisLeft(p)).series(this.series)}}).yOrient("left").xTickFormat(this._xTickFormat()).decorate(p=>{const x=p.enter().select("d3fc-svg.plot-area").on("measure.range",R=>{this.xScaleBase.range([0,R.detail.width]),this.yScaleBase.range([R.detail.height,0])});e&&x.call(e),n&&x.call(n)});const r=this._xTickValues();r&&this.series.xTickValues(r);const i=this._yTickValues();i&&this.series.yTickValues(i);const a=this._yTickFormat();a&&this.series.yTickFormat(a);const o=this._xLabel();o&&this.series.xLabel(o);const s=this._yLabel();s&&this.series.yLabel(s);const l=this._createWebglSeries();l.length>0&&this.series.webglPlotArea(Et.seriesWebglMulti().series(l).mapping(this._webglMapping.bind(this)));const c=this._createSvgSeries(),f=this._createAnnotations(),d=c.concat(f);d.length>0&&this.series.svgPlotArea(Et.seriesSvgMulti().series(d).mapping((p,x,R)=>this._svgMapping(p,x,R,x>=c.length)))}createChart(){this.containerRef.current!==void 0&&(this.xScale=this._createXScale(),this.yScale=this._createYScale(),this.xScaleBase=this.xScale.copy(),this.yScaleBase=this.yScale.copy(),this._xScaleInitial=this.xScale.copy(),this._yScaleInitial=this.yScale.copy(),this._createSeries(),this.redraw())}originalDomain(){return{xDomain:this._xScaleInitial.domain(),yDomain:this._yScaleInitial.domain()}}componentDidMount(){var e;Lr.cssColors??(Lr.cssColors=window.getComputedStyle(document.documentElement)),this.createChart();for(const n of((e=this.containerRef.current)==null?void 0:e.getElementsByClassName("svg-plot-area"))??[])if(n.tagName==="D3FC-SVG"){this.d3fcSvgNode=n;break}}componentDidUpdate(){this.redraw()}componentWillUnmount(){var e;(e=this.containerRef.current)==null||e.remove()}render(){Dt(()=>(this.containerRef.current!==null&&this.resizeObserver.observe(this.containerRef.current),()=>this.resizeObserver.disconnect()),[]);const e={width:"100%",height:"100%"};return C("div",{ref:this.containerRef,style:e})}};Lr.cssColors=void 0;let wl=Lr;class Fy extends wl{_createPointer(){return Et.pointer().on("point",([e])=>{if(!e){Zn.set(null);return}const n=this.xScale.invert(e.x),r=this.yScale.invert(e.y),[i,a]=this.yScale.domain();Zn.set({x:n,yProc:(r-i)/(a-i)})})}render(){return Zn.subscribe(()=>{this.annotations.pop();const e=Zn.get();if(!e){this.redraw();return}const{x:n,yProc:r}=e,[i,a]=this.yScale.domain(),o=this._findClosestPoint(n,i+(a-i)*r);this._addAnnotation(o)}),super.render()}}class _h extends Fy{_annotationNote(e){return{title:"Data",note:`X ${this._xAccess(e).toFixed(2)}
Y ${this._yAccess(e).toFixed(2)}
`}}_createXScale(){return kn().domain(Et.extentLinear().include([0]).accessors([e=>this._xAccess(e)])(this.props.plotData.flat()))}_createYScale(){return kn().domain(Et.extentLinear().accessors([e=>this._yAccess(e)])(this.props.plotData.flat()))}_findClosestPoint(e,n){const r=this.props.plotData.map(f=>il(f,d=>Math.abs(this._xAccess(d)-e))).filter(Boolean),[i,a]=this._xScaleInitial.domain(),o=f=>(f-i)/(a-i),[s,l]=this._yScaleInitial.domain(),c=f=>(f-s)/(l-s);return il(r,f=>{const[d,p]=[this._xAccess(f),this._yAccess(f)];return(o(d)-o(e))**2+(c(p)-c(n))**2})}_annotationData(e){const n=this._xAccess(e),r=this._yAccess(e);return{x:n,y:r,...this._annotationNote(e)}}_createWebglSeries(){const e=n=>Et.seriesWebglLine().xScale(this.xScale).yScale(this.yScale).crossValue(r=>this._xAccess(r)).mainValue(r=>this._yAccess(r)).lineWidth(1.5).defined(()=>!0).decorate((r,i)=>{Et.webglStrokeColor().value(a=>n).data(i)(r)});return this.props.plotData.map((n,r)=>e(this.getWebglColorByIdx(r)))}}class I5 extends _h{_xAccess(e){return e.ts/1e3}_yAccess(e){return e.cpu_load/10}_createYScale(){return kn().domain([0,100])}_xLabel(){return"Timestamp [ms]"}_yLabel(){return"Load [%]"}_annotationNote(e){return{title:"CPU Load",note:`Timestamp ${this._xAccess(e).toFixed(2)}ms
Load ${this._yAccess(e).toFixed(2)}%
`}}}const P5=xt(({fullData:t})=>C($r,{children:C(I5,{plotData:[t]})}));Wr(P5,"CPU Load",{dataProvider:JC,additionalProps:{contentClassName:Zi,minWidth:150,minHeight:150}});function k5(){const t=In.get(),e=new Map;if((t??[]).filter(n=>n.name===$C).forEach(n=>{n.args.die_temp.forEach((r,i)=>{var a;e.get(i)===void 0&&e.set(i,[]),(a=e.get(i))==null||a.push({ts:+n.ts.toFixed(3),temp:r,sensor:`die-temp${i}`})})}),e.size!==0)return e.forEach((n,r)=>{const i=new Set(n.map(a=>a.temp));i.size===1&&i.values().next().value===null&&e.delete(r)}),{fullData:Array.from(e.values())}}class B5 extends _h{_xAccess(e){return e.ts/1e3}_yAccess(e){return e.temp}_xLabel(){return"Timestamp [ms]"}_yLabel(){return"Temperature []"}_annotationNote(e){const n=this._yAccess(e),r=n?`${n.toFixed(2)}`:"not provided";return{title:e.sensor,note:`Timestamp ${this._xAccess(e).toFixed(2)}ms
Temp ${r}
`}}}const F5=xt(({fullData:t})=>C($r,{children:C(B5,{plotData:t})}));Wr(F5,"DIE temperature",{dataProvider:k5,additionalProps:{contentClassName:Zi,minHeight:150,minWidth:150}});var Vy=(t=>(t.X="x",t.Y="y",t))(Vy||{});const Xp=t=>Object.values(Vy).find(e=>e!==t);class V5 extends wl{constructor(){super(...arguments),this.orient=this.props.orient??"horizontal",this._mainAxis=this.orient==="vertical"?"y":"x",this._axisType={x:this._getAxisType("x"),y:this._getAxisType("y")},this.plotData=this._sortPlotData()}_getAxisType(e){const[n]=this.props.plotData,[r]=n,a=typeof this._accessValue(r,e);return a==="number"||a==="bigint"?"number":"string"}_access(e,n,r){switch(this._axisType[r]){case"number":return this._accessValue(e,r);case"string":const i=this._accessValue(e,r);return n.findIndex(a=>i===this._accessValue(a,r))}}_sortPlotData(){if(!this.props.order)return this.props.plotData;const e=this.props.order==="descending"?1:0,n=Math.pow(-1,1+e),i=[...this.props.plotData[0]];i.sort((c,f)=>{const[d,p]=[c,f].map(x=>this._accessValue(x,this._mainAxis));return(p-d)*n});const a=Xp(this._mainAxis),o=i.map(c=>[this._accessValue(c,a),this._accessValue(c,this._mainAxis)]),s=Object.fromEntries(o),l=this.props.plotData.slice(1).map(c=>[...c].sort((f,d)=>{const[p,x]=[f,d].map(R=>this._accessValue(R,a)).map(R=>s[R]??1/0*n);return(x-p)*n}));return[i,...l]}_tickValues(e){switch(this._axisType[e]){case"number":return e==="x"?super._xTickValues():super._yTickValues();case"string":const[n]=this.plotData;return Nf(0,n.length)}}_tickFormat(e){switch(this._axisType[e]){case"number":return e==="x"?super._xTickFormat():super._yTickFormat();case"string":const[n]=this.plotData;return r=>this._accessValue(n[r],e)}}_xTickFormat(){return this._tickFormat("x")}_yTickFormat(){return this._tickFormat("y")}_xTickValues(){return this._tickValues("x")}_yTickValues(){return this._tickValues("y")}_xLabel(){return this._getLabel("x")}_yLabel(){return this._getLabel("y")}_createScale(e){switch(this._axisType[e]){case"number":return kn().domain(Et.extentLinear().include([0]).accessors([r=>this._accessValue(r,e)])(this.plotData.flat()));case"string":const n=[-.5,this.plotData.reduce((r,i)=>r+i.length-1,0)+.5];return kn().domain(n)}}_createXScale(){return this._createScale("x")}_createYScale(){return this._createScale("y")}_findClosestPoint(e,n){const[r,i]=this.orient==="vertical"?[e,"x"]:[n,"y"],a=this.plotData.map(s=>s.map(l=>[l,s])).flat(),[o]=il(a,([s,l])=>Math.abs(this._access(s,l,i)-r));return o}_annotationData(e){const[n]=this.plotData,r={x:this._access(e,n,"x"),y:this._access(e,n,"y")};return r[this._mainAxis]/=2,{...r,...this._annotationNote(e)}}_annotationOrientation(){return this.props.orient??super._annotationOrientation()}_decorateSvgSeries(e){return n=>{n.select("path").attr("fill",e)}}_createSvgSeries(){const e=(n,r)=>Et.autoBandwidth(Et.seriesSvgBar()).xScale(this.xScale).yScale(this.yScale).orient(this.orient).crossValue(i=>this._access(i,n,Xp(this._mainAxis))).mainValue(i=>this._access(i,n,this._mainAxis)).defined(()=>this.xScale.range().some(Boolean)&&this.yScale.range().some(Boolean)).decorate(this._decorateSvgSeries(r));return this.plotData.map((n,r)=>e(n,this.getCSSColorByIdx(r)))}}class Wy extends V5{constructor(){super(...arguments),this.formatter=new G0("microseconds")}_accessValue(e,n){return n===this._mainAxis?e.duration.average/1e3:e.name}_getLabel(e){return e===this._mainAxis?"Time [ms]":"Operator Name"}_annotationNote(e){const n=e.name,r=this.formatter.format(e.duration.total),i=this.formatter.format(e.duration.average);return{title:n.toString(),note:`Average time: ${i}
Total time: ${r}`}}}class W5 extends Wy{constructor(){super(...arguments),this.redrawCallback=()=>{this.redraw()},this.redrawWithAnnotationsCallback=()=>{this.annotations.pop();const e=ys.get();if(!e){this.redraw();return}const n="frame"in e?e.frame:e,r=jr(n.name),i=this.plotData.flat().find(({name:a})=>a===r);i&&this._addAnnotation(i)},this.subscribed=!1}redraw(){super.redraw();const e=yt.getActiveProfile(),n=e==null?void 0:e.profile;if(!n)return[];const r=new Map,i=new Map;n.forEachFrame(o=>{if(!Ba(o))return;const s=jr(o.name);r.has(s)||r.set(s,o)}),n.forEachCall(o=>{const{frame:s}=o;if(!Ba(s))return;const l=jr(s.name);i.has(l)||i.set(l,o)},()=>{}),Nt(this.containerRef.current).select(".svg-plot-area svg").on("click",()=>{const[o]=this.annotations;if(!o)return;const{x:s,y:l}=o,c=this._findClosestPoint(s,l);if(!c)return;const{name:f}=c,d=r.get(f);d&&yt.setSelectedFrame(d);const p=i.get(f),x=Pr.get(),R={[gt.CHRONO_FLAME_CHART]:oi.CHRONO,[gt.LEFT_HEAVY_FLAME_GRAPH]:oi.LEFT_HEAVY}[x];p&&R&&yt.setSelectedNode(R,p)})}render(){return yt.unsubscribe(this.redrawCallback),Bs.unsubscribe(this.redrawCallback),ys.unsubscribe(this.redrawWithAnnotationsCallback),yt.subscribe(this.redrawCallback),Bs.subscribe(this.redrawCallback),ys.subscribe(this.redrawWithAnnotationsCallback),super.render()}_decorateSvgSeries(e){var l;const n=(l=yt.getActiveProfile())==null?void 0:l.profile;if(!n)return Tl;const r=ea(n),i=Qi({theme:this.props.theme,frameToColorBucket:r}),a=new Map;n.forEachFrame(c=>{if(!Ba(c))return;const f=jr(c.name);a.has(f)||a.set(f,c)});const o=()=>{const[c]=this.annotations;if(!c)return;const{x:f,y:d}=c,{name:p}=this._findClosestPoint(f,d);if(p)return jr(p)},s=()=>{var d,p,x;const c=(d=lv())==null?void 0:d.activeView;if(!c)return;const f="hover"in c?(p=c.selectedNode)==null?void 0:p.frame.name:(x=c.callerCallee)==null?void 0:x.selectedFrame.name;if(f)return jr(f)};return c=>{c.select("path").attr("fill",({name:f})=>{const d=a.get(f);return d?i(d):e}).attr("stroke-width",({name:f})=>o()===f?4:s()===f?2:null).attr("stroke",({name:f})=>{const d=s()===f,p=o()===f;return d&&p?this.props.theme.selectionPrimaryColor:d?this.props.theme.selectionSecondaryColor:p?this.props.theme.fgPrimaryColor:null})}}}function $5({plotData:t}){const e=ut();return C($r,{children:C(W5,{plotData:t,orient:"horizontal",order:"ascending",theme:e})})}Wr($5,"Operator Execution Time",{dataProvider:XC,additionalProps:{contentClassName:Zi,minHeight:200,minWidth:300}});function z5({plotData:t}){return C($r,{children:C(Wy,{plotData:t,orient:"horizontal",order:"ascending"})})}Wr(z5,"Operator Type Execution Time",{dataProvider:GC,additionalProps:{contentClassName:Zi,minHeight:200,minWidth:300}});const H5="_title_1nq10_115",U5="_selected_1nq10_122",Y5="_legend_1nq10_128",X5="_square_1nq10_140",G5="_divider_1nq10_172",mn={"ram-overview-content":"_ram-overview-content_1nq10_82","ram-overview-selectors":"_ram-overview-selectors_1nq10_91","range-selector":"_range-selector_1nq10_101",title:H5,selected:U5,legend:Y5,square:X5,"memory-usage-content":"_memory-usage-content_1nq10_145","memory-usage-legend":"_memory-usage-legend_1nq10_152",divider:G5};class q5 extends _h{_xAccess(e){return e.ts}_yAccess(e){return e.percentage}_createYScale(){return kn().domain([0,100])}_annotationNote(e){return{title:this.props.memoryNameFunc(e.address,!1,!1),note:`Timestamp: ${e.ts.toFixed(2)} ms
Used: ${e.used} B (${e.percentage.toFixed(2)}%)
Unused: ${e.unused} B
Size: ${e.used+e.unused} B`}}_xLabel(){return"Timestamp [ms]"}_yLabel(){return"Usage [%]"}constructor(e){super(e)}}class j5 extends Fy{_createXScale(){return kn().domain(Et.extentLinear().include([0]).accessors([e=>e.ts])(this.props.plotData.flat()))}_createYScale(){return kn().domain([0,100])}_xLabel(){return"Timestamp [ms]"}_yLabel(){return`Usage [%] (${this.props.totalMemory} B total)`}_webglMapping(e,n){if(n>=e.data.length){const r=Object.values(this.props.addrToRange)[n%e.data.length][0];return[{ts:this._xScaleInitial.domain()[0],base:r},{ts:this._xScaleInitial.domain()[1],base:r}]}return e.data[n]}_createWebglSeries(){const e=i=>Et.seriesWebglArea().xScale(this.xScale).yScale(this.yScale).crossValue(a=>a.ts).baseValue(a=>a.base/this.props.totalMemory*100).mainValue(a=>(a.base+a.used)/this.props.totalMemory*100).defined(()=>!0).decorate((a,o)=>{Et.webglFillColor().value(s=>typeof i=="string"?this.getWebGLColor(i)??[1,0,0,1]:i).data(o)(a)}),n=i=>Et.seriesWebglLine().xScale(this.xScale).yScale(this.yScale).crossValue(a=>a.ts).mainValue(a=>a.base).lineWidth(1.5).defined(()=>!0).decorate((a,o)=>{Et.webglStrokeColor().value(s=>this.getWebGLColor(i)??[1,0,0,1]).data(o)(a)}),r={0:"--colors-lime",1:"--colors-orange"};return this.props.plotData.map((i,a)=>e(a in r?r[a]:"--colors-red")).concat(Object.values(this.props.addrToRange).map(i=>n("--colors-black")))}_findClosestPoint(e,n){let r=-1;if(n<this.props.assignedMemory/this.props.totalMemory*100?r=1:n>=this._yScaleInitial.domain()[1]?r=this.props.plotData.length-1:(r=Object.values(this.props.addrToRange).findIndex(l=>l[0]<=n&&n<l[1]),r+=2),r===-1)return null;const i=this.props.plotData[r],a=go(l=>l.ts).left(i,e),o=i[a===0?a:a-1],s=i[a>=i.length?i.length-1:a];return e-o.ts>s.ts-e?s:o}_annotationData(e){return{x:e.ts,y:(e.base+e.used)/this.props.totalMemory*100,title:e.address!==-1?this.props.memoryNameFunc(e.address,!1,!1):"Statically allocated memory",note:(e.address!==-1?`Timestamp: ${e.ts.toFixed(2)} ms
Used: ${e.used} B (${e.percentage.toFixed(2)}%)
Unused: ${e.unused} B
`:"")+`Size: ${e.used+e.unused} B`}}}function $y(t){return`0x${t.toString(16)}`}const Gp=xt(t=>{const e=Te(null),n=[];return t.percent&&n.push(`${t.percent.toFixed(2)}%`),t.addr&&n.push($y(t.addr)),C("button",{ref:e,className:mn["range-selector"]+" "+(t.additionalClass??""),onClick:r=>{t.onClick(r),t.selectButton(e)},children:[C("span",{className:mn.title,children:t.name}),n.length>0?C("span",{children:n.join(", ")}):void 0]})}),J5=xt(({assignedMemory:t,addrToRange:e,addrToProps:n,plotData:r,totalMemory:i,memoryRegionName:a})=>{const o=Te(),s=Te(null),l=d=>{const p=o.current;p!==void 0&&p.setScale({yDomain:e[d]})},c=d=>{var p;f(),(p=d.current)==null||p.classList.add(mn.selected)},f=()=>{var p;const d=mn.selected;for(const x of((p=s.current)==null?void 0:p.getElementsByClassName(d))??[])x.classList.remove(d)};return C($r,{children:[C("div",{className:mn["ram-overview-content"],children:[C(j5,{ref:o,plotData:r,addrToRange:e,assignedMemory:t,totalMemory:i,memoryNameFunc:a,onZoomEnd:()=>f()}),C("div",{ref:s,className:mn["ram-overview-selectors"],children:[C(Gp,{name:"whole graph",percent:100,onClick:()=>{var d,p;(p=o.current)==null||p.setScale(((d=o.current)==null?void 0:d.originalDomain())??{})},selectButton:c,additionalClass:mn.selected}),C("div",{className:mn.divider}),Object.keys(n).map(d=>Number.parseInt(d)).sort().reverse().map(d=>C(Gp,{name:n[d].threadName?`${n[d].threadName} thread`:n[d].symbol??n[d].region??$y(d),addr:d,percent:n[d].ramPercent,onClick:()=>l(d),selectButton:c}))]})]}),C("div",{className:mn.legend,children:[C("span",{children:[C("div",{className:mn.square,style:{backgroundColor:"var(--colors-lime)"}})," free"]}),C("span",{children:[C("div",{className:mn.square,style:{backgroundColor:"var(--colors-red)"}})," allocated"]}),C("span",{children:[C("div",{className:mn.square,style:{backgroundColor:"var(--colors-orange)"}})," statically allocated"]})]})]})});Wr(J5,"RAM Overview",{dataProvider:zy,additionalProps:{contentClassName:Zi,minHeight:460,minWidth:350}});function Z5({color:t,strokeWidth:e="1rem",width:n="1rem"}){return C("svg",{width:n,height:"1rem",viewBox:"0 0 100 10",children:C("line",{x1:"0",x2:"100",y1:"5",y2:"5",style:{stroke:t,"stroke-width":e}})})}function K5({data:t,assignedMemory:e,addrToRange:n,plotData:r,memoryRegionName:i}){const a=Te(),o=Te(null),[s,l]=Bt(),c=d=>{const p=a.current,x="#FFFFFF";if(p===void 0)return x;const[R,O,A,I]=p.getWebglColorByIdx(d);return fi(R*255,O*255,A*255,1).formatHex()};if(e===-1)return;const f=Array.from(new Set(t.map(d=>d.memory_addr)).values()).sort();return Dt(()=>{l(f.map((d,p)=>C("p",{children:[C(Z5,{color:c(p),strokeWidth:"1.5rem"})," ",i(d,!0,!1)," "]})))},[a]),C($r,{children:C("div",{className:mn["memory-usage-content"],children:[C(q5,{ref:a,plotData:r.slice(2),addrToRange:n,assignedMemory:e,memoryNameFunc:i}),C("div",{ref:o,className:mn["memory-usage-legend"],children:s})]})})}Wr(K5,"Memory usage",{dataProvider:zy,additionalProps:{contentClassName:Zi,minHeight:200,minWidth:300}});function Q5(t,e){const n=t.sort((f,d)=>{const p=f.memory_addr-d.memory_addr;return p===0?f.ts-d.ts:p}),r=new Set;let i=e;n.forEach(f=>{r.has(f.memory_addr)||(i+=f.used+f.unused,r.add(f.memory_addr))});const a={},o=Math.max(...n.map(f=>f.ts))/1e3,s=[[{ts:0,used:i-e,unused:0,base:e,percentage:100,address:-1},{ts:o,used:i-e,unused:0,base:e,percentage:100,address:-1}],[{ts:0,used:e,unused:0,base:0,percentage:100,address:-1},{ts:o,used:e,unused:0,base:0,percentage:100,address:-1}]];let l=[],c=s[1];return n.forEach((f,d,p)=>{l.push({ts:f.ts/1e3,base:c[0].base+c[0].used+c[0].unused,used:f.used,unused:f.unused,percentage:f.used/(f.used+f.unused)*100,address:f.memory_addr}),(d+1>=p.length||f.memory_addr!==p[d+1].memory_addr)&&(a[f.memory_addr]=[l[0].base/i*100,(l[0].base+l[0].used+l[0].unused)/i*100],s.push(l),l=[],c=s[s.length-1])}),{data:s,totalMemory:i,addrToRange:a}}function ek(t,e,n,r,i,a=!0,o=!0){const s=[];o&&s.push(`${(i[t][1]-i[t][0]).toFixed(2)}% of RAM`),a&&s.push(`0x${t.toString(16)}`);let l="";s.length>0&&(l=` (${s.join(", ")})`);const c=e.find(f=>f.memory_addr===t);return c!=null&&c.for_thread_id&&c.for_thread_id in n?`${n[c.for_thread_id]} thread${l}`:t in r?`${r[t]}${l}`:`${c==null?void 0:c.memory_region}${l}`}function tk(){var f,d,p;const t=In.get(),e=(t??[]).filter(x=>x.name===Tf).map(x=>({name:x.name,ts:+x.ts.toFixed(3),...x.args})),n=new Set;e.forEach(x=>n.add(`${x.memory_region};${x.memory_addr};${x.for_thread_id}`));let r=Array.from(n).map(x=>{const[R,O,A]=x.split(";");return{memory_region:R,memory_addr:+O,for_thread_id:+A}});const i=((f=t==null?void 0:t.find(x=>x.name===BC))==null?void 0:f.args)??{},a=((d=t==null?void 0:t.find(x=>x.name===FC))==null?void 0:d.args)??0,o=t==null?void 0:t.filter(x=>x.name===VC).reduce((x,R,O,A)=>(x[R.tid]=R.args.name,x),{});if(o){const x=(p=Object.entries(o).find(([O,A])=>A==="main"))==null?void 0:p[0],R=r.findIndex(O=>O.for_thread_id===+(x??-1));R!==-1&&(r=[r[R]].concat(r.filter((O,A)=>A!==R)))}if(!e||e.length===0)return;const{data:s,addrToRange:l,totalMemory:c}=Q5(e,a);return{fullData:e,plotData:s,threadNameData:o,memorySymbols:i,addrToRange:l,staticallyAssignedMem:a,totalMemory:c}}let du=null,Ci=null;function zy(){if(Ci!==null&&du!==null&&In.get()===du)return Ci;du=In.get();const t=tk();if(!t)return Ci=void 0,Ci;const{fullData:e,plotData:n,threadNameData:r,memorySymbols:i,addrToRange:a,staticallyAssignedMem:o,totalMemory:s}=t,l=(d,p=!0,x=!0)=>ek(d,e,r??{},i,a,p,x),c=Array.from(new Set(e.map(d=>d.memory_addr))).sort().reverse(),f={};return c.forEach(d=>{const p=e.find(R=>R.memory_addr===d),x=p==null?void 0:p.for_thread_id;f[d]={range:d in a?a[d]:void 0,threadName:r&&x?r[x]:void 0,symbol:i[d],ramPercent:d in a?a[d][1]-a[d][0]:void 0,region:p==null?void 0:p.memory_region}}),Ci={data:e,plotData:n,assignedMemory:o,addrToProps:f,totalMemory:s,addrToRange:a,memoryRegionName:l},Ci}function nk({color:t="#9E9EA4"}){return C(El,{children:C("div",{className:"panel-icon",children:C("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:C("path",{d:"M2.66666 8H13.3333M2.66666 4H13.3333M2.66666 12H13.3333",stroke:t,"stroke-width":"0.666667","stroke-linecap":"round","stroke-linejoin":"round"})})})})}const Fa=jC,rk={global:{},borders:[],layout:{type:"row",children:[{type:"row",children:[{type:"tabset",children:[ka.createJSONNode()]},{type:"tabset",children:[Fa.createJSONNode()]}]}]}};[ka,Fa].forEach(t=>t.instances.set(1));const ik=3,ak=xt(({tilingRef:t})=>{Tx(t,()=>({addNode:i,removeNode:a}),[]);const e=wn.fromJson(rk);let n,r;e.visitNodes((f,d)=>{if(!(f instanceof ct))return;const p=f.getAttr("component");p===Fa.title?n=f:p===ka.title&&(r=f)});function i(f){let d=e.getNodeById(n.getId())&&r.getWindowId()===n.getWindowId()?n:r;for(;d&&(d.getType()==="tab"||(d==null?void 0:d.getOrientation())!==Fe.HORZ);)d=d==null?void 0:d.getParent();if(e.getRoot().getId()===(d==null?void 0:d.getId())&&(d=n.getParent()),!d)return;const p=d.getChildren(),x=(p.length??0)>=ik;f.incrInstances(),e.doAction(Pe.addNode(f.createJSONNode(),x?p[p.length-1].getId():d.getId(),x?be.CENTER:be.RIGHT,-1,!0))}function a(f){e.visitNodes(d=>{d.getAttr("component")===f.title&&(f.decrInstances(),e.doAction(Pe.deleteTab(d.getId())))})}const o=f=>{const d=f.getComponent();if(d===void 0)return;const p=ko(d),x=p==null?void 0:p.component;if(x)return f.setEventListener("visibility",()=>{var R;if(f.isVisible()){const O=new Event("resize",{bubbles:!0});(R=f.getMoveableElement())==null||R.dispatchEvent(O)}}),C(x,{...f.getConfig()??{}})};ki.subscribe(()=>{ki.get()||(Tu().filter(f=>![ka,Fa].includes(f)).forEach(a),Tu().filter(f=>![ka,Fa].includes(f)&&f.available.get()).forEach(i))});const s=f=>{var x;const d=hT();if(!d)return;const p=(x=ko(d))==null?void 0:x.createJSONNode();if(p)return{json:p}},l=f=>{if(f.type===Pe.ADD_NODE&&"component"in f.data.json){const d=ko(f.data.json.component);d&&d.incrInstances()}else if(f.type===Pe.DELETE_TAB){const d=e.getNodeById(f.data.node),p=ko(d==null?void 0:d.getAttr("component"));p&&p.decrInstances()}return f},c=(f,d)=>{d.leading=C(nk,{})};return C("div",{id:_t["tiling-layout"],children:C(qT,{model:e,factory:o,popoutWindowName:"Zephelin Trace Viewer",realtimeResize:!0,onExternalDrag:s,onAction:l,onRenderTab:c})})},(t,e)=>!0),ok=xt(({tilingRef:t})=>{const e=Te(null),n=Te(null),r=ut();let i=[];const a=()=>{i.length>0&&(i.forEach(f=>clearTimeout(f)),i=[]),e.current&&e.current.classList.add(_t["on-drag"],_t["block-pointer-events"]),n.current&&(n.current.classList.add(_t["on-drag"]),n.current.style.borderColor=r.selectionPrimaryColor)},o=()=>{e.current&&e.current.classList.remove(_t["on-drag"],_t["block-pointer-events"]),n.current&&n.current.classList.remove(_t["on-drag"])},s=f=>{var d,p;f.preventDefault(),!(((d=f.dataTransfer)==null?void 0:d.dropEffect)!=="copy"&&((p=f.dataTransfer)==null?void 0:p.effectAllowed)!=="copy")&&a()},l=f=>{i.push(setTimeout(o,150)),f.preventDefault(),f.stopImmediatePropagation()},c=f=>{o(),f.preventDefault(),f.stopPropagation();const d=ks.get();d!=null&&d.current&&d.current.loadDropFile(f)};return C("div",{id:_t["layout-container"],ref:e,onDragOver:s,onDrop:c,onDragLeave:l,children:[C(ak,{tilingRef:t}),C("div",{ref:n,style:{pointerEvents:"none",zIndex:11}})]})},(t,e)=>!0);function sk(){const t=Te(null);return C("div",{id:_t.app,children:C(Xx,{children:[C(wT,{tilingRef:t}),C(ok,{tilingRef:t})]})})}$a(C(sk,{}),document.getElementById("mountpoint"));export{uE as B,bf as C,en as F,l0 as K,vf as R,Lu as S,G0 as T,uk as a,ck as b,fk as c,Bg as d,cn as e,dk as f,lk as g,gk as h,hk as i,Ir as l,In as m,_s as s,Nx as z};
